---
title: Recuperare post storici con l’endpoint di ricerca dell’archivio completo v2
mode: wide
---

<div id="introduction">
  ## Introduzione
</div>

Gli [endpoint di Ricerca Post](/it/x-api/posts/search/introduction)
nell’ambito della v2 consentono di ricevere Post relativi a temi di interesse,
in base a una query di ricerca definita dall’utente. Sono disponibili due endpoint
con Ricerca Post v2: la ricerca recente, disponibile per tutti gli
sviluppatori con un account approvato e in grado di cercare Post fino a sette giorni
addietro, e la ricerca dell’archivio completo, disponibile solo per
i ricercatori approvati per il
[percorso prodotto Academic Research](https://developer.x.com/en/products/x-api/early-access/guide#na_2),
che consente di cercare nell’intero archivio di Post a partire da marzo 2006.

Puoi consultare l’intera offerta di ricerca nella
[pagina di panoramica della ricerca](/it/x-api/posts/search/introduction).

Questi endpoint di Ricerca Post rispondono a uno dei casi d’uso più comuni per
i ricercatori accademici, che potrebbero utilizzarli per studi longitudinali o per analizzare
un argomento o evento passato.

Questo tutorial fornisce una guida passo passo per i ricercatori che desiderano utilizzare l’endpoint
di ricerca dell’archivio completo per esaminare l’intera cronologia dei dati pubblici di X.
Mostrerà anche i diversi modi per creare un dataset, ad esempio recuperando Post con geotag,
e come scorrere i Post disponibili per una query.

<div id="prerequisites">
  ### Prerequisiti
</div>

Attualmente, questo endpoint è disponibile solo come parte del
[programma Academic Research](https://developer.x.com/en/solutions/academic-research/products-for-researchers).
Per utilizzare questo endpoint, devi
[richiedere l’accesso](https://developer.x.com/en/portal/petition/academic/is-it-right-for-you).
Scopri di più sulla
[domanda e sui requisiti di questo programma](https://developer.x.com/en/solutions/academic-research/application-info).

<div id="connect-an-app-to-the-academic-project">
  ### Collega un'App al progetto accademico
</div>

Una volta approvato per utilizzare il percorso Academic Research, vedrai
il tuo [Project](/it/resources/fundamentals/projects) accademico nel
[developer portal](https://developer.x.com/en/portal/dashboard). Dalla sezione
"Projects and Apps", clicca su "Add App" per collegare la tua
[X App](/it/resources/fundamentals/developer-apps) al Project.

[](https://res.cloudinary.com/practicaldev/image/fetch/s--gHFOyuDc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/gb7aevhqyfvfjznd0pnd.png)

![Questa immagine mostra un Project accademico nel developer portal a cui non è ancora stata aggiunta un'App](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-1.png.twimg.1920.png)

Quindi puoi scegliere un'App esistente e collegarla al tuo Project (come
mostrato di seguito).

![Questa immagine mostra la pagina che compare quando si tenta di aggiungere un'App al proprio Project accademico](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-2.png.twimg.1920.png)

Oppure puoi creare una nuova App, assegnarle un nome e cliccare su "Complete" per collegare una nuova
App al tuo Project accademico.

![Questa immagine mostra la pagina in cui inserirai un nome per la tua nuova App, oppure ti consente di selezionare un'App esistente](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-3.png.twimg.1920.png)

Questo ti fornirà le tue chiavi API e il
[Bearer Token](/it/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) che potrai
poi utilizzare per connetterti all'endpoint di Ricerca dell’archivio completo.

![Questa immagine mostra la pagina visualizzata dopo la creazione di una nuova App che mostra le tue chiavi e i tuoi token](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-4.png.twimg.1920.png)

**Nota bene**

Le chiavi nello screenshot sopra sono nascoste, ma nel tuo developer portal
potrai vedere i valori effettivi per API Key, API Secret Key e
Bearer Token. Salva queste chiavi e il Bearer Token, perché ti serviranno
per chiamare l'endpoint di Ricerca dell’archivio completo.

<div id="connecting-to-the-full-archive-search-endpoint">
  ### Connessione all’endpoint di ricerca dell’archivio completo
</div>

Il comando cURL seguente mostra come ottenere post storici dall’handle @XDevelopers.
Sostituisci $BEARER\_TOKEN con il tuo Bearer Token, incolla l’intera
richiesta nel terminale e premi Invio.

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Vedrai la risposta JSON.

Per impostazione predefinita, verranno restituiti solo i 10 post più recenti. Se desideri più
di 10 post per richiesta, puoi usare il parametro max\_results e impostarlo
a un massimo di 500 post per richiesta, come mostrato di seguito:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

Creare query

Come puoi vedere negli esempi di chiamata sopra, utilizzando il parametro query puoi
specificare i dati che desideri cercare. Ad esempio, se volessi
recuperare tutti i Post che contengono la parola _covid_ o la parola _coronavirus_, puoi
usare l’operatore OR tra parentesi e la tua query può essere
`(covid OR coronavirus)`, e quindi la chiamata API avrà il seguente aspetto:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=(covid%20OR%20coronavirus)&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Analogamente, se vuoi tutti i Post che contengono la parola _covid19_ e che non siano
repost, puoi usare l’operatore is:retweet con il NOT logico (rappresentato
da -), quindi la query può essere covid19 -is:retweet e la chiamata API sarà:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=covid19%20-is:retweet&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Consulta
[questa guida per un elenco completo degli operatori](/it/x-api/posts/search/integrate/build-a-query)
supportati nell’endpoint di Ricerca dell’archivio completo.

### Utilizzo dei parametri start\_time ed end\_time per ottenere post storici

Quando si utilizza l’endpoint di ricerca dell’archivio completo, per impostazione predefinita vengono restituiti i post degli ultimi 30 giorni. Se si desidera ottenere post più vecchi di 30 giorni, è possibile utilizzare i parametri start\_time ed end\_time nella chiamata API. Questi parametri devono essere in un formato data-ora RFC3339 valido, ad esempio 2020-12-21T13:00:00.00Z. Pertanto, se si desidera ottenere tutti i post dall’account XDevelopers per il mese di dicembre 2020, la chiamata API sarà:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:XDevelopers&start_time=2020-12-01T00:00:00.00Z&end_time=2021-01-01T00:00:00.00Z' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

Recuperare post storici con geotag

I post con geotag sono post che includono informazioni geografiche associate,
come città, stato, paese, ecc.

<div id="using-hasgeo-operator">
  #### Utilizzo dell'operatore has:geo
</div>

Se vuoi ottenere Post che includono dati geografici, puoi usare l'operatore has:geo.
Ad esempio, la seguente richiesta cURL recupererà solo i Post
dell’handle @XDevelopers che contengono dati geografici:

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20has:geo' --header
'Authorization: Bearer $BEARER_TOKEN'
```

#### Utilizzo dell'operatore place\_country

Allo stesso modo, puoi limitare i post che includono dati geografici a uno specifico paese utilizzando
l'operatore place\_country. Il comando cURL seguente recupererà tutti i post dall’handle
@XDevelopers provenienti dagli Stati Uniti:

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20place_country:US'
--hbasheader 'Authorization: Bearer XXXXX'
```

Il paese è indicato sopra usando il codice ISO alpha-2 a due lettere. I codici ISO validi sono disponibili [qui](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).

### Ottenere più di 500 Post storici usando il next\_token

Come menzionato sopra, per impostazione predefinita puoi ottenere fino a 500 Post per richiesta per
una query all’endpoint di ricerca dell’archivio completo. Se per la tua query sono disponibili più di 500 Post,
la risposta JSON includerà un next\_token che puoi
aggiungere alla chiamata API per ottenere i Post successivi disponibili per quella
query. Questo next\_token è disponibile nell’oggetto meta della risposta JSON,
che appare in questo modo:

```
{ "newest_id": "12345678...", "oldest_id": "12345678...", "result_count": 500,
"nebashxt_token": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" }
```

Pertanto, per ottenere i Post successivi, usa il valore di next\_token presente in questo oggetto
meta e passalo come valore del parametro next\_token nella chiamata API all’endpoint
di ricerca dell’archivio completo come mostrato di seguito (utilizzerai il tuo Bearer Token
e il valore del Next Token ottenuto dalla chiamata API precedente).

```
curl --request GET
'https://api.x.com/2/tweets/search/all?max_results=500&query=covid&next_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
--header 'Authorization: Bearer $BEARER_TOKEN'
```

In questo modo puoi continuare a verificare se è disponibile un next\_token e, se non hai
raggiunto il numero desiderato di Post da raccogliere, puoi continuare a chiamare
l’endpoint dell’archivio completo con il nuovo next\_token per ogni richiesta. Tieni presente
che l’endpoint di ricerca dell’archivio completo incide sui tuoi
[Limiti di post](/it/x-api/fundamentals/post-cap), ovvero il numero di
Post mensili che puoi ottenere dall’API X per
[Progetto](/it/resources/fundamentals/projects). Presta quindi attenzione alla logica del tuo paging
sui risultati per evitare di esaurire inavvertitamente
i tuoi limiti di post.

Di seguito trovi alcune risorse utili quando utilizzi l’endpoint di ricerca
dell’archivio completo. Ci farebbe piacere ricevere il tuo feedback. Contattaci su
[@XDevelopers](https://x.com/XDevelopers) o sui nostri
[forum della community](https://devcommunity.x.com/) per domande su questo
endpoint.

<div id="additional-resources">
  ### Risorse aggiuntive
</div>

- [Riferimento API dell’endpoint Ricerca nell’archivio completo](/it/x-api/posts/full-archive-search)
- [Nozioni di base per creare una query di ricerca](/it/x-api/posts/search/integrate/build-a-query)