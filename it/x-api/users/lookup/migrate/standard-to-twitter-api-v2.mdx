---
title: da v1 a v2
sidebarTitle: da v1 a v2
---

import { Button } from '/snippets/it/button.mdx';

<div id="standard-v11-compared-to-x-api-v2">
  ### Confronto tra Standard v1.1 e API X v2
</div>

Se hai lavorato con gli endpoint standard v1.1 GET users/show e GET users/lookup, l’obiettivo di questa guida è aiutarti a comprendere somiglianze e differenze tra gli endpoint di ricerca utenti dello Standard e dell’API X v2.

- **Somiglianze**
  - Contesto utente OAuth 1.0a
  - Limiti di utenti per richiesta
- **Differenze**
  - URL degli endpoint
  - Requisiti di App e Progetti
  - Formato dei dati di risposta
  - Parametri della richiesta

<div id="similarities">
  #### Somiglianze
</div>

**Metodo di autenticazione OAuth 1.0a in contesto utente**

L’endpoint standard supporta [OAuth 1.0a User Context](/it/resources/fundamentals/authentication#oauth-1-0a-2), mentre i nuovi endpoint di ricerca utenti dell’API X v2 supportano sia OAuth 1.0a User Context sia l’autenticazione [App only](/it/resources/fundamentals/authentication#oauth-2-0). Pertanto, se in precedenza utilizzavi uno degli endpoint standard v1.1 per la ricerca utenti, puoi continuare a utilizzare lo stesso metodo di autenticazione passando alla versione per l’API X v2.

A seconda della libreria/pacchetto di autenticazione che utilizzi, l’autenticazione App only è probabilmente il modo più semplice per iniziare e può essere impostata con una semplice intestazione della richiesta. Per sapere come generare un token di accesso App only, consulta [questa guida su App only](/it/resources/fundamentals/authentication#bearer-token-also-known-as-app-only).

**Limiti di utenti per richiesta**

L’endpoint standard v1.1 GET users/lookup consente di specificare 100 utenti per richiesta. Questo vale anche per gli endpoint GET /users e GET /users/by. Per specificare 100 utenti, devi passare il parametro ids (GET /users) o il parametro username (GET /users/by) come parametro di query e includere l’elenco degli ID/nome utente in un elenco separato da virgole. 
 

<div id="differences">
  #### Differenze
</div>

**URL degli endpoint**

- Endpoint standard v1.1:
  - https://api.x.com/1.1/users/show (lookup per singolo ID o username)
  - https://api.x.com/1.1/users/lookup (lookup multi-ID o username)
- Endpoint API X v2:
  - https://api.x.com/2/users (lookup multi-ID)
  - https://api.x.com/2/users/:id (lookup per singolo ID)
  - https://api.x.com/2/users/by (lookup multi-username)
  - https://api.x.com/2/users/by/username/:username (lookup per singolo username)

**Requisiti di App e Progetto**

Gli endpoint dell’API X v2 richiedono l’uso di credenziali di una [App developer](/it/resources/fundamentals/developer-apps) associata a un [Project](/it/resources/fundamentals/projects) quando si autenticano le richieste. Tutti gli endpoint dell’API X v1.1 possono usare credenziali di App standalone o di App associate a un Project.

**Formato dei dati di risposta**

Una delle differenze più importanti tra le versioni degli endpoint standard v1.1 e API X v2 riguarda la selezione dei campi da restituire nel payload.

Per gli endpoint standard, molti campi della risposta vengono restituiti per impostazione predefinita, con la possibilità di usare parametri per indicare quali campi o insiemi di campi restituire nel payload.

La versione API X v2 restituisce per impostazione predefinita solo i campi user id, name e username. Per richiedere campi o oggetti aggiuntivi, è necessario usare i parametri [fields](/it/x-api/fundamentals/fields) e [expansions](/it/x-api/fundamentals/expansions). Qualsiasi user field richiesto da questo endpoint verrà restituito nell’oggetto utente principale. Qualsiasi oggetto Post espanso e i relativi campi verranno restituiti in un oggetto includes all’interno della risposta. È quindi possibile riconciliare gli oggetti espansi con l’oggetto utente associando gli ID presenti sia nell’oggetto user sia nell’oggetto Post espanso.

Ti invitiamo a leggere di più su questi nuovi parametri nelle rispettive guide o consultando la nostra guida su [come usare fields ed expansions](/it/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions).

Abbiamo anche preparato una [guida alla migrazione del formato dati](/it/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) che può aiutarti a mappare i campi dello standard v1.1 ai nuovi campi della v2. Questa guida ti fornirà anche lo specifico parametro di expansion e field che dovrai passare con la richiesta v2 per ottenere campi specifici.

Oltre ai cambiamenti nel modo in cui richiedi determinati campi, l’API X v2 introduce anche nuovi design JSON per gli oggetti restituiti dalle API, inclusi gli oggetti [Post](/it/x-api/fundamentals/data-dictionary#tweet) e [user](/it/x-api/fundamentals/data-dictionary#user).

- A livello di root JSON, gli endpoint standard restituiscono oggetti Post in un array statuses, mentre l’API X v2 restituisce un array data.
- Invece di fare riferimento a “statuses” Retweeted e Quoted, il JSON dell’API X v2 fa riferimento a Retweeted e Quoted Tweets. Molti campi legacy e deprecati, come contributors e user.translator\_type, vengono rimossi.
- Invece di usare sia favorites (nell’oggetto Post) sia favourites (nell’oggetto user), l’API X v2 usa il termine like.
- X adotta la convenzione per cui i valori JSON privi di valore (ad esempio, null) non vengono scritti nel payload. Gli attributi di Post e user sono inclusi solo se hanno un valore non nullo.

Abbiamo anche introdotto un nuovo set di campi nel [Post object](/it/x-api/fundamentals/data-dictionary#tweet), tra cui:

- Un campo [conversation\_id](/it/x-api/fundamentals/conversation-id)
- Due nuovi campi [annotations](/it/x-api/fundamentals/post-annotations), inclusi context ed entities
- Diversi nuovi campi [metrics](/it/x-api/fundamentals/metrics)
- Un nuovo campo reply\_setting, che indica chi può rispondere a un determinato Post

**Parametri di richiesta**

I seguenti parametri di richiesta dello standard v1.1 hanno equivalenti nell’API X v2:

|     |     |
| :--- | :--- |
| **Standard** | **API X v2** |
| user\_id | ids |
| screen\_name | username |

Esiste inoltre un insieme di parametri di richiesta standard per users lookup **non** supportati nell’API X v2:

| Standard | Commento |
| :--- | :--- |
| include\_entities | Questo parametro serve a rimuovere il nodo entities dal payload del post. È stato sostituito dalla funzionalità di campi aggiuntivi ed espansioni. |