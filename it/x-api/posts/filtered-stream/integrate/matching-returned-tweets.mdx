---
title: Corrispondenza dei post alle regole
sidebarTitle: Corrispondenza dei post alle regole
---

<div id="matching-returned-posts-to-their-associated-rule">
  ### Associazione dei Post restituiti alla relativa regola
</div>

L’endpoint del Flusso filtrato consente di gestire più regole tramite una singola connessione. Prima di iniziare a ricevere Post nel flusso, è necessario creare una regola che specifichi quali tipi di Post interessano.

Quando si definiscono regole per far corrispondere i Post in base a un’ampia gamma di attributi, tra cui attributi utente, geolocalizzazione, lingua e altri, è possibile allegare un tag per distinguere la regola a un livello superiore. I tag sono un buon modo per contestualizzare la regola, soprattutto se si hanno molte regole attive. Le regole di filtraggio determinano quali attività dei Post verranno inviate tramite la connessione.

Se è necessario aggiungere una nuova regola di filtraggio per acquisire un tipo diverso di Post o rimuovere una regola esistente, l’app può inviare una richiesta all’endpoint [POST tweets/search/stream/rules](/it/x-api/posts/filtered-stream#post-2-tweets-search-stream-rules). Quando viene inviata tale richiesta, le regole di filtraggio vengono modificate automaticamente e le modifiche entrano in vigore nel flusso di dati senza necessità di riconnettersi. La maggior parte delle aggiunte di regole entra in vigore in circa 20 secondi o meno. È improbabile, ma a seconda di fattori esterni (ad esempio la connettività di rete), potrebbe volerci più tempo prima di iniziare a ricevere Post corrispondenti. Se non riesci a trovare una regola nell’endpoint di elenco delle regole, assicurati che la richiesta di creazione della regola sia stata eseguita correttamente; puoi verificarlo controllando i log per eventuali messaggi di errore.

<div id="matching-rules">
  #### Regole di corrispondenza
</div>

Quando un’attività viene recapitata tramite la connessione al tuo Flusso filtrato, nell’array matching\_rules è indicato l’elenco dei filtri che hanno corrisposto al Post recapitato.

Nel payload del Post sono presenti metadati aggiuntivi (stringhe) che includono l’id della regola e il tag che hanno determinato la consegna di uno specifico Post. Se più regole corrispondono a un singolo Post, l’attività viene recapitata una sola volta, con ciascuna delle regole corrispondenti incluse in questi metadati. Le regole di corrispondenza offrono un modo semplice per associare un Post specifico a regole specifiche, particolarmente utile se si gestiscono molte regole distinte. Poiché i dati vengono recapitati tramite un singolo flusso in questo modo, disporre di id e tag univoci è essenziale per l’associazione.

**Ecco un esempio di come appare l’array “matching\_rules” nel payload del Post:**

```"matching_rules": [
    {
      "id": "1166916266197536768",
      "tag": "test-rule-tag-00000"
    },
    {
      "id": "1166916266197536769",
      "tag": "test-rule-tag-12345"
    }
  ]
```

<div id="rule-tags">
  #### Tag delle regole
</div>

Al momento della creazione, ogni regola di filtraggio può essere definita con un tag. I tag delle regole non hanno un significato speciale: sono semplici stringhe opache associate a una regola. Verranno inclusi nei metadati matching\_rules nelle attività restituite e servono a facilitare la distinzione delle regole a un livello più alto.

I tag offrono un modo semplice per creare raggruppamenti logici di regole di filtraggio. Ad esempio, è possibile generare un ID univoco per una specifica regola come suo tag e consentire alla propria app di fare riferimento a tale ID all'interno delle attività che elabora, per associare un risultato a clienti, campagne, categorie o altri gruppi correlati.

Si noti che i tag non possono essere aggiornati su una regola esistente e possono essere inclusi solo al momento della creazione della regola. Per “aggiornare” o “rinominare” un tag, è necessario prima eliminare la regola, quindi aggiungerla nuovamente con il tag desiderato. La soluzione migliore è utilizzare un identificatore univoco come tag, che il sistema può associare a vari altri punti dati all'interno della propria app, senza dover modificare nulla nel set di regole.

<div id="filtered-stream-recovery-and-redundancy-features">
  ### Flusso filtrato - Funzionalità di ripristino e ridondanza
</div>

<Note>
  Nota: queste funzionalità di ripristino e ridondanza sono disponibili solo per chi dispone di accesso Enterprise.
</Note>