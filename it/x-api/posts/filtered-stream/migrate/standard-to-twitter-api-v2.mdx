---
title: da v1 a v2
sidebarTitle: da v1 a v2
---

<div id="standard-v11-compared-to-x-api-v2">
  ### Standard v1.1 rispetto all’API X v2
</div>

Se hai lavorato con l’endpoint v1.1 [statuses/filter](https://developer.x.com/en/docs/x-api/v1/tweets/filter-realtime/api-reference/post-statuses-filter), questa guida può aiutarti a comprendere somiglianze e differenze tra gli endpoint del flusso filtrato standard e quelli dell’API X v2.

- **Somiglianze**
  - Parametri di richiesta e operatori
  - Supporto per la cronologia delle modifiche ai post e i metadati
- **Differenze**
  - URL degli endpoint
  - Requisiti di App e Progetto
  - Metodo di autenticazione
  - Volume di regole e flusso persistente
  - Formato dei dati di risposta
  - Parametri di richiesta
  - Disponibilità di funzionalità di ripristino e ridondanza
  - Operatori di query

<div id="similarities">
  #### Somiglianze
</div>

**Parametri della richiesta e operatori**

L’endpoint standard v1.1 statuses/filter include alcuni parametri che possono essere passati insieme alla richiesta per filtrare il flusso. Con il Flusso filtrato della v2, invece, si utilizza un set di [operatori](/it/x-api/posts/filtered-stream#building-rules-for-filtered-stream) che possono essere combinati con logica booleana per filtrare i Post desiderati. Tra gli operatori disponibili ce ne sono alcuni che sostituiscono direttamente i parametri standard esistenti della v1.1.

I seguenti parametri di richiesta standard della v1.1 hanno operatori equivalenti nell’API X v2:

| **Standard** | **API X v2** |
| :--- | :--- |
| follow - Un elenco di ID utente separati da virgole che indica gli utenti i cui Post devono essere consegnati nel flusso. | Diversi operatori che possono aiutarti a trovare Post relativi a utenti specifici:<br /><br />\* @<br />\* from:<br />\* to:<br />\* ecc. |
| track - Un elenco di frasi separate da virgole utilizzate per determinare quali Post verranno consegnati nel flusso. | Diversi operatori che possono aiutarti a trovare Post relativi a specifiche parole chiave:<br /><br />\* keyword<br />\* "exact phrase match"<br />\* #<br />\* ecc. |

**Supporto per la cronologia delle modifiche ai Post e metadati**

Entrambe le versioni forniscono metadati che descrivono l’eventuale cronologia delle modifiche. Consulta le [API reference del Flusso filtrato](/it/x-api/posts/filtered-stream#api-reference-index) e la [pagina sui fondamenti delle modifiche ai Post](/it/x-api/fundamentals/edit-posts) per ulteriori dettagli. 

<div id="differences">
  #### Differenze
</div>

**URL degli endpoint**

- Endpoint standard v1.1:
  - https://stream.x.com/1.1/statuses/filter.json
- Endpoint API X v2:
  - https://api.x.com/2/tweets/search/stream
  - https://api.x.com/2/tweets/search/stream/rule

**Requisiti per App e Progetto**

Gli endpoint dell’API X v2 richiedono l’uso di credenziali di una [App per sviluppatori](/it/resources/fundamentals/developer-apps) associata a un [Progetto](/it/resources/fundamentals/projects) quando autentichi le richieste. Tutti gli endpoint dell’API X v1.1 possono utilizzare credenziali di App autonome o di App associate a un Progetto.

**Metodo di autenticazione**

L’endpoint standard supporta [OAuth 1.0a User Context](/it/resources/fundamentals/authentication), mentre gli endpoint del flusso filtrato dell’API X v2 supportano [OAuth 2.0 App-Only](/it/resources/fundamentals/authentication#oauth-2-0) (nota anche come autenticazione Application-only). Per effettuare richieste all’API X v2 devi utilizzare un App Access Token per autenticare le richieste.

Se non disponi più dell’App Access Token che ti è stato mostrato quando hai creato il tuo Progetto e la tua app nel portale per sviluppatori, puoi generarne uno nuovo accedendo alla pagina “Keys and tokens” della tua app nel portale per sviluppatori. Se desideri generare un App Access Token in modo programmatico, consulta questa [guida OAuth 2.0 App-Only](/it/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token). 

**Volume delle regole e stream persistente**

L’endpoint standard v1.1 supporta una singola regola per filtrare la connessione di streaming. Per modificare la regola, devi disconnettere lo stream e inviare una nuova richiesta con le regole di filtraggio aggiornate fornite come parametri. 

L’endpoint del flusso filtrato dell’API X v2 consente di applicare più regole a un singolo stream e di aggiungere o rimuovere regole dal tuo stream mantenendo la connessione. 

**Formato dei dati di risposta**

Una delle differenze più importanti tra le versioni degli endpoint standard v1.1 e API X v2 riguarda la selezione dei campi da restituire nel payload.

Per gli endpoint standard, molti campi della risposta vengono restituiti per impostazione predefinita e hai poi la possibilità di usare parametri per identificare quali campi o insiemi di campi includere nel payload.

La versione API X v2 restituisce per impostazione predefinita solo i campi id e text del Post. Per richiedere campi o oggetti aggiuntivi, devi utilizzare i parametri [fields](/it/x-api/fundamentals/fields) e [expansions](/it/x-api/fundamentals/expansions). Qualsiasi campo del Post che richiedi da questi endpoint verrà restituito nell’oggetto Post primario. Eventuali oggetti e campi di tipo utente, media, sondaggio o luogo espansi verranno restituiti in un oggetto includes nella risposta. Puoi quindi associare qualsiasi oggetto espanso all’oggetto Post abbinando gli ID presenti sia nel Post sia nell’oggetto espanso. 

Ti consigliamo di approfondire questi nuovi parametri nelle rispettive guide o consultando la nostra guida su [come usare fields ed expansions](/it/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

Abbiamo anche preparato una [guida alla migrazione del formato dei dati](/it/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) che può aiutarti a mappare i campi dello standard v1.1 ai nuovi campi della v2. Questa guida ti fornirà anche gli specifici parametri di espansione e di campo che dovrai passare con la tua richiesta v2 per restituire campi specifici. 
 

Oltre alle modifiche relative a come richiedi determinati campi, l’API X v2 introduce anche nuovi design JSON per gli oggetti restituiti dalle API, inclusi gli oggetti Post e [user](/it/x-api/fundamentals/data-dictionary#user).

- Al livello root del JSON, gli endpoint standard restituiscono oggetti Post in un array statuses, mentre l’API X v2 restituisce un array data. 
- Invece di fare riferimento a “statuses” ritwittati e citati, il JSON dell’API X v2 fa riferimento a Retweeted e Quoted Tweets. Molti campi legacy e deprecati, come contributors e user.translator\_type, vengono rimossi. 
- Invece di utilizzare sia favorites (nell’oggetto Post) sia favourites (nell’oggetto user), l’API X v2 usa il termine like. 
- X adotta la convenzione secondo cui i valori JSON senza valore (ad esempio null) non vengono inclusi nel payload. Gli attributi di Post e user sono inclusi solo se hanno valori non null. 
   

Abbiamo anche introdotto un nuovo set di campi per il [Post object](/it/x-api/fundamentals/data-dictionary#tweet), che include quanto segue:

- Un campo [conversation\_id](/it/x-api/fundamentals/conversation-id)
- Due nuovi campi [annotations](/it/x-api/fundamentals/post-annotations), inclusi context ed entities
- Diversi nuovi campi [metrics](/it/x-api/fundamentals/metrics)
- Un nuovo campo reply\_setting, che indica chi può rispondere a un determinato Post

**Parametri della richiesta**

Esiste anche un insieme di parametri standard della richiesta del flusso filtrato **non** supportati nell’API X v2:

| Parametro standard v1.1 | Dettagli |
| :--- | :--- |
| locations - Un elenco separato da virgole di coppie longitudine,latitudine che specificano un insieme di riquadri di delimitazione per filtrare i Post. | Non abbiamo ancora rilasciato operatori basati sulla posizione per l’API X v2. |
| Delimited | Con l’endpoint v1.1, impostare questo parametro alla lunghezza della stringa indica che gli status devono essere delimitati nel flusso, così che i client sappiano quanti byte leggere prima della fine del messaggio di status.<br /><br />Questa funzionalità non è disponibile con l’API X v2. |
| Stall\_warnings | Con l’endpoint v1.1, impostare questo parametro su true farà sì che vengano inviati messaggi periodici se il client rischia la disconnessione. <br /><br />Con l’API X v2, gli avvisi di stallo vengono inviati per impostazione predefinita, con una nuova riga inviata a intervalli regolari. |

**Disponibilità delle funzionalità di ripristino e ridondanza**

La versione del flusso filtrato dell’API X v2 introduce funzionalità di ripristino e ridondanza che possono aiutarti a massimizzare l’operatività dello streaming, nonché a recuperare eventuali Post che potrebbero essere stati persi a causa di una disconnessione durata cinque minuti o meno.

Le connessioni ridondanti consentono di connettersi a un dato flusso fino a due volte, il che può aiutare a garantire il mantenimento della connessione al flusso in ogni momento, anche se una delle connessioni fallisce. 

Il parametro backfill\_minutes può essere utilizzato per recuperare fino a cinque minuti di dati mancanti. 

Entrambe queste funzionalità sono disponibili solo tramite [Academic Research access](/it/x-api/getting-started/about-x-api). Puoi saperne di più su questa funzionalità nella nostra guida all’integrazione sulle [funzionalità di ripristino e ridondanza](/it/x-api/posts/filtered-stream#filtered-stream-recovery-and-redundancy-features). 

**Nuovi operatori di query**

L’API X v2 introduce nuovi operatori a supporto di due nuove funzionalità: 

- **[Conversation IDs](/it/x-api/fundamentals/conversation-id)** - Man mano che le conversazioni si sviluppano su X, sarà disponibile un conversation ID per contrassegnare i Post che fanno parte della conversazione. Tutti i Post nella conversazione avranno il campo conversation\_id impostato sull’ID del Post che l’ha avviata. 
  - conversation\_id:
- **[X Annotations](/it/x-api/fundamentals/post-annotations)** forniscono informazioni contestuali sui Post e includono entity e context annotations. Le entità comprendono persone, luoghi, prodotti e organizzazioni. I contesti sono domini, o argomenti, di cui le entità emerse fanno parte. Ad esempio, le persone menzionate in un Post possono avere un contesto che indica se sono atleti, attori o politici.  
  - context: - seleziona i Post annotati con un contesto di interesse. 
  - entity: - seleziona i Post annotati con un’entità di interesse. 