---
title: Pubblico
---

import { Button } from '/snippets/it/button.mdx';

<div id="custom-audiences">
  ## Pubblici personalizzati
</div>

<div id="overview">
  ### Panoramica
</div>

Esistono diversi modi per i partner per creare [Pubblici personalizzati](https://business.x.com/en/targeting/tailored-audiences.html).

- [Audience API (CRM)](#crm)
- [Web](#web)
- [Mobile](#mobile)
- [Flessibile](#flexible)

Tieni presente che non è possibile escludere i pubblici personalizzati lookalike dal targeting. Inoltre, non puoi allo stesso tempo indirizzare sia un pubblico personalizzato sia il relativo lookalike nello stesso elemento di riga annuncio (gruppo di annunci).

**Gestione dei pubblici**

I pubblici possono essere gestiti tramite partner di audience e partner dell’API X Ads. Mettiamo a disposizione una serie di endpoint nell’API per accedere e mantenere i pubblici personalizzati.

Per le informazioni sui pubblici personalizzati, offriamo 2 endpoint:

- [GET accounts/:account\_id/custom\_audiences](/it/x-ads-api/audiences)
- [GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id](/it/x-ads-api/audiences)

Per maggiori dettagli su come caricare e gestire i pubblici, consulta la [guida all’Audience API](/it/x-ads-api/audiences).

**Tempi di elaborazione**

In generale, le modifiche ai pubblici vengono elaborate in lotti che vengono eseguiti ogni 6-8 ore. Durante l’elaborazione di una modifica, il pubblico esistente da aggiornare non viene influenzato. Non consigliamo di effettuare più di un aggiornamento per le aggiunte e uno per le rimozioni per ciascun pubblico all’interno di questo intervallo temporale.

**Targeting**

Un pubblico può essere indirizzato solo se corrisponde ad almeno 100 utenti attivi negli ultimi 90 giorni sui client di proprietà e gestiti da X. [GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id](/it/x-ads-api/audiences) indica se un pubblico non può essere indirizzato perché corrisponde a un numero di utenti troppo basso.

**Audience API (CRM)**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_0.png" alt="image2" />
</Frame>

I partner di audience o API forniscono un elenco di identificatori con hash e X esegue il matching e produce segmenti che sono resi disponibili per le attività di media buying su X. I partner possono creare questi pubblici con l’[Audience API](/it/x-ads-api/audiences).

**Come funziona**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_1.png" alt="image3" />
</Frame>

**Web**

Offriamo un processo standard di corrispondenza dei cookie quando lavoriamo con partner MPP per identificare segmenti da indirizzare per le attività di media buying su X. Inoltre, gli inserzionisti possono configurare un [X Web Event Tag](/it/x-ads-api/measurement/web-conversions#web-event-tags) per raccogliere i dati degli utenti del sito web e creare un corrispondente pubblico personalizzato.

**Passaggi di configurazione**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/screen_shot_2013-11-26-cookie-usage.png" alt="image0" />
</Frame>

![]()

**Come funziona**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/tailored_audience_web.png" alt="image1" />
</Frame>

**Mobile**

Consulta [l’articolo del blog sui Pubblici personalizzati dalle app mobili](https://blog.x.com/2014/introducing-tailored-audiences-from-mobile-apps) per i dettagli.

**Flessibile**

I [pubblici flessibili](/it/x-ads-api/audiences) consentono agli inserzionisti di creare e salvare combinazioni di pubblico basate su pubblici personalizzati esistenti o su loro sottoinsiemi. I sottoinsiemi dei membri di un pubblico personalizzato possono essere indirizzati in base alla recenza e alla frequenza di interazione.

**Casi d’uso con restrizioni per i Pubblici personalizzati**

[Per saperne di più sulle restrizioni](https://developer.x.com/en/developer-terms/more-on-restricted-use-cases "Per saperne di più sulle restrizioni")

<div id="audiences-faq">
  ### FAQ sui Pubblici[](#real-time-tailored-audiences "Permalink to this headline")
</div>

**D: Abbiamo inviato una grande quantità di dati: perché la dimensione del pubblico risulta TOO\_SMALL?**

R: I dati vengono aggiunti al pubblico in tempo reale, ma il job che elabora i dati per calcolare la dimensione del pubblico viene eseguito solo dopo un certo periodo. La dimensione corretta dovrebbe essere visualizzata nell’interfaccia utente dopo alcune ore.

**D: Abbiamo terminato l’invio dei dati del pubblico e abbiamo atteso 24 ore o più, ma non riusciamo ancora a targetizzare il pubblico: quali sono i passaggi successivi?**

R: Verificare quanto segue:

- L’ID utente trasmesso è corretto e non è malformato.
- I nomi dei pubblici trasmessi sono corretti e corrispondono ai precedenti aggiornamenti di membership.
- Verificare le risposte ai comandi POST.
- Verificare che il pixel ID Sync sia implementato correttamente e che, come descritto dal processo ID Sync, un numero sufficiente di utenti abbia visitato il sito in questione per consentire la mappatura. Gli utenti non mappati negli aggiornamenti di membership non diventeranno utenti targetizzabili.

Se tutto il resto è confermato corretto e funzionante, contattare i referenti prodotto di X fornendo informazioni il più possibile dettagliate (vedere [Guide to Partner Inbounds](/it/x-ads-api/introduction) per un esempio delle informazioni preferite).

**D: Quante volte possiamo chiamare l’endpoint e con quale criterio?**

R: Raccomandiamo vivamente di inviare solo delta incrementali e di non reinviare mai l’intera membership del pubblico. Il sistema è stato testato per garantire una capacità sufficiente a elaborare aggiornamenti incrementali dei dati per alcuni dei più grandi siti web al mondo. Il caricamento iniziale dei pubblici dovrebbe essere sottoposto a un attento throttling e il primo upload richiederà presumibilmente un tempo significativo per completarsi.

**D: Qual è la dimensione minima di un pubblico per poter essere utilizzato per il targeting?**

- La dimensione minima di un pubblico è 100 utenti (post-match). Se un pubblico con meno di 500 utenti viene abbinato, non sarà disponibile per il targeting nell’UI di X Ads.

**D: Quanto tempo occorre per elaborare i file del pubblico? E quanto tempo occorre perché siano pronti nell’interfaccia utente di X?**

- In genere servono 4-6 ore per elaborare i file del pubblico, ma dipende dalla dimensione del file. Una volta elaborato, i pubblici sono disponibili nell’UI di X Ads.

**D: Come viene calcolato il match rate (tasso di corrispondenza)?**

- Match Rate = utenti X attivi negli ultimi 90 giorni / numero di utenti forniti

**D: Come verifichiamo se un file di pubblico funziona correttamente?**

- Potete fornire un file di pubblico di test e utilizzare “keltonlynn” come handle dell’inserzionista. Potremo quindi verificare che il file venga correttamente acquisito e caricato nell’UI di X.

**D: Che cos’è un identificatore utente del partner (`p_user_id`)?**

- È l’identificatore utilizzato dalla vostra azienda per identificare in modo univoco ciascuno dei vostri clienti.

**D: Che cos’è un ID standard?**

- Può essere un indirizzo email, un ID dispositivo, un @handle di X o un ID.

**D: Come ottengo la chiave HMAC?**

- Verrà fornita tramite email crittografata. Inviate la vostra chiave PGP pubblica a [mpp-inquiry@x.com](mailto:mpp-inquiry%x.com) e vi invieremo un’email di test per verificare che tutto funzioni. Una volta verificato, vi invieremo la chiave HMAC.

**D: Come verifico che il processo di hashing abbia funzionato utilizzando la chiave HMAC fornita?**

- X fornirà un file di test (contenente indirizzi email di esempio, ID dispositivo, ecc.) e un file di hash risultante con cui confrontare i vostri risultati.

**D: Esiste un limite di dimensione per il file di corrispondenza dati completo?**

- No, non esiste un limite di dimensione per il file di corrispondenza dati completo.

**D: Quanto tempo occorre per elaborare il file di corrispondenza dati completo?**

- Una volta ricevuto il file da X, occorrerà circa 1 giorno per elaborarlo.

<div id="crm">
  ### CRM
</div>

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_0.png" alt="image0" />
</Frame>

Questo documento descrive i dettagli di integrazione per i partner CRM dei Pubblici personalizzati, inclusi i formati dei file e il processo di scambio dei dati.

**Riepilogo**

L’azienda fornirà a X, per conto di un cliente, un elenco di identificatori utente comuni con hash (ad es. indirizzi email) o ID utente del partner, allo scopo di eseguire un blind match e produrre un elenco di ID utente X per il targeting. I segmenti per il targeting saranno resi disponibili all’@handle specifico dell’inserzionista, indicato dal nome del file nella configurazione della campagna su ads.x.com.

Tutti i file provenienti dall’azienda saranno forniti a X tramite un pacchetto sicuro su IronBox (www.golockbox.com), usando un account specifico che X avrà assegnato all’azienda. X fornirà l’accesso a IronBox. La documentazione sulle API di IronBox è disponibile su [https://secure.goironcloud.com/Docs/Help/](https://secure.goironcloud.com/Docs/Help/).

<div id="partner-id-matching-requirements">
  #### Requisiti per l’associazione degli ID partner
</div>

Se l’azienda utilizza un proprio sistema standard di ID per tracciare gli utenti (cioè non identificatori utente comuni come indirizzi email, ID dispositivo, ID utente X, ecc.) questo è il processo consigliato.

**1. Corrispondenza completa dei dati**

Inizialmente, l’azienda fornirà un elenco completo di tutti i record utente che includono un identificatore utente comune univoco con X in un unico file per eseguire una corrispondenza completa dei dati e produrre una mappatura, archiviata da X, degli ID partner (`p_user_id`) agli ID X (`tw_id`). Questo verrà eseguito regolarmente ogni 2-3 mesi per garantire un corretto mantenimento. Una volta completata la corrispondenza, X condividerà con l’azienda, via email, un tasso di corrispondenza di base ottenuto da questo file.

Il formato di questo file dovrebbe essere:

Convenzione di denominazione: FullDataMatch.\[CompanyName].txt

Algoritmo di hashing: HMAC\_SHA-256

Formato:

Colonna 1: valore HMAC con hash degli identificatori comuni

Colonna 2: Partner User ID (univoco per utente, non univoco nel file)

Delimitatore di colonna (CSV): verranno utilizzate virgole per delimitare l’identificatore utente comune con hash dall’ID partner

Valori separati da riga

- Es.: se il record utente A ha Partner User ID 1 e identificatore comune 1, 2 e 3:

|     |     |
| :--- | :--- |
| identificatore utente comune 1 | p\_user\_1 |
| identificatore utente comune 2 | p\_user\_1 |
| identificatore utente comune 3 | p\_user\_1 |

\*Vedere di seguito la sezione Indicazioni per l’hashing per gli identificatori utente comuni

**2. Elenchi di segmenti personalizzati**

L’azienda fornirà elenchi di utenti sotto forma di `p_user_id` per creare Pubblici personalizzati per i clienti ai fini del targeting su X.

- Valori separati da riga
- `p_user_id`
- - (Come fornito nella sezione 1. Corrispondenza completa dei dati sopra. Se il valore fornito nella corrispondenza completa dei dati è con hash, l’azienda fornirà lo stesso valore con hash nel file del pubblico. Se il valore fornito non è con hash, l’azienda fornirà il valore in chiaro.)

<div id="standard-matching-requirements">
  #### Requisiti standard di corrispondenza
</div>

Se l’azienda non utilizza un ID standard per mappare tutti gli identificatori utente dei clienti, si consiglia il seguente processo.

**Elenco segmenti personalizzati**

L’azienda fornirà direttamente a X, per conto dei clienti, elenchi di comuni identificatori utente sottoposti a hashing per creare Pubblici personalizzati.

Il formato del file deve essere:

- Valori separati da riga
- Identificatore utente comune sottoposto a hashing (es. indirizzo e‑mail)
- Rispettare le convenzioni di denominazione dei file riportate di seguito
- Seguire le istruzioni di hashing per gli indirizzi e‑mail riportate di seguito (in Istruzioni di hashing)

<div id="custom-segment-list-file-naming-operations">
  #### Convenzioni di denominazione e operazioni per i file di segmenti personalizzati
</div>

L’operazione applicata a un file è determinata dal nome del file, secondo le seguenti operazioni disponibili e la convenzione generale di denominazione: audiencename\_partnername.handle.operation.filetype

- audiencename: Il nome del Pubblico personalizzato. Questo è il nome visualizzato quando si seleziona il pubblico nell’interfaccia di configurazione della campagna su ads.x.com, ad es. brand\_loyalty\_card\_holders.
- partnername: Nome dell’azienda che fornisce i dati per conto dell’inserzionista, ad es. company\_name.
- handle: Account X (@handle) che avrà accesso ai Pubblici personalizzati, ad es. @pepsi, @dietpepsi
- operation: new, add, remove, removeall, replace (dettagli di seguito)
- timestamp: Timestamp Unix epoch standard in secondi, usato per garantire l’univocità di ogni file di pubblico caricato
- filetype: il file deve essere in formato \*.txt

<div id="creating-and-updating-audiences">
  #### Creazione e aggiornamento dei Pubblici
</div>

Crea un nuovo pubblico con un singolo file, ad es. loyalty\_card\_holders\_partnername.pepsi.new.txt

Aggiungi - Aggiunge le corrispondenze di un elenco a un pubblico esistente, ad es. loyalty\_card\_holders\_partnername.pepsi.add..txt

Rimuovi - Rimuove le corrispondenze di un elenco da un pubblico esistente, es: loyalty\_card\_holders\_partnername.pepsi.remove..txt

Rimuovi tutto - Rimuove da tutti i pubblici di quel cliente le corrispondenze generate da un elenco cumulativo aggiornato regolarmente (ossia la lista di opt-out del cliente). Es: partnername.pepsi.removeall.txt

- Può essere utilizzato per un elenco completo di utenti che hanno effettuato l’opt-out dall’inserzionista.
- X terrà in considerazione solo l’ultimo elenco fornito in questo file e lo applicherà a tutti i pubblici esistenti e futuri con corrispondenze.

Utenti X al momento in cui questo file è stato fornito ed elaborato.

Sostituisci - Rimuove un pubblico esistente e lo sostituisce con un nuovo elenco di pubblico. Es: loyalty\_card\_holders\_partnername.pepsi.replace..txt

Opt-out complessivo dell’azienda - L’azienda fornirà un file di opt-out cumulativo per rimuovere gli utenti che hanno effettuato l’opt-out in base alla politica di opt-out dell’azienda.

X terrà in considerazione solo l’ultimo elenco fornito in questo file di opt-out dell’azienda e lo applicherà a tutti i pubblici esistenti e futuri per gli utenti X corrispondenti al momento in cui questo file è stato fornito ed elaborato. Il formato del file di opt-out dell’azienda sarà il seguente: es: partnername.removeall.txt

Elimina - Rimuove un pubblico esistente dall’elenco corrente dei pubblici, ad es. loyalty\_card\_holders\_partnername.pepsi.delete.txt

<div id="hashing-directions">
  #### Indicazioni per l’hashing
</div>

X condividerà in modo sicuro una chiave di produzione codificata in base64 tramite PGP per eseguire l’hashing di identificatori utente comuni (ad es. indirizzi email). L’azienda effettuerà il decoding della chiave in base64 per ottenere una chiave da 32 byte da utilizzare per l’hashing.

Esempio di chiave codificata in base64:

BrQvOg+dACBUmKjRiNxZgJLh6zydjS0ZOv80FelTNzM=

Esempio di chiave decodificata in Base64:

/:� TшY

Normalizzazione: l’azienda eseguirà una normalizzazione di base sugli identificatori utente comuni prima dell’hashing (ad eccezione degli ID dispositivo; vedere la sezione Normalizzazione degli ID dispositivo).

<div id="e-mail-normalization">
  #### Normalizzazione dell’e-mail
</div>

In pratica, rimuovere gli spazi iniziali e finali e convertire l’indirizzo e-mail in minuscolo.

Es: Indirizzo e-mail non normalizzato: testemail\_Organisational\_baseball+884`@`It92I6Ev2B`.`Com

Dopo la normalizzazione: testemail\_organisational\_baseball+884`@`it92i6ev2b`.`com

Valore hash: 74d9584eded0ad1e5572a1c1849f3716751d371d6117a6155dad5363f4b4fbec

Nota: Il numero di caratteri dell’HMAC codificato e della chiave può variare in base all’input e alla codifica, quindi anche il conteggio finale dei caratteri può differire.

<div id="device-id-normalization">
  #### Normalizzazione degli ID dispositivo
</div>

Applichiamo gli stessi requisiti di hashing degli ID dispositivo utilizzando l’algoritmo SHA-256 e un salt comune che forniamo ai partner di dati. Rimuoviamo gli spazi come avviene per gli indirizzi email, ma non viene applicata alcuna conversione in minuscolo per IDFA/ID Android e va utilizzato il formato esatto dell’IDFA/ID Android.

Ecco un esempio del formato raw degli ID dispositivo per iOS e Android, prima dell’hashing:

IDFA iOS: DD99CFF7-6186-4602-9DF2-ED3FD0B2D431

ID Android: b5bf2122961b3595

IDFA iOS con hash: 134fb8cd95c7fd42e2793f469a447198ca5f990968db2dbadad70e723ed9750b

ID Android con hash: 130dddff1939f229476f50bc8adab8fcb7e3525b0e9604fe8effc15e68cee4a4

<div id="x-user-id-normalization">
  #### Normalizzazione degli ID utente X
</div>

Gli ID X continueranno a essere sottoposti a hashing, poiché il raggruppamento dei dati — ad es. elenco clienti di @handle — è privato per l’inserzionista, anche se non si tratta di dati personali (PII). Applicheremo gli stessi requisiti per l’hashing degli ID X utilizzando l’algoritmo SHA-256 e un salt comune che forniamo ai partner di dati. Gli spazi devono essere rimossi sia dall’ID X sia dallo `@`username, ma gli ID utente non richiedono normalizzazione. Gli @username devono essere convertiti in minuscolo per la normalizzazione. Il simbolo @ non deve essere incluso come parte dello username.

Il formato dell’ID grezzo sarà:

- ID utente: 27674040
- @username: testusername

ID utente con hashing: bf6b57d4e861e83bea8bbed2b800b251a64c95468ee6e8cb07c3368c9ed45e85

@username con hashing: 12201ae78ad1afa907c7112d17f498154ffb0bf9ea523f5390e072a06d7d9812

<div id="id-sync-integration">
  ### Integrazione ID Sync
</div>

I partner che inviano dati con un `p_id` devono eseguire un processo di ID Sync per generare una mappatura tra gli ID utente dell’inserzionista o del partner e gli ID utente di X. Questo consente agli inserzionisti di indirizzare direttamente i propri segmenti di utenti su X. I partner devono inoltre impostare il valore del parametro `user_identifier_type` su `TALIST_PARTNER_USER_ID` o `TAWEB_PARTNER_USER_ID` quando inviano gli aggiornamenti di appartenenza.

- **Solo Web**: È possibile farlo inserendo un pixel sul sito dell’inserzionista, come descritto di seguito.
- **Elenco**: È possibile farlo utilizzando uno qualsiasi dei metodi descritti nella pagina [CRM](/it/x-ads-api/audiences#crm).

<div id="pixel-url">
  #### URL del pixel
</div>

|     |
| :--- |
| **URL di base** |
| [https://analytics.x.com/i/adsct](https://analytics.x.com/i/adsct) |

<div id="pixel-parameters">
  #### Parametri del pixel
</div>

|     |     |
| :--- | :--- |
| **Parametro** | **Descrizione** |
| `p_id` | L’ID partner assegnato da X |
| `p_user_id` | L’ID dell’utente nel sistema del partner |

<div id="id-sync-pixel">
  #### Pixel di sincronizzazione ID:
</div>

Usando un partner ID di esempio pari a 111 e un `p_user_id` di esempio pari ad abc, il pixel risultante sarebbe il seguente:

```json
    <pre class="brush: xml">
    <img height="1" width="1" src="https://analytics.x.com/i/adsct?p_id=111&p_user_id=abc" style="display:none" />
    </pre>
```

**Configurazione del file di opt-out e invio dei file di opt-out**

I partner dovrebbero fornire a X un elenco di utenti che, a loro migliore conoscenza, hanno scelto di rinunciare alla consegna di annunci mirati. Il file dovrebbe avere il seguente formato:

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Numero di colonna** | **Nome della colonna** | **Tipo di colonna** | **Descrizione** |
| 1   | Partner ID | string | Il “partner ID” è l'ID che X fornisce al partner per identificare in modo univoco ciascun partner. |
| 2   | ID dell'utente nel sistema del partner | string | Il `p_user_id` è l'ID univoco utilizzato dal partner per identificare l'utente. Il file contenente questi utenti in opt-out deve essere caricato utilizzando l'endpoint [TON upload](/it/x-ads-api/audiences) e il percorso dei dati caricati deve essere inviato all'endpoint Global Opt Out qui: [PUT accounts/:account\_id/custom\_audiences/global\_opt\_out](/it/x-ads-api/audiences). |

**Invio degli aggiornamenti di appartenenza**

Come specificato nella nostra documentazione dell'endpoint, quando si inviano utenti tramite l'endpoint [POST custom\_audience\_memberships](/it/x-ads-api/audiences) è necessario includere un ID cliente per abilitare una corrispondenza basata su cookie. I partner che inviano dati con un `p_id` **devono** impostare `user_identifier_type` su `TALIST_PARTNER_USER_ID` oppure `TAWEB_PARTNER_USER_ID`.

Tutti gli altri passaggi restano invariati rispetto a quelli elencati nella [Guida all'integrazione dell'API Real-Time Audience](/it/x-ads-api/audiences)

<div id="custom-audiences-user-data">
  ### Dati utente dei Pubblici personalizzati
</div>

Questo documento descrive il formato dei dati utente per \[Pubblico personalizzato]/x-ads-api/audiences.

**Normalizzazione dei dati**

**ID dispositivo**:

- IDFA - in minuscolo con trattini; es.: `4b61639e-47cc-4056-a16a-c8217e029462`
- AdID - richiesto il formato originale del dispositivo, non in maiuscolo e con trattini; es.: `2f5f5391-3e45-4d02-b645-4575a08f86e`
- Android ID - richiesto il formato originale del dispositivo, non in maiuscolo e senza trattini o spazi; es.: `af3802a465767e36`

**Indirizzi email**:

- in minuscolo, rimuovere gli spazi iniziali e finali; es.: `support@x.com`

**Username X**:

- senza @, in minuscolo e con spazi iniziali e finali rimossi; es.: `jack`

**ID utente X**:

- Intero standard; es.: `143567`

**Hashing dei dati**

I dati di ciascuna riga devono essere sottoposti a hashing usando `SHA256`, senza salt. Inoltre, l’hash finale in output deve essere in minuscolo. Ad es., 49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d e **non** 49E0BE2AECCFB51A8DEE4C945C8A70A9AC500CF6F5CB08112575F74DB9B1470D

```
# hashing dell'utente @AdsAPI in Python
import hashlib
hashlib.sha256("adsapi".encode()).hexdigest()

# output
49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d
```

Ulteriori esempi di codice per l’hashing sono disponibili su [github.com/xdevplatform/ads-platform-tools](https://github.com/xdevplatform/ads-platform-tools).

<div id="custom-audiences-web">
  ### Pubblici personalizzati: Web
</div>

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/info.png" alt="info.png" />
</Frame>

**Informazioni**

I partner invieranno un elenco di ID (`p_user_ids`) da destinare al targeting per conto di un inserzionista. Questo avviene tramite un processo di sincronizzazione degli ID che crea una corrispondenza tra i `p_user_ids` e l’ID utente di X. Questa mappatura viene poi utilizzata per generare elenchi di ID utente di X utilizzabili per il targeting. Questi pubblici personalizzati saranno resi disponibili sull’@handle specifico dell’inserzionista, come indicato dall’etichetta nella configurazione della campagna Custom Audiences Web su ads.x.com.

X fornirà il pixel sicuro che può essere inserito nei tag e nei siti del partner per associare gli ID (`p_user_ids`) agli ID utente di X. Una volta completato il processo di sincronizzazione degli ID, i file di targeting verranno creati dal partner e resi disponibili a X tramite un endpoint HTTPS. Questi file di targeting vengono acquisiti regolarmente da X e poi resi disponibili nell’interfaccia utente di X.

**Pixel sicuro di X**

Il pixel sicuro di X avrà il seguente aspetto:

https://analytics.x.com/i/adsct?p\_user\_id=xyz\&p\_id=123

**`p_user_id`** - xyz rappresenta l’ID utente del partner fornito dal partner

**`p_id`** - 123 rappresenta l’ID univoco del partner (fornito da X)

**Endpoint HTTPS del partner e file utenti per il targeting**

Il partner dovrà fornire a X un endpoint HTTPS e credenziali (username/password) che possano essere utilizzati per acquisire regolarmente il file di targeting. Un esempio di endpoint HTTPS avrà il seguente aspetto:

```
https://<partnerdomain>/twitter/partner_targeting_%Y-%M-%D.tsv.gz
```

%Y - Codice di formato per l’anno (YYYY)

%M - Codice di formato per il mese (MM)

%D - Codice di formato per il giorno (DD)

I dati trasmessi consisteranno nei seguenti file:

1. File utenti per il targeting del partner
2. File di conversione per il targeting

Tutti i file saranno in formato TSV, in cui i singoli campi di ogni riga sono separati tra loro da un carattere di tabulazione. I valori dei campi validi non conterranno mai il carattere di tabulazione.

**Intervallo di IP consentiti di X:**

Ecco l’intervallo di IP che può essere autorizzato per l’accesso all’endpoint del partner.

- 199.16.156.0/22
- 199.59.148.0/22

**File utenti per il targeting del partner:**

| **Numero colonna** | **Nome colonna** | **Tipo colonna** | **Descrizione** |
| :--- | :--- | :--- | :--- |
| 1   | partner id | string | Il “partner id” è l’ID che X fornisce al partner per identificare in modo univoco ciascun partner. |
| 2   | advertiser id | string | L’“advertiser id” è l’@handle dell’inserzionista. |
| 3   | p\_user\_id | string | Il “p\_user\_id” è l’ID univoco utilizzato dal partner per identificare l’utente. |
| 3   | confidence score | integer | Il “confidence score” è facoltativo. La nostra raccomandazione è di usare un intervallo 0-100. Se il caso d’uso è il retargeting, un punteggio di “100” indica un utente direttamente retargetizzato. Qualsiasi punteggio da 0 a 99 corrisponde al livello di confidenza del look-alike. |
| 4   | segment label | string | Il “segment label” è facoltativo. I partner possono usare “segment label” per specificare, ad esempio, categorie di prodotto. Consigliamo di usare questo “segment label” perché è il nome leggibile per i Pubblici personalizzati nell’interfaccia ads.x.com. |

**Note:**

Ogni volta che riceviamo un nuovo file di targeting del partner, ci aspettiamo che contenga l’elenco completo degli utenti che il partner ci raccomanda di raggiungere, non incrementale, salvo diverso accordo. Con ciascun partner concorderemo la frequenza di consegna di questo file. Se non riceviamo il file di targeting del partner come previsto, utilizzeremo la versione precedente con un tempo di scadenza predefinito.

<div id="audience-api-integration">
  ## Integrazione dell’API Audience
</div>

<div id="overview">
  ### Panoramica
</div>

L’API Audience è stata introdotta come parte della [v4](/it/x-ads-api/introduction) dell’API Ads e, con essa, porta diversi miglioramenti rispetto agli endpoint legacy per le Audience. Questo nuovo endpoint è supportato da un nuovo backend di elaborazione delle Audience e introduce vari miglioramenti in termini di stabilità, robustezza e affidabilità. Lo scopo di questa guida è evidenziare le differenze tra l’API Audience e i processi legacy di caricamento e gestione delle Audience.

La documentazione di riferimento è disponibile nella pagina di riferimento dell’[API Audience](/it/x-ads-api/audiences).

**Nota**: Tutti i dati utente delle Audience devono essere sottoposti a hashing SHA-256 prima del caricamento. Ulteriori dettagli, insieme ai tipi di identificatori utente accettati e alla normalizzazione dei dati, sono disponibili alla pagina [dati utente](/it/x-ads-api/audiences).

**Modifiche alla funzionalità delle Audience**

Le seguenti modifiche alle Pubblico personalizzato sono state introdotte a partire dalla v4 e tutti gli endpoint deprecati non saranno più disponibili una volta dismessa la v3 dell’API Ads:

- **Deprecato** caricamento TON:
  - GET accounts/:account\_id/custom\_audience\_changes
  - GET accounts/:account\_id/custom\_audience\_changes/:custom\_audience\_change\_id
  - POST accounts/:account\_id/custom\_audience\_changes
  - PUT accounts/:account\_id/custom\_audiences/global\_opt\_out
- **Deprecato** Real Time Audiences:
  - POST custom\_audience\_memberships
- Pubblico personalizzato:
  - Il parametro `list_type` verrà rimosso dalla richiesta e dalla risposta su tutti gli endpoint di [Custom Audience](/it/x-ads-api/audiences). Questo parametro veniva usato per identificare il tipo di identificatore utente dell’Audience (ad es. email, X User ID, ecc.); tuttavia, ora le Audience possono accettare più identificatori utente per la stessa Audience, rendendo questo valore irrilevante.
- Generale:
  - La lookback window dell’Audience è stata aggiornata per includere gli utenti attivi negli ultimi 90 giorni (in precedenza 30 giorni)
  - Il numero minimo di utenti corrispondenti richiesto affinché un’Audience sia targetizzabile è stato ridotto a 100 (da 500)

<Note>
  **Prerequisiti**

  - Accesso all’API Ads
  - Per accedere all’endpoint Audience, è necessario essere aggiunti a una allowlist. Compila questo modulo e accetta il nuovo [X Ads Products and Services Agreement](/it/x-ads-api/introduction) se inizialmente accettato prima del 2018-08-01
</Note>

**Processo di caricamento delle Audience**

La seguente tabella elenca le principali differenze tra i vecchi e i nuovi flussi di creazione delle Audience, con ulteriori dettagli disponibili più sotto:

| Fase del processo | API Audience | (Deprecato) Caricamento TON |
| :--- | :--- | :--- |
| Creare una Audience vuota | Può essere creata tramite l’\[endpoint POST custom\_audience]/x-ads-api/audiences | Può essere creata tramite l’\[endpoint POST custom\_audience]/x-ads-api/audiences |
| Aggiungere un nuovo utente | Usa `operation_type` `Update` con l’[endpoint Audience](/it/x-ads-api/audiences) | Usa `operation` `ADD` con l’endpoint [POST custom\_audience\_changes](/it/x-ads-api/audiences) |
| Rimuovere un utente | Usa `operation_type` `Delete` con l’[endpoint Audience](/it/x-ads-api/audiences) | Usa `operation` `REMOVE` con l’endpoint [POST custom\_audience\_changes](/it/x-ads-api/audiences) |
| Opt-out degli utenti | Usa `operation_type` `Delete` con l’[endpoint Audience](/it/x-ads-api/audiences) e i corrispondenti `custom_audience_id` di cui l’utente fa parte | Usa l’[endpoint di opt-out globale](/it/x-ads-api/audiences) |

**Nota** Qualsiasi Audience aggiornata o sottoposta a opt-out tramite il percorso di caricamento TON deve avere un elenco corrispondente caricato tramite l’endpoint [caricamento TON](/it/x-ads-api/audiences) e associato a un’Audience utilizzando l’endpoint [custom\_audience\_changes](/it/x-ads-api/audiences).

**Rate limiting**

L’endpoint dell’API Audience ha un limite di 1500/1min per account. Non ci sono limiti al numero di utenti che possono essere inviati in un singolo payload. I soli vincoli sul payload sono:

1. Numero totale di operazioni: 2500 operazioni

2. Dimensione massima del payload: 5.000.000 byte

**Gestione degli utenti dell’Audience**

Per creare una nuova Audience, sono necessari i seguenti passaggi

<div id="create-a-new-custom-audience">
  ### Crea un nuovo Pubblico personalizzato
</div>

Crea un nuovo “contenitore” di Pubblico personalizzato utilizzando l’endpoint \[POST custom\_audience]/x-ads-api/audiences e recupera il relativo `id` del Pubblico personalizzato. Questo passaggio è necessario se stai creando un Pubblico da zero. Se stai aggiornando un Pubblico esistente, passa alla sezione successiva.

<div id="add-users-to-an-audience">
  ### Aggiungere utenti a un Pubblico
</div>

Usa [POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/users](/it/x-ads-api/audiences) con l’`id` del Pubblico personalizzato e un payload di esempio come segue:

POST https://ads-api.x.com/11/accounts/18ce54d4x5t/custom\_audiences/1nmth/users

```
    # Tutti i valori devono essere sottoposti a hashing; in questo esempio, i valori non hashed sono usati solo a scopo illustrativo
    [
      {
        "operation_type": "Update",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "abc@x.com"
              ],
              "handle": [
                "x",
                "adsapi"
              ]
            },
            {
              "email": [
                "edf@x.com"
              ],
              "twitter_id": [
                "121291606",
                "17874544"
              ]
            }
          ]
        }
      }
    ]
```

Per aggiungere un utente a un Pubblico, usa `operation_type` `Update`. La nuova interfaccia dei Pubblici consente di passare più chiavi utente per un singolo utente. Ogni oggetto nell’array di oggetti JSON corrisponde a un singolo utente. Con il payload di esempio sopra, la richiesta aggiungerà due utenti a un Pubblico: uno con `email` e `handle` e un altro con `email` e `twitter_id`. 

<div id="remove-users-from-an-audience">
  #### Rimuovere utenti da un pubblico
</div>

Analogamente al processo descritto per l’aggiunta di utenti, è possibile rimuovere utenti da un pubblico come segue:

POST https://ads-api.x.com/11/accounts/18ce54d4x5t/custom\_audiences/1nmth/users

```
    # Tutti i valori devono essere sottoposti a hashing; in questo esempio si usano valori non sottoposti a hashing a scopo illustrativo
    [
      {
        "operation_type": "Delete",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "abc@x.com"
              ],
              "twitter_id": [
                "783214",
                "1225933934"
              ]
            },
            {
              "email": [
                "edf@x.com"
              ],
              "twitter_id": [
                "121291606",
                "17874544"
              ]
            }
          ]
        }
      }
    ]
```

Il campo `operation_type` deve essere impostato su `Delete` e gli utenti verranno associati a qualsiasi chiave utilizzata in fase di aggiunta al pubblico. Ad esempio, se un utente è stato aggiunto a un pubblico usando `email` e `twitter_id`, lo stesso utente può essere rimosso usando una qualsiasi di queste chiavi, cioè `email` oppure `twitter_id`, o entrambe.

È inoltre possibile aggiungere e rimuovere utenti da un pubblico nella stessa richiesta. L’endpoint supporta più valori di `operation_type` per richiesta.

<div id="opt-out-users">
  #### Utenti in opt-out
</div>

Con la deprecazione dell’endpoint di opt-out globale, i partner sono tenuti a eseguire `Delete` per tutti gli utenti che hanno effettuato l’opt-out da qualsiasi Pubblico. Ci sono alcuni modi per ottenere questo risultato:

1. Tenere traccia di quali utenti fanno parte di quali Pubblici e rimuovere tali utenti singolarmente da ciascun Pubblico.
2. Rimuovere l’utente da **tutti** i Pubblici associati a un account Ads.

**Best practice generali**

- Consigliamo vivamente di chiamare questo endpoint in batch quasi in tempo reale per evitare code con picchi, che richiedono più tempo per essere elaborate e in generale causano carico non necessario sul nostro sistema. Questo garantisce anche che gli utenti siano disponibili prima per il targeting delle campagne.
- Una chiamata API riuscita restituirà `success_count` e `total_count`, corrispondenti al numero di oggetti `user` ricevuti nella richiesta.
- Questo endpoint è atomico: o l’intera richiesta ha esito positivo oppure, in caso di errori, l’intera richiesta fallisce. In caso di risposta di errore, si raccomanda ai consumatori dell’API di correggere l’errore e riprovare la richiesta con l’intero payload.
- In caso di errore, si raccomanda ai partner di usare un approccio di [exponential backoff](https://en.wikipedia.org/wiki/Exponential_backoff) con retry. Ad esempio: riprovare immediatamente al primo errore, riprovare dopo 1 minuto al secondo errore e riprovare dopo 5 minuti al terzo errore consecutivo, e così via.

<div id="api-reference">
  ## Riferimento all’API
</div>

<div id="keyword-insights">
  ### Approfondimenti sulle parole chiave
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Esegui in Postman
</Button>

<div id="get-insightskeywordssearch">
  #### GET insights/keywords/search[](#get-insights-keywords-search "Permalink a questo titolo")
</div>

Dato un gruppo di keyword, restituisce il volume di Tweet associato e un insieme di 30 keyword correlate. Il volume di Tweet si riferisce solo alle keyword di input, non a quelle correlate.

È consentito un intervallo di tempo massimo (`end_time` - `start_time`) di 7 giorni.

Tieni presente che i risultati sono limitati a una singola area geografica (paese).

**Resource URL[](#resource-url "Permalink a questo titolo")**

`https://ads-api.x.com/12/insights/keywords/search`

**Parameters[](#parameters "Permalink a questo titolo")**

| Name | Description |
| :--- | :--- |
| granularity  <br />_required_ | Specifica la granularità dei dati restituiti per l’intervallo di tempo indicato da `start_time` ed `end_time`. Ad esempio, quando impostata su `HOUR`, viene restituito un punto dati per ogni ora tra `start_time` ed `end_time`.<br /><br />Type: enum<br /><br />Possible values: `DAY`, `HOUR` |
| keywords  <br />_required_ | Una stringa di keyword separate da virgole per restringere la ricerca. Tutte le keyword sono in OR tra loro.<br /><br />**Nota**: è possibile utilizzare al massimo 10 keyword (somma di `keywords` e `negative_keywords`).<br /><br />Type: string<br /><br />Example: `developers` |
| start\_time  <br />_required_ | Limita i dati recuperati a quelli raccolti nella finestra temporale tra `start_time` ed `end_time`. Espressa in formato [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).<br /><br />Type: string<br /><br />Example: `2017-07-10T00:00:00Z` |
| end\_time  <br />_optional_ | Limita i dati recuperati a quelli raccolti nella finestra temporale tra `start_time` ed `end_time`. Espressa in formato [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).<br /><br />**Nota**: predefinita all’ora corrente.<br /><br />Type: string<br /><br />Example: `2017-07-11T00:00:00Z` |
| location  <br />_optional_ | Un valore di targeting ottenibile dall’endpoint [GET targeting\_criteria/locations](/it/x-ads-api/campaign-management#get-targeting-criteria-locations) per restringere i risultati in base alla posizione dell’utente dell’account. Al momento sono supportate solo località a livello di paese.<br /><br />Type: string<br /><br />Example: `0ce8b9a7b2742f7e` |
| negative\_keywords  <br />_optional_ | Una stringa di keyword separate da virgole da escludere. Tutte le keyword negative sono in OR tra loro.<br /><br />**Nota**: è possibile utilizzare al massimo 10 keyword (somma di `keywords` e `negative_keywords`).<br /><br />Type: string<br /><br />Example: `rain` |

**Example Request[](#example-request "Permalink a questo titolo")**

```json
GET https://ads-api.x.com/12/insights/keywords/search?end_time=2018-02-02&granularity=DAY&keywords=developers&start_time=2018-02-01
```

**Example Response[](#example-response "Permalink a questo titolo")**\*

```
    {
      "request": {
        "params": {
          "start_time": "2018-02-01T00:00:00Z",
          "end_time": "2018-02-02T00:00:00Z",
          "granularity": "DAY",
          "keywords": [
            "developers"
          ]
        }
      },
      "data": {
        "related_keywords": [
          "dev",
          "developer",
          "coders",
          "mysql",
          "devs",
          "#technology",
          "#developers",
          "security",
          "programmers",
          "#tech",
          "javascript",
          "#iot",
          "#bigdata",
          "cloud",
          "devops",
          "php",
          "developer",
          "programmer",
          "engineer",
          "big data",
          "agile",
          "app",
          "programming",
          "ios",
          "maker",
          "startups",
          "developer's",
          "java",
          "#devops",
          "startup"
        ],
        "tweet_volume": [
          15707
        ]
      }
    }
```

<div id="tailored-audience-permissions">
  ### Autorizzazioni per Pubblico personalizzato
</div>

<Button href="https://app.getpostman.com/run-collection/369a02c0adc626ff6a06#?env%5BTwitter%20Ads%20API%5D=W3sia2V5IjoiYWNjb3VudF9pZCIsInZhbHVlIjoieW91cl9hZHNfYWNjb3VudF9pZCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidmVyc2lvbiIsInZhbHVlIjoiNSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfa2V5IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX2tleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfc2VjcmV0IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX3NlY3JldCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiYWNjZXNzX3Rva2VuIiwidmFsdWUiOiJ5b3VyX2FjY2Vzc190b2tlbiIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidG9rZW5fc2VjcmV0IiwidmFsdWUiOiJ5b3VyX3Rva2VuX3NlY3JldCIsImVuYWJsZWQiOnRydWV9XQ==">
  Esegui in Postman
</Button>

#### GET accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions[](#get-accounts-account-id-tailored-audiences-tailored-audience-id-permissions "Permalink to this headline")

Recupera i dettagli di alcune o tutte le autorizzazioni associate al Pubblico personalizzato specificato.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L'identificatore dell'account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell'API Inserzionisti, esclusa [GET accounts](/it/x-ads-api/campaign-management#accounts). L'account specificato deve essere associato all'utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| tailored\_audience\_id  <br />_required_ | Riferimento al Pubblico personalizzato con cui operi nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `1nmth` |
| count  <br />_optional_ | Specifica il numero di record da recuperare per ciascuna richiesta.<br /><br />Tipo: int<br /><br />Predefinito: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Specifica un cursore per ottenere la pagina successiva di risultati. Vedi [Pagination](/it/x-ads-api/introduction) per maggiori informazioni.<br /><br />Tipo: string<br /><br />Esempio: `8x7v00oow` |
| granted\_account\_ids  <br />_optional_ | Limita la risposta agli account desiderati specificando un elenco di identificatori separati da virgola. È possibile fornire fino a 200 ID.<br /><br />Tipo: string<br /><br />Esempio: `18ce54aymz3` |
| sort\_by  <br />_optional_ | Ordina per attributo supportato in ordine crescente o decrescente. Vedi [Sorting](/it/x-ads-api/introduction) per maggiori informazioni.<br /><br />Tipo: string<br /><br />Esempio: `created_at-asc` |
| tailored\_audience\_permission\_ids  <br />_optional_ | Limita la risposta alle autorizzazioni del Pubblico personalizzato desiderate specificando un elenco di identificatori separati da virgola. È possibile fornire fino a 200 ID.<br /><br />Tipo: string<br /><br />Esempio: `ri` |
| with\_total\_count  <br />_optional_ | Include l'attributo di risposta `total_count`.<br /><br />**Nota**: Questo parametro e `cursor` sono mutuamente esclusivi.<br /><br />**Nota**: Le richieste che includono `total_count` avranno limiti di frequenza inferiori, attualmente pari a 200 ogni 15 minuti.<br /><br />Tipo: boolean<br /><br />Predefinito: `false`  <br />Valori possibili: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/1nmth/permissions`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "tailored_audience_id": "1nmth"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "tailored_audience_id": "1nmth",
          "permission_level": "READ_ONLY",
          "id": "ri",
          "created_at": "2017-06-08T23:17:59Z",
          "granted_account_id": "18ce54aymz3",
          "updated_at": "2017-06-08T23:17:59Z",
          "deleted": false
        }
      ]
    }

```

#### POST accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions[](#post-accounts-account-id-tailored-audiences-tailored-audience-id-permissions "Permalink to this headline")

Crea un nuovo oggetto autorizzazione che consente di condividere il Pubblico personalizzato specificato con un determinato account.

**Nota**: La creazione o la modifica delle autorizzazioni per un Pubblico personalizzato richiede che il pubblico sia di proprietà dell’account che sta tentando di modificarle. Puoi verificare la proprietà di un Pubblico personalizzato consultando l’attributo di risposta `is_owner` nella risposta per il pubblico in questione.

**Nota**: I pubblici possono essere condivisi solo tra account pubblicitari appartenenti alla stessa azienda oppure se l’account pubblicitario proprietario del pubblico dispone della funzionalità di account `SHARE_AUDIENCE_OUTSIDE_BUSINESS`.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_required_ | L’identificatore dell’account in uso. Compare nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell’API Advertiser, escluso [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| granted\_account\_id  <br />_required_ | L’account a cui desideri concedere le autorizzazioni sul Pubblico personalizzato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54aymz3` |
| permission\_level  <br />_required_ | Il tipo di accesso al Pubblico personalizzato che deve avere `granted_account_id`.<br /><br />Tipo: enum<br /><br />Valori possibili: `READ_ONLY`, `READ_WRITE` |
| tailored\_audience\_id  <br />_required_ | Riferimento al Pubblico personalizzato su cui stai operando nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/2906h/permissions?granted_account_id=18ce54aymz3&permission_level=READ_ONLY`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "granted_account_id": "18ce54aymz3",
          "permission_level": "READ_ONLY",
          "tailored_audience_id": "2906h"
        }
      },
      "data": {
        "tailored_audience_id": "2906h",
        "permission_level": "READ_ONLY",
        "id": "14m",
        "created_at": "2017-09-12T23:49:34Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-09-12T23:49:34Z",
        "deleted": false
      }
    }
```

#### DELETE accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions/:tailored\_audience\_permission\_id[](#delete-accounts-account-id-tailored-audiences-tailored-audience-id-permissions-tailored-audience-permission-id "Permalink to this headline")

Revoca l’autorizzazione specificata per la condivisione del Pubblico personalizzato.

**Nota**: Per creare o modificare le autorizzazioni di un pubblico personalizzato, il pubblico deve essere di proprietà dell’account che tenta di modificarle. Puoi verificare la proprietà di un pubblico personalizzato consultando l’attributo di risposta `is_owner` nella risposta relativa a un determinato pubblico.

Una volta revocata, garantiamo che l’account a cui era stata concessa l’autorizzazione (`granted_account_id`) non potrà indirizzare il pubblico nelle campagne future. Le campagne esistenti continueranno a essere eseguite con i pubblici condivisi; le campagne non si interrompono e il pubblico non viene rimosso dalla campagna. Non è possibile copiare questa campagna dopo la revoca dell’autorizzazione alla condivisione del pubblico.

**URL della risorsa[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions/:tailored_audience_permission_id`

**Parametri[](#parameters "Permalink to this headline")**

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_obbligatorio_ | L’identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell’API X Ads, escluso [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| tailored\_audience\_id  <br />_obbligatorio_ | Riferimento al pubblico personalizzato con cui operi nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `1nmth` |
| tailored\_audience\_permission\_id  <br />_obbligatorio_ | Riferimento all’autorizzazione del pubblico personalizzato con cui operi nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `ri` |

**Esempio di richiesta[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/1nmth/permissions/ri`

**Esempio di risposta[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "tailored_audience_permission_id": "ri",
          "tailored_audience_id": "1nmth"
        }
      },
      "data": {
        "tailored_audience_id": "1nmth",
        "permission_level": "READ_ONLY",
        "id": "ri",
        "created_at": "2017-06-08T23:17:59Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-08-30T18:29:35Z",
        "deleted": true
      }
    }
```

<div id="targeted-audiences">
  ### Pubblici target
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Esegui in Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id/targeted[](#get-accounts-account-id-custom-audiences-custom-audience-id-targeted "Permalink a questo titolo")

Recupera un elenco di line item e campagne, attivi o completi, che hanno come target il `custom_audience_id` indicato

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_required_ | L'identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell’API X Ads, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Riferimento al Pubblico personalizzato utilizzato nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2906h` |
| with\_active  <br />_optional_ | Se `false`, include i line item con stato `servable=false`<br /><br />Tipo: boolean<br /><br />Predefinito: `true`  <br />Valori possibili: `true`, `false` |
| cursor  <br />_optional_ | Specifica un cursore per ottenere la pagina successiva di risultati. Consulta [Paginazione](/it/x-ads-api/introduction) per ulteriori informazioni.  <br />  <br />Tipo: string  <br />  <br />Esempio: `8x7v00oow` |

**Example Request[](#example-request "Permalink a questo titolo")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h/targeted`

**Example Response[](#example-response "Permalink a questo titolo")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "2906h",
        }
      },
      "next_cursor": null,
      "data": [
        {
          "campaign_id": "59hod",
          "campaign_name": "test-campaign",
          "line_items": [
            {
              "id": "5gzog",
              "name": "test-line-item",
              "servable": true
            }
          ]
        },
        {
          "campaign_id": "arja7",
          "campaign_name": "Untitled campaign",
          "line_items": [
            {
              "id": "bjw1q",
              "name": null,
              "servable": true
            }
          ]
        }
      ]
    }
```

<div id="custom-audiences-users">
  ### Utenti dei Pubblici personalizzati
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Esegui in Postman
</Button>

#### POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/users[](#post-accounts-account-id-custom-audiences-custom-audience-id-users "Permalink a questo titolo")

Questo endpoint consente ai partner di aggiungere, aggiornare e rimuovere utenti da un determinato `custom_audience_id`. L’endpoint accetta anche più tipi di identificatori per ciascun utente.

Tutti i dati forniti nel campo `users` della richiesta, **tranne** `partner_user_id`, devono essere sottoposti a hashing con `SHA256` e [normalizzati](/it/x-ads-api/audiences#twitter-user-id-normalization).

**Richieste batch**

- La dimensione massima del batch è `2500` **per questo endpoint**. La dimensione è determinata dal numero di operazioni (`Update`/`Delete`) per richiesta. Ad esempio, più di 2500 oggetti operazione (`{"operation_type": "Update/Delete", [..] }`) in un unico array producono un errore.
- La dimensione massima del body della richiesta POST accettata da questo endpoint è `5,000,000` byte.
- I limiti di frequenza per questo endpoint sono 1500 per finestra di 1 minuto.
- Tutti i parametri sono inviati nel body della richiesta ed è richiesto il `Content-Type` `application/json`.
- Le richieste batch falliscono o riescono insieme come gruppo e tutte le risposte API, sia di errore sia di successo, preservano l’ordine degli elementi della richiesta iniziale.

**Risposte batch**

La risposta restituita dall’API X Ads contiene due campi, `success_count` e `total_count`. Questi valori devono sempre essere uguali e rappresentano il numero di record nella richiesta che sono stati elaborati dal backend. Se il numero di record inviati nel body della richiesta **non** è uguale a `success_count` e `total_count`, la situazione va considerata un errore e richiede un nuovo tentativo.

**Errori batch**

- Gli errori a livello di richiesta (es. dimensione massima del batch superata) sono riportati nella risposta sotto l’oggetto `errors`.
- Gli errori a livello di elemento (es. parametri obbligatori mancanti) sono riportati nella risposta sotto l’oggetto `operation_errors`.
- L’indice dell’errore in `operation_errors` fa riferimento all’indice dell’elemento di input, con il relativo messaggio di errore.

<div id="resource-url">
  #### URL della risorsa[](#resource-url "Permalink a questo titolo")
</div>

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/users`

<div id="parameters">
  #### Parametri[](#parameters "Permalink to this headline")
</div>

| Nome | Descrizione |
| :--- | :--- |
| operation\_type  <br />_obbligatorio_ | Il tipo di operazione per il gruppo `users` in esecuzione.<br /><br />Tipo: enum<br /><br />Valori possibili: `Update`, `Delete` |
| params  <br />_obbligatorio_ | Un oggetto JSON contenente l'array `users` e i timestamp `effective_at` ed `expires_at`.<br /><br />Tipo: JSON |
| users  <br />_obbligatorio_ | Un array di oggetti JSON con tutti i parametri per un singolo utente.<br /><br />Tipo: JSON |
| effective\_at  <br />_opzionale_ | L'ora UTC in cui l'associazione/i al pubblico personalizzato dovrebbe entrare in vigore. Espressa in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). Predefinito: data e ora correnti.<br /><br />Tipo: string<br /><br />Esempio: `2017-07-05T07:00:00Z` |
| expires\_at  <br />_opzionale_ | L'ora UTC in cui l'associazione/i al pubblico personalizzato dovrebbe scadere. L'ora specificata deve essere successiva al valore di `effective_at`. Espressa in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). Predefinito: 13 mesi dal timestamp della richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2017-07-05T07:00:00Z` |

Dato l'approccio multi-chiave all'oggetto `users`, ogni elemento di questo oggetto è documentato di seguito:

| Nome | Descrizione |
| :--- | :--- |
| email  <br />_opzionale_ | Indirizzo/i email dell'utente.<br /><br />Tipo: Array\[String] |
| device\_id  <br />_opzionale_ | IDFA/AdID/Android ID<br /><br />Tipo: Array\[String] |
| handle  <br />_opzionale_ | Gli handle @ appartenenti all'utente<br /><br />Tipo: Array\[String] |
| twitter\_id  <br />_opzionale_ | L'ID X appartenente all'utente<br /><br />Tipo: Array\[String] |
| phone\_number  <br />_opzionale_ | Numero/i di telefono dell'utente<br /><br />Tipo: Array\[String] |
| partner\_user\_id  <br />_opzionale_ | L'ID dell'utente nel sistema dei partner.<br /><br />Tipo: Array\[String] |

<div id="example-request">
  #### Esempio di richiesta[](#example-request "Permalink to this headline")
</div>

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/users`

```
    [
      {
        "operation_type": "Update",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "4798b8bbdcf6f2a52e527f46a3d7a7c9aefb541afda03af79c74809ecc6376f3"
              ],
              "handle": [
                "7352f353c460e74c7ae226952d04f8aa307b12329c5512ec8cb6f1a0f8f9b2cb",
                "49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d"
              ]
            },
            {
              "email": [
                "5bf13d5ad4200407c5bc8b9bb578e425d05ef936fd488e3799a9d0806669223c"
              ],
              "twitter_id": [
                "34d56c7159a7eea941f359653029410f813f65a1d2d13ecc5ccbdd5a8cb755cf",
                "00e7b76c9739dec57f4c4a20ec021a20ffcf26bd00f519b17ea00f0ed6048f85"
              ]
            }
          ]
        }
      },
      {
        "operation_type": "Delete",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "device_id": [
                "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"
              ],
              "email": [
                "4798b8bbdcf6f2a52e527f46a3d7a7c9aefb541afda03af79c74809ecc6376f3"
              ],
              "handle": [
                "461222f5dd690a20651c3d19848015cb0369db3f8e937571ffb775de70750847"
              ],
              "twitter_id": [
                "c623c7e163984493b46c547088542e95d0aaa529bc52bbecce3ff91eb6b7843b"
              ]
            },
            {
              "email": [
                "5bf13d5ad4200407c5bc8b9bb578e425d05ef936fd488e3799a9d0806669223c"
              ],
              "twitter_id": [
                "858cdc7f313f84a3f3c48e9a6323307c1ef1bb7439b8e3623e140454b0fd8fa5",
                "bb074e154657b91d99bd1bb3757409149670e8ae7a0fe9136fae29a26a7881c8"
              ]
            }
          ]
        }
      }
    ]
```

<div id="example-response">
  #### Esempio di risposta[](#example-response "Permalink a questo titolo")
</div>

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "1nmth"
        }
      },
      "data": {
        "success_count": 4,
        "total_count": 4
      }
    }
```

<div id="custom-audience-permissions">
  ### Autorizzazioni del pubblico personalizzato
</div>

<Button href="https://app.getpostman.com/run-collection/369a02c0adc626ff6a06#?env%5BTwitter%20Ads%20API%5D=W3sia2V5IjoiYWNjb3VudF9pZCIsInZhbHVlIjoieW91cl9hZHNfYWNjb3VudF9pZCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidmVyc2lvbiIsInZhbHVlIjoiNSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfa2V5IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX2tleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfc2VjcmV0IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX3NlY3JldCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiYWNjZXNzX3Rva2VuIiwidmFsdWUiOiJ5b3VyX2FjY2Vzc190b2tlbiIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidG9rZW5fc2VjcmV0IiwidmFsdWUiOiJ5b3VyX3Rva2VuX3NlY3JldCIsImVuYWJsZWQiOnRydWV9XQ==">
  Esegui con Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions[](#get-accounts-account-id-custom-audiences-custom-audience-id-permissions "Permalink to this headline")

Recupera i dettagli di alcune o tutte le autorizzazioni associate al Pubblico personalizzato specificato.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L'identificatore dell'account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell'API Inserzionisti, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L'account specificato deve essere associato all'utente autenticato.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Un riferimento al Pubblico personalizzato a cui si fa riferimento nella richiesta.<br /><br />Type: string<br /><br />Example: `1nmth` |
| count  <br />_optional_ | Specifica il numero di record da recuperare per ogni singola richiesta.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Specifica un cursore per ottenere la pagina successiva dei risultati. Vedi [Pagination](/it/x-ads-api/introduction) per maggiori informazioni.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| granted\_account\_ids  <br />_optional_ | Limita la risposta ai soli account desiderati specificando un elenco di identificatori separati da virgola. È possibile fornire fino a 200 ID.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| sort\_by  <br />_optional_ | Ordina in base a un attributo supportato, in ordine crescente o decrescente. Vedi [Sorting](/it/x-ads-api/fundamentals/sorting) per maggiori informazioni.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| custom\_audience\_permission\_ids  <br />_optional_ | Limita la risposta alle sole autorizzazioni del Pubblico personalizzato desiderate specificando un elenco di identificatori separati da virgola. È possibile fornire fino a 200 ID.<br /><br />Type: string<br /><br />Example: `ri` |
| with\_total\_count  <br />_optional_ | Include l'attributo di risposta `total_count`.<br /><br />**Nota**: Questo parametro e `cursor` sono mutuamente esclusivi.<br /><br />**Nota**: Le richieste che includono `total_count` avranno limiti di frequenza inferiori, attualmente impostati a 200 ogni 15 minuti.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/permissions`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "1nmth"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "custom_audience_id": "1nmth",
          "permission_level": "READ_ONLY",
          "id": "ri",
          "created_at": "2017-06-08T23:17:59Z",
          "granted_account_id": "18ce54aymz3",
          "updated_at": "2017-06-08T23:17:59Z",
          "deleted": false
        }
      ]
    }
```

#### POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions[](#post-accounts-account-id-custom-audiences-custom-audience-id-permissions "Permalink to this headline")

Crea un nuovo oggetto autorizzazione che consente di condividere il pubblico specificato con un determinato account.

**Nota**: La creazione o la modifica delle autorizzazioni per un pubblico personalizzato richiede che il pubblico sia di proprietà dell’account che tenta di modificarle. Puoi verificare la titolarità di un pubblico personalizzato consultando l’attributo di risposta `is_owner` nella risposta per il pubblico in questione.

**Nota**: I pubblici possono essere condivisi solo tra account pubblicitari appartenenti alla stessa azienda oppure se l’account pubblicitario che possiede il pubblico dispone della funzionalità dell’account `SHARE_AUDIENCE_OUTSIDE_BUSINESS`.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_obbligatorio_ | L’identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell’API Advertiser, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| granted\_account\_id  <br />_obbligatorio_ | L’account a cui desideri concedere le autorizzazioni sul pubblico personalizzato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54aymz3` |
| permission\_level  <br />_obbligatorio_ | Il tipo di accesso al pubblico personalizzato che `granted_account_id` deve avere.<br /><br />Tipo: enum<br /><br />Valori possibili: `READ_ONLY`, `READ_WRITE` |
| custom\_audience\_id  <br />_obbligatorio_ | Il riferimento al pubblico personalizzato su cui stai operando nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

```
POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h/permissions?granted_account_id=18ce54aymz3&permission_level=READ_ONLY
```

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "granted_account_id": "18ce54aymz3",
          "permission_level": "READ_ONLY",
          "custom_audience_id": "2906h"
        }
      },
      "data": {
        "custom_audience_id": "2906h",
        "permission_level": "READ_ONLY",
        "id": "14m",
        "created_at": "2017-09-12T23:49:34Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-09-12T23:49:34Z",
        "deleted": false
      }
    }
```

#### DELETE accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions/:custom\_audience\_permission\_id[](#delete-accounts-account-id-custom-audiences-custom-audience-id-permissions-custom-audience-permission-id "Permalink a questo titolo")

Revoca l’autorizzazione di condivisione del Pubblico personalizzato specificato.

**Nota**: La creazione o la modifica delle autorizzazioni per un pubblico personalizzato richiede che il pubblico sia di proprietà dell’account che tenta di modificarle. Puoi verificare la titolarità di un pubblico personalizzato controllando l’attributo di risposta `is_owner` nella risposta per un dato pubblico.

Una volta revocata, garantiamo che l’account destinatario (`granted_account_id`) non potrà più utilizzare il pubblico come target nelle campagne future. Le campagne esistenti continueranno a essere eseguite con i pubblici condivisi; le campagne non si interrompono e il pubblico non viene rimosso dalla campagna. Non è possibile copiare questa campagna dopo la revoca dell’autorizzazione di condivisione del pubblico.

**Resource URL[](#resource-url "Permalink a questo titolo")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions/:custom_audience_permission_id`

**Parameters[](#parameters "Permalink a questo titolo")**

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_obbligatorio_ | L’identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell’API per inserzionisti, escluso [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| custom\_audience\_id  <br />_obbligatorio_ | Un riferimento al pubblico personalizzato con cui operi nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `1nmth` |
| custom\_audience\_permission\_id  <br />_obbligatorio_ | Un riferimento all’autorizzazione del pubblico personalizzato con cui operi nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `ri` |

**Example Request[](#example-request "Permalink a questo titolo")**

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/permissions/ri`

**Example Response[](#example-response "Permalink a questo titolo")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_permission_id": "ri",
          "custom_audience_id": "1nmth"
        }
      },
      "data": {
        "custom_audience_id": "1nmth",
        "permission_level": "READ_ONLY",
        "id": "ri",
        "created_at": "2017-06-08T23:17:59Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-08-30T18:29:35Z",
        "deleted": true
      }
    }
```

<div id="custom-audiences">
  ### Pubblici personalizzati
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Esegui in Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences[](#get-accounts-account-id-custom-audiences "Permalink to this headline")

Recupera i dettagli di alcuni o di tutti i Pubblici personalizzati associati all'account corrente.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L'identificatore dell'account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell'API per inserzionisti, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L'account specificato deve essere associato all'utente autenticato.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| count  <br />_optional_ | Specifica il numero di record da tentare di recuperare per ciascuna richiesta.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Specifica un cursore per ottenere la pagina successiva di risultati. Vedi [Pagination](/it/x-ads-api/introduction) per maggiori informazioni.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| permission\_scope  <br />_optional_ | Consente di filtrare la risposta alle liste di tua proprietà o a quelle condivise con te. Per impostazione predefinita, senza specificare questo parametro vedrai solo i pubblici di tua proprietà.<br /><br />Type: enum<br /><br />Default: `OWNER`  <br />Possible values: `OWNER`, `SHARED` |
| q  <br />_optional_ | Una query facoltativa per limitare la risorsa per `name`.<br /><br />**Nota**: Esegue un confronto sul prefisso senza distinzione tra maiuscole e minuscole.<br /><br />Type: string<br /><br />Min, Max length: `1`, `255` |
| sort\_by  <br />_optional_ | Ordina per un attributo supportato in ordine crescente o decrescente. Vedi [Sorting](/it/x-ads-api/fundamentals/sorting) per maggiori informazioni.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| custom\_audience\_ids  <br />_optional_ | Limita la risposta ai soli Pubblici personalizzati desiderati specificando un elenco di identificatori separati da virgole. È possibile fornire fino a 200 ID.<br /><br />Type: string<br /><br />Example: `1nmth` |
| with\_deleted  <br />_optional_ | Includi i risultati eliminati nella richiesta.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |
| with\_total\_count  <br />_optional_ | Includi l'attributo di risposta `total_count`.<br /><br />**Nota**: Questo parametro e `cursor` sono mutuamente esclusivi.<br /><br />**Nota**: Le richieste che includono `total_count` avranno limiti di frequenza inferiori, attualmente pari a 200 ogni 15 minuti.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences?custom_audience_ids=1nmth`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "custom_audience_ids": [
            "1nmth"
          ],
          "account_id": "18ce54d4x5t"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "targetable": true,
          "name": "twurl-using-subshell-for-file",
          "targetable_types": [
            "CRM",
            "EXCLUDED_CRM"
          ],
          "audience_type": "CRM",
          "description": null,
          "permission_level": "READ_WRITE",
          "owner_account_id": "18ce54d4x5t",
          "id": "1nmth",
          "reasons_not_targetable": [],
          "created_at": "2017-01-08T08:19:58Z",
          "updated_at": "2017-01-08T16:21:13Z",
          "partner_source": "OTHER",
          "deleted": false,
          "audience_size": 1470
        }
      ]
    }
```

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#get-accounts-account-id-custom-audiences-custom-audience-id "Permalink to this headline")

Recupera specifici Pubblici personalizzati associati all’account corrente.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L’identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell’API per inserzionisti, esclusa [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Riferimento al Pubblico personalizzato a cui si fa riferimento nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2906h` |
| with\_deleted  <br />_optional_ | Includi nella risposta anche i risultati eliminati.<br /><br />Tipo: boolean<br /><br />Predefinito: `false`  <br />Valori possibili: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "custom_audience_id": "2906h",
          "account_id": "18ce54d4x5t"
        }
      },
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": 140321
      }
    }
```

#### POST accounts/:account\_id/custom\_audiences[](#post-accounts-account-id-custom-audiences "Permalink to this headline")

Crea un nuovo Pubblico personalizzato placeholder associato all’account corrente.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L’identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell’API Inserzionisti, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| name  <br />_required_ | Il nome visualizzato per questo pubblico. Deve essere un valore univoco; in caso contrario verrà restituito un errore.<br /><br />Type: string<br /><br />Example: `ads api users` |
| description  <br />_optional_ | Una descrizione per questo pubblico.<br /><br />Type: string<br /><br />Example: `Collection of all users of the Ads API` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences?name=developers`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "name": "developers"
        }
      }
    }
```

#### PUT accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#put-accounts-account-id-custom-audiences-custom-audience-id "Permalink a questo titolo")

Aggiorna lo specifico Pubblico personalizzato associato all’account corrente.

**Resource URL[](#resource-url "Permalink a questo titolo")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Permalink a questo titolo")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | Identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell’API Inserzionisti, escluso [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Riferimento al Pubblico personalizzato con cui operi in questa richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2906h` |
| name  <br />_optional_ | Nome visualizzato per questo pubblico. Deve essere un valore univoco; in caso contrario, verrà restituito un errore.<br /><br />Tipo: string<br /><br />Esempio: `ads api users` |
| description  <br />_optional_ | Descrizione per questo pubblico.<br /><br />Tipo: string<br /><br />Esempio: `Raccolta di tutti gli utenti dell’API X Ads` |

**Example Request[](#example-request "Permalink a questo titolo")**

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h?name=developers_changed`

**Example Response[](#example-response "Permalink a questo titolo")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers_changed",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "is_owner": true,
        "id": "2906h",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "name": "developers_changed"
        }
      }
    }
```

#### POST batch/accounts/:account\_id/custom\_audiences[](#post-batch-accounts-account-id-custom-audiences "Permalink to this headline")

Consente la creazione in batch di Pubblici personalizzati. Consulta la pagina [Panoramica dei Pubblici personalizzati](/it/x-ads-api/audiences) per informazioni sui pubblici.

Nota: Questo endpoint batch è attualmente in beta chiusa e disponibile per un numero selezionato di inserzionisti. Durante questo periodo di beta, possono essere creati solo Pubblici flessibili basati su pubblici personalizzati mobile.

**Richieste batch**

- La dimensione massima attuale del batch è 10.
- Tutti i parametri sono inviati nel corpo della richiesta ed è richiesto un `Content-Type` di `application/json`.
- Le richieste batch falliscono o riescono insieme come gruppo e tutte le risposte API, sia di errore sia di successo, preservano l’ordine degli elementi della richiesta iniziale.

**Risposte batch**

Le risposte delle API batch restituiscono una raccolta ordinata di elementi. Per il resto, sono identiche nella struttura ai corrispondenti endpoint a elemento singolo.

**Errori batch**

- Gli errori a livello di richiesta (ad es. dimensione massima del batch superata) sono mostrati nella risposta sotto l’oggetto `errors`.
- Gli errori a livello di elemento (ad es. parametro obbligatorio mancante) sono mostrati nella risposta sotto l’oggetto `operation_errors`.

**Pubblici flessibili**

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Esegui in Postman
</Button>

- I Pubblici flessibili sono immutabili una volta creati.
- I Pubblici personalizzati sono trasmessi in una struttura ad albero con combinazioni di logica booleana per creare Pubblici flessibili.
- È possibile utilizzare fino a 10 nodi foglia di Pubblici personalizzati per creare un Pubblico flessibile.

**URL della risorsa[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/batch/accounts/:account_id/custom_audiences`

**Parametri[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L'identificatore dell'account utilizzato. Compare nel percorso della risorsa ed è in genere un parametro richiesto per tutte le richieste all'API Advertiser, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L'account specificato deve essere associato all'utente autenticato.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| audience\_type  <br />_required_ | Il tipo di pubblico da creare.<br /><br />Type: enum<br /><br />Possible values: `FLEXIBLE`, `MOBILE_AUDIENCE` |
| child\_segments  <br />_required_ | Un array di oggetti che definiscono il sottoinsieme dei membri di un Pubblico personalizzato che desideri raggiungere. Ogni oggetto deve contenere `custom_audience_id`, `frequency`, `frequency_comparator`, `lookback_window`, `negate` e, in alcuni casi, ulteriori `child_segments`.<br /><br />Type: array |
| name  <br />_required_ | Il nome visualizzato per il pubblico. È necessario utilizzare un valore univoco; in caso contrario verrà restituito un errore.<br /><br />Type: string<br /><br />Example: `my_flexible_audience_name` |
| operation\_type  <br />_required_ | Il tipo di operazione per elemento eseguita.<br /><br />Type: enum<br /><br />Possible values: `Create`, `Update`, `Delete` |
| boolean\_operator  <br />_sometimes required_ | La relazione logica tra i segmenti figli nell'oggetto padre (contenitore). Obbligatorio se child\_segments non è vuoto per l'oggetto padre.<br /><br />Type: enum<br /><br />Possible values: `AND`, `OR` |
| lookback\_window  <br />_sometimes required_ | Un intero che specifica l'intervallo di giorni entro cui l'utente ha compiuto la specifica azione ed è rientrato nel pubblico personalizzato indicato.<br /><br />Type: int<br /><br />Possible values: `1`, `7`, `14`, `30` |
| segments  <br />_sometimes required_ | Un oggetto contenente `boolean_operator` e `child_segments` che definiscono il sottoinsieme dei membri di un Pubblico personalizzato che desideri raggiungere.<br /><br />Type: object |
| custom\_audience\_id  <br />_sometimes required_ | L'ID del pubblico personalizzato da utilizzare come segmento figlio.<br /><br />Type: string<br /><br />Example: `tyfo` |
| frequency  <br />_optional_ | Un intero che specifica, all'interno della lookback window, la frequenza con cui l'utente ha compiuto la specifica azione ed è rientrato nel pubblico personalizzato indicato.<br /><br />Type: int<br /><br />Default value: `1` |
| frequency\_comparator  <br />_optional_ | Il comparatore per la `frequency` passata nella richiesta.<br /><br />**Nota**: Nei valori sotto, `GTE` indica maggiore o uguale, `LT` minore di, e così via.<br /><br />Type: string<br /><br />Possible values: `NUM_GTE`, `NUM_GT`, `NUM_EQ`, `NUM_LTE`, `NUM_LT` Default value: `NUM_GTE` |
| negate  <br />_optional_ | Nega il segmento e quindi lo esclude dalla combinazione.<br /><br />Type: boolean<br /><br />Default value: `true`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/batch/accounts/18ce54d4x5t/custom_audiences`

```
    [
      {
        "operation_type":"Create",
        "params":{
          "name":"my_flexible_audience_name",
          "audience_type":"FLEXIBLE",
          "segments":{
            "boolean_operator":"AND",
            "child_segments":[
              {
                "custom_audience_id":"TYIF",
                "frequency":1,
                "frequency_comparator":"NUM_GT",
                "lookback_window":30,
                "negate":true,
                "child_segments":[

                ]
              },
              {
                "boolean_operator":"OR",
                "child_segments":[
                  {
                    "custom_audience_id":"TXR1",
                    "lookback_window":30,
                    "child_segments":[

                    ]
                  },
                  {
                    "custom_audience_id":"TYFO",
                    "frequency":1,
                    "frequency_comparator":"NUM_GT",
                    "lookback_window":30,
                    "negate":true,
                    "child_segments":[

                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
```

**Esempio di risposta[](#example-response "Permalink a questo titolo")**

```
    {
      "data": {
        "targetable": false,
        "name": "my_flexible_audience_name",
        "targetable_types": [
          "FLEXIBLE",
          "EXCLUDED_FLEXIBLE"
        ],
        "audience_type": "FLEXIBLE",
        "id": "13ld7",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "metadata": [
          {
            "custom_audience_id": "13ld7",
            "account_id": "qsx3w2",
            "name": "my_flexible_audience_name",
            "audience_source": "FLEXIBLE_AUDIENCE",
            "upload_status": "UPLOADED",
            "segments": {
              "boolean_operator": "AND",
              "frequency": 1,
              "frequency_comparator": "NUM_GTE",
              "negate": false,
              "child_segments": [
                {
                  "custom_audience_id": "tyif",
                  "lookback_window": 30,
                  "frequency": 1,
                  "frequency_comparator": "NUM_GT",
                  "negate": true,
                  "child_segments": [

                  ]
                },
                {
                  "boolean_operator": "OR",
                  "frequency": 1,
                  "frequency_comparator": "NUM_GTE",
                  "negate": false,
                  "child_segments": [
                    {
                      "custom_audience_id": "txr1",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GTE",
                      "negate": false,
                      "child_segments": [

                      ]
                    },
                    {
                      "custom_audience_id": "tyfo",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GT",
                      "negate": true,
                      "child_segments": [

                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "created_at": "2015-11-10T21:26:43Z",
        "updated_at": "2015-11-11T01:11:47Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": [
        {
          "params": {
            "name": "my_flexible_audience_name",
            "audience_type": "FLEXIBLE",
            "segments": {
              "boolean_operator": "AND",
              "child_segments": [
                {
                  "custom_audience_id": "TYIF",
                  "lookback_window": 30,
                  "frequency": 1,
                  "frequency_comparator": "NUM_GT",
                  "negate": true,
                  "child_segments": [

                  ]
                },
                {
                  "boolean_operator": "OR",
                  "child_segments": [
                    {
                      "custom_audience_id": "TXR1",
                      "lookback_window": 30,
                      "child_segments": [

                      ]
                    },
                    {
                      "custom_audience_id": "TYFO",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GT",
                      "negate": true,
                      "child_segments": [

                      ]
                    }
                  ]
                }
              ]
            },
            "account_id": "qsx3w2"
          },
          "operation_type": "Create"
        }
      ]
    }
```

#### DELETE accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#delete-accounts-account-id-custom-audiences-custom-audience-id "Permalink to this headline")

Elimina il Pubblico personalizzato specificato appartenente all’account corrente.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Permalink to this headline")**

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_obbligatorio_ | L’identificatore dell’account utilizzato. È presente nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell’API X Ads, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| custom\_audience\_id  <br />_obbligatorio_ | Il riferimento al Pubblico personalizzato con cui si sta operando nella richiesta.<br /><br />Tipo: string<br /><br />Esempio: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-30T18:09:00Z",
        "partner_source": "OTHER",
        "deleted": true,
        "audience_size": null
      },
      "request": {
        "params": {
          "custom_audience_id": "2906h",
          "account_id": "18ce54d4x5t"
        }
      }
    }
```

<div id="do-not-reach-lists">
  ### Liste Do Not Reach
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Esegui in Postman
</Button>

#### GET accounts/:account\_id/do\_not\_reach\_lists[](#get-accounts-account-id-do-not-reach-lists "Permalink to this headline")

Recupera i dettagli di una o di tutte le voci della Lista Do Not Reach associate all’account corrente.

**Nota**: Un `account_id` può avere al massimo una Lista Do Not Reach

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | Identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell’API X Ads, ad eccezione di [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| with\_deleted  <br />_optional_ | Includi nei risultati anche gli elementi eliminati.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54bgxky"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "targetable": false,
          "name": "Do Not Reach List",
          "description": "test DNRL",
          "id": "4kzrq",
          "reasons_not_targetable": [
            "TOO_SMALL"
          ],
          "created_at": "2021-10-28T22:09:29Z",
          "list_size": null,
          "updated_at": "2021-11-04T03:33:06Z",
          "deleted": false
        }
      ]
    }
```

#### POST accounts/:account\_id/do\_not\_reach\_lists[](#post-accounts-account-id-do-not-reach-lists "Permalink to this headline")

Crea una nuova Lista Do Not Reach associata all’account corrente.

**Nota**: Un `account_id` può avere al massimo una Lista Do Not Reach

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | L’identificatore dell’account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro richiesto per tutte le richieste dell’API Inserzionisti, escluso [GET accounts](/it/x-ads-api/campaign-management#accounts). L’account specificato deve essere associato all’utente autenticato.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| description  <br />_optional_ | Una descrizione per questo pubblico.<br /><br />Type: string<br /><br />Example: `A list of users to exclude` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists?description=A list of users to exclude`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "description": "A list of users to exclude",
          "account_id": "18ce54bgxky"
        }
      },
      "data": {
        "targetable": false,
        "name": "Do Not Reach List",
        "description": "A list of users to exclude",
        "id": "4ofrq",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2022-02-08T23:02:48Z",
        "list_size": null,
        "updated_at": "2022-02-08T23:02:48Z",
        "deleted": false
      }
    }
```

#### POST batch/accounts/:account\_id/do\_not\_reach\_lists/:do\_not\_reach\_list\_id/users[](#post-batch-accounts-account-id-do-not-reach-lists-do-not-reach-list-id-users "Permalink to this headline")

Questo endpoint consente di aggiungere, aggiornare e rimuovere utenti da un determinato `do_not_reach_list_id`. Questo endpoint accetta solo email come tipo valido di identificatore utente.

Tutti i dati forniti nel campo `emails` della richiesta devono essere sottoposti a hash utilizzando `SHA256` e [normalizzati](/it/x-ads-api/audiences#e-mail-normalization).

**Note**

- Un `account_id` può avere al massimo una Do Not Reach List
- Gli utenti aggiunti a questo elenco **devono** avere un timestamp `expires_at` impostato a meno di 13 mesi rispetto al timestamp corrente
- L'API Do Not Reach List non accetta un timestamp `effective_at` e predefinisce al timestamp corrente
- La Do Not Reach List non rimuove gli utenti da nessuno dei pubblici personalizzati dell'account, ma funge da esclusione di targeting per tutte le campagne erogate per l'account

**Richieste batch**

- La dimensione massima corrente del batch è `2500` **per questo endpoint**. La dimensione del batch è determinata dal numero di operazioni (`Update`/`Delete`) per richiesta. Ad esempio, più di 2500 oggetti operazione (`{"operation_type": "Update/Delete", [..] }`) in un singolo array causano un errore.
- La dimensione massima del body della richiesta POST che questo endpoint può accettare è `5,000,000` byte.
- I rate limit per questo endpoint sono 1500 per finestra di 1 minuto
- Tutti i parametri sono inviati nel body della richiesta ed è richiesto `Content-Type: application/json`.
- Le richieste batch falliscono o riescono insieme come gruppo e tutte le risposte API, sia di errore sia di successo, preservano l'ordine degli elementi della richiesta iniziale.

**Risposte batch**

La risposta restituita dall'API Ads contiene due campi, `success_count` e `total_count`. Questi valori devono sempre essere uguali e rappresentano il numero di record nella richiesta elaborati dal backend. Una situazione in cui il numero di record inviati nel body della richiesta **non** è uguale a `success_count` e `total_count` deve essere trattata come una condizione di errore, che richiede un nuovo tentativo.

**Errori batch**

- Gli errori a livello di richiesta (ad es. dimensione massima del batch superata) sono mostrati nella risposta sotto l'oggetto `errors`.
- Gli errori a livello di elemento (ad es. parametri obbligatori mancanti) sono mostrati nella risposta sotto l'oggetto `operation_errors`.
- L'indice dell'errore in `operation_errors` si riferisce all'indice dell'elemento di input, con il corrispondente messaggio di errore

**URL risorsa[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/batch/accounts/:account_id/do_not_reach_lists/:do_not_reach_list_id/users`

**Parametri[](#parameters "Permalink to this headline")**

| Nome | Descrizione |
| :--- | :--- |
| account\_id  <br />_obbligatorio_ | L'identificatore dell'account utilizzato. Compare nel percorso della risorsa ed è generalmente un parametro obbligatorio per tutte le richieste dell'API Inserzionisti, escluso [GET accounts](/it/x-ads-api/campaign-management#accounts). L'account specificato deve essere associato all'utente autenticato.<br /><br />Tipo: string<br /><br />Esempio: `18ce54d4x5t` |
| do\_not\_reach\_list\_id  <br />_obbligatorio_ | Un riferimento alla Do Not Reach List con cui operi nella richiesta<br /><br />Tipo: string<br /><br />Esempio: `2906h` |
| operation\_type  <br />_obbligatorio_ | Il tipo di operazione eseguito per ciascun gruppo `users`.<br /><br />Tipo: enum<br /><br />Valori possibili: `Update`, `Delete` |
| params  <br />_obbligatorio_ | Oggetto JSON contenente l'array `emails` e il timestamp `expires_at`.<br /><br />Tipo: JSON |
| users  <br />_obbligatorio_ | Array di oggetti JSON contenenti tutti i parametri per un singolo utente.<br /><br />Tipo: JSON |
| expires\_at  <br />_opzionale_ | L'ora UTC alla quale l'associazione dell'utente (o le associazioni dell'utente) deve scadere. L'ora specificata deve essere successiva al timestamp corrente. Espressa in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). Predefinito: 13 mesi dal timestamp corrente.<br /><br />Tipo: string<br /><br />Esempio: `2017-07-05T07:00:00Z` |

Dato l'approccio multi-chiave all'oggetto `users`, ciascun elemento di questo oggetto è documentato di seguito:

| Nome | Descrizione |
| :--- | :--- |
| email  <br />_facoltativo_ | Indirizzi email dell’utente.<br /><br />Tipo: Array\[String] |
| phone\_number  <br />_facoltativo_ | Numeri di telefono dell’utente<br /><br />Tipo: Array\[String] |

**Esempio di richiesta[](#example-request "Permalink to this headline")**

```
`POST https://ads-api.x.com/12/batch/accounts/18ce54bgxky/do_not_reach_lists/4kzro/users`

    [
      {
        "operation_type": "Update",
        "params": {
          "expires_at": "2023-01-22T00:00:00Z",
          "users": [
            {
              "email": [
                "FEAD76F6ADF99FFFB997AA4E3C8AD38FF531BC4C956DBD03CD0163F744D8AABC"
              ],
              "phone_number": [
                "CCABF1B62A202E0FE28BC6C014983C89A65451DD4482BD66A0ADB65366F38A9A"
              ]
            },
            {
              "email": [
                "FEAD76F6ADF99FFFB997AA4E3C8AD38FF531BC4C956DBD03CD0163F744D8AABA"
              ],
              "phone_number": [
                "CCABF1B62A202E0FE28BC6C014983C89A65451DD4482BD66A0ADB65366F38A9E"
              ]
            }
          ]
        }
      }
    ]
```

**Esempio di risposta[](#example-response "Permalink to this headline")**

```
    {
      "data": [
        {
          "success_count": 2,
          "total_count": 2
        }
      ],
      "request": [
        {
          "params": {
            "do_not_reach_list_id": "4ofrq",
            "expires_at": "2023-01-22T00:00:00Z",
            "account_id": "18ce54bgxky"
          },
          "operation_type": "Update"
        }
      ]
    }
```

#### DELETE accounts/:account\_id/do\_not\_reach\_lists/:do\_not\_reach\_list\_id[](#delete-accounts-account-id-do-not-reach-lists-do-not-reach-list-id "Permalink a questo titolo")

Elimina la Do Not Reach List specificata appartenente all’account corrente.

**URL della risorsa[](#resource-url "Permalink a questo titolo")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists/:do_not_reach_list_id`

**Parametri[](#parameters "Permalink a questo titolo")**

Nessuno

**Esempio di richiesta[](#example-request "Permalink a questo titolo")**

`DELETE https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists/4ofrp`

**Esempio di risposta[](#example-response "Permalink a questo titolo")**

```
    {
      "request": {
        "params": {
          "do_not_reach_list_id": "4ofrp",
          "account_id": "18ce54bgxky"
        }
      },
      "data": {
        "targetable": false,
        "name": "Do Not Reach List",
        "description": null,
        "id": "4ofrp",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2022-02-08T23:02:07Z",
        "list_size": null,
        "updated_at": "2022-02-08T23:02:21Z",
        "deleted": true
      }
    }
```