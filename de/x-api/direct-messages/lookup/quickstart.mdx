---
title: Schnellstart
sidebarTitle: Schnellstart
---

import { Button } from '/snippets/de/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Erste Schritte mit den Endpunkten zum Verwalten von Direct Messages
</div>

Dieses Schnellstart-Handbuch hilft Ihnen, mit Postman – einem Tool zum Verwalten und Ausführen von HTTP-Anfragen – Ihre erste Anfrage an die Direct-Message-Endpunkte zu stellen. Weitere Informationen zu unseren Postman-Collections finden Sie im Leitfaden [Using Postman](/de/tutorials/postman-getting-started).

Wenn Sie Python-basierte Beispiele ansehen möchten, besuchen Sie bitte unser GitHub-Repository [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code). Außerdem werden die offiziellen [Software Development Kits (SDKs) der X Developer Platform](/de/x-api/tools-and-libraries/sdks) aktualisiert, um diese Direct-Message-Endpunkte zu unterstützen.

<Note>
  **Voraussetzungen**

  Um diese Anleitung abzuschließen, benötigen Sie einen Satz von [Keys und Tokens](/de/resources/fundamentals/authentication), um Ihre Anfrage zu authentifizieren. Sie können diese Keys und Tokens generieren, indem Sie die folgenden Schritte ausführen:

  - [Registrieren Sie sich für ein Entwicklerkonto](https://developer.x.com/en/apply-for-access) und lassen Sie es genehmigen.
  - Erstellen Sie ein [Project](/de/resources/fundamentals/projects) und eine zugehörige [Developer App](/de/resources/fundamentals/developer-apps) im Developer-Portal.
  - Navigieren Sie zur „Keys and tokens“-Seite Ihrer App, um die erforderlichen Anmeldedaten zu generieren. Speichern Sie alle Anmeldedaten an einem sicheren Ort.
</Note>

<div id="steps-to-building-direct-message-lookup-requests">
  ### Schritte zum Erstellen von Direct-Message-Lookup-Anfragen
</div>

In diesem Beispiel erstellen wir in einer einzigen Anfrage eine neue Gruppenunterhaltung und fügen ihr unsere erste Nachricht hinzu. Anschließend fügen wir der erstellten Unterhaltung eine zweite Nachricht hinzu.

<div id="step-one-start-with-a-tool-or-library">
  #### Schritt eins: Beginnen Sie mit einem Tool oder einer Bibliothek
</div>

Um mit den Endpunkten zum Verwalten von Direktnachrichten zu arbeiten, verwenden wir das Tool Postman, um den Prozess zu vereinfachen. Eine vom X Developers-Team erstellte Sammlung von Beispielanfragen für die X-API v2 wird genutzt, um sechs Endpunkte zu erkunden, die zum Erstellen neuer Direktnachrichten und zum Auflisten von Ereignissen in Direktnachrichten-Unterhaltungen dienen.

Obwohl der Großteil der Sammlung vorab ausgefüllt ist, gibt es einige Details, die Sie anhand der X-App angeben müssen, die diese API-Anfragen ausführt. Laden bzw. aktualisieren wir zunächst die Sammlung.

Um die X-API-v2-Postman-Sammlung in Ihre Umgebung zu laden, klicken Sie bitte auf den folgenden Button:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X-API v2 zu Postman hinzufügen
</Button>

Sobald Sie die X-API-v2-Sammlung in Postman geladen haben, navigieren Sie zum Ordner „Manage Direct Messages“. Der Tab „Authorization“ dieses Ordners wurde, wo möglich, vorab ausgefüllt. Sie müssen einige Einstellungen anpassen, um die Authentifizierungsdetails Ihrer X-App einzutragen.

Dieser Ordner enthält außerdem drei Endpunkte zum Erstellen neuer Direktnachrichten. Beachten Sie, dass es auch einen Ordner „Direct Message lookup“ mit drei Endpunkten gibt, um Ereignisse in Direktnachrichten-Unterhaltungen abzurufen, einschließlich des Sendens und Empfangens von Nachrichten sowie des Beitritts und Austritts von Teilnehmenden.

Da das Erstellen von Gruppenunterhaltungen eine neue Funktion der X-API v2 ist, konzentriert sich dieses Beispiel darauf. Wir arbeiten mit dem Beispiel „New group DM and conversation“. Mithilfe dieser Anfrage erstellen wir eine Gruppenunterhaltung für Direktnachrichten.

Der nächste Schritt ist die Authentifizierung beim Endpunkt.

<div id="step-two-authenticate-your-request">
  #### Schritt zwei: Authentifizieren Sie Ihre Anfrage
</div>

Um eine Anfrage an die X-API korrekt zu stellen, müssen Sie nachweisen, dass Sie dazu berechtigt sind. Für eine erfolgreiche Anfrage an diesen Endpoint verwenden wir den [OAuth 2.0 Authorization Code Flow mit PKCE](de/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2). Sie können in Postman ein Access-Token generieren. 

Mit Postman können Sie die Authentifizierungsmethode auf Ordner- oder Anfrageebene festlegen. Hier konfigurieren wir die Authentifizierungsdetails auf Ordnerebene. Navigieren Sie zum Ordner "Manage Direct Messages", wählen Sie die Registerkarte "Authorization" und bestätigen Sie, dass der Type auf "OAuth 2.0" gesetzt ist und "Add auth data to" auf "Request Headers". Stellen Sie im Abschnitt "Current Token" sicher, dass der "Header Prefix" auf Bearer gesetzt ist.  

So konfigurieren und generieren Sie ein neues Token:

1. Erstellen Sie einen Token-Namen, z. B. "DM lookup".

2. Bestätigen Sie, dass **Grant Type** auf Authorization Code (with PKCE) gesetzt ist.

3. Legen Sie Ihre **Callback URL** fest. Aktualisieren Sie Ihre Callback URL so, dass sie exakt der Callback URL entspricht, die Ihrer Anwendung im [v2 Dev Portal](https://developer.x.com/en/portal/dashboard) zugeordnet ist. Bei der in diesem Beispiel verwendeten X-App ist die Callback URL auf [https://www.example.com](https://www.example.com/) gesetzt (beachten Sie: Da dies exakt übereinstimmen muss, würde [https://example.com](https://example.com) nicht funktionieren). 

4. Bestätigen Sie, dass **Auth URL** auf [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize) gesetzt ist.

5. Bestätigen Sie, dass **Access Token URL** auf [https://api.x.com/2/oauth2/token](https://api.x.com/2/oauth2/token) gesetzt ist.\
   **Client ID** – Kopieren Sie die OAuth 2.0 Client ID aus dem Developer Portal und fügen Sie sie ein\
   **Client Secret** – Dies benötigen Sie nur, wenn Sie einen App-Typ verwenden, der ein vertraulicher Client ist. Falls ja, kopieren Sie das OAuth 2.0 Client Secret aus dem Developer Portal und fügen Sie es ein. 

6. Bestätigen Sie, dass **Scope** auf dm.read dm.write tweet.read users.read gesetzt ist.

7. Bestätigen Sie, dass **State** auf "state" gesetzt ist.

8. Bestätigen Sie, dass **Client Authentication** auf Send as Basic Auth header gesetzt ist.

9. Klicken Sie auf "Get New Access Token" und klicken Sie im Rahmen des "Sign in with X"-Prozesses auf "Authorize app".

10. Klicken Sie auf die Schaltfläche "Proceed" und anschließend auf "Use Token", um ein Token zu generieren. 

11. Klicken Sie auf die Schaltfläche "Save", um diese Konfigurationsdetails zu speichern.

Es kann sein, dass Sie eine Meldung erhalten, dass Sie nicht bei X angemeldet sind. Wenn Sie diesen Fehler erhalten, melden Sie sich in dem X-Konto an, in dessen Namen Sie innerhalb von Postman posten möchten.

Nachdem diese OAuth 2.0-Details auf Ordnerebene festgelegt wurden, navigieren Sie zu jedem der Beispiele und deren Registerkarte "Authorization" und bestätigen Sie, dass deren Type auf "Inherit auth from parent" gesetzt ist. 

Beachten Sie, dass dieses Token bald abläuft und Sie es durch Klicken auf die Schaltfläche "Get New Access Token" neu generieren müssen. Dadurch wird der "Sign in with X"-Prozess ausgelöst und ein neues Token generiert, mit dem Sie Anfragen stellen können.

<div id="step-three-retrieve-direct-messages-conversation-events">
  #### Schritt drei: Konversationsereignisse von Direct Messages abrufen
</div>

Wenn Sie Konversationsereignisse von Direct Messages mit diesem Endpunkt abrufen, müssen Sie eine Konversations-ID angeben. Die Konversations-ID ist Teil des Endpunkt-Pfads: https://api.x.com/2/dm\_conversations/:dm\_conversation\_id/dm\_events

Navigieren Sie in Postman zum Tab „Params“ und geben Sie die ID der Konversation, für die Sie Ereignisse abrufen möchten, im Bereich „Path Variables“ ein.

Die Einstellung wäre:

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `dm_conversation_id` | `1228393702244134912` |

Mit dieser Konversation wird der resultierende Pfad zu https://api.x.com/2/dm\_conversations/1582103724607971328/dm\_events

Wenn Sie auf die Schaltfläche „Send“ klicken, erhalten Sie in der Antwort die Standardfelder des Direct-Message-Objekts: id, text und event\_type. Es gibt außerdem ein „meta“-Objekt mit der Anzahl der Ergebnisse sowie Pagination-Tokens, die zum Abrufen weiterer Ereignisse verwendet werden, falls verfügbar.

```
{
   "data": [
       {
           "event_type": "MessageCreate",
           "id": "1580705921830768647",
           "text": "hello to you two, this is a new group conversation."
       }
   ],
   "meta": {
       "result_count": 1,
       "next_token": "18LAA5FFPEKJA52G0G00ZZZZ",
       "previous_token": "1BLC45FFPEKJA52G0S00ZZZZ"
   }
}
```

Wenn Sie zusätzliche Felder erhalten möchten, müssen Sie diese in Ihrer Anfrage mit den Parametern [field](/de/x-api/fundamentals/fields) und/oder [expansion](/de/x-api/fundamentals/expansions) angeben.

Für diese Übung fordern wir zusätzliche Felder des dm\_event-Objekts an:

1. Die Standardfelder des Direct-Message-Objekts: id, text und event\_type.

2. Zusätzliche Direct-Message-Objektfelder: dm\_conversation\_id, created\_at, sender\_id, attachments, participant\_ids, referenced\_tweets

Navigieren Sie in Postman zum Tab „Params“ und fügen Sie im Tabellenbereich „Query Params“ das folgende Key:Value-Paar hinzu:

|     |     |
| :--- | :--- |
| Key | Value |
| dm\_event.fields | dm\_conversation\_id,created\_at,sender\_id,attachments,participant\_ids,referenced\_tweets |

Neben der Schaltfläche „Send“ sollte nun die folgende URL angezeigt werden:

https://api.x.com/2/dm\_conversations/:dm\_conversation\_id/dm\_events?dm\_event.fields=id,text,event\_type,dm\_conversation\_id,created\_at,sender\_id,attachments,participant\_ids,referenced\_tweets

<div id="step-four-make-your-request-and-review-your-response">
  #### Schritt vier: Senden Sie Ihre Anfrage und prüfen Sie die Antwort
</div>

Sobald alles eingerichtet ist, klicken Sie erneut auf die Schaltfläche „Send“, und Sie erhalten eine Antwort ähnlich der untenstehenden. Beachten Sie, dass diese Antwort alle verfügbaren dm\_event-Felder enthält.

```
{
   "data": [
       {
           "text": "hello to you two, this is a new group conversation.",
           "id": "1580705921830768647",
           "dm_conversation_id": "1580705921830768643",
           "event_type": "MessageCreate",
           "sender_id": "17200003",
           "created_at": "2022-10-13T23:43:54.000Z"
       }
   ],
   "meta": {
       "result_count": 1,
       "next_token": "18LAA5FFPEKJA52G0G00ZZZZ",
       "previous_token": "1BLC45FFPEKJA52G0S00ZZZZ"
   }
}
```