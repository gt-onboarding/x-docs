---
title: Kurzanleitung
sidebarTitle: Kurzanleitung
---

import { Button } from '/snippets/de/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Erste Schritte mit den Endpunkten zum Verwalten von Direct Messages
</div>

Diese Schnellstartanleitung hilft Ihnen, mit Postman – einem Tool zum Verwalten und Senden von HTTP-Anfragen – Ihre erste Anfrage an die Endpunkte für Direct Messages zu stellen. Weitere Informationen zu unseren Postman-Collections finden Sie in unserem Leitfaden [Postman verwenden](/de/tutorials/postman-getting-started).

Besuchen Sie unser GitHub-Repository mit [X-API v2-Beispielcode](https://github.com/xdevplatform/Twitter-API-v2-sample-code), wenn Sie Python-basierte Beispiele prüfen möchten. Außerdem werden die offiziellen [Software Development Kits (SDKs) der X Developer Platform](/de/x-api/tools-and-libraries/sdks) aktualisiert, um diese Direct-Message-Endpunkte zu unterstützen.  

<Note>
  **Voraussetzungen**

  Für diese Anleitung benötigen Sie einen Satz [Keys und Tokens](/de/resources/fundamentals/authentication), um Ihre Anfrage zu authentifizieren. Sie können diese Keys und Tokens generieren, indem Sie wie folgt vorgehen:

  - [Beantragen Sie ein Entwicklerkonto](https://developer.x.com/en/apply-for-access) und warten Sie auf die Freigabe.
  - Erstellen Sie im Developer-Portal ein [Projekt](/de/resources/fundamentals/projects) und eine zugehörige [Developer-App](/de/resources/fundamentals/developer-apps).
  - Navigieren Sie zur Seite „Keys and tokens“ Ihrer App, um die erforderlichen Anmeldedaten zu generieren. Speichern Sie alle Anmeldedaten an einem sicheren Ort.
</Note>

<div id="steps-to-building-manage-direct-message-requests">
  ### Schritte zum Erstellen und Verwalten von Direct-Message-Anfragen
</div>

In diesem Beispiel erstellen wir in einer einzigen Anfrage eine neue Gruppenkonversation und fügen unsere erste Nachricht hinzu. Anschließend fügen wir der erstellten Konversation eine zweite Nachricht hinzu.

<div id="step-one-start-with-a-tool-or-library">
  #### Schritt eins: Beginnen Sie mit einem Tool oder einer Bibliothek
</div>

Um mit den Endpunkten zum Verwalten von Direktnachrichten zu arbeiten, verwenden wir das Tool Postman, um den Prozess zu vereinfachen. Eine von XDev erstellte Sammlung von Beispielanfragen für die X-API v2 wird verwendet, um sechs Endpunkte zu erkunden, die zum Erstellen neuer Direktnachrichten und zum Auflisten von Ereignissen in Direktnachrichten-Unterhaltungen dienen.

Obwohl der Großteil der Sammlung vorab ausgefüllt ist, gibt es einige Details, die Sie bereitstellen müssen und die auf der X App basieren, die erstellt wurde, um diese API-Anfragen zu hosten. Zunächst laden bzw. aktualisieren wir die Sammlung.

Um die X-API-v2-Postman-Sammlung in Ihre Umgebung zu laden, klicken Sie bitte auf die folgende Schaltfläche:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X-API v2 zu Postman hinzufügen
</Button>

Sobald Sie die X-API-v2-Sammlung in Postman geladen haben, navigieren Sie zum Ordner „Manage Direct Messages“. Der Tab „Authorization“ dieses Ordners wurde, wo möglich, vorab ausgefüllt, und Sie können einige Einstellungen aktualisieren, um die Authentifizierungsdetails Ihrer X App zu hinterlegen. Dieser Ordner enthält auch drei Endpunkte zum Erstellen neuer Direktnachrichten. Beachten Sie, dass es auch einen Ordner „Direct Message lookup“ mit drei Endpunkten zum Abrufen von Ereignissen in Direktnachrichten-Unterhaltungen gibt, einschließlich Senden und Empfangen von Nachrichten sowie dem Beitritt und Austritt von Gesprächsteilnehmenden.

Da das Erstellen von Gruppenunterhaltungen eine neue, spannende Funktion der X-API v2 ist, konzentriert sich dieses Beispiel darauf. Wir arbeiten mit dem Beispiel „New group DM and conversation“. Mit dieser Anfrage erstellen wir eine Gruppenunterhaltung für Direktnachrichten.

Der nächste Schritt besteht darin, die Anfrage gegenüber dem Endpunkt zu authentifizieren.

**Schritt zwei: Authentifizieren Sie Ihre Anfrage**

Um eine Anfrage an die X-API korrekt zu stellen, müssen Sie sicherstellen, dass Sie die entsprechende Berechtigung haben. Für eine erfolgreiche Anfrage an diesen Endpunkt verwenden wir [OAuth 2.0 Authorization Code Flow with PKCE](de/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2). Sie können ein Zugriffstoken in Postman generieren.

Mit Postman können Sie die Authentifizierungsmethode auf Ordnerebene oder auf Anforderungsebene festlegen. Hier konfigurieren wir die Authentifizierungsdetails auf Ordnerebene.

Navigieren Sie zum Ordner „Manage Direct Messages“, wählen Sie den Tab „Authorization“ und bestätigen Sie, dass der Typ auf „OAuth 2.0“ gesetzt ist und „Add auth data to“ auf „Request Headers“ steht. Stellen Sie im Abschnitt „Current Token“ sicher, dass der „Header Prefix“ auf Bearer gesetzt ist.

So konfigurieren und generieren Sie ein neues Token:

1. Erstellen Sie einen Token-Namen, z. B. „Manage DMs“.

2. Bestätigen Sie, dass der **Grant Type** auf Authorization Code (with PKCE) gesetzt ist.

3. Legen Sie Ihre **Callback URL** fest. Aktualisieren Sie die Callback URL so, dass sie exakt der Callback URL entspricht, die Ihrer Anwendung im [v2 Dev Portal](https://developer.x.com/en/portal/dashboard) zugeordnet ist. In der für dieses Beispiel verwendeten X App ist die Callback URL auf [_https://www.example.com_](https://www.example.com/) gesetzt. (Beachten Sie, dass dies exakt übereinstimmen muss; [_https://example.com_](https://example.com) würde nicht funktionieren.)

4. Bestätigen Sie, dass die **Auth URL** auf [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize) gesetzt ist.

5. Bestätigen Sie, dass die **Access Token URL** auf [https://api.x.com/2/oauth2/token](https://api.x.com/2/oauth2/token) gesetzt ist.
   **Client ID** – Kopieren Sie die OAuth 2.0 Client ID aus dem Developer Portal und fügen Sie sie ein.
   **Client Secret** – Dies benötigen Sie nur, wenn Sie einen App-Typ verwenden, der ein vertraulicher Client ist. Falls ja, kopieren Sie das OAuth 2.0 Client Secret aus dem Developer Portal und fügen Sie es ein.

6. Bestätigen Sie, dass der **Scope** dm.read, dm.write, tweet.read und users.read umfasst.

7. Bestätigen Sie, dass **State** auf „state“ gesetzt ist.

8. Bestätigen Sie, dass **Client Authentication** auf Send as Basic Auth header gesetzt ist.

9. Klicken Sie auf **Get New Access Token** und anschließend auf „Authorize app“ im Rahmen des „Sign in with X“-Prozesses.

10. Klicken Sie auf die Schaltfläche „Proceed“ und dann auf „Use Token“, um ein Token zu übernehmen.

11. Klicken Sie auf die Schaltfläche „Save“, um diese Konfigurationsdetails zu speichern.

Es kann sein, dass Sie die Meldung erhalten, dass Sie nicht bei X angemeldet sind. Falls dieser Fehler auftritt, melden Sie sich innerhalb von Postman bei dem X-Konto an, in dessen Namen Sie posten möchten.

Nachdem diese OAuth-2.0-Details auf Ordnerebene festgelegt wurden, navigieren Sie zu jedem der Beispiele und deren „Authorization“-Tab und bestätigen Sie, dass der Typ auf „Inherit auth from parent.“ gesetzt ist.

Beachten Sie, dass dieses Token bald abläuft und Sie es durch Klicken auf die Schaltfläche „Get New Access Token“ neu erstellen müssen. Ein Klick darauf startet den „Sign in with X“-Vorgang und erzeugt ein neues Token, mit dem Sie Anfragen stellen können.

<div id="step-three-specify-the-direct-message-conversation-participants-and-message-contents">
  #### Schritt drei: Geben Sie die Teilnehmer der Direktnachrichten-Unterhaltung und den Nachrichteninhalt an
</div>

Navigieren Sie zur Registerkarte „Body“ und nehmen Sie Änderungen am Beispiel-JSON-Objekt vor. Setzen Sie das Attribut participant\_ids auf die Accounts, an die Sie die Direktnachricht senden möchten.

`{
   "message": {"text": "Hallo ihr zwei, das ist eine neue Gruppenunterhaltung."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}`

<div id="step-four-make-your-request-and-review-the-response">
  #### Schritt vier: Senden Sie Ihre Anfrage und prüfen Sie die Antwort
</div>

Sobald alles eingerichtet ist, klicken Sie auf die Schaltfläche „Send“, und Sie erhalten eine ähnliche Antwort wie das folgende Beispiel. Zur Erinnerung: Wenn Ihr Token seit der oben beschriebenen Erstellung abgelaufen ist, können Sie zum Reiter „Authorization“ des Ordners zurückkehren und auf „Get New Access Token“ klicken, um ein neues Token zu erstellen.

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582103724607971332"
   }
}
```

Wenn das zurückgegebene Objekt „data“ eine dm\_conversation\_id und eine dm\_event\_id enthält, haben Sie erfolgreich eine neue Direct-Message-Unterhaltung erstellt. Um mit dem Abrufen von Events zu dieser Unterhaltung zu beginnen, wechseln Sie zur Schnellstartanleitung für die Direct-Message-Abfrage.

<div id="step-five-add-another-message-to-that-group-conversation">
  #### Schritt fünf: Eine weitere Nachricht zu dieser Gruppenunterhaltung hinzufügen
</div>

Wählen Sie nun das Beispiel „DM zur Unterhaltung hinzufügen“ aus und öffnen Sie den Tab „Params“. Aktualisieren Sie unter „Path Variables“ die dm\_conversation\_id auf die ID der Unterhaltung, die Sie oben erstellt haben.

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| dm\_conversation\_id | 1582103724607971328 |

Mit dieser Unterhaltungs-ID wird der Anfragepfad zu: https://api.x.com/2/dm\_conversations/1582103724607971328/messages

Aktualisieren Sie außerdem den Tab „Body“ mit dem Anforderungs‑JSON, das den Nachrichtentext enthält, den Sie senden möchten: 

```
{
   "text": "Ich füge eine neue Nachricht zu unserer Gruppenunterhaltung hinzu..."
}
```

Sobald alles eingerichtet ist, klicken Sie auf die Schaltfläche „Send“, und Sie erhalten eine ähnliche Antwort wie im folgenden Beispiel:

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582106224379559940"
   }
}
```