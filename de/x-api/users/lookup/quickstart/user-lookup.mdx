---
title: Benutzerabfrage
sidebarTitle: Benutzerabfrage
---

import { Button } from '/snippets/de/button.mdx';

<div id="getting-started-with-the-users-lookup-endpoints">
  ## Erste Schritte mit den Users-Lookup-Endpunkten
</div>

Diese Schnellstartanleitung hilft Ihnen, Ihre erste Anfrage an die Users-Lookup-Endpunkte mit einer festgelegten Auswahl an Feldern zu stellen – mit [Postman](/de/tutorials/postman-getting-started).

Wenn Sie Beispielcode in verschiedenen Sprachen sehen möchten, besuchen Sie bitte unser GitHub-Repository [X-API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code).

<Note>
  ### Voraussetzungen

  Um diese Anleitung abzuschließen, benötigen Sie einen Satz an [Keys und Tokens](/de/resources/fundamentals/authentication), um Ihre Anfrage zu authentifizieren. Sie können diese Keys und Tokens generieren, indem Sie die folgenden Schritte ausführen:

  - [Registrieren Sie sich für ein Entwicklerkonto](https://developer.x.com/en/apply-for-access) und lassen Sie es genehmigen.
  - Erstellen Sie ein [Projekt](/de/resources/fundamentals/projects) und eine zugehörige [Developer-App](/de/resources/fundamentals/developer-apps) im Developer-Portal.
  - Navigieren Sie zur Seite „Keys and tokens“ Ihrer App, um die erforderlichen Zugangsdaten zu generieren. Achten Sie darauf, alle Zugangsdaten sicher zu speichern.
</Note>

<div id="steps-to-build-a-users-lookup-request">
  ### Schritte zum Erstellen einer Users-Lookup-Anfrage
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### Schritt eins: Beginnen Sie mit einem Tool oder einer Bibliothek
</div>

Es gibt verschiedene Tools, Codebeispiele und Bibliotheken, mit denen Sie eine Anfrage an diesen Endpunkt stellen können. Wir verwenden hier Postman, um den Prozess zu vereinfachen.

Um die Postman-Collection für die X-API v2 in Ihre Umgebung zu laden, klicken Sie bitte auf die folgende Schaltfläche:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X-API v2 zu Postman hinzufügen
</Button>

Sobald Sie die X-API-v2-Collection in Postman geladen haben, navigieren Sie zum Endpunkt GET /users/by.
 

<div id="step-two-authenticate-your-request">
  #### Schritt zwei: Authentifizieren Sie Ihre Anfrage
</div>

Um eine Anfrage an die X-API korrekt zu stellen, müssen Sie nachweisen, dass Sie berechtigt sind. Zu diesem Zweck verlangt dieser Endpunkt, dass Sie Ihre Anfrage mit einer der folgenden Methoden authentifizieren: [App only](/de/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token), [OAuth 2.0 Authorization Code mit PKCE](de/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) oder [OAuth 1.0a User Context](/de/resources/fundamentals/authentication).

Der Einfachheit halber verwenden wir für diese Anfrage App only; wenn Sie jedoch private [Metriken](/de/x-api/fundamentals/metrics) oder Benutzer anfordern möchten, müssen Sie eine der anderen Authentifizierungsmethoden verwenden.

Um App only zu nutzen, müssen Sie Ihre Keys und Tokens hinzufügen, insbesondere das [App Access Token](/de/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) (auch bekannt als App-only Bearer Token), in Postman. Wählen Sie dazu oben rechts in Postman die Umgebung „X API v2“ aus und tragen Sie Ihre Keys und Tokens in die Felder „initial value“ und „current value“ ein (klicken Sie auf das Augensymbol neben der Umgebungs-Auswahlliste).

Diese Variablen werden automatisch in den Reiter „Authorization“ der Anfrage übernommen, wenn Sie dies korrekt eingerichtet haben.
 

<div id="step-three-identify-and-specify-which-users-you-would-like-to-retrieve">
  #### Schritt drei: Festlegen, welche(n) Nutzer Sie abrufen möchten
</div>

Sie müssen einen Nutzer oder eine Gruppe von Nutzern angeben, die Sie in der Anfrage erhalten möchten. Je nachdem, welchen Nutzer-Endpunkt Sie verwenden, können Sie entweder eine Nutzer-ID oder einen Nutzernamen übergeben. In diesem Fall verwenden wir den Endpunkt [GET /users/by](/de/x-api/users/user-lookup-by-usernames), der es ermöglicht, mehrere Nutzernamen in einer einzigen Anfrage zu übergeben (anstelle der Endpunkte [single-ID](/de/x-api/users/user-lookup-by-id), [multi-ID](/de/x-api/users/user-lookup-by-ids) und [single-username](/de/x-api/users/user-lookup-by-username)) und eine Menge von Nutzernamen über den Query-Parameter usernames zu übergeben.

Nutzernamen sind einfach das Account-Handle, das Sie in der Profil-URL eines Accounts finden können. Der Benutzername des folgenden Accounts lautet zum Beispiel XDevelopers.

`https://x.com/XDevelopers`

Navigieren Sie in Postman zur Registerkarte „Params“ und geben Sie diesen Nutzernamen oder eine durch Kommas getrennte Zeichenfolge von Nutzernamen in die Spalte „Value“ des Parameters username ein. Achten Sie darauf, keine Leerzeichen zwischen Nutzernamen und Kommas einzufügen.

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `username` | XDevelopers,API,adsapi |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### Schritt vier: Festlegen, welche Felder Sie abrufen möchten
</div>

Wenn Sie nach Schritt drei auf die Schaltfläche „Send“ klicken, erhalten Sie in der Antwort die Standardfelder des [user object](/de/x-api/fundamentals/data-dictionary#user): id, name und username.

Wenn Sie weitere Felder über id, name und username hinaus erhalten möchten, müssen Sie diese in Ihrer Anfrage über die Parameter [field](/de/x-api/fundamentals/fields) und/oder [expansion](/de/x-api/fundamentals/expansions) angeben.

Für diese Übung fordern wir drei zusätzliche Feldsätze aus unterschiedlichen Objekten an:

1. Das zusätzliche Feld user.created\_at in den primären User-Objekten.
2. Die zugehörigen Standardfelder des angehefteten Post-Objekts für die zurückgegebenen Nutzer: id und text.
3. Das zusätzliche Feld tweet.created\_at in den zugehörigen Post-Objekten.
    

Navigieren Sie in Postman zur Registerkarte „Params“ und fügen Sie der Tabelle „Query Params“ das folgende Schlüssel-Wert-Paar hinzu:

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| `user.fields` | `created_at` | `user.created_at` |
| `expansions` | `author_id` | tweet.id, tweet.text |
| `tweet.fields` | `created_at` | `includes.users.created_at` |

Neben der Schaltfläche „Send“ sollten Sie nun die folgende URL sehen:

```
      https://api.x.com/2/users/by?usernames=twitterdev,twitterapi,adsapi&user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=author_id,created_at
```

<div id="step-five-make-your-request-and-review-your-response">
  #### Schritt fünf: Senden Sie Ihre Anfrage und prüfen Sie die Antwort
</div>

Sobald alles eingerichtet ist, klicken Sie auf die Schaltfläche „Senden“ und Sie erhalten die folgende Antwort:

```
{
  "data": [
    {
      "created_at": "2013-12-14T04:35:55.000Z",
      "id": "2244994945",
      "name": "Twitter Dev",
      "pinned_tweet_id": "1255542774432063488",
      "username": "TwitterDev"
    },
    {
      "created_at": "2007-05-23T06:01:13.000Z",
      "id": "6253282",
      "name": "Twitter API",
      "username": "TwitterAPI"
    },
    {
      "created_at": "2013-02-27T20:01:12.000Z",
      "id": "1225933934",
      "name": "Twitter Ads API",
      "username": "AdsAPI"
    }
  ],
  "includes": {
    "tweets": [
      {
        "author_id": "2244994945",
        "created_at": "2020-04-29T17:01:38.000Z",
        "id": "1255542774432063488",
        "text": "During these unprecedented times, what’s happening on Twitter can help the world better understand &amp; respond to the pandemic. \n\nWe're launching a free COVID-19 stream endpoint so qualified devs &amp; researchers can study the public conversation in real-time. https://t.co/BPqMcQzhId"
      }
    ]
  }
}
```