---
title: "Account Activity API: Enterprise"
---

<Note>
  Dieser Endpoint wurde aktualisiert, um Metadaten zur Beitragsbearbeitung einzubeziehen. Weitere Informationen zu diesen Metadaten finden Sie auf der Fundamentals-Seite ["Beiträge bearbeiten"](/de/x-api/enterprise-gnip-2.0/fundamentals/edit-tweets). 

  Dieser Endpoint wird häufig zusammen mit den Direct-Messages-Endpunkten verwendet. Wir haben neue [v2 Direct-Messages-Endpunkte](/de/x-api/direct-messages/manage/introduction) eingeführt. Beachten Sie, dass die Enterprise- und Premium-Account-Activity-APIs v2-Eins-zu-eins-Nachrichten unterstützen, Gruppenkonversationen jedoch noch nicht.   
</Note>

Überblick

`Enterprise`

Die Account Activity API ermöglicht es Ihnen, sich per Webhook auf Echtzeitaktivitäten rund um ein Nutzerkonto zu abonnieren. Das bedeutet, dass Sie über eine einzige Verbindung Echtzeit-Beiträge, Direct Messages und andere Kontoereignisse von einem oder mehreren Ihrer eigenen oder abonnierten Konten empfangen können.

Sie erhalten alle unten aufgeführten relevanten Aktivitäten für jedes Benutzerabonnement im Rahmen Ihrer Webhook-Registrierung:

| Aktivitätstypen |     |
| :--- | :--- |
| \* Beiträge (vom Nutzer)  <br />    <br />\* Beitragslöschungen (vom Nutzer)<br />\* @Erwähnungen (des Nutzers)<br />\* Antworten (an den Nutzer oder vom Nutzer)<br />\* Retweets (vom Nutzer oder des Nutzers)<br />\* Zitierte Tweets (vom Nutzer oder des Nutzers)<br />\* Retweets von zitierten Tweets (vom Nutzer oder des Nutzers)<br />\* Likes (vom Nutzer oder des Nutzers)<br />\* Follows (vom Nutzer oder des Nutzers)  <br />    <br />\* Unfollows (vom Nutzer) | \* Blocks (vom Nutzer)<br />\* Unblocks (vom Nutzer)<br />\* Mutes (vom Nutzer)<br />\* Unmutes (vom Nutzer)<br />\* Direct Messages gesendet (vom Nutzer)<br />\* Direct Messages empfangen (vom Nutzer)<br />\* Tippindikatoren (an den Nutzer)<br />\* Lesebestätigungen (an den Nutzer)<br />\* Abo-Widerrufe (vom Nutzer) |

**Bitte beachten** - Wir liefern keine Daten der Home-Timeline über die Account Activity API. Bitte verwenden Sie [GET statuses/home\_timeline](https://developer.x.com/en/docs/x-api/v1/tweets/timelines/overview), um diese Daten abzurufen.
 

<div id="video-series">
  #### Videoserie
</div>

Sehen Sie sich unsere [vierteilige Videoserie](https://www.youtube.com/watch?v=otPxejFhyy8\&index=0\&list=PLFKjcMIU2WshGG6Yj940XM7Z6BFs1zfBg) zur Account Activity API an, um schnell auf Stand zu kommen!

<iframe src="https://platform.x.com/embed/Tweet.html?dnt=false&embedId=twitter-widget-0&features=eyJ0ZndfdGltZWxpbmVfbGlzdCI6eyJidWNrZXQiOltdLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X2ZvbGxvd2VyX2NvdW50X3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9iYWNrZW5kIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19yZWZzcmNfc2Vzc2lvbiI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfZm9zbnJfc29mdF9pbnRlcnZlbnRpb25zX2VuYWJsZWQiOnsiYnVja2V0Ijoib24iLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X21peGVkX21lZGlhXzE1ODk3Ijp7ImJ1Y2tldCI6InRyZWF0bWVudCIsInZlcnNpb24iOm51bGx9LCJ0ZndfZXhwZXJpbWVudHNfY29va2llX2V4cGlyYXRpb24iOnsiYnVja2V0IjoxMjA5NjAwLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X3Nob3dfYmlyZHdhdGNoX3Bpdm90c19lbmFibGVkIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19kdXBsaWNhdGVfc2NyaWJlc190b19zZXR0aW5ncyI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdXNlX3Byb2ZpbGVfaW1hZ2Vfc2hhcGVfZW5hYmxlZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdmlkZW9faGxzX2R5bmFtaWNfbWFuaWZlc3RzXzE1MDgyIjp7ImJ1Y2tldCI6InRydWVfYml0cmF0ZSIsInZlcnNpb24iOm51bGx9LCJ0ZndfbGVnYWN5X3RpbWVsaW5lX3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9mcm9udGVuZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9fQ%3D%3D&frame=false&hideCard=false&hideThread=false&id=996790447048613888&lang=en&origin=https%3A%2F%2Fdeveloper.x.com%2Fen%2Fdocs%2Fx-api%2Fenterprise%2Faccount-activity-api%2Foverview&sessionId=81f4a0339cbd7bd77b669faa00bd3a7224bc4418&theme=light&widgetsVersion=2615f7e52b7e0%3A1702314776716&width=550px" height="400px" />

<div id="feature-summary">
  ### Funktionsübersicht
</div>

| Tier | Preisgestaltung | Anzahl eindeutiger Subscriptions | Anzahl der Webhooks | Zuverlässigkeit und Wiederherstellung |
| :--- | :--- | :--- | :--- | :--- |
| Enterprise | [Vertrieb kontaktieren](/de/x-api/enterprise-gnip-2.0/enterprise-gnip) | Bis zu 500+ | 3+  | [Retries](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) und [Replay](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api) |

- Haben Sie Fragen? Stoßen Sie auf Fehler?
  - Lesen Sie unsere [Häufig gestellten Fragen](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions) oder den [Leitfaden zur Fehlerbehebung](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions).

- Entdecken Sie unseren Beispielcode:
  - [Enterprise Account Activity API Dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise), eine Node-Web-App, die Webhook-Ereignisse mit der Enterprise-Stufe der Account Activity API anzeigt und eine [Replay](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api)-Funktion bietet.
  - Der [SnowBot-Chatbot](https://github.com/xdevplatform/SnowBotDev), eine Ruby-Web-App, die auf den Enterprise Account Activity- und Direct Message-APIs aufbaut.

#### Verwalten eines Webhooks:

Mit einem Webhook können Sie über eine einzige Verbindung Aktivitäten in Echtzeit abonnieren, die sich auf ein Benutzerkonto beziehen.

<Tabs>
  <Tab title="Hinzufügen eines Webhooks">
    Beginnen wir mit der Registrierung einer neuen Webhook-URL für den jeweiligen Anwendungskontext.

    Die URL wird vor dem Speichern per CRC-Anfrage validiert. Nachdem Sie einen Webhook registriert haben, notieren Sie sich die Webhook-ID, da Sie sie später benötigen.

    Kopieren Sie die folgende cURL-Anfrage in Ihre Befehlszeile, nachdem Sie Folgendes angepasst haben:

    - **URL** `<URL>` z. B. `https://yourdomain.com/webhooks/twitter/`

    - **Consumer Key** `<CONSUMER_KEY>` z. B. `xvz1evFS4wEEPTGEFPHBog`

    - **Access Token** `<ACCESS_TOKEN>` z. B. `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```
      curl --request POST --url 'https://api.x.com/1.1/account_activity/webhooks.json?url=<URL>' --header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<ACCESS_TOKEN>", oauth_version="1.0"'
      ```
  </Tab>

  <Tab title="Anzeigen eines Webhooks">
    Führen Sie den folgenden Befehl aus, um alle registrierten Webhook-URLs und deren Status für die angegebene Anwendung abzurufen.

    Kopieren Sie die folgende cURL-Anfrage in Ihre Befehlszeile, nachdem Sie Folgendes angepasst haben:

    - **Bearer-Token** `<BEARER_TOKEN>` z. B. `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

      ```curl --request GET --url https://api.x.com/1.1/account_activity/webhooks.json --header 'authorization: Bearer <BEARER_TOKEN>'
      ```
  </Tab>

  <Tab title="Entfernen eines Webhooks">
    Um einen Webhook aus der Konfiguration der angegebenen Anwendung zu entfernen, kopieren Sie die folgende cURL-Anfrage in Ihre Befehlszeile, nachdem Sie Folgendes angepasst haben:

    - **Webhook-ID** `<:WEBHOOK_ID>` z. B. `1234567890`

    - **Consumer Key** `<CONSUMER_KEY>` z. B. `xvz1evFS4wEEPTGEFPHBog`

    - **Access Token** `<ACCESS_TOKEN>` z. B. `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```curl --request DELETE --url https://api.x.com/1.1/account_activity/webhooks/<:WEBHOOK_ID>.json --header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<ACCESS_TOKEN>", oauth_version="1.0"'
      ```
  </Tab>
</Tabs>

<div id="managing-a-webhook">
  #### Verwalten abonnierter Nutzer:
</div>

Sobald Sie einen Webhook registriert haben, können Sie einen abonnierten Nutzer zur Account Activity API hinzufügen, um dessen Kontoaktivitäten zu empfangen.

<Tabs>
  <Tab title="Abonnement hinzufügen">
    Wir beginnen damit, einen Nutzer zu abonnieren, damit Sie alle Ereignistypen erhalten.

    Kopieren Sie die folgende cURL-Anfrage in Ihre Kommandozeile, nachdem Sie die folgenden Anpassungen vorgenommen haben:

    - **Webhook-ID** `<:WEBHOOK_ID>` z. B. `1234567890`

    - **Consumer-Key** `<CONSUMER_KEY>` z. B. `xvz1evFS4wEEPTGEFPHBog`

    - **Access Token des abonnierenden Nutzers** `<SUBSCRIBING_USER'S_ACCESS_TOKEN>` z. B. `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```
      curl --request POST --url https://api.x.com/1.1/account_activity/webhooks/<:WEBHOOK_ID>/subscriptions/all.json --header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<SUBSCRIBING_USER'S_ACCESS_TOKEN>", oauth_version="1.0"'
      ```
  </Tab>

  <Tab title="Abonnements anzeigen">
    Um eine Liste aller Abonnements für Aktivitätstypen für einen angegebenen Webhook anzuzeigen, kopieren Sie die folgende cURL-Anfrage in Ihre Kommandozeile, nachdem Sie die folgenden Anpassungen vorgenommen haben:

    - **Webhook-ID** `<:WEBHOOK_ID>` z. B. `1234567890`

    - **Bearer Token** `<BEARER_TOKEN>` z. B. `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

      ```
      curl --request GET --url https://api.x.com/1.1/account_activity/webhooks/<:WEBHOOK_ID>/subscriptions/all/list.json --header 'authorization: Bearer <BEARER_TOKEN>'
      ```
  </Tab>

  <Tab title="Abonnement entfernen">
    Nach der Deaktivierung werden alle Ereignisse für den anfragenden Nutzer nicht mehr an die Webhook-URL gesendet.

    Um ein Abonnement aus dem bereitgestellten Nutzerkontext und der Anwendung zu deaktivieren, kopieren Sie die folgende cURL-Anfrage in Ihre Kommandozeile, nachdem Sie die folgenden Anpassungen vorgenommen haben:

    - **Webhook-ID** `<:WEBHOOK_ID>` z. B. `1234567890`

    - **Consumer-Key** `<CONSUMER_KEY>` z. B. `xvz1evFS4wEEPTGEFPHBog`

    - **Access Token des abonnierenden Nutzers** `<SUBSCRIBING_USER'S_ACCESS_TOKEN>` z. B. `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```
      curl --request DELETE --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all.json --header 'authorization: OAuth oauth_consumer_key="CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="SUBSCRIBED_USER'S_ACCESS_TOKEN", oauth_version="1.0"'
      ```
  </Tab>
</Tabs>

Gute Arbeit! Sie sollten nun in der Lage sein, Ihre Webhooks und abonnierten Nutzer zu verwalten.

<div id="managing-subscribed-users">
  #### Referenzierte Artikel
</div>

- [Überblick über die Challenge-Response-Prüfung (CRC)](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks)
- \[Datentypen der Account Activity]\(/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-data-object-structure
- [Verwalten von Webhooks und Abonnements](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#managing-webhooks-and-subscriptions)

## Ein Videoüberblick zur Account Activity API

In diesem Videoüberblick lernen Sie die Funktionen der Premium- und Enterprise-Stufen der Account Activity API kennen.

Am Ende dieses Videos kennen Sie die folgenden Funktionen:

- Registrieren eines Webhooks
- Hinzufügen eines Benutzerabonnements
- Entfernen eines Benutzerabonnements
- Empfangen von Kontoaktivitäten
- Wiedergeben von Kontoaktivitäten

<iframe src="https://platform.x.com/embed/Tweet.html?dnt=false&embedId=twitter-widget-0&features=eyJ0ZndfdGltZWxpbmVfbGlzdCI6eyJidWNrZXQiOltdLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X2ZvbGxvd2VyX2NvdW50X3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9iYWNrZW5kIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19yZWZzcmNfc2Vzc2lvbiI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfZm9zbnJfc29mdF9pbnRlcnZlbnRpb25zX2VuYWJsZWQiOnsiYnVja2V0Ijoib24iLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X21peGVkX21lZGlhXzE1ODk3Ijp7ImJ1Y2tldCI6InRydWVfYml0cmF0ZSIsInZlcnNpb24iOm51bGx9LCJ0ZndfZXhwZXJpbWVudHNfY29va2llX2V4cGlyYXRpb24iOnsiYnVja2V0IjoxMjA5NjAwLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X3Nob3dfYmlyZHdhdGNoX3Bpdm90c19lbmFibGVkIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19kdXBsaWNhdGVfc2NyaWJlc190b19zZXR0aW5ncyI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdXNlX3Byb2ZpbGVfaW1hZ2Vfc2hhcGVfZW5hYmxlZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdmlkZW9faGxzX2R5bmFtaWNfbWFuaWZlc3RzXzE1MDgyIjp7ImJ1Y2tldCI6InRydWVfYml0cmF0ZSIsInZlcnNpb24iOm51bGx9LCJ0ZndfbGVnYWN5X3RpbWVsaW5lX3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9mcm9udGVuZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9fQ%3D%3D&frame=false&hideCard=false&hideThread=false&id=1204084171334832128&lang=en&origin=https%3A%2F%2Fdeveloper.x.com%2Fen%2Fdocs%2Fx-api%2Fenterprise%2Faccount-activity-api%2Fquick-start%2Fa-visual-walkthrough-of-the-account-activity-api&sessionId=b5b8e259a4c6287be2413de9059093170036fb30&theme=light&widgetsVersion=2615f7e52b7e0%3A1702314776716&width=550px" />

- Haben Sie Fragen? Stoßen Sie auf Fehler?
  - Lesen Sie unsere [Häufig gestellten Fragen](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions) oder den [Leitfaden zur Fehlerbehebung](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions).

- Entdecken Sie unseren Beispielcode:
  - [Enterprise Account Activity API Dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise), eine Node-Web-App, die Webhook-Ereignisse mit der Enterprise-Tier der Account Activity API anzeigt und die [Replay](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api)-Funktion unterstützt.
  - Der [SnowBot-Chatbot](https://github.com/xdevplatform/SnowBotDev), eine Ruby-Web-App, die auf den Enterprise-Account-Activity- und Direct-Message-APIs basiert.

**Enterprise**

<div id="a-video-walkthrough-of-the-account-activity-api">
  ## Erste Schritte mit Webhooks
</div>

Die Account Activity API ist eine Webhook-basierte API, die Kontoereignisse an eine von Ihnen entwickelte, bereitgestellte und gehostete Web-App sendet.

Bevor Sie in Ihrer Ereignisverbraucher-Anwendung Webhook-Ereignisse empfangen können, gibt es mehrere technische Voraussetzungen, die beachtet werden müssen. Wie unten beschrieben, müssen Sie eine X-App erstellen, Zugriff auf die Account Activity API erhalten und eine Web-App entwickeln, die Webhook-Ereignisse verarbeitet. 

### 1. Erstellen Sie eine X-App.

- Erstellen Sie eine [X-App](/de/resources/fundamentals/developer-apps) mit einem genehmigten Entwicklerkonto im [Developer-Portal](/de/resources/fundamentals/developer-portal). Wenn Sie die App im Namen Ihres Unternehmens erstellen, wird empfohlen, sie mit einem Unternehmens-X-Konto anzulegen. Um ein Entwicklerkonto zu beantragen, [klicken Sie hier](/de/resources/fundamentals/developer-apps).
- Aktivieren Sie „Lesen, Schreiben und Zugriff auf Direktnachrichten“ auf der Registerkarte [Berechtigungen](/de/resources/fundamentals/developer-apps#oauth-1-0a-app-permissions) Ihrer App-Seite.
- Notieren Sie sich auf der Registerkarte „Keys and Access Tokens“ den Consumer Key (API Key) und den Consumer Token (API Secret) Ihrer App.
- Generieren Sie auf derselben Registerkarte das [Access Token und Access Token Secret](/de/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) Ihrer App. Diese Access Tokens benötigen Sie, um Ihre Webhook-URL zu registrieren, an die X Kontoereignisse sendet.
- Wenn Sie mit [X Sign-in](/de/resources/fundamentals/authentication#log-in-with-x) und der Funktionsweise von Nutzerkontexten in der X-API nicht vertraut sind, lesen Sie [Obtaining Access Tokens](https://dev.x.com/webhooks/access-tokens). Wenn Sie Konten hinzufügen, für die Sie Ereignisse empfangen möchten, abonnieren Sie diese mithilfe der Access Tokens des jeweiligen Kontos.
- Notieren Sie sich die numerische ID Ihrer App, wie sie auf der Seite [„Apps"](/de/resources/fundamentals/developer-apps) im [Developer-Portal](/de/resources/fundamentals/developer-portal) angezeigt wird. Wenn Sie Zugriff auf die Account Activity API beantragen, benötigen Sie diese App-ID.
   

<div id="1-create-a-x-app">
  ### 2. Zugriff auf die Account Activity API erhalten
</div>

Nachdem Sie eine X-App erstellt haben, besteht der nächste Schritt darin, Zugriff auf die Account Activity API zu beantragen. 

Die Account Activity API ist nur für Enterprise verfügbar, daher müssen Sie einen Antrag über den unten stehenden Link einreichen.

<Button href="https://developer.x.com/en/enterprise-application.html">
  Enterprise-Zugang beantragen
</Button>

<div id="2-get-account-activity-api-access">
  ### 3. Webhook-Consumer-App entwickeln
</div>

Sobald Sie Zugriff auf die Account Activity API erhalten haben, müssen Sie eine Web-App entwickeln, bereitstellen und hosten, die X-Webhook-Ereignisse empfängt.

- Erstellen Sie eine Web-App mit einer URL, die als Webhook zum Empfangen von Ereignissen dient. Dies ist der Endpunkt, der auf Ihrem Server bereitgestellt wird und auf eingehende X-Webhook-Ereignisse lauscht.
  - Der URI-Pfad liegt ganz bei Ihnen. Dieses Beispiel wäre gültig: https://mydomain.com\_/service/listen\_

  - Wenn Sie Webhooks aus verschiedenen Quellen empfangen, ist ein gängiges Muster: https://mydomain.com/webhook/twitter

  - Beachten Sie, dass die angegebene URL keine Portangabe enthalten darf (https://mydomain.com:5000/NoWorkie).

- Wie in unserem Leitfaden [Securing Webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks) beschrieben, besteht ein erster Schritt darin, Code zu schreiben, der eine X Challenge Response Check (CRC)-GET-Anfrage empfängt und mit einer korrekt formatierten JSON-Antwort antwortet.

- Registrieren Sie Ihre Webhook-URL. Sie senden eine POST-Anfrage an den Endpunkt /webhooks.json?url=. Wenn Sie diese Anfrage stellen, sendet X eine CRC-Anfrage an Ihre Web-App. Bei erfolgreicher Registrierung eines Webhooks enthält die Antwort eine Webhook-ID. Diese Webhook-ID wird später benötigt, wenn Sie bestimmte Anfragen an die Account Activity API stellen.

- X sendet Konto-Webhook-Ereignisse an die von Ihnen registrierte URL. Stellen Sie sicher, dass Ihre Web-App POST-Anfragen für eingehende Ereignisse unterstützt. Diese Ereignisse werden als JSON codiert. Siehe [HIER](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-data-object-structure) für Beispiel-JSON-Payloads von Webhooks.

- Sobald Ihre Web-App bereit ist, besteht der nächste Schritt darin, Konten hinzuzufügen, für die Aktivitäten empfangen werden sollen. Beim Hinzufügen (oder Löschen) von Konten senden Sie POST-Anfragen unter Angabe der Konto-ID. Weitere Informationen finden Sie in unserem [Leitfaden zum Verwalten von Subscriptions](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#managing-webhooks-and-subscriptions).

<div id="3-develop-webhook-consumer-app">
  ### 4. Einrichtung validieren
</div>

- Um zu überprüfen, ob Ihre App und Ihr Webhook korrekt konfiguriert sind, markieren Sie einen Beitrag mit „Gefällt mir“, der von einem der X-Konten stammt, auf die Ihre App abonniert ist. Sie sollten für jedes „Gefällt mir“, das Ihre Abonnenten erhalten, ein `favorite_events` per POST-Anfrage an Ihre Webhook-URL erhalten.
- Beachten Sie, dass es bis zu 10 Sekunden dauern kann, bis nach dem Hinzufügen eines Abonnements mit der Zustellung von Events begonnen wird.

**Wichtige Hinweise**

- Beim Registrieren Ihrer Webhook-URL muss sich Ihre Web-App mit ihrem Consumer-Token und -Secret _und dem User-Access-Token und -Secret des App-Inhabers_ authentifizieren.

- Alle eingehenden Direct Messages werden über Webhooks zugestellt. Alle Direct Messages, die über [POST direct\_messages/events/new (message\_create)](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) gesendet werden, werden ebenfalls über Webhooks zugestellt. So kann Ihre Web-App über Direct Messages informiert sein, die über einen anderen Client gesendet wurden.

- Beachten Sie, dass jedes Webhook-Event eine for\_user\_id-User-ID enthält, die angibt, für welches Abonnement das Event zugestellt wurde.

- Wenn zwei Nutzer Ihre Web-App für Direct Messages in derselben Unterhaltung verwenden, erhält Ihr Webhook zwei doppelte Events (je eines pro Nutzer). Ihre Web-App sollte dies berücksichtigen.

- Wenn mehr als eine Web-App dieselbe Webhook-URL verwendet und derselbe Nutzer jeweils einer App zugeordnet ist, wird dasselbe Event mehrfach an Ihren Webhook gesendet (einmal pro Web-App).

- In einigen Fällen kann Ihr Webhook doppelte Events erhalten. Ihre Webhook-App sollte damit umgehen können und anhand der Event-ID deduplizieren.

- Erwarten Sie nicht, dass eine Quick-Reply-Antwort unmittelbar auf eine Anfrage folgt. Ein Nutzer kann eine Quick-Reply-Anfrage ignorieren und stattdessen über eine herkömmliche Direct Message antworten. Der Nutzer kann auch eine Quick-Reply-Antwort auf eine Anfrage geben, auf die er zuvor im Nachrichten-Thread nicht geantwortet hat.

- Beispielcode:
  - [Enterprise Account Activity API dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise), eine Node-Web-App, die Webhook-Events unter Verwendung der Enterprise-Stufe der Account Activity API anzeigt und [Replay](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api)-Funktionalität umfasst.

  - Der [SnowBot-Chatbot](https://github.com/xdevplatform/SnowBotDev), eine Ruby-Web-App, die auf den Account-Activity- und Direct-Message-APIs aufbaut. Dieser Codebestand enthält ein [Skript](https://github.com/xdevplatform/SnowBotDev/wiki/Account-Activity-API-setup-script), das beim Einrichten von Account-Activity-API-Webhooks hilft.

## Absicherung von Webhooks

Die webhookbasierten APIs von X bieten zwei Methoden, um die Sicherheit Ihres Webhook-Servers zu verifizieren:

1. Challenge-Response-Prüfungen ermöglichen X, die Inhaberschaft der Web-App zu bestätigen, die Webhook-Ereignisse empfängt.
2. Der Signatur-Header in jeder POST-Anfrage ermöglicht Ihnen zu bestätigen, dass X die Quelle der eingehenden Webhooks ist.
    

### Challenge-Response-Prüfungen 

Um zu verifizieren, dass Sie sowohl der Besitzer der App als auch der Webhook-URL sind, führt X eine Challenge-Response-Prüfung (CRC) durch, die nicht mit einer zyklischen Redundanzprüfung zu verwechseln ist. Wenn ein CRC gesendet wird, stellt X eine GET-Anfrage an Ihre Web-App mit einem _`crc_token`_-Parameter. Wenn diese Anfrage eingeht, muss Ihre Web-App ein signiertes `response_token` auf Basis des _`crc_token`_-Parameters und des Consumer Secrets Ihrer App (Details unten) erzeugen. Das `response_token` muss als JSON kodiert sein (siehe Beispiel unten) und innerhalb von drei Sekunden zurückgegeben werden. Bei Erfolg wird eine Webhook-`id` zurückgegeben. 

Ein CRC wird gesendet, wenn Sie Ihre Webhook-URL registrieren, daher ist die Implementierung Ihres CRC-Antwortcodes ein grundlegender erster Schritt. Sobald Ihr Webhook eingerichtet ist, löst X ungefähr alle 24 Stunden einen CRC aus, gerechnet ab dem letzten Zeitpunkt, zu dem wir eine erfolgreiche Antwort erhalten haben. Ihre App kann bei Bedarf ebenfalls einen CRC auslösen, indem sie eine PUT-Anfrage mit Ihrer Webhook-`id` sendet. Das Auslösen eines CRC ist während der Entwicklung Ihrer Webhook-Anwendung nützlich, etwa nach dem Deployen neuen Codes und dem Neustart Ihres Dienstes. 

Es ist zu erwarten, dass sich das _`crc_token`_ für jede eingehende CRC-Anfrage ändert und als Nachricht in der Berechnung verwendet werden sollte, wobei Ihr Consumer Secret der Schlüssel ist.

Falls die Antwort nicht innerhalb von 3 Sekunden übermittelt wird oder ungültig ist, werden keine Ereignisse mehr an den registrierten Webhook gesendet.

#### Die CRC-Anfrage erfolgt:

- Wenn eine Webhook-URL registriert wird.
- Ungefähr stündlich zur Validierung Ihrer Webhook-URL.
- Sie können einen CRC manuell auslösen, indem Sie eine PUT-Anfrage senden. Während der Entwicklung Ihres Webhook-Clients sollten Sie einplanen, den CRC manuell auszulösen, während Sie Ihre CRC-Antwort implementieren. 
   

<div id="the-crc-request-will-occur">
  #### Anforderungen an die Antwort:
</div>

- Ein base64-codierter HMAC-SHA-256-Hash, erstellt aus dem `crc_token` und dem Consumer-Secret Ihrer App
- Gültiges response\_token und JSON-Format.
- Latenz unter 3 Sekunden.
- HTTP-Statuscode 200.
   

<div id="response-requirements">
  #### Sprachspezifische HMAC-Bibliotheken:
</div>

- [Java/Scala](https://docs.oracle.com/javase/8/docs/api/index.html?javax/crypto/Mac.html)
- [Ruby](http://ruby-doc.org/stdlib-2.1.0/libdoc/openssl/rdoc/OpenSSL/HMAC.html)
- [Node.js](https://nodejs.org/api/crypto.html#crypto_class_hmac)
- [Python](https://docs.python.org/2/library/hmac.html)

<div id="language-specific-hmac-libraries">
  #### Beispiel zur Generierung eines Antwort-Tokens in Python:
</div>

Das folgende Beispiel definiert eine Route in einer Python-2.7-Flask-Web-App, die korrekt auf die Challenge-Response-Prüfung antwortet.

```
import base64
import hashlib
import hmac
import json


\# Defines a route for the GET request
@app.route('/webhooks/twitter', methods=\['GET'\])
def webhook_challenge():

  # erstellt einen HMAC-SHA-256-Hash aus dem eingehenden Token und deinem Consumer-Secret
  sha256\_hash\_digest = hmac.new(TWITTER\_CONSUMER\_SECRET, msg=request.args.get('crc_token'), digestmod=hashlib.sha256).digest()

  # konstruiert die Antwortdaten mit Base64-codiertem Hash
  response = {
    'response\_token': 'sha256=' + base64.b64encode(sha256\_hash_digest)
  }

  # gibt eine korrekt formatierte JSON-Antwort zurück
  return json.dumps(response)
```

<div id="example-response-token-generation-in-python">
  #### Beispiel einer JSON-Antwort:
</div>

Mit der Route wie oben definiert sollte Ihre Web-App beim Aufrufen von https://your-app-domain/webhooks/twitter?crc\_token=foo in Ihrem Webbrowser eine ähnliche Antwort wie unten zurückgeben.

```
{
  "response_token": "sha256=x0mYd8hz2goCTfcNAaMqENy2BFgJJfJOb4PdvTffpwg="
}
```

<div id="example-json-response">
  #### Weitere Beispiele:
</div>

- [HIER](https://github.com/xdevplatform/account-activity-dashboard/blob/master/helpers/security.js) ist eine Beispielmethode für CRC-Antworten, geschrieben in Node/JS.
- [HIER](https://github.com/xdevplatform/SnowBotDev/blob/master/app/controllers/snow_bot_dev_app.rb) ist eine Beispielmethode für CRC-Antworten, geschrieben in Ruby (siehe _generate\_crc\_response_ und die /GET-Route, die CRC-Ereignisse empfängt).

### Optionale Validierung des Signatur-Headers

Beim Empfangen einer POST-Anfrage von X, beim Senden einer GET-Anfrage zum Erstellen eines Webhooks oder beim Senden einer GET-Anfrage zur Durchführung eines manuellen CRC wird in den Headers eine Hash-Signatur unter x-twitter-webhooks-signature übermittelt. Diese Signatur kann verwendet werden, um zu prüfen, dass die Datenquelle X ist. Die POST-Hash-Signatur beginnt mit sha256= und weist auf die Verwendung von HMAC SHA-256 zur Signierung Ihres X-App-Consumer-Secrets und des Payloads hin. Der GET-Hash wird aus dem Query-Parameter-String crc\_token=$token\&nonce=$nonce berechnet. 

**Schritte zur Validierung einer Anfrage**

1. Erstellen Sie einen Hash mithilfe Ihres Consumer-Secrets und des eingehenden Request-Bodys (Payload).
2. Vergleichen Sie den erzeugten Hash mit dem Base64-codierten Wert von x-twitter-webhooks-signature. Verwenden Sie eine Methode wie [compare\_digest](https://docs.python.org/2/library/hmac.html), um die Anfälligkeit gegenüber Timing-Angriffen zu verringern.

<div id="optional-signature-header-validation">
  ### Zusätzliche Sicherheitsrichtlinien
</div>

Nachfolgend finden Sie zusätzliche Sicherheitsrichtlinien, die Sie für Ihre Webanwendung berücksichtigen sollten. Das Nichtumsetzen dieser Richtlinien beeinträchtigt die Funktionsfähigkeit Ihres Webhooks nicht, wird jedoch vom X Information Security Team nachdrücklich empfohlen. Wenn Sie mit den unten genannten Empfehlungen nicht vertraut sind, wenden Sie sich an Ihre Serveradministratorin oder Ihren Serveradministrator.

#### Aggregierte Netzwerkblöcke von X

Zur zusätzlichen Sicherheit können Sie die folgenden aggregierten Netzwerkblöcke auf eine Allowlist setzen:

- 199.59.148.0/22

- 199.16.156.0/22

- 192.133.77.0/26

- 64.63.15.0/24

- 64.63.31.0/24

- 64.63.47.0/24

- 202.160.128.0/24

- 202.160.129.0/24

- 202.160.130.0/24

<div id="x-aggregate-network-blocks">
  #### Empfohlene Serverkonfigurationen
</div>

- Bewertung „A“ im Test auf [ssllabs.com](http://ssllabs.com/)
- **TLS 1.2 aktivieren**
- Forward Secrecy aktivieren
- SSLv2 deaktivieren
- SSLv3 deaktivieren (wegen POODLE)
- TLS 1.0 deaktivieren
- TLS 1.1 deaktivieren
- TLS-Kompression deaktivieren
- Session Tickets deaktivieren, es sei denn, Sie rotieren die Session-Ticket-Schlüssel.
- In der SSL-Konfiguration die Option „ssl\_prefer\_server\_ciphers“ oder „SSLHonorCipherOrder“ auf „on“ setzen.
- Sicherstellen, dass die Cipher-Liste modern ist, z. B.:
  `ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:DES-CBC3-SHA`

## Verwaltung von Webhooks und Abonnements

### Webhooks erstellen und ändern

Um Webhook-URLs zu ändern, müssen Sie den vorhandenen Webhook löschen und anschließend einen neuen erstellen. Beachten Sie, dass Sie in diesem Fall Benutzerabonnements dem neuen Webhook erneut hinzufügen müssen.

#### Endpunkte zur Verwaltung der Webhook-Konfiguration:

|     |     |
| :--- | :--- |
| **Methode** | Enterprise |
| Registriert eine Webhook-URL / erzeugt eine webhook\_id | [POST webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) |
| Gibt alle Webhook-URLs und deren Status zurück | [GET webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |
| Löscht die aktuelle Webhook-Konfiguration der App | [DELETE webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) |
| Löst manuell eine CRC-Anfrage aus | [PUT webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) |

<div id="webhook-configuration-management-endpoints">
  #### Warum kann ich die Webhook-URL nicht einfach aktualisieren?
</div>

Warum sind Webhook-Konfigurationen unveränderlich? X nimmt Sicherheit sehr ernst. Wenn Ihre Webhook-URL geändert wurde, besteht die Möglichkeit, dass Ihr Consumer Key und Ihr Consumer Secret kompromittiert wurden. Durch die Anforderung, eine neue Webhook-Konfiguration zu erstellen, müssen Sie Ihre App zudem erneut für die Ereignisse Ihrer Nutzer abonnieren. Dafür sind Zugriffstoken erforderlich, über die eine böswillige Partei mit geringerer Wahrscheinlichkeit verfügt. Dadurch sinkt das Risiko, dass Dritte Zugriff auf private Informationen Ihrer Nutzer erhalten.
 

### Hinzufügen und Entfernen von Nutzerabonnements

Unterstützung für Tausende von Abonnements ist mit der Enterprise-Stufe verfügbar. Wenn Sie bereits eine Account-Managerin oder einen Account-Manager haben, wenden Sie sich bei Fragen bitte an diese Person. Um Zugriff auf die Enterprise-APIs zu beantragen, [klicken Sie hier](https://developer.x.com/en/products/x-api/enterprise). 

#### Endpunkte zur Abonnementverwaltung

 

|     |     |
| :--- | :--- |
| Methode | Enterprise |
| Neues Benutzerabonnement hinzufügen | [POST webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) |
| Benutzerabonnement abrufen | [GET webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) |
| Liste aller aktiven Abonnements zurückgeben | [GET webhooks/:webhook\_id/subscriptions/all/list](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |
| Deaktiviert ein Benutzerabonnement mittels App-only OAuth | [DELETE webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |

Account Activity API: Enterprise

<Note>
  **Bitte beachten**: 

  X muss den Zugriff auf die Account Activity API für Ihre Entwickler-App freischalten, bevor Sie die API nutzen können. Teilen Sie dazu die App-ID, die Sie für die Authentifizierung verwenden möchten, Ihrem Account Manager oder dem technischen Support-Team mit.
</Note>

Die [Account Activity API](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity) umfasst eine Reihe von Endpunkten, mit denen Sie Benutzerabonnements erstellen und verwalten können, um über eine einzige Verbindung Kontoaktivitäten aller abonnierten Konten in Echtzeit zu erhalten. 

Für die Account Activity API stehen zwei Authentifizierungsmethoden zur Verfügung ([OAuth 1.0a](/de/resources/fundamentals/authentication#oauth-1-0a-2) und [OAuth 2.0 Bearer Token](/de/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)). Welche Methode Sie verwenden sollten, hängt vom jeweiligen Endpunkt ab.

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Beschreibung** | \*\*Endpoint \*\* | OAuth 1.0a  <br />(Benutzerkontext) | OAuth 2.0 Bearer-Token (nur Anwendung) |
| Registriert eine neue Webhook-URL für den angegebenen Anwendungskontext | [POST account\_activity/webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks) | ✓   |     |
| Gibt alle URLs und deren Status für die angegebene Anwendung zurück | [GET account\_activity/webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |     | ✓   |
| Führt eine Challenge-Response-Prüfung (CRC) für die URL eines bestimmten Webhooks aus | [PUT account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) | ✓   |     |
| Abonniert die Anwendung für die Kontoereignisse eines Benutzers | [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Gibt die Anzahl der derzeit aktiven Abonnements zurück | [GET account\_activity/subscriptions/count](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |     | ✓   |
| Prüft, ob eine Webhook-Konfiguration für die Ereignisse eines Benutzers abonniert ist | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Gibt eine Liste der derzeit aktiven Abonnements zurück | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all/list](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all-list) |     | ✓   |
| Löscht einen Webhook | [DELETE account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) | ✓   |     |
| \[VERALTET] Deaktiviert ein Abonnement für den angegebenen Benutzerkontext und die Anwendung | [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) | ✓ \* |     |
| Deaktiviert ein Abonnement mit anwendungsbasiertem OAuth | [DELETE /account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |     | ✓   |
| Stellt Aktivitäten an einen Webhook erneut zu | [POST /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#replay-api) |     | ✓   |

\*\_ Die Authentifizierung erfordert die Zugriffstoken des abonnierenden Benutzers. \_

Für die Endpoints, die eine OAuth 1.0a-Authentifizierung im Benutzerkontext erfordern, müssen Sie die folgenden Anmeldedaten angeben, um die Anfrage zu authentifizieren: 

- Consumer Keys (API Key und Secret)
- Access Tokens (Access Token und Secret)

Bei den folgenden drei Endpoints führen Sie Schreibaktionen im Kontext Ihrer Anwendung aus (es sind keine X-Nutzer beteiligt). Daher müssen Sie die Access Tokens bereitstellen, die zu Ihrer Entwickler-App gehören. Diese können direkt im [Developer Portal](https://developer.x.com/en/portal/projects-and-apps) unter dem Tab „Keys and tokens“ Ihrer App generiert werden.  

- [POST account\_activity/webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks): Eine neue Webhook-URL für den angegebenen Anwendungskontext registrieren
- [PUT account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id): Eine Challenge-Response-Überprüfung (CRC) für die URL eines angegebenen Webhooks auslösen
- [DELETE account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id): Einen Webhook löschen

Bei den folgenden drei Endpunkten senden Sie hingegen eine Anfrage, die Ihrer Anwendung erlaubt, im Namen eines X-Nutzers auf geschützte Daten zuzugreifen (z. B. Direct Messages). Sie müssen daher die Access Tokens des betreffenden abonnierenden Nutzers bereitstellen. Die erforderlichen Access Tokens können über den 3-legged-OAuth-Flow erhalten werden (siehe [OAuth 1.0a: how to obtain a user’s Access Tokens](/de/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)). Diese Endpunkte sind in der obigen Tabelle mit einem Sternchen (\*) gekennzeichnet.

- [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all): Die Anwendung für die Kontoereignisse eines Nutzers anmelden
- [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all): Prüfen, ob eine Webhook-Konfiguration für die Ereignisse eines Nutzers abonniert ist
- [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated): Ein Abonnement für den angegebenen Nutzerkontext und die Anwendung deaktivieren \[DEPRECATED]

<Note>
  **Bitte beachten**: 

  Stellen Sie sicher, dass Ihre Entwickler-App für „Lesen, Schreiben und Direct Messages“ aktiviert ist. Sie können diese Einstellung im [Bereich „Projects & Apps“](https://developer.x.com/en/portal/projects-and-apps) Ihres Entwicklerkontos unter „App-Berechtigungen“ für die ausgewählte Entwickler-App ändern. Nach dem Ändern der Berechtigungseinstellungen müssen Sie Ihre App-Anmeldedaten neu generieren.
</Note>

Eine Liste aller mit der Account Activity API verfügbaren Endpunkte, einschließlich zugehöriger Beschreibungen und Beispiel-cURL-Anfragen mit Implementierungsbeispielen für die Authentifizierung, finden Sie in der [API-Referenzdokumentation](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index).

Weitere Informationen finden Sie in den [Beispiel-Webanwendungen und Hilfsskripten von XDev](https://github.com/xdevplatform/account-activity-dashboard-enterprise), um mit der Enterprise Account Activity API zu beginnen.

<Note>
  **Bitte beachten**: 

  X muss den Zugriff auf die Account Activity API für Ihre Entwickler-App freischalten, bevor Sie die API verwenden können. Teilen Sie hierfür Ihrem Account Manager oder dem technischen Supportteam die App-ID mit, die Sie für Authentifizierungszwecke verwenden möchten.
</Note>

Die [Account Activity API](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity) umfasst eine Reihe von Endpunkten, mit denen Sie Nutzerabonnements erstellen und verwalten können, um in Echtzeit Kontoaktivitäten für alle Ihre abonnierten Konten über eine einzelne Verbindung zu empfangen. 

Für die Account Activity API stehen zwei Authentifizierungsmethoden zur Verfügung ([OAuth 1.0a](/de/resources/fundamentals/authentication#oauth-1-0a-2) und [OAuth 2.0 Bearer Token](/de/resources/fundamentals/authentication#oauth-2-0)). Welche Methode Sie verwenden sollten, hängt vom jeweiligen Endpunkt ab.

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Beschreibung** | \*\*Endpoint \*\* | OAuth 1.0a  <br />(Benutzerkontext) | OAuth 2.0 Bearer-Token (nur Anwendung) |
| Registriert eine neue Webhook-URL für den angegebenen Anwendungskontext | [POST account\_activity/webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks) | ✓   |     |
| Gibt alle URLs und deren Status für die angegebene Anwendung zurück | [GET account\_activity/webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |     | ✓   |
| Führt eine Challenge-Response-Prüfung (CRC) für die URL eines bestimmten Webhooks aus | [PUT account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) | ✓   |     |
| Abonniert die Anwendung für die Kontoereignisse eines Benutzers | [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Gibt die Anzahl der derzeit aktiven Abonnements zurück | [GET account\_activity/subscriptions/count](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |     | ✓   |
| Prüft, ob eine Webhook-Konfiguration für die Ereignisse eines Benutzers abonniert ist | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Gibt eine Liste der derzeit aktiven Abonnements zurück | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all/list](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all-list) |     | ✓   |
| Löscht einen Webhook | [DELETE account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) | ✓   |     |
| \[VERALTET] Deaktiviert ein Abonnement für den angegebenen Benutzerkontext und die Anwendung | [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) | ✓ \* |     |
| Deaktiviert ein Abonnement mit anwendungsbasiertem OAuth | [DELETE /account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |     | ✓   |
| Stellt Aktivitäten an einen Webhook erneut zu | [POST /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#replay-api) |     | ✓   |

\*\_ Die Authentifizierung erfordert die Zugriffstoken des abonnierenden Benutzers. \_

Für die Endpoints, die eine OAuth 1.0a-Authentifizierung im Benutzerkontext erfordern, müssen Sie die folgenden Anmeldedaten angeben, um die Anfrage zu authentifizieren: 

- Consumer Keys (API Key und Secret)
- Access Tokens (Access Token und Secret)

Bei den folgenden drei Endpoints führen Sie Schreibaktionen im Kontext Ihrer Anwendung aus (es sind keine X-Nutzer beteiligt). Daher müssen Sie die Access Tokens bereitstellen, die zu Ihrer Entwickler-App gehören. Diese können direkt im [Developer Portal](https://developer.x.com/en/portal/projects-and-apps) unter dem Tab „Keys and tokens“ Ihrer App generiert werden.  

- [POST account\_activity/webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks): Registrieren Sie eine neue Webhook-URL für den angegebenen Anwendungskontext
- [PUT account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id): Führen Sie eine Challenge-Response-Prüfung (CRC) für die URL eines bestimmten Webhooks durch
- [DELETE account\_activity/webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id): Löschen Sie einen Webhook

Im Gegensatz dazu senden Sie bei den folgenden drei Endpunkten eine Anfrage, die Ihrer Anwendung erlaubt, im Namen eines X-Nutzers auf geschützte Daten zuzugreifen (z. B. Direct Messages). Sie müssen daher die Access Tokens des betreffenden abonnierten Nutzers bereitstellen. Die erforderlichen Access Tokens können über den 3-legged OAuth-Flow bezogen werden (siehe [OAuth 1.0a: how to obtain a user’s Access Tokens](/de/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)). Diese Endpunkte sind in der obigen Tabelle mit einem Sternchen (\*) gekennzeichnet.

- [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all): Abonnieren Sie die Kontoereignisse eines Nutzers für die Anwendung
- [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all): Prüfen Sie, ob eine Webhook-Konfiguration auf die Ereignisse eines Nutzers abonniert ist
- [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated): Deaktivieren Sie ein Abonnement für den angegebenen Nutzerkontext und die Anwendung \[DEPRECATED]

<Note>
  **Bitte beachten**: 

  Stellen Sie sicher, dass Ihre Entwickler-App für „Read, Write, and Direct Messages“ aktiviert ist. Sie können diese Einstellung im Bereich [Projekte und Apps](https://developer.x.com/en/portal/projects-and-apps) Ihres Entwicklerkontos unter „App-Berechtigungen“ für die ausgewählte Entwickler-App ändern. Nach dem Ändern der Berechtigungseinstellungen müssen Sie Ihre App-Anmeldedaten neu generieren.
</Note>

Eine Liste aller mit der Account Activity API verfügbaren Endpunkte, einschließlich zugehöriger Beschreibungen und Beispiel-cURL-Anfragen mit Implementierungsbeispielen für die Authentifizierung, finden Sie in der [API-Referenzdokumentation](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index).

Weitere Informationen finden Sie in den [Beispiel-Web-App- und Hilfsskripten](https://github.com/xdevplatform/account-activity-dashboard-enterprise) von XDev, um mit der Enterprise Account Activity API zu starten.

## Wiederholungsversuche

`Enterprise`

Einer der Vorteile der Enterprise-Stufe der Account Activity API ist ein Wiederholungsmechanismus für Webhook-Ereignisse. Wenn kein erfolgreicher HTTP-Antwortcode 200 empfangen wird, initiiert der X-Server einen Wiederholungsmechanismus und sendet das Webhook-Ereignis innerhalb von fünf Minuten bis zu drei Mal erneut. Dieser Wiederholungsdienst für Webhook-Ereignisse erhöht die Zuverlässigkeit und ermöglicht die Wiederherstellung von Ereignissen, wenn Netzwerkprobleme auftreten sowie während clientseitiger Dienstunterbrechungen und Deployments.
 

### Was sind Wiederholungsversuche?

Die Account Activity API bietet eine Wiederholungsfunktion, wenn die Web-App des Clients keine „Success“-200-Antwort für ein Account-Activity-Webhook-Ereignis zurückgibt. Wenn die Clientseite den erfolgreichen Empfang eines Ereignisses nicht bestätigt, geht X davon aus, dass das Ereignis nicht empfangen wurde. Wenn eine Nicht-200-Antwort eingeht, keine Antwort innerhalb von drei Sekunden eingeht oder wir überhaupt keine Antwort erhalten, wiederholen wir die Anfrage und lassen diese drei Sekunden offen. Das bedeutet, dass Sie über zwei Versuche hinweg insgesamt ungefähr fünf Sekunden Zeit haben, zu antworten, um die Aktivität zu erhalten, die wir an Ihre Webhook-URL zu senden versuchen. Falls Ihr Server nicht antwortet oder einen vorübergehenden Fehler zurückgibt, versuchen wir es fünf Minuten lang erneut. Es gibt insgesamt drei Wiederholungsversuche, um die Validierung zu bestätigen. Dies bietet Redundanz und stellt sicher, dass Sie alle Webhook-Ereignisse erhalten. Beachten Sie, dass Abonnements mit Wiederholungsversuchen wiederholte Ereignisse für beliebige/alle Aktivitäten aller abonnierten Nutzer auf ihrem Webhook erhalten.

Wenn Sie die Validierung innerhalb dieser acht Versuche nicht bestätigen, ist die Aktivität über die Account Activity API nicht mehr verfügbar. 

<div id="what-are-retries">
  ### Zeitplan für erneute Zustellversuche
</div>

Die Account Activity API unternimmt innerhalb eines Fünf-Minuten-Zeitraums bis zu drei erneute Zustellversuche, bis eine 200-Antwort empfangen wird. Weitere Details finden Sie in der Tabelle unten. Nach etwa fünf Minuten kann die Aktivität nicht mehr über die Account Activity API erneut gesendet werden. Verwenden Sie dann andere X-Endpunkte, um fehlende Daten zu erfassen. Beispielsweise können die [Search-APIs](/de/x-api/enterprise-gnip-2.0/fundamentals/search-api) verwendet werden, um relevante Posts, Retweets, Quote Tweets, Erwähnungen und Antworten abzurufen. Verpasste Direct Messages können mit [diesem Endpunkt](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) abgerufen werden.

#### Zeitplan für erneute Zustellversuche

|     |
| :--- |
| Aktivität erstellt, POST an die Webhook-URL der Account Activity API, läuft nach drei Sekunden in ein Timeout. |
| Nach Ende des vorherigen Timeouts drei Sekunden warten, dann POST an die Webhook-URL der Account Activity API, läuft nach drei Sekunden in ein Timeout. |
| Nach Ende des vorherigen Timeouts 27 Sekunden warten, dann POST an die Webhook-URL der Account Activity API, läuft nach drei Sekunden in ein Timeout. |
| Nach Ende des vorherigen Timeouts 242 Sekunden warten, dann POST an die Webhook-URL der Account Activity API, läuft nach drei Sekunden in ein Timeout. |
| Die Account Activity API unternimmt danach keine weiteren POST-Versuche. Der Client muss andere X-Endpunkte verwenden, um die Daten wiederherzustellen. |

## Datenobjektstruktur für Account Activity

| Objekt | Details |
| :--- | :--- |
| for\_user\_id | Identifiziert den abonnierten Benutzer, auf den sich das Ereignis bezieht. |
| is\_blocked\_by | (bedingt) Wird nur angezeigt, wenn ein anderer Benutzer Ihren abonnierten Benutzer erwähnt. Nur enthalten, wenn true, und nur bei Erwähnungsereignissen (Posts). |
| source | Der Benutzer, der die Aktivität ausführt. Zum Beispiel ist der Benutzer, der folgt, blockiert oder stummschaltet, der Quellbenutzer. |
| target | Der Benutzer, auf den sich die Aktivität bezieht. Zum Beispiel ist der Benutzer, dem gefolgt, der blockiert oder stummgeschaltet wird, der Zielbenutzer. |

**Verfügbare Aktivitäten**

| Nachrichtentyp | Details |
| :--- | :--- |
| [tweet\_create\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#tweet-create-events-posts-retweets-replies-quotetweets) | Post-Status-Payload, wenn eine der folgenden Aktionen vom oder am abonnierten Benutzer vorgenommen wird: Posts, Retweets, Antworten, @Erwähnungen, QuoteTweets, Retweet von QuoteTweets. |
| [favorite\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#favorite-events) | Like-Ereignisstatus mit Benutzer und Ziel. |
| [follow\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#follow-events) | Folgen-Ereignis mit Benutzer und Ziel. |
| [unfollow\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#unfollow-events) | Entfolgen-Ereignis mit Benutzer und Ziel. |
| [block\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#block-events) | Blockieren-Ereignis mit Benutzer und Ziel. |
| [unblock\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#unblock-events) | Entblockieren-Ereignis mit Benutzer und Ziel. |
| [mute\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#mute-events) | Stummschalten-Ereignis mit Benutzer und Ziel. |
| [unmute\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#unmute-events) | Stummschaltung-aufheben-Ereignis mit Benutzer und Ziel. |
| [user\_event](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#user-event) | Widerrufsereignisse, die gesendet werden, wenn ein Benutzer die App-Autorisierung entfernt und das Abonnement automatisch gelöscht wird. |
| [direct\_message\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-events) | Direktnachrichten-Status mit Benutzer und Ziel, wenn eine Direktnachricht gesendet oder empfangen wird. |
| [direct\_message\_indicate\_typing\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-indicate-typing-events) | Eingabeanzeige-Ereignis für Direktnachrichten mit Benutzer und Ziel. |
| [direct\_message\_mark\_read\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-mark-read-events) | Gelesen-Markieren-Ereignis für Direktnachrichten mit Benutzer und Ziel. |
| [tweet\_delete\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#tweet-delete-events) | Hinweis auf gelöschte Posts, um die Compliance leichter sicherzustellen. |

**Payload-Beispiele**

Nachfolgend finden Sie Payload-Beispiele für jedes in der obigen Tabelle beschriebene Account-Activity-Ereignis.

#### tweet\_create\_events (Posts, Retweets, Antworten, Zitierte Posts) 

```
{
	"for_user_id": "2244994945",
	"tweet_create_events": [
	  {
		<Tweet Object>
	  }
	]
}
```

#### tweet\_create\_events (@Erwähnungen) 

```
{
	"for_user_id": "2244994945",
	"user_has_blocked": "false",
	"tweet_create_events": [
	  {
		<Tweet Object>
	  }
	]
}
```

#### favorite\_events

```
{
	"for_user_id": "2244994945",
	"favorite_events": [{
		"id": "a7ba59eab0bfcba386f7acedac279542",
		"created_at": "Mon Mar 26 16:33:26 +0000 2018",
		"timestamp_ms": 1522082006140,
		"favorited_status": {
			<Tweet Object>
		},
		"user": {
			<User Object>
		}
	}]
}
```

#### follow\_events

```
{
	"for_user_id": "2244994945",
	"follow_events": [{
			"type": "follow",
			"created_timestamp": "1517588749178",
			"target": {
				<User Object >
			},
			"source": {
				< User Object >
			}
		]
	}
}
```

#### unfollow\_events

```
{
	"for_user_id": "2244994945",
	"follow_events": [{
			"type": "unfollow",
			"created_timestamp": "1517588749178",
			"target": {
				<User-Objekt>
			},
			"source": {
				<User-Objekt>
			}
		]
	}
}
```

#### block\_events

```
{
	"for_user_id": "2244994945",
	"block_events": [{
		"type": "block",
		"created_timestamp": "1518127020304",
		"source": {
			<User-Objekt>
		},
		"target": {
			<User-Objekt>
		}
	}]
}
```

#### unblock\_events

```
{
	"for_user_id": "2244994945",
	"block_events": [{
		"type": "unblock",
		"created_timestamp": "1518127020304",
		"source": {
			<User-Objekt>
		},
		"target": {
			<User-Objekt>
		}
	}]
}
```

#### mute\_events

```
{
	"for_user_id": "2244994945",
	"mute_events": [
		{
			"type": "mute",
		  	"created_timestamp": "1518127020304",
			"source": {
				<User-Objekt>
			},
			"target": {
				<User-Objekt>
			}
		}
	]
}
```

#### unmute\_events

```
{
	"for_user_id": "2244994945",
	"mute_events": [
		{
			"type": "unmute",
		  	"created_timestamp": "1518127020304",
			"source": {
				<User Object>
			},
			"target": {
				<User Object>
			}
		}
	]
}
```

#### user\_event

```
{
	"user_event": {
		"revoke": {
			"date_time": "2018-05-24T09:48:12+00:00",
			"target": {
				"app_id": "13090192"
			},
			"source": {
				"user_id": "63046977"
			}
		}
	}
}
```

#### direct\_message\_events

```
{
  	"for_user_id": "4337869213",
	"direct_message_events": [{
		"type": "message_create",
		"id": "954491830116155396",
		"created_timestamp": "1516403560557",
		"message_create": {
			"target": {
				"recipient_id": "4337869213"
			},
			"sender_id": "3001969357",
			"source_app_id": "13090192",
			"message_data": {
				"text": "Hello World!",
				"entities": {
					"hashtags": [],
					"symbols": [],
					"user_mentions": [],
					"urls": []
				}
			}
		}
	}],
	"apps": {
		"13090192": {
			"id": "13090192",
			"name": "FuriousCamperTestApp1",
			"url": "https://x.com/furiouscamper"
		},
		"users": {},
		"3001969357": {
			"id": "3001969357",
			"created_timestamp": "1422556069340",
			"name": "Jordan Brinks",
			"screen_name": "furiouscamper",
			"location": "Boulder, CO",
			"description": "Alter Ego – X PE opinions-are-my-own",
			"url": "https://t.co/SnxaA15ZuY",
			"protected": false,
			"verified": false,
			"followers_count": 22,
			"friends_count": 45,
			"statuses_count": 494,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
		},
		"4337869213": {
			"id": "4337869213",
			"created_timestamp": "1448312972328",
			"name": "Harrison Test",
			"screen_name": "Harris_0ff",
			"location": "Burlington, MA",
			"protected": false,
			"verified": false,
			"followers_count": 8,
			"friends_count": 8,
			"profile_image_url": "null",
			"statuses_count": 240,
			"profile_image_url_https": "https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png"
		}
	}
}
```

#### direct\_message\_indicate\_typing\_events

```
{
	"for_user_id": "4337869213",
	"direct_message_indicate_typing_events": [{
		"created_timestamp": "1518127183443",
		"sender_id": "3284025577",
		"target": {
			"recipient_id": "3001969357"
		}
	}],
	"users": {
		"3001969357": {
			"id": "3001969357",
			"created_timestamp": "1422556069340",
			"name": "Jordan Brinks",
			"screen_name": "furiouscamper",
			"location": "Boulder, CO",
			"description": "Alter Ego – X PE opinions-are-my-own",
			"url": "https://t.co/SnxaA15ZuY",
			"protected": false,
			"verified": false,
			"followers_count": 23,
			"friends_count": 47,
			"statuses_count": 509,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
		},
		"3284025577": {
			"id": "3284025577",
			"created_timestamp": "1437281176085",
			"name": "Bogus Bogart",
			"screen_name": "bogusbogart",
			"protected": true,
			"verified": false,
			"followers_count": 1,
			"friends_count": 4,
			"statuses_count": 35,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/763383202857779200/ndvZ96mE_normal.jpg"
		}
	}
}
```

#### direct\_message\_mark\_read\_events

```
{
	"for_user_id": "4337869213",
	"direct_message_mark_read_events": [{
		"created_timestamp": "1518452444662",
		"sender_id": "199566737",
		"target": {
			"recipient_id": "3001969357"
		},
		"last_read_event_id": "963085315333238788"
	}],
	"users": {
		"199566737": {
			"id": "199566737",
			"created_timestamp": "1286429788000",
			"name": "Le Braat",
			"screen_name": "LeBraat",
			"location": "Denver, CO",
			"description": "data by day @X, design by dusk",
			"protected": false,
			"verified": false,
			"followers_count": 299,
			"friends_count": 336,
			"statuses_count": 752,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/936652894371119105/YHEozVAg_normal.jpg"
		},
		"3001969357": {
			"id": "3001969357",
			"created_timestamp": "1422556069340",
			"name": "Jordan Brinks",
			"screen_name": "furiouscamper",
			"location": "Boulder, CO",
			"description": "Alter Ego – X PE opinions are my own",
			"url": "https://t.co/SnxaA15ZuY",
			"protected": false,
			"verified": false,
			"followers_count": 23,
			"friends_count": 48,
			"statuses_count": 510,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
		}
	}
}
```

#### tweet\_delete\_events

```
{
    "for_user_id": "930524282358325248",
    "tweet_delete_events": [
{
        "status": {
            "id": "1045405559317569537",
            "user_id": "930524282358325248"
        },
        "timestamp_ms": "1432228155593"
    }
   ]
}
```

## Account Activity Replay API

`Enterprise`

Die Account Activity Replay API ist ein Tool zur Datenwiederherstellung, mit dem Sie Ereignisse bis zu fünf Tage rückwirkend abrufen können. Sie sollte eingesetzt werden, um Daten wiederherzustellen, wenn Ihr [Webhook](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api)-Server Ereignisse verpasst — sei es aufgrund von Verbindungsabbrüchen, die länger als das [Retry-Fenster](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) andauern, oder in Disaster-Recovery-Szenarien, in denen Sie ein paar Tage benötigen, um Ihr System wieder in den Normalbetrieb zu versetzen.

Die Account Activity Replay API wurde für alle Szenarien entwickelt, in denen Sie über einen Zeitraum hinweg keine [Aktivitäten](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity) erfassen konnten. Sie liefert Aktivitäten an denselben Webhook, der für die ursprüngliche Echtzeitbereitstellung der Aktivitäten verwendet wurde. Dieses Produkt ist ein Wiederherstellungstool und kein Backfill-Tool; das bedeutet, dass Ereignisse nur dann erneut wiedergegeben werden, wenn zuvor versucht wurde, sie zuzustellen. Die Account Activity Replay API kann keine Ereignisse für einen Zeitraum vor dem Erstellungszeitpunkt eines Abonnements liefern.

### Verwendung der Account Activity Replay API

Wenn Ihr Konto mit Replay-Funktionalität konfiguriert ist, können Sie Anfragen ähnlich wie bei der Account Activity API stellen. Wichtig ist, dass Ihre Anfrage einen Parameter webhook\_id angibt, der bestimmt, für welchen Webhook die Aktivitäten wiedergegeben werden sollen. Anders ausgedrückt: Eine Replay-Anfrage weist die Account Activity Replay API an, Ereignisse von einem Startdatum und einer Startzeit bis zu einem Enddatum und einer Endzeit abzurufen — basierend auf webhook\_id und application\_id.

Bitte beachten Sie, dass Zeiten in UTC erwartet werden. Diese Aktivitäten werden über den registrierten Webhook, der mit der ID verknüpft ist, mit einer Rate von bis zu 2.500 Ereignissen pro Sekunde zugestellt. Beachten Sie außerdem, dass zu einem gegebenen Zeitpunkt nur ein Replay-Job pro Webhook ausgeführt werden kann, auch wenn alle Abonnements, die während des auf diesem Webhook angegebenen Datums-/Zeitraums aktiv waren, wiedergegeben werden.

Ereignisse werden beginnend mit der ersten (ältesten) Minute des angegebenen Zeitraums zugestellt und chronologisch (so gut wie möglich) fortgeführt, bis die letzte Minute ausgeliefert ist. Zu diesem Zeitpunkt sendet Replay ein [Job-Abschluss-Ereignis](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#job-completed-successfully-message) an den Webhook. Da wir Aktivitäten chronologisch zustellen, kann es, wenn es zum Startzeitpunkt wenige oder keine passenden Ergebnisse gibt, bis zur ersten Zustellung zu einer Verzögerung kommen.

<div id="using-account-activity-replay-api">
  ### Einschränkungen
</div>

Replay ist als Tool gedacht, um Aktivitäten bis zu fünf Tage in die Vergangenheit unkompliziert wiederherzustellen, liefert jedoch keine Ereignisse vor dem Zeitpunkt der Erstellung eines Abonnements. Wenn Sie beispielsweise vor drei Tagen ein neues Abonnement hinzugefügt und einen Replay-Job mit einem Fenster von fünf Tagen bis heute ausgeführt haben, würden Sie nur Daten für die drei Tage erhalten, in denen dieses neue Abonnement aktiv war.

<div id="limitations">
  ### Datenverfügbarkeit und -typen
</div>

Aktivitäten der Account Activity Replay API sind fünf Tage ab Einreichung der Anfrage verfügbar, wobei neue Daten etwa 10 Minuten nach Erstellung einer Aktivität verfügbar werden. Sie können Anfragen stellen, in denen Sie mit den Parametern from\_date und to\_date einen Zeitraum innerhalb dieses Fünf-Tage-Fensters angeben. Ereignisse, die ursprünglich zugestellt wurden, bevor Sie Zugriff auf Replay hatten, können nicht erneut wiedergegeben werden. Wenn Ihr Konto beispielsweise am 1. Juni 2019 um 15:30 Uhr UTC für den Zugriff auf die Account Activity Replay API freigeschaltet wurde, könnten Sie Replay nicht verwenden, um Ereignisse abzurufen, die vor diesem Datum und dieser Uhrzeit liegen.

Fahren Sie fort zur [Account Activity Replay API-Referenz](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated)

## Einführung in die Migration

**Wir haben 2018 die Produkte Site Streams, User Streams und die standardisierte Betaversion der Account Activity API – nur DMs – eingestellt. Wenn Sie diese Produkte verwendet haben, migrieren Sie bitte auf die Premium- oder Enterprise-Version der Account Activity API.**

**Wir haben außerdem die veralteten Endpunkte für Direct Messages eingestellt. Wenn Sie diese Endpunkte verwendet haben, migrieren Sie bitte entweder auf die neuen DM-Endpunkte oder auf die Premium- bzw. Enterprise-Version der Account Activity API.**

**Bitte lesen Sie [diese Ankündigung](https://devcommunity.x.com/t/details-and-what-to-expect-from-the-api-deprecations-this-week-on-august-16-2018/110746), um mehr zu erfahren.**

Die folgenden Endpunkte sind von diesen Änderungen betroffen:

- User Streams
- Site Streams
- GET direct\_messages
- GET direct\_messages/sent
- GET direct\_messages/show
- POST direct\_messages/new
- POST direct\_messages/destroy
   

Wir stellen neue Endpunkte und Dienste bereit, die einen ähnlichen Zugriff bieten und bei Direct Messages zusätzliche Funktionen bereitstellen:

- Account Activity API [Enterprise](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) und [Premium](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index)
- [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events)
- [GET direct\_messages/events/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event)
- [POST direct\_messages/events/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event)
- [POST direct\_messages/events/destroy](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/delete-message-event)

Um Ihnen eine reibungslose Migration zu diesen neuen Endpunkten und Diensten zu ermöglichen, haben wir zwei Migrationsleitfäden:

- [Account Activity API – Migrationsleitfaden](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#migration-guide-moving-from-user-streams-site-streams-to-account-activity-api) für alle, die von User Streams und Site Streams zu unserem neuen webhook-basierten Dienst wechseln
- [Direct-Message-Migrationsleitfaden](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/guides/direct-message-migration) für alle, die zwischen REST-Endpunkten für Direct Messages migrieren
   

Zusätzlich bieten wir eine [Videoserie](https://www.youtube.com/playlist?list=PLFKjcMIU2WshGG6Yj940XM7Z6BFs1zfBg) zur Account Activity API und zum Einstieg.

Und schließlich haben wir Codebeispiele, die Ihr Verständnis vertiefen und Ihnen einen schnellen Einstieg ermöglichen:

- Das [Account Activity Dashboard](https://github.com/xdevplatform/Account-Activity-dashboard) ist eine Beispiel-Node.js-Webanwendung mit Hilfsskripten, um mit der Account Activity API zu starten.
- [SnowBot](https://github.com/xdevplatform/SnowBotDev) ist ein Beispiel-Chatbot, der die Account Activity API und REST-Endpunkte für Direct Messages verwendet. Er ist in Ruby geschrieben, nutzt das Sinatra-Webframework und wird auf Heroku bereitgestellt.

<div id="migration-introduction">
  ## Migrationsleitfaden: Umstieg von User Streams/Site Streams auf die Account Activity API
</div>

**Seit dem 23. August 2018 sind sowohl Site Streams als auch User Streams eingestellt. Bitte migrieren Sie zur Account Activity API.**

**Bitte lesen Sie [diese Ankündigung](https://devcommunity.x.com/t/details-and-what-to-expect-from-the-api-deprecations-this-week-on-august-16-2018/110746), um mehr zu erfahren.**

Dieser Leitfaden soll Ihnen helfen, von den veralteten User-Streams- und Site-Streams-APIs auf deren Nachfolger, die Account Activity API, umzusteigen. Unten finden Sie eine Zusammenfassung der Änderungen, eine Liste neuer Funktionen sowie zentrale Unterschiede und Überlegungen, die beim Übergang helfen. Hinweise zur Migration von grundlegenden DM-Endpunkten finden Sie im [Leitfaden zur Migration von Direct Messages](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/guides/direct-message-migration).

### Zusammenfassung der Änderungen

Die Account Activity API übermittelt Ereignisse für authentifizierte und abonnierte Accounts per Webhooks, statt über eine Streaming-Verbindung wie bei User Streams und Site Streams.

#### Veraltete APIs

GET user

GET site (einschließlich Kontrollstreams: GET site/c/:stream\_id, GET site/c/:stream\_id/info.json, GET site/c/:stream\_id/friends/ids.json, POST site/c/:stream\_id/add\_user.json, POST /site/c/:stream\_id/remove\_user.json)

<div id="deprecated-apis">
  #### Ersatzschnittstellen (APIs)
</div>

[Enterprise Account Activity API – alle Aktivitäten](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api)

### Unterschiede und Migrationsaspekte

**API-Format:** Die neue Account Activity API arbeitet anders als User Streams und Site Streams. Sie müssen Ihre Web-App anpassen, um Daten über Webhooks zu empfangen. Weitere Informationen zu Webhooks finden Sie [hier](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).

**Verfügbare Daten:** Ein weiterer wichtiger Unterschied betrifft die bereitgestellten Daten. X sendet keine Ereignisse mehr von Personen, denen Sie auf X folgen (also Ihrer Home-Timeline). Dies war eine bewusste Änderung und ist derzeit nicht zur Rücknahme vorgesehen.

**Zuverlässigkeit:** Anders als beim Streaming ermöglichen Webhooks eine Zustellbestätigung sowie Wiederholungsversuche für per POST gesendete Aktivitäten, die die Webhook-URL nicht erreichen. So ist stärker sichergestellt, dass die App alle relevanten Aktivitäten erhält – selbst bei kurzen Verbindungsunterbrechungen oder Ausfallzeiten.

<div id="differences-migration-considerations">
  ### Neue Funktionen
</div>

Die Account Activity API bietet viele neue Funktionen, insbesondere dass Daten jetzt über Webhooks statt per Streaming bereitgestellt werden. Webhooks bieten gegenüber Streaming viele Vorteile, allen voran Geschwindigkeit und Zuverlässigkeit. Die API sendet Ihnen Daten in Form von JSON-Ereignissen, sobald sie verfügbar sind, sodass Sie keine aktive Verbindung mehr aufrechterhalten oder den Endpunkt abfragen müssen. Dies verringert den Bedarf an Redundanzfunktionen und erhöht die Effizienz insgesamt. Weitere Informationen zu Webhooks finden Sie in der [technischen Dokumentation](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).

<div id="new-features">
  ### Verwaltung von Nutzerabonnements
</div>

Die Account Activity API unterstützt mehrere Abonnements für einen einzelnen registrierten Webhook. Dadurch können Aktivitäten aus mehreren Nutzerabonnements an dieselbe Zieladresse zugestellt werden – ähnlich der Site-Streams-Architektur, jedoch über Webhooks. Das bedeutet, dass Sie Abonnements im Hinblick auf Ihre Abonnementlimits unabhängig von der Webhook-Verbindung nachverfolgen können. Zudem ermöglicht dies eine Skalierung von nur wenigen bis hin zu Tausenden von Abonnements für einen einzelnen Webhook.

<div id="managing-user-subscriptions">
  ### **Migration: So gehen Sie vor**
</div>

<div id="how-to-migrate">
  ### **Befolgen Sie die folgenden Schritte, um einfach von der Site Streams API zur Account Activity API zu migrieren**
</div>

**Schritt 1: Entscheiden Sie sich für ein Paket**

Je nachdem, wie Sie derzeit mit User Streams oder Site Streams arbeiten, sollten Sie den Wechsel zur Enterprise- oder Premium-Version der Account Activity API in Betracht ziehen. Berücksichtigen Sie die Anzahl der Anwendungen oder autorisierten Nutzer, die Sie aktuell unterstützen, und skalieren Sie entsprechend dem benötigten Volumen und der erforderlichen Zuverlässigkeit. Bei der Entscheidung für das Paket, das Ihren Anforderungen am besten entspricht, sind folgende Punkte zu beachten:

- Anzahl der benötigten Webhooks
- Aktuelle/erwartete Abonnements/autorisierte Nutzer, die in Ihrer Anwendung verwaltet werden
- Aktuelle Anzahl von X-Clientanwendungen
- Der Unterstützungsgrad, den Sie von X bevorzugen (Forum-Support oder verwalteter Enterprise-1:1-Support)
- Preis jedes Pakets

**Schritt 2:** **Prüfen Sie die Einrichtung Ihrer X-App im Developer-Portal**

Die [X-App](/de/resources/fundamentals/developer-apps), die derzeit für User Streams oder Site Streams verwendet wird, wird für den Inhaber innerhalb des [Developer-Portals](/de/resources/fundamentals/developer-portal) aufgeführt. Diese X-App kann auch für die Account Activity API verwendet werden, um autorisierte Nutzer für diese Anwendung beizubehalten. Es kann auch eine neue App erstellt werden, und Nutzer können für diese neue App erneut autorisiert werden, wenn gewünscht. Wenn Sie eine neue App im Namen eines Unternehmens erstellen, wird empfohlen, die App mit einem Unternehmens-X-@handle-Konto zu erstellen.

- Aktivieren Sie „Lesen, Schreiben und Zugriff auf Direct Messages“ auf der Registerkarte [Permissions](/de/resources/fundamentals/developer-apps#app-permissions) Ihrer X-App-Seite.
  \*Beachten Sie, dass das Ändern dieser Einstellungen nicht rückwirkend ist; alle autorisierten Nutzer behalten die Autorisierungseinstellungen aus dem Zeitpunkt, zu dem sie autorisiert wurden. Wenn ein Nutzer Ihnen noch keinen Lese-, Schreib- und Direct-Message-Zugriff gewährt hat, müssen Sie diesen Nutzer Ihre Anwendung erneut autorisieren lassen.
- Wenn Sie mit [X Sign-in](/de/resources/fundamentals/authentication#log-in-with-x) und der Funktionsweise von Nutzerkontexten mit der X-API nicht vertraut sind, lesen Sie [Obtaining Access Tokens](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).
- Generieren Sie Access Tokens für den Inhaber der X-App unten auf der Registerkarte „Keys and Tokens“. Notieren Sie sich auf derselben Registerkarte Ihren Consumer Key, Consumer Secret, Access Token und Access Token Secret. Sie benötigen diese für die Nutzung der API.
- Generieren Sie ein Bearer Token mit Ihrem Consumer Key und Consumer Secret für [application-only](/de/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)-API-Methoden.

**Schritt 3: Richten Sie Ihre Webhooks ein und konfigurieren Sie sie**

- Erstellen Sie eine Web-App mit einem Endpunkt, der als Webhook zum Empfangen von Events verwendet wird (z. B. https://your\_domain.com/webhook/twitter oder https://webhooks.your\_domain.com).

- Verwenden Sie Ihren Consumer Key, Consumer Secret, Access Token und Access Token Secret beim Erstellen Ihres Webhooks. Beachten Sie, dass Ihr Endpunkt eine JSON-Antwort mit einem response\_token zurückgeben muss, der ein base64-codierter HMAC-SHA-256-Hash ist, erstellt aus dem crc\_token und dem Consumer Secret Ihrer App.

- Lesen Sie die Dokumentation zu [Securing Webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks) und beachten Sie insbesondere die Anforderungen des Challenge Response Check (CRC).

- Stellen Sie sicher, dass Ihr Webhook POST-Anfragen für eingehende Events und GET-Anfragen für den CRC unterstützt.

- Stellen Sie sicher, dass Ihr Webhook eine geringe Latenz hat (weniger als 3 Sekunden für Antworten auf POST-Anfragen).

**Schritt 4: Validieren Sie Ihre Webhook-Einrichtung**

- Webhook-APIs sichern Ihre Webhooks auf zwei Arten:

  - Challenge-Response-Checks sind erforderlich, um zu validieren, dass der Webhook-Inhaber auch der Web-App-Inhaber ist.

  - Ein Signatur-Header in jeder POST-Anfrage, damit Ihre Web-App die Quelle validieren kann.

- Um zu verifizieren, dass Sie sowohl der Inhaber der Web-App als auch der Webhook-URL sind, führt X einen Challenge Response Check (CRC) durch, der nicht mit einer zyklischen Redundanzprüfung zu verwechseln ist.

- Eine GET-Anfrage mit einem Parameter namens crc\_token wird an Ihre Webhook-URL gesendet. Ihr Endpunkt muss eine JSON-Antwort mit einem response\_token zurückgeben, der ein base64-codierter HMAC-SHA-256-Hash ist, erstellt aus dem crc\_token und dem Consumer Secret Ihrer App.

- Es ist zu erwarten, dass sich der crc\_token bei jeder eingehenden CRC-Anfrage ändert. Der crc\_token sollte in der Berechnung als Nachricht verwendet werden, wobei Ihr Consumer Secret der Schlüssel ist.

- Falls die Antwort ungültig ist, werden keine Events mehr an den registrierten Webhook gesendet.

**Schritt 5: Erstellen Sie Subscriptions für jeden autorisierten User-Streams- oder Site-Streams-Nutzer**

Umstieg von User Streams zur Account Activity API:

- Erstellen Sie eine Liste Ihrer aktuellen Benutzerabonnements in User Streams
- Richten Sie Ihre neuen Account Activity API-Abonnements mit der Anfrage ein:  _POST account\_activity/all/:env\_name/subscriptions_
- Bestätigen Sie Ihre Account Activity API-Abonnements mit der Anfrage:  \_GET account\_activity/all/:env\_name/subscriptions/list
  \_

Umstellung auf die Account Activity API von Site Streams (unter Verwendung von Control Streams):

- Erstellen Sie eine Liste Ihrer aktuellen Abonnements in Site Streams mit der Anfrage:  _GET /1.1/site/c/:stream\_id/info.json_
- Richten Sie Ihre neuen Account Activity API-Abonnements mit der Anfrage ein:  _POST account\_activity/all/:env\_name/subscriptions_
- Bestätigen Sie Ihre Account Activity API-Abonnements mit der Anfrage:  \_GET account\_activity/all/:env\_name/subscriptions/list
  \_

Registrieren eines Webhooks und Erstellen von Abonnements (keine Migration von Site Streams oder User Streams)

- Registrieren Sie Ihre Webhook-URL bei Ihrer App über [POST webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) und erhalten Sie eine webhook\_id.
- Verwenden Sie die zurückgegebene webhook\_id, um Benutzerabonnements hinzuzufügen, mit [POST webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all).

<div id="follow-the-steps-below-to-easily-migrate-from-the-site-streams-api-to-the-account-activity-api">
  ### Das Account-Activity-Dashboard (Beispielanwendung für die Account Activity API)
</div>

Wir haben eine Beispiel-App erstellt, um das Testen der Account Activity API zu beschleunigen:   

- Laden Sie die Beispielanwendung für das Account-Activity-Dashboard [hier](https://github.com/xdevplatform/Account-Activity-dashboard) herunter (verwendet Node.js)
- Folgen Sie den Anweisungen in der README, um die App zu installieren und zu starten
- Nachdem die Anwendung gestartet wurde, können Sie die Benutzeroberfläche nutzen, um Ihren Webhook einfach einzurichten und ein neues Abonnement zu erstellen

<div id="the-account-activity-dashboard-sample-account-activity-api-application">
  ### Verfügbare Aktivitäten
</div>

| Nachrichtentyp | Details |
| :--- | :--- |
| [tweet\_create\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#tweet-create-events-posts-retweets-replies-quotetweets) | Status-Payload für Posts, wenn eine der folgenden Aktionen durch den oder gegenüber dem abonnierten Nutzer erfolgt: Posts, Retweets, Antworten, @Erwähnungen, QuoteTweets |
| [favorite\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#favorite-events) | Ereignisstatus „Favorisieren“ (Like) mit Nutzer und Ziel. |
| [follow\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#follow-events) | Folgen-Ereignis mit Nutzer und Ziel. |
| [block\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#block-events) | Blockieren-Ereignis mit Nutzer und Ziel. |
| [mute\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#mute-events) | Stummschalten-Ereignis mit Nutzer und Ziel. |
| [direct\_message\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-events) | Direktnachrichten-Status mit Nutzer und Ziel. |
| [direct\_message\_indicate\_typing\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-indicate-typing-events) | Tipp-Ereignis in Direktnachrichten mit Nutzer und Ziel. |
| [direct\_message\_mark\_read\_events](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-mark-read-events) | Gelesen-Ereignis in Direktnachrichten mit Nutzer und Ziel. |

### Veraltete Streaming-Nachrichtentypen 

|     |     |
| :--- | :--- |
| Leere Zeilen | Leere Zeilen werden in der Account Activity API nicht mehr ausgeliefert, da sie in User Streams und Site Streams als Keep-Alive-Nachrichten verwendet wurden. |
| Limit-Hinweise | Limit-Hinweise werden nicht mehr an einen jeweiligen Webhook gesendet. Stattdessen können Nutzer die API aufrufen, um die aktuelle Nutzung verfügbarer Handles abzufragen. Diese Information wird zu einem späteren Zeitpunkt auch im Developer-Portal verfügbar sein. |
| Disconnect-Nachrichten | Disconnect-Hinweise sind nicht mehr erforderlich, da Webhooks nicht auf eine aktive Verbindung angewiesen sind. |
| Stall-Warnungen | Stall-Warnungen sind nicht mehr erforderlich, da Webhooks nicht darauf angewiesen sind, dass eine aktive Verbindung große Mengen eingehender Nachrichten verarbeiten kann. |
| Freundesliste | Freundeslisten werden nicht mehr proaktiv gesendet. Es wird nun einen REST-Endpunkt geben, um diese Informationen abzurufen. |

<div id="deprecated-streaming-message-types">
  ### Veraltete Ereignistypen
</div>

|     |     |     |     |     |
| :--- | :--- | :--- | :--- | :--- |
| **Beschreibung** | **Ereignisname** | **Quelle** | **Ziel** | **Zielobjekt** |
| Benutzer löscht einen Post | delete | Aktueller Benutzer | Aktueller Benutzer | Post |
| Gefolgter Benutzer löscht einen Post | delete | Gefolgter Benutzer | Gefolgter Benutzer | Post |
| Benutzer entfernt ein „Gefällt mir“ von einem Post | unfavorite | Aktueller Benutzer | Postautor | Post |
| Post des Benutzers erhält kein „Gefällt mir“ mehr | unfavorite | Benutzer, der das „Gefällt mir“ entfernt | Aktueller Benutzer | Post |
| Benutzer entfolgt jemandem | unfollow | Aktueller Benutzer | Gefolgter Benutzer | Null |
| Benutzer erstellt eine Liste | list\_created | Aktueller Benutzer | Aktueller Benutzer | Liste |
| Benutzer löscht eine Liste | list\_destroyed | Aktueller Benutzer | Aktueller Benutzer | Liste |
| Benutzer bearbeitet eine Liste | list\_updated | Aktueller Benutzer | Aktueller Benutzer | Liste |
| Benutzer fügt jemanden zu einer Liste hinzu | list\_member\_added | Aktueller Benutzer | Hinzugefügter Benutzer | Liste |
| Benutzer wird zu einer Liste hinzugefügt | list\_member\_added | Hinzufügender Benutzer | Aktueller Benutzer | Liste |
| Benutzer entfernt jemanden aus einer Liste | list\_member\_removed | Aktueller Benutzer | Entfernte Person | Liste |
| Benutzer wird aus einer Liste entfernt | list\_member\_removed | Entfernende Person | Aktueller Benutzer | Liste |
| Benutzer abonniert eine Liste | list\_user\_subscribed | Aktueller Benutzer | Listeninhaber | Liste |
| Liste des Benutzers wird abonniert | list\_user\_subscribed | Abonnierender Benutzer | Aktueller Benutzer | Liste |
| Benutzer beendet das Abonnement einer Liste | list\_user\_unsubscribed | Aktueller Benutzer | Listeninhaber | Liste |
| Abonnement der Liste des Benutzers wird beendet | list\_user\_unsubscribed | Kündigende Person | Aktueller Benutzer | Liste |
| Benutzer aktualisiert sein Profil | user\_update | Aktueller Benutzer | Aktueller Benutzer | Null |
| Benutzer aktualisiert seinen geschützten Status | user\_update | Aktueller Benutzer | Aktueller Benutzer | Null |

## Leitfaden zur Migration von Direktnachrichten

**Am 17. September 2018 haben wir die Legacy-Endpunkte für Direktnachrichten außer Betrieb genommen.
Wenn Sie diese Endpunkte genutzt haben, stellen Sie bitte sicher, dass Sie auf die neuen Endpunkte für Direktnachrichten oder die Account Activity API migrieren.**

**Bitte lesen Sie [diese Ankündigung](https://devcommunity.x.com//t/details-and-what-to-expect-from-the-api-deprecations-this-week-on-august-16-2018/110746) für weitere Informationen.**

Dieser Leitfaden soll Ihnen helfen, von den Legacy-REST-APIs für Direktnachrichten auf deren erweiterte Nachfolger zu migrieren, die den Beta-Status verlassen haben. Nachfolgend finden Sie eine Zusammenfassung der Änderungen, eine Liste neuer Funktionen sowie wichtige Unterschiede und Überlegungen, die beim Übergang helfen. Die neuen Endpunkte für Direktnachrichten stehen jetzt allen Entwicklern zur Verfügung. Hinweise zur Migration von User Streams oder Site Streams finden Sie im [Migrationsleitfaden zur Account Activity API](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#migration-guide-moving-from-user-streams-site-streams-to-account-activity-api).

- [Zusammenfassung der Änderungen](#summary)
- [Neue Funktionen](#features)
- [Senden von Direktnachrichten](#sending)
- [Empfangen von Direktnachrichten](#receiving)
- [Löschen von Direktnachrichten](#deleting)

### Zusammenfassung der Änderungen

Wenn Sie weiterhin die folgenden DM-Endpunkte verwenden, müssen Sie auf die neueren Endpunkte migrieren.

| Veralteter Endpunkt | Neue Migrationsalternative |
| :--- | :--- |
| [POST direct\_messages/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) | [POST direct\_messages/events/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) |
| [GET direct\_messages/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) | [GET direct\_messages/events/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) |
| [GET direct\_messages](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) | [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) |
| [GET direct\_messages/sent](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) | [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) |
| [POST direct\_messages/destroy](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/delete-message-event) | [DELETE direct\_messages/events/destroy](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/delete-message-event) |

<div id="differences-migration-considerations">
  ### Neue Funktionen
</div>

Die neuen Endpunkte der Direct Message API unterstützen zahlreiche zusätzliche Fähigkeiten und bieten verbesserten Zugriff auf frühere Direct Messages. Zu den neuen Funktionen gehören:

- Unterstützung für Medienanhänge (Bild, GIF und Video).
- Möglichkeit, Nutzern über eine vordefinierte Auswahlliste strukturierte Antworten vorzuschlagen.
- Zugriff auf bis zu 30 Tage vergangener Direct Messages.

Eine vollständige Liste der neuen Direct-Message-Funktionen und zusätzliche neue API-Endpunkte finden Sie in der [technischen Dokumentation](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/overview).
 

<div id="new-features">
  ### Unterschiede und Hinweise zur Migration
</div>

Die neuen API-Endpunkte verhalten sich deutlich anders als ihre bisherigen Pendants. Ein einfaches Aktualisieren der Endpunkt-URLs führt zu Fehlern in Ihrer Anwendung. Berücksichtigen Sie Folgendes, wenn Sie Ihre Anwendung für die Migration aktualisieren.

#### Neues Direct-Message-Objekt

Das Erste, was Ihnen wahrscheinlich auffällt, ist die neue Objektstruktur für Direct Messages. Diese neue Message-Create-Objektstruktur wurde eingeführt, um neue Funktionen wie [Quick Replies](https://developer.x.com/en/docs/x-api/v1/direct-messages/quick-replies/overview) und [Attachments](https://developer.x.com/en/docs/x-api/v1/direct-messages/message-attachments/overview) zu unterstützen. Das neue Objekt enthält außerdem ein kleineres, komprimiertes Benutzerobjekt. Ihre Anwendung muss aktualisiert werden, um diese neue Objektstruktur beim Parsen und ggf. in Datenmodellen oder der Speicherung zu berücksichtigen. Beschreibungen der einzelnen Eigenschaften finden Sie in der [vollständigen Dokumentation zum Message-Create-Objekt](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/guides/message-create-object).

**Beispiel für ein Message-Create-Objekt**

```json
{
      "type": "message_create",
      "id": "1234858592",
      "created_timestamp": "1392078023603",
      "initiated_via": {
        "tweet_id": "123456",
        "welcome_message_id": "456789"
      },
      "message_create": {
        "target": {
          "recipient_id": "1234858592"
        },
        "sender_id": "3805104374",
        "source_app_id": "268278",
        "message_data": {
          "text": "Blue Bird",
          "entities": {
            "hashtags": [],
            "symbols": [],
            "urls": [],
            "user_mentions": []
          },
          "quick_reply_response": {
            "type": "options",
            "metadata": "external_id_2"
          },
          "attachment": {
            "type": "media",
            "media": {
             ...
            }
          }
        }
      }
```

<div id="new-direct-message-object">
  #### Zusammenfassung
</div>

- Vollständig neue Objektstruktur für Direct Messages.
- Kompaktes Benutzerobjekt.
- Neue Informationen verfügbar (Quick-Reply-Antworten, Anhänge usw.).

### Senden von Direct Messages

[POST direct\_messages/events/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) ist ein direkter Ersatz für das Senden von Direct Messages. Der wichtigste Unterschied bei diesem Endpunkt ist, dass nun alle Informationen als JSON im POST-Request-Body übermittelt werden, statt als einzelne POST-Parameter.

**Beispiel-Twurl-Request**

```bash
twurl -A 'Content-type: application/json' -X POST /1.1/direct\_messages/events/new.json -d '{"event": {"type": "message\_create", "message\_create": {"target": {"recipient\_id": "4534871"}, "message_data": {"text": "Hello World!"}}}}'
```

Beachten Sie in der obigen Anfrage, dass der Content-Type auf application/json gesetzt ist, im Gegensatz zu application/x-www-form-urlencoded. Wenn Sie außerdem die OAuth-1.0a-Signatur erstellen, beachten Sie, dass der JSON-Body nicht in die Generierung der Signatur einfließt. Die meisten OAuth-Bibliotheken berücksichtigen dies bereits. Wenn Sie [twurl](https://github.com/twitter/twurl) verwenden, stellen Sie sicher, dass Sie mindestens Version 0.9.3 verwenden.

<div id="new-direct-message-object">
  #### Zusammenfassung
</div>

- Die Nachricht wird im JSON-POST-Body definiert
- Der Content-Type-Header muss auf application/json gesetzt sein
- Der JSON-Body wird nicht in die Erstellung der OAuth-Signatur einbezogen.
   

### Abrufen von Direct Messages

Das Abrufen früherer Direct Messages erfolgt jetzt über einen einzelnen API-Endpunkt: [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events). Der wesentliche Unterschied bei diesem neuen Endpunkt besteht darin, dass er nun sowohl gesendete als auch empfangene Nachrichten in umgekehrter chronologischer Reihenfolge zurückgibt. Dies kann das Wiederaufbauen einer Unterhaltung erleichtern. Wenn Sie jedoch nur gesendete oder nur empfangene Nachrichten benötigen, müssen Sie die Antwort nachträglich verarbeiten, indem Sie auf die Eigenschaft sender\_id verweisen.

Die Paginierung basiert nun auf einem Cursor-Wert statt auf der ID einer Direct Message. Mit jeder Antwort wird eine Cursor-Eigenschaft zurückgegeben. [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) gibt bis zu 30 Tage vergangener Nachrichten zurück, unabhängig davon, wie viele Nachrichten in diesen 30 Tagen vorhanden sind. Wenn kein Cursor zurückgegeben wird, liegen keine weiteren Nachrichten vor. Die Methode zum Zugriff auf einzelne Direct Messages mit [GET direct\_messages/events/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) bleibt unverändert, obwohl das zurückgegebene Direct-Message-Objekt eine andere Struktur aufweist, wie zuvor beschrieben.

Schließlich erfolgt der Echtzeitzugriff auf Direct Messages jetzt über Webhooks mit der [Account Activity API](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity). Hinweise zur Migration von User Streams oder Site Streams finden Sie im Migrationsleitfaden zur Account Activity API.

<div id="new-direct-message-object">
  #### Zusammenfassung
</div>

- Gesendete und empfangene Nachrichten werden jetzt über denselben Endpoint zurückgegeben.
- Es werden Nachrichten aus bis zu 30 Tagen zurückgegeben.
- Cursorbasierte Paginierung.
- Echtzeitzugriff auf Direktnachrichten per Webhook.

### Direktnachrichten löschen

Direktnachrichten können jetzt mit DELETE direct\_messages/events/destroy gelöscht werden. Die Schnittstelle ist weitgehend unverändert und erfordert die ID der zu löschenden Nachricht. Der entscheidende Unterschied besteht darin, dass der Endpunkt jetzt eine DELETE-Anfrage statt einer POST-Anfrage erwartet.

Wie gelöschte Direktnachrichten in offiziellen X-Clients dargestellt werden, bleibt unverändert. Direktnachrichten werden nur aus der Oberfläche des jeweiligen Benutzerkontexts entfernt. Andere Teilnehmer der Unterhaltung können weiterhin auf die Direktnachricht zugreifen.

<div id="new-direct-message-object">
  #### Zusammenfassung
</div>

- Zum Löschen einer Direktnachricht wird die ID benötigt.
- Der neue Endpoint erfordert eine DELETE-Anfrage.
- Die Darstellung gelöschter Direktnachrichten in offiziellen X-Clients bleibt unverändert.

\*\*Fragen zur Migration zu den neuen Endpunkten für Direktnachrichten?
\*\*Stellen Sie Ihre Frage im Entwickler-Community-Forum auf [devcommunity.com](https://devcommunity.x.com/).

## Häufig gestellte Fragen

### Allgemein

**Was sind die Vorteile der Verwendung der Account Activity API?**

Die Account Activity API verwendet Webhooks. Im Gegensatz zu den Streaming-APIs benötigen Sie daher keine offene Verbindung, damit wir Ihnen Informationen senden. Webhooks unterscheiden sich auch von REST-APIs, weil Sie uns nicht alle 15 Minuten Hunderte Male abfragen müssen, um die für Sie relevanten Daten zu erhalten. Das steigert die Effizienz zwischen Nutzer und Ihrer App, da Daten genau dann zugestellt werden, wenn sie anfallen.

Die Account Activity API bietet zahlreiche Vorteile:

1. **Geschwindigkeit**: Wir liefern Daten mit der Geschwindigkeit von X.
2. **Einfachheit**: Wir liefern alle Ereignisse eines Kontos über eine einzige Webhook-Verbindung. Die in der API gelieferten Aktivitäten umfassen Posts, @Erwähnungen, Antworten, Retweets, Quote Tweets, Retweets von Quote Tweets, Favoriten, gesendete Direct Messages, empfangene Direct Messages, Follows, Blocks, Mutes.
3. **Skalierung**: Sie erhalten alle Aktivitäten für ein von Ihnen verwaltetes Konto, ohne durch Rate Limits oder Event-Limits eingeschränkt zu sein.

Die Account Activity API ist als Premium-Sandbox, kostenpflichtiges Premium- sowie Enterprise-Angebot verfügbar, sodass Sie nach Bedarf skalieren können – etwa wenn Sie mehr Konten für Compliance-Funktionen oder zusätzliche Funktionalität benötigen.

Für den Einstieg laden Sie Beispiel-Code-Snippets von [GitHub](https://github.com/xdevplatform/account-activity-dashboard) herunter.
 

**Wie finde ich heraus, welche Produktstufe für mich am besten ist?**

Bitte lesen Sie unsere Seite [Account Activity API Overview](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity), um mehr über die Unterschiede zwischen den Premium-Optionen und der Enterprise-Option zu erfahren. 
 

**Was ist der Unterschied zwischen einer Premium-Umgebung und einem Enterprise-Webhook?**

Es gibt keinen Unterschied. Jede Premium-Umgebung hat ihre eigene webhook\_id.
 

**Ich benötige Entwicklungs-, Staging- und Produktionsumgebungen für die Account Activity API. Ist das möglich?**

Ja! Mit den kostenpflichtigen Stufen der Account Activity API (Paid Premium und Enterprise) können mehrere Webhook-URLs registriert und Abonnements für jede davon separat über die API-Methoden verwaltet werden. Zusätzlich können mehrere Client-Apps auf eine Allowlist gesetzt werden, um die Autorisierung für Ihre aktuell berechtigten Nutzer aufrechtzuerhalten.
 

**Gibt es Schritt-für-Schritt-Anleitungen, wie ich die Account Activity API einrichte?**

Tatsächlich gibt es die!

- Wenn Sie gerade erst anfangen, empfehlen wir unseren Leitfaden [Getting started with webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks)

- Folgen Sie unseren von X Dev unterstützten Skripten: 
  - [Account Activity API dashboard](https://github.com/xdevplatform/account-activity-dashboard), eine Node-Web-App, die Webhook-Ereignisse anzeigt.
  - Der [SnowBot-Chatbot](https://github.com/xdevplatform/SnowBotDev), eine Ruby-Web-App, die auf der Account Activity API und den Direct Message APIs aufbaut. Dieser Codebestand enthält ein [Skript](https://github.com/xdevplatform/SnowBotDev/wiki/Account-Activity-API-setup-script), um beim Einrichten von Account Activity API-Webhooks zu helfen.
     

**Gibt es eine Möglichkeit, Daten wiederherzustellen, wenn unser System für einen Zeitraum ausfällt?**

Mit den kostenpflichtigen Stufen der Account Activity API (Paid Premium und Enterprise) wird unser system [erneut versuchen](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries), die Aktivitäten über einen Zeitraum von vier Stunden mehrfach an Sie zu senden. Wenn Ihr System innerhalb dieses Vier-Stunden-Zeitraums nicht reagiert, geht die Aktivität verloren und Sie müssen andere REST-Endpunkte verwenden, um Daten innerhalb von 7 Tagen wiederherzustellen.

Wir empfehlen, Ihre verschiedenen Webhooks oder Umgebungen als Redundanz-Tool zu nutzen – etwa die [Account Activity Replay API](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api) –, um sicherzustellen, dass Ihnen keine Aktivitäten entgehen, wenn eines Ihrer Systeme ausfällt.
 

**Welche Authentifizierung muss ich mit der Account Activity API verwenden?**

Die für die Account Activity API erforderlichen Autorisierungsmethoden sind pro Methode auf den [API-Referenzseiten](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index) beschrieben. Wenn Sie gerade erst mit der X-Authentifizierung beginnen, empfehlen wir, [diesen Abschnitt](/de/resources/fundamentals/authentication) zu lesen.

**Was ist ein Challenge-Response-Check (CRC)?**

Die Challenge-Response-Prüfung der Account Activity API ist eine Sicherheitsfunktion, die sicherstellt, dass die Aktivitäten der Account Activity API an die richtige Entwicklerin bzw. den richtigen Entwickler gesendet werden. Sie kann außerdem von Entwicklerinnen und Entwicklern verwendet werden, um zu gewährleisten, dass die empfangenen Daten von X stammen. X sendet automatisch alle 24 Stunden eine CRC an Ihre Webhook-URL, ausgehend vom Zeitpunkt der letzten Validierung der Webhook-URL. Ihr System muss innerhalb von 3 Sekunden mit einer gültigen Antwort reagieren, um validiert zu bleiben. 

Bitte besuchen Sie unsere Seite [Securing webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks) für weitere Details.
 

**Gibt es etwas, das meine Webhook-URL sofort ungültig machen würde?**

Wenn einer der folgenden Fälle eintritt, markieren wir Ihren Webhook umgehend als ungültig:

- Der Server antwortet auf eine CRC mit einem falschen Token. In diesem Fall wird unser System keinen [Retry](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) durchführen, um Ihnen die Aktivität zu senden.
- Für die Webhook-URL ist ein falsches Zertifikat konfiguriert. In diesem Fall wird unser System keinen [Retry](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) durchführen, um Ihnen die Aktivität zu senden.
- Ihr Server gibt einen Response-Code zurück, der weder 2XX, noch 4XX, noch 5XX ist.
- Sie geben die Verwendung von gzip an, senden aber tatsächlich kein gzip.
- Sie geben die Verwendung von gzip nicht an, senden jedoch tatsächlich gzip in der Antwort.
   

**Erhalte ich doppelte Aktivitäten, wenn ich Nutzer abonniere, die miteinander interagieren?**

Ja. Wenn Ihre Web-App aktive Abonnements für Benutzer A und Benutzer B hat und Benutzer A Benutzer B in einem Post erwähnt, werden zwei POST-Aktivitäten an den registrierten Webhook gesendet. Jede Aktivität enthält einen Indikator „for\_user\_id“, der zeigt, zu welchem Abonnement die Aktivität gehört.
 

**Wenn ich ein Abonnement für meinen Webhook erstelle, kann ich den Teil `/all/` des folgenden Endpunkts durch andere Account-Activity-Datenobjekte ersetzen, um die vom API gelieferten Aktivitäten einzuschränken?** `POST https://api.x.com/1.1/account_activity/all/:env_name/subscriptions.json`

Nein, das ist nicht möglich. Derzeit steht nur das Produkt `/all/` zur Verfügung.
 

**Gibt es eine Möglichkeit, die Account Activity API zu verwenden, ohne von Nutzern Berechtigungen für Direct Messages anzufordern?**

Derzeit sind Berechtigungen für Direct Messages erforderlich, da es für diese API keine Möglichkeit gibt, die Aktivitäten zu Direct Messages „herauszufiltern“. 
 

**Gibt es eine kostenlose Version der Account Activity API?**

Ja, wir bieten die Sandbox-Version als kostenlosen Tarif an. Unsere Sandbox-Option ist auf einen einzelnen Webhook mit maximal 15 Abonnements begrenzt. Mehr über die Sandbox-Option können Sie in [unserer Dokumentation](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity) lesen. 

**Ist es möglich, die Account Activity API zu verwenden, um Retweets von Posts zu erhalten, die abonnierte Nutzer erwähnen?**

Dies ist leider nicht Teil der mit dieser API gelieferten Aktivitäten. Dafür empfehlen wir stattdessen die Streaming API. 
 

**Welche möglichen Aktivitätstypen werden durch ein tweet\_create\_event repräsentiert?**

Ein tweet\_create\_event-Payload wird gesendet:

Wenn der abonnierte Nutzer Folgendes tut:

- Erstellt einen Post
- Retweetet
- Antwortet auf einen Post

Wenn ein anderer Nutzer:

- @erwähnt\* den abonnierten Nutzer
- Zitiert einen vom abonnierten Nutzer erstellten Tweet 

\*Hinweis: Die Account Activity API liefert nur Ereignisse, wenn der abonnierte Nutzer von X eine Benachrichtigung erhalten würde und das Ereignis öffentlich sehen könnte. Das bedeutet: Wenn der erwähnte Account (@userA) dem geschützten Account (@userB) folgt, erhält UserA eine Benachrichtigung, dass UserB ihn erwähnt hat. Wenn UserA UserB nicht folgt (und nicht von UserB genehmigt wurde), erhält UserA keine Benachrichtigung und daher würde ein tweet\_create\_event nicht über AAA gesendet werden, falls @userA ein Abonnement hätte.

**Wenn ein blockierter Nutzer meinen abonnierten Nutzer erwähnt, wie kann ich das erkennen?**

Sie sehen ein boolesches Feld `user_has_blocked` auf der obersten Ebene der JSON-Antwort, gesetzt auf entweder „true“ oder „false“. Dieses Feld wird nur bei Post-Erwähnungen angezeigt. 

Enterprise

**Wie kann ich meine App zu einer Allowlist hinzufügen oder prüfen, ob meine App bereits auf der Allowlist ist?**

Um die [X-Apps](/de/resources/fundamentals/developer-apps) zu verwalten, die Sie für den Zugriff über die Enterprise-APIs auf eine Allowlist gesetzt haben, wenden Sie sich bitte mit Ihrer App-ID an Ihre:n Account-Manager:in. Ihre App-ID finden Sie, indem Sie zur Seite [„Apps“](/de/resources/fundamentals/developer-apps) im [Developer-Portal](/de/resources/fundamentals/developer-portal) navigieren.
 

**Wenn ich Zugriff auf drei Webhooks habe, kann ich dann drei Webhooks für jede der Apps verwenden, die ich für die Enterprise-Nutzung registriert habe?**

Das Webhook-Limit gilt auf Kontoebene, nicht auf App-Ebene. Wenn Sie Zugriff auf drei Webhooks und zwei für die Enterprise-Nutzung registrierte Apps haben, können Sie zwei Webhooks für eine App und den dritten für die andere App verwenden, aber nicht drei pro App. 

**Kann ich angeben, welche Arten von Ereignissen mit der Account Activity Replay API erneut zugestellt werden?**

Die Arten der zu wiederholenden Ereignisse können nicht angegeben werden. Alle Ereignisse, die innerhalb des festgelegten Datums- und Zeitfensters zugestellt wurden, werden erneut zugestellt. 

**Gibt es erneute Zustellversuche, wenn meine Anwendung ein Ereignis der Account Activity Replay API nicht verarbeiten kann?**

Nein, es gibt keine erneuten Zustellversuche. Wenn eine Anwendung ein von der Account Activity Replay API gesendetes Ereignis nicht verarbeitet, kann ein weiterer Replay-Job für denselben Zeitraum eingereicht werden, um die erneute Zustellung verpasster Replay-Ereignisse zu versuchen. 

**Was sollte ich tun, wenn ich ein Completion-Event mit teilweisem Erfolg erhalte?**

Wir empfehlen, die Zeitstempel der empfangenen Ereignisse zu notieren und einen weiteren Replay-Job für die verpassten Ereignisse anzufordern. 

**Wie viele Account Activity Replay API Jobs kann ich gleichzeitig ausführen?**

Es darf jeweils nur ein Account Activity Replay API-Job pro Webhook ausgeführt werden. 

**Wie kann ich Account Activity Replay API Ereignisse von Echtzeit-Produktionsereignissen unterscheiden, wenn sie an meinen Webhook zugestellt werden?**

Da die Account Activity Replay API immer Ereignisse aus der Vergangenheit liefert, können diese anhand des Zeitstempels von Echtzeit-Produktionsereignissen unterschieden werden. 

**Wie schnell kann ich beginnen, die Account Activity Replay API zu verwenden, um eine Aktivität erneut zuzustellen, die meine Anwendung verworfen oder verpasst hat?**

Eine Aktivität wird ungefähr 10 Minuten nach ihrer Erstellung für die erneute Zustellung verfügbar. 

<div id="general">
  ### Leitfaden zur Fehlerbehebung
</div>

#### Code 32

Dieser Fehler bedeutet im Allgemeinen, dass in der Anfrage, in den Headern, bei der Autorisierung oder in der von Ihnen angegebenen URL etwas fehlerhaft ist. Dies ist kein Fehler der Account Activity API, sondern ein Autorisierungsfehler, und X erhält nicht die korrekte OAuth-Konfiguration oder URL.

- **Enterprise** - Stellen Sie sicher, dass die von Ihnen verwendeten Consumer Keys und Access Tokens zu einer [X-App](/de/resources/fundamentals/developer-apps) gehören, die für die Nutzung von Enterprise-Produkten registriert wurde. Wenn Sie Ihre Consumer Keys und Access Tokens nicht zur Hand haben oder Ihre X-App zur Allowlist hinzufügen lassen müssen, wenden Sie sich bitte an Ihren Account Manager.

- Wenn Sie mit User-Kontext authentifizieren, stellen Sie sicher, dass Sie Ihre [Anfrage ordnungsgemäß autorisiert](/de/resources/fundamentals/authentication#authorizing-a-request) haben, und zwar mit den korrekten `oauth_nonce`, `oauth_signature` und `oauth_timestamp`.

- Stellen Sie sicher, dass Ihre Access Tokens die richtige Berechtigungsstufe haben.
  - Auf dem Tab „Keys and tokens“ im [App-Dashboard](/de/resources/fundamentals/developer-apps) stellen Sie bitte sicher, dass Ihre Access Tokens die [Berechtigungsstufe](/de/resources/fundamentals/developer-apps#app-permissions) „Read, write, and direct messages“ besitzen.
  - Wenn die Berechtigungsstufe der Tokens niedriger eingestellt ist, wechseln Sie bitte zum Tab „Permissions“, setzen Sie die Zugriffsberechtigung auf „Read, write, and direct messages“ und generieren Sie anschließend Ihre Access Tokens und Secrets im Tab „Keys and tokens“ neu.

- Stellen Sie sicher, dass Ihre URL korrekt formatiert ist.
  - Bitte beachten Sie, dass `:env_name` Groß-/Kleinschreibung beachtet.
     

<div id="code-32">
  #### Code 200 - Verboten
</div>

- **Premium** - Stellen Sie sicher, dass Sie ein genehmigtes [Entwicklerkonto](/de/resources/fundamentals/developer-portal) haben, bevor Sie eine Anfrage an die API stellen. Sie müssen außerdem den korrekten :env\_name in der Anfrage verwenden, den Sie auf der Seite [Dev-Umgebungen](/de/resources/fundamentals/developer-portal) einrichten können.

- **Enterprise** - Stellen Sie sicher, dass Ihr Account-Manager Ihnen Zugriff auf die Account Activity API eingerichtet hat.

- Vergewissern Sie sich, dass Ihre URI korrekt ist. Dieser Fehler kann auftreten, wenn Sie in Ihrer Anfrage eine falsche URI angegeben haben.
   

<div id="code-200-forbidden">
  #### Code 214 – Webhook-URL erfüllt die Anforderungen nicht.
</div>

- Bitte stellen Sie sicher, dass Sie HTTPS verwenden.
- Ihre Webhook-URL könnte ungültig oder falsch formatiert sein.
- Weitere Informationen zur Einrichtung Ihrer Webhook-URL finden Sie im Abschnitt [Webhook-Consumer-App entwickeln](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#3-develop-webhook-consumer-app) auf der Seite [Erste Schritte mit Webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).
   

<div id="code-214-webhook-url-does-not-meet-the-requirements">
  #### Code 214 - Hohe Latenz bei CRC-GET-Anfrage. Ihr Webhook sollte innerhalb von 3 Sekunden antworten.
</div>

- Das bedeutet, dass Ihr Server langsam reagiert. Stellen Sie sicher, dass Sie den CRC innerhalb von 3 Sekunden beantworten.
   

<div id="code-214-high-latency-on-crc-get-request-your-webhook-should-respond-in-less-than-3-seconds">
  #### Code 214 - Nicht-200-Antwortcode während der CRC-GET-Anforderung (z. B. 404, 500 usw.).
</div>

- Ihr Server ist nicht erreichbar. Stellen Sie sicher, dass er ordnungsgemäß läuft.
   

<div id="code-214-non-200-response-code-during-crc-get-request-ie-404-500-etc">
  #### Code 214 - Zu viele Ressourcen bereits erstellt.
</div>

- **Enterprise** - Sie haben bereits alle Ihre Webhooks genutzt. Verwenden Sie den Endpoint [GET webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) mit jeder Ihrer registrierten Apps, um nachzuvollziehen, wo Ihre Webhooks eingesetzt sind. 

<div id="code-214-too-many-resources-already-created">
  #### Code 261 – Anwendung kann keine Schreibaktionen ausführen.
</div>

- Die App, die Sie mit der API verwenden, verfügt nicht über die richtige [Berechtigungsstufe](/de/resources/fundamentals/developer-apps#app-permissions) für ihr Access-Token und Access-Token-Secret. Navigieren Sie zum Tab „Keys and tokens“ im Dashboard der [X-Apps](/de/resources/fundamentals/developer-apps) und prüfen Sie die den Access-Token und dem Access-Token-Secret zugewiesenen Berechtigungsstufen. Wenn diese auf etwas anderes als „Read, write and Direct Messages“ gesetzt ist, müssen Sie die Einstellungen im Tab „Permission“ anpassen und Ihren Access-Token sowie Ihr Access-Token-Secret neu generieren, damit die neuen Einstellungen wirksam werden.
- Alternativ versuchen Sie, einen Webhook mit App-only-Authentifizierung zu registrieren, was nicht unterstützt wird. Authentifizieren Sie sich stattdessen mit Benutzerkontext, wie in den API-Referenzabschnitten zur Registrierung eines Webhooks für die [Enterprise Account Activity API](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks) beschrieben.

## Index der Referenz zur Account Activity API

|     |     |
| :--- | :--- |
| **Zweck** | Enterprise |
| Registriert eine Webhook-URL / Generiert eine webhook\_id | [POST  <br />webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) |
| Gibt alle Webhook-URLs und deren Status zurück | [GET  <br />webhooks](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |
| Löst manuell eine Challenge-Response-Prüfung aus | [PUT  <br />webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) |
| Abonniert die Ereignisse eines Kontos für eine Anwendung | [POST  <br />webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) |
| Gibt die Anzahl der derzeit aktiven Abonnements zurück | [GET  <br />subscriptions/count](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |
| Prüft, ob ein Webhook ein Konto abonniert hat | [GET  <br />webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) |
| Gibt eine Liste der derzeit aktiven Abonnements zurück | [GET  <br />webhooks/:webhook\_id/subscriptions/all/list](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |
| Löscht den Webhook | [DELETE  <br />webhooks/:webhook\_id](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) |
| Deaktiviert ein Abonnement mit 3-legged OAuth (VERALTET) | [DELETE  <br />webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) |
| Deaktiviert ein Abonnement mit Application-only OAuth | [DELETE  <br />webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |
| Zustellung von Aktivitäten an einen Webhook erneut auslösen | [POST  <br />replay/webhooks/:webhook\_id/subscriptions/all](/de/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) |

### Enterprise Account Activity API

#### POST account\_activity/webhooks[](#post-account-activity-webhooks "Permalink to this headline")

Registriert eine neue Webhook-URL für den jeweiligen Anwendungskontext. Die URL wird vor dem Speichern per CRC-Anfrage überprüft. Schlägt die Überprüfung fehl, erhält der Anfragende eine aussagekräftige Fehlermeldung.

Die Anzahl zulässiger Webhooks wird durch das Abrechnungspaket festgelegt.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/webhooks.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Erfordert Authentifizierung | Ja (Benutzerkontext - alle Consumer- und Access-Token) |
| Ratenbegrenzt | Ja |
| Anfragen / 15-Min-Fenster (Benutzerauthentifizierung) | 15  |
| Unterstützung für Tweet-Bearbeitungen | Alle Tweet-Objekte enthalten Tweet-Bearbeitungsmetadaten, die den Bearbeitungsverlauf des Tweets beschreiben. Weitere Details finden Sie auf der Seite [„Tweet-Bearbeitungen" Grundlagen](/de/x-api/enterprise-gnip-2.0/fundamentals/edit-tweets). |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| url (erforderlich) | Kodierte URL für den Callback-Endpunkt. |

<div id="parameters">
  ### Beispielanfrage[](#example-request "Permalink zu dieser Überschrift")
</div>

$ curl --request POST
\--url 'https://api.x.com/1.1/account\_activity/webhooks.json?url=https%3A%2F%2Fyour\_domain.com%2Fwebhooks%2Ftwitter%2F0'
\--header 'authorization: OAuth oauth\_consumer\_key="CONSUMER\_KEY", oauth\_nonce="GENERATED", oauth\_signature="GENERATED", oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="GENERATED", oauth\_token="ACCESS\_TOKEN", oauth\_version="1.0"'

<div id="example-request">
  ### HTTP-Antworten[](#http-responses "Permalink to this headline")
</div>

| HTTP-Code | Meldung |
| :--- | :--- |
| 200 | Die Webhook-URL ist für die angegebene Anwendung registriert |
| 403 | Ihre Anfrage enthält einen Fehler. Siehe den Abschnitt „Fehlermeldungen“ unten. |

<div id="http-responses">
  ### Beispielantwort – Erfolg[](#example-response-success "Permalink zu dieser Überschrift")
</div>

```json
_HTTP 200_

    {
      "id": "1234567890",
      "url": "https://your_domain.com/webhook/twitter/0",
      "valid": true,
      "created_at": "2016-06-02T23:54:02Z"
    }
```

<div id="example-response-success">
  ### Fehlermeldungen[](#error-messages "Permalink to this headline")
</div>

| Code | Nachricht |
| :--- | :--- |
| 214 | Webhook-URL erfüllt die Anforderungen nicht. |
| 214 | Es wurden bereits zu viele Ressourcen erstellt. |
| 214 | Webhook-URL erfüllt die Anforderungen nicht. Ungültiges CRC-Token oder ungültiges JSON-Antwortformat. |
| 214 | Hohe Latenz bei CRC-GET-Anfrage. Ihr Webhook sollte in weniger als 3 Sekunden antworten. |
| 214 | Nicht-200-Antwortcode während der CRC-GET-Anfrage (z. B. 404, 500 usw.). |

_HTTP 403_

```json
    {
      "errors": [
        {
          "code": 214,
          "message": "Too many resources already created."
        }
      ]
    }
```

#### GET account\_activity/webhooks[](#get-account-activity-webhooks "Permalink to this headline")

Gibt alle URLs und deren Status für die angegebene Anwendung zurück.

Wir markieren eine URL als ungültig, wenn sie die tägliche Validierungsprüfung nicht besteht. Um die URL wieder zu aktivieren, rufen Sie den Update-Endpoint auf.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/webhooks.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Authentifizierung erforderlich | Ja (nur Anwendung – Bearer-Token) |
| Rate-Limit | Ja |
| Anfragen pro 15-Minuten-Fenster (Anwendungsauth) | 15  |

### Beispielanfrage[](#example-request "Permalink to this headline")

```bash
    $ curl --request GET
     --url https://api.x.com/1.1/account_activity/webhooks.json
     --header 'authorization: Bearer TOKEN'
```

<div id="example-request">
  ### Beispielantwort[](#example-response "Permalink to this headline")
</div>

_HTTP 200 OK_

```json
    [
      {
        "id": "1234567890",
        "url": "https://your_domain.com/webhook/twitter/0",
        "valid": true,
        "created_at": "2016-06-02T23:54:02Z"
      }
      {
        "id": "2468013579",
        "url": "https://your_domain2.com/webhook/twitter/0",
        "valid": true,
        "created_at": "2016-06-04T22:31:29Z"
      }
    ]
```

<div id="example-response-success">
  ### Fehlermeldungen[](#error-messages "Permalink to this headline")
</div>

| Code | Nachricht |
| :--- | :--- |
| 99  | Sie haben keinen Zugriff auf diese Ressource. |

#### PUT account\_activity/webhooks/:webhook\_id[](#put-account-activity-webhooks-webhook-id "Permalink to this headline")

Löst die Challenge-Response-Prüfung (CRC) für die URL des angegebenen Webhooks aus. Ist die Prüfung erfolgreich, wird der Status des Webhooks auf `valid` gesetzt und 204 zurückgegeben; der Webhook wird dadurch wieder aktiviert.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Authentifizierung erforderlich | Ja (Benutzerkontext – alle Consumer- und Zugriffstoken) |
| Ratenbegrenzung | Ja |
| Anfragen pro 15-Minuten-Fenster (Benutzerauth) | 15  |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (erforderlich) | Webhook-ID. Im Ressourcenpfad definiert. |

<div id="parameters">
  ### Beispielanfrage[](#example-request "Permalink zu dieser Überschrift")
</div>

```json
    $ curl --request PUT
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID.json
     --header 'authorization: OAuth oauth_consumer_key="CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="ACCESS_TOKEN", oauth_version="1.0"'
```

<div id="example-request">
  ### Antwort[](#response "Permalink zu dieser Überschrift")
</div>

_HTTP 204 OK_

```
    { }
```

<div id="example-response-success">
  ### Fehlermeldungen[](#error-messages "Permalink to this headline")
</div>

| Code | Nachricht |
| :--- | :--- |
| 34  | Webhook existiert nicht oder ist einer anderen X-Anwendung zugeordnet. |
| 214 | Webhook-URL erfüllt nicht die Anforderungen. |
| 214 | Webhook-URL erfüllt nicht die Anforderungen. Ungültiges CRC-Token oder JSON-Antwortformat. |
| 214 | Hohe Latenz bei der CRC-GET-Anfrage. Ihr Webhook sollte in weniger als 3 Sekunden antworten. |
| 214 | Nicht-200-Antwortcode während der CRC-GET-Anfrage (z. B. 404, 500 usw.). |

#### POST account\_activity/webhooks/:webhook\_id/subscriptions/all[](#post-account-activity-webhooks-webhook-id-subscriptions-all "Permalink to this headline")

Abonniert die angegebene Anwendung auf alle Ereignisse im angegebenen Benutzerkontext für alle Nachrichtentypen. Nach der Aktivierung werden alle Ereignisse für die anfragende Nutzerin bzw. den anfragenden Nutzer per POST-Anfrage an den Webhook der Anwendung gesendet.

Abonnements sind derzeit abhängig von Ihrer Kontokonfiguration begrenzt. Wenn Sie weitere Abonnements benötigen, wenden Sie sich bitte an Ihre Account-Managerin bzw. Ihren Account-Manager.

### Ressourcen-URL[](#resource-url "Permalink to this headline")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Erfordert Authentifizierung | Ja (3-legged OAuth – zugelassener Consumer Key und Zugriffstoken des abonnierenden Nutzers) |
| Ratenbegrenzung | Ja |
| Anfragen pro 15-Minuten-Fenster (Benutzerauth) | 500 |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (erforderlich) | Webhook-ID. Im Ressourcenpfad definiert. |

### Beispielanfrage[](#example-request "Permalink to this headline")

```bash
    $ curl --request POST
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all.json
     --header 'authorization: OAuth oauth_consumer_key="WHITELISTED_CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="SUBSCRIBING_USER'S_ACCESS_TOKEN", oauth_version="1.0"'
```

### Beispielantwort – Erfolg[](#example-response-success "Permalink to this headline")

_HTTP 204 Kein Inhalt_

```
    {}
```

<div id="example-response-success">
  ### Fehlermeldungen[](#error-messages "Permalink to this headline")
</div>

| Code | Meldung |
| :--- | :--- |
| 34  | Webhook ist nicht vorhanden oder einer anderen X-Anwendung zugeordnet. |
| 348 | Der Client-Anwendung ist der Zugriff auf die Webhook-Abonnements dieses Nutzers nicht gestattet. |

#### GET account\_activity/subscriptions/count[](#get-account-activity-subscriptions-count "Permalink to this headline")

Gibt die Anzahl der Abonnements zurück, die derzeit für Ihr Konto aktiv sind. Beachten Sie, dass der Endpunkt /count ausschließlich anwendungsbasiertes OAuth erfordert; verwenden Sie daher einen Bearer-Token anstelle des Benutzerkontexts für Ihre Anfragen.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/subscriptions/count.json`

### Ressourceninformationen[](#resource-information "Permalink zu dieser Überschrift")

|     |     |
| :--- | :--- |
| Antwortformat | HTTP-Antwortcode |
| Authentifizierung erforderlich | Ja (nur Anwendung – Bearer-Token) |
| Rate-Limitierung | Ja |
| Anfragen/15-Minuten-Fenster (Anwendungs-Auth) | 15  |

<div id="resource-information">
  ### HTTP-Antwortcodes[](#http-response-codes "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Code | Meldung |
| 200 | Erfolgreich. Die Anzahl der Abonnements für den angeforderten Webhook wird zurückgegeben. |
| 401 | Ihre Anwendung hat keine Berechtigung, die Abonnements für den angegebenen Webhook anzuzeigen. |

<div id="http-response-codes">
  ### Beispielanforderung[](#example-request "Permalink to this headline")
</div>

```bash
    $ curl --request GET
     --url https://api.x.com/1.1/account_activity/subscriptions/count.json
     --header 'authorization: Bearer TOKEN'
```

### Beispielantwort – Erfolg[](#example-response-success "Permalink to this headline")

_HTTP 200_

```bash
    {
      "account_name":"my-account",
      "subscriptions_count_all":"1",
      "subscriptions_count_direct_messages":"0",
      "provisioned_count":"50"
    }
```

<div id="example-response-success">
  ### Fehlermeldungen[](#error-messages "Permalink to this headline")
</div>

| Code | Nachricht |
| :--- | :--- |
| 32  | Authentifizierung fehlgeschlagen. |

_HTTP 401_

```abash
    {
      "errors": [
        {
           "code": 32,
          "message": "Authentifizierung fehlgeschlagen."
        }
      ]
    }
```

#### GET account\_activity/webhooks/:webhook\_id/subscriptions/all[](#get-account-activity-webhooks-webhook-id-subscriptions-all "Permalink zu dieser Überschrift")

Ermittelt, ob eine Webhook-Konfiguration für die Ereignisse des angegebenen Nutzers registriert ist. Wenn der angegebene Nutzerkontext eine aktive Subscription mit der angegebenen Anwendung hat, wird 204 OK zurückgegeben. Ist der Antwortcode nicht 204, hat der Nutzer keine aktive Subscription. Siehe unten HTTP-Antwortcodes und Fehlermeldungen für Details.

### Ressourcen-URL[](#resource-url "Permalink to this headline")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Erfordert Authentifizierung | Ja (3-legged OAuth – zugelassener Consumer Key und Zugriffstoken des abonnierenden Nutzers) |
| Ratenbegrenzung | Ja |
| Anfragen pro 15-Minuten-Fenster (Benutzerauth) | 500 |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (erforderlich) | Webhook-ID. Im Ressourcenpfad definiert. |

<div id="parameters">
  ### Beispielanfrage[](#example-request "Permalink zu dieser Überschrift")
</div>

$ curl --request GET
\--url https://api.x.com/1.1/account\_activity/webhooks/:WEBHOOK\_ID/subscriptions/all.json
\--header 'authorization: OAuth oauth\_consumer\_key="WHITELISTED\_CONSUMER\_KEY", oauth\_nonce="GENERATED", oauth\_signature="GENERATED", oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="GENERATED", oauth\_token="SUBSCRIBING\_USER'S\_ACCESS\_TOKEN", oauth\_version="1.0"'

### Beispielantwort – Erfolg[](#example-response-success "Permalink to this headline")

_HTTP 204 Kein Inhalt_

```
    { }
```

#### GET account\_activity/webhooks/:webhook\_id/subscriptions/all/list[](#get-account-activity-webhooks-webhook-id-subscriptions-all-list "Permalink to this headline")

Gibt eine Liste der aktuellen Abonnements des Typs „All Activity“ für den angegebenen Webhook zurück. Beachten Sie, dass der Endpunkt /list ausschließlich Application-only-OAuth erfordert; Anfragen sollten daher mit einem Bearer-Token statt im Benutzerkontext gestellt werden.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all/list.json`

### Ressourceninformationen[](#resource-information "Permalink zu dieser Überschrift")

|     |     |
| :--- | :--- |
| Antwortformat | HTTP-Statuscode |
| Authentifizierung erforderlich | Ja (nur Anwendungszugriff – Bearer-Token) |
| Rate Limiting | Ja |
| Anfragen pro 15-Minuten-Fenster (App-Auth) | 50  |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (erforderlich) | Webhook-ID. Im Ressourcenpfad definiert. |

### HTTP-Antwortcodes[](#http-response-codes "Permalink zu dieser Überschrift")

| Code | Nachricht |
| :--- | :--- |
| 200 | Erfolg. Eine Liste der Abonnements für den angeforderten Webhook wird zurückgegeben. |
| 401 | Ihre Anwendung verfügt nicht über die Berechtigung, die Abonnements für den angegebenen Webhook anzuzeigen. |

<div id="parameters">
  ### Beispielanfrage[](#example-request "Permalink zu dieser Überschrift")
</div>

$ curl --request GET
\--url https://api.x.com/1.1/account\_activity/webhooks/:WEBHOOK\_ID/subscriptions/all/list.json
\--header 'authorization: Bearer TOKEN'

### Beispielantwort – Erfolg[](#example-response-success "Permalink to this headline")

_HTTP 200_

```bash
    {
      "webhook_id": "1234567890",
      "webhook_url": "https://your_domain.com/webhook/twitter/0",
      "application_id": "11231812",
      "subscriptions": [{
        "user_id": "20212306"
      }]
    }
```

<div id="example-response-success">
  ### Fehlermeldungen[](#error-messages "Permalink to this headline")
</div>

| Code | Meldung |
| :--- | :--- |
| 32  | Authentifizierung fehlgeschlagen. |

_HTTP 401_

```bash
    {
      "errors": [
        {
           "code": 32,
          "message": "Could not authenticate you."
        }
      ]
    }
```

#### DELETE account\_activity/webhooks/:webhook\_id[](#delete-account-activity-webhooks-webhook-id "Permalink to this headline")

Entfernt den Webhook aus der Konfiguration der angegebenen Anwendung. Die Webhook-ID kann abgerufen werden, indem ein GET-Aufruf an /1.1/account\_activity/webhooks erfolgt.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Authentifizierung erforderlich | Ja (Benutzerkontext – alle Consumer- und Zugriffstoken) |
| Ratenbegrenzung | Ja |
| Anfragen pro 15-Minuten-Fenster (Benutzerauth) | 15  |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (erforderlich) | Webhook-ID. Im Ressourcenpfad definiert. |

<div id="parameters">
  ### Beispielanfrage[](#example-request "Permalink zu dieser Überschrift")
</div>

```bash
    $ curl --request DELETE
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID.json
     --header 'authorization: OAuth oauth_consumer_key="CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="ACCESS_TOKEN", oauth_version="1.0"'
```

<div id="example-request">
  ### Antwort[](#response "Permalink zu dieser Überschrift")
</div>

_HTTP 204 OK_

```
    { }
```

#### DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all (VERALTET)[](#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated- "Permalink zu dieser Überschrift")

Deaktiviert die Abonnements für den angegebenen Benutzerkontext und die Anwendung. Nach der Deaktivierung werden keine Ereignisse für den anfordernden Benutzer mehr an die Webhook-URL gesendet.

### Ressourcen-URL[](#resource-url "Permalink to this headline")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all.json`

<div id="resource-url">
  ### Ressourceninformationen[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Authentifizierung erforderlich | Ja (3-legged OAuth – freigeschalteter Consumer Key und Zugriffstoken des abonnierten Nutzers) |
| Ratenbegrenzung | Ja |
| Anfragen pro 15-Minuten-Fenster (Benutzerauthentifizierung) | 500 |

<div id="resource-information">
  ### Parameter[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (erforderlich) | Webhook-ID. Im Ressourcenpfad definiert. |

<div id="parameters">
  ### Beispielanfrage[](#example-request "Permalink zu dieser Überschrift")
</div>

```bash
    $ curl --request DELETE
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all.json
     --header 'authorization: OAuth oauth_consumer_key="WHITELISTED_CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="SUBSCRIBED_USER'\''S_ACCESS_TOKEN", oauth_version="1.0"'
```

Beispielanfrage

```
    { }
```

#### DELETE /account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all.json[](#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json "Permalink zu dieser Überschrift")

Deaktiviert das Abonnement für den angegebenen Webhook und die Benutzer-ID. Nach der Deaktivierung werden alle Ereignisse für den anfragenden Benutzer nicht mehr an die Webhook-URL gesendet. Beachten Sie, dass dieser Endpunkt ausschließlich Application-only OAuth erfordert; daher sollten Anfragen mit einem Bearer-Token statt im Benutzerkontext gestellt werden.

### Ressourcen-URL[](#resource-url "Permalink zu dieser Überschrift")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/:user_id/all.json`

### Ressourceninformationen[](#resource-information "Permalink zu dieser Überschrift")

|     |     |
| :--- | :--- |
| Antwortformat | JSON |
| Authentifizierung erforderlich | Ja (nur Anwendung – Bearer-Token) |
| Rate-Limitierung | Ja |
| Anfragen pro 15-Minuten-Fenster | 500 |

### Beispielanfrage[](#example-request "Permalink to this headline")

```bash
    $ curl --request DELETE
     --url https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/:user_id/all.json
     --header 'authorization: Bearer TOKEN'
```

<div id="example-request">
  ### Antwort[](#response "Permalink zu dieser Überschrift")
</div>

_HTTP 204 Kein Inhalt_

### Fehlermeldungen[](#error-messages "Permalink zu dieser Überschrift")

| Code | Nachricht |
| :--- | :--- |
| 404 | Diese Seite existiert nicht. – Dies tritt häufig auf, wenn die angegebene Benutzer-ID nicht tatsächlich abonniert ist. |

<div id="error-messages">
  ### Replay-API
</div>

**POST /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json [¶](#post-1-1-account-activity-replay-webhooks-webhook-id-subscriptions-all-json- "Permalink to this headline")**

Sendet eine Anforderung, um Aktivitäten aus bis zu den letzten fünf Tagen von allen Abonnements abzurufen, die während der in der Anforderung angegebenen Datums- und Zeitfenster bestanden. Wenn Ihr Webhook aktive Benutzerabonnements hat, erhalten Sie diese Ereignisse parallel dazu ebenfalls. Hinweis: Vor der Zustellung von Replay-Ereignissen führen wir eine CRC-Prüfung durch.

|     |     |
| :--- | :--- |
| **Request Method** | HTTP POST |
| **URL** | /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json?from\_date=yyyymmddhhmm\&to\_date=yyyymmddhhmm |
| **Response Format** | JSON |
| **Requires Authentication** | Ja (nur Anwendung – Bearer-Token) |
| **Rate Limit** | 5 Anfragen pro 15 Minuten. Derzeit gibt es kein Maximum für die Anzahl der anforderbaren Replay-Jobs. |
| **from\_date** | Der älteste (Start-)UTC-Zeitstempel, ab dem die Ereignisse bereitgestellt werden; muss im Format „yyyymmddhhmm“ vorliegen. Der Zeitstempel hat Minuten-Granularität und ist inklusiv (d. h. 12:00 schließt die 00. Minute ein). Gültige Zeiten müssen innerhalb der letzten 5 Tage (UTC) liegen und dürfen nicht aktueller als 31 Minuten vor dem jetzigen Zeitpunkt sein. Es wird empfohlen, from\_date und to\_date innerhalb von ca. 2 Stunden zu halten. |
| **to\_date** | Der jüngste (End-)UTC-Zeitstempel, bis zu dem die Ereignisse bereitgestellt werden; muss im Format „yyyymmddhhmm“ vorliegen. Der Zeitstempel hat Minuten-Granularität und ist exklusiv (d. h. 12:30 schließt die 30. Minute der Stunde nicht ein). Gültige Zeiten müssen innerhalb der letzten 5 Tage (UTC) liegen und dürfen nicht aktueller als 10 Minuten vor dem jetzigen Zeitpunkt sein. |

#### Antworten

Die folgenden Antworten können von der API zurückgegeben werden. Die meisten Fehlercodes werden mit einer Zeichenfolge zurückgegeben, die zusätzliche Details im Body enthält. Bei Nicht-200-Antworten sollten Sie den Fehler beheben und es erneut versuchen.

| Status | Text | Error Code | Beschreibung | Nachricht |
| :--- | :--- | :--- | :--- | :--- |
| 202 | Akzeptiert | N/A | Die Anfrage war erfolgreich und die Aktivitäten werden gesendet. | N/A |
| 400 | Ungültige Anfrage | 214 | Webhook wurde als ungültig markiert. | Webhook ist als ungültig markiert und erfordert einen CRC-Check. |
| 400 | Ungültige Anfrage | 357 | Abfrageparameter fehlt. | : queryParam ist erforderlich. |
| 400 | Ungültige Anfrage | 358 | Route- oder Abfrageparameter ist fehlerhaft. | Parameter kann nicht geparst werden. |
| 400 | Ungültige Anfrage | 360 | Routenparameter ist negativ. | webhook\_id: \[] ist nicht größer oder gleich 0. |
| 400 | Ungültige Anfrage | 368 | from\_date oder to\_date liegt nicht in der Vergangenheit. | : \[\<field\_value>] liegt nicht in der Vergangenheit. |
| 400 | Ungültige Anfrage | 356 | from\_date muss vor to\_date liegen. | from\_date muss vor to\_date liegen. |
| 400 | Ungültige Anfrage | 356 | from\_date muss innerhalb der letzten 5 Tage liegen. | from\_date muss innerhalb der letzten 5 Tage liegen. |
| 401 | Nicht autorisiert | 32  | HTTP-Authentifizierung aufgrund bereitgestellter 3-legged Auth fehlgeschlagen. | Ungültige Authentifizierungsmethode. Bitte verwenden Sie ausschließlich Anwendungs-Authentifizierung. |
| 401 | Nicht autorisiert | 61  | Client darf diese Methode nicht anfordern. | Client darf diese Methode nicht anfordern. |
| 403 | Verboten | 200 | Client verfügt nicht über ein Enterprise-Konto mit aktivierter Replay-Funktion. | Für die Account Activity API ist ein Enterprise-Konto mit Replay erforderlich. Bitte bestätigen Sie, dass Sie ein Enterprise-Konto haben und Replay aktiviert ist. |
| 404 | Nicht gefunden | 34  | Nicht vorhandene webhook\_id; webhook\_id-application\_id stimmt nicht überein. | Webhook existiert nicht oder ist einer anderen X-Anwendung zugeordnet. |
| 409 | Konflikt | 355 | Es gibt eine laufende Anfrage, die erst abgeschlossen werden muss, bevor eine weitere gestellt werden kann. | Ein Replay-Job ist für diesen Webhook bereits in Arbeit. |
| 429 | Zu viele Anfragen | 88  | Rate-Limit erreicht (Anzahl der Anfragen pro Zeitraum überschritten) | Zu viele Anfragen. Bitte verringern Sie Ihre API-Anfragerate. |
| 500 | Interner Serverfehler | 0   | Interner Serverfehler. | Interner Serverfehler. |
| 503 | Dienst nicht verfügbar | 67  | Einer oder mehrere abhängige Dienste bei X sind nicht verfügbar. | X-Serverfehler. Wiederholen Sie die Anfrage mit exponentiellem Backoff. |

<div id="responses">
  #### „Meldung: »Job erfolgreich abgeschlossen«“
</div>

Sobald Ihr Job erfolgreich abgeschlossen wurde, sendet die Account Activity Replay API das folgende Ereignis zur Jobfertigstellung. Sobald Sie dieses Ereignis erhalten, ist der Job beendet und ein weiterer kann übermittelt werden.

```json
{
  "replay\_job\_status": {
    "webhook_id": "1234577122340233217",
    "job_state": "Complete",
    "job\_state\_description": "Job completed successfully"
    "job_id": "1095098195724558337"
  }
}
```

<div id="job-completed-successfully-message">
  #### Meldung „Job konnte nicht abgeschlossen werden“
</div>

Falls Ihr Job nicht erfolgreich abgeschlossen wird, geben wir die folgende Meldung zurück, die Sie auffordert, Ihren Replay-Job erneut auszuführen. Sobald Sie dieses Ereignis erhalten, ist der Job abgeschlossen und Sie können einen weiteren einreichen.

```json
{
  "replay\_job\_status": {
    "webhook_id": "123451374207332352",
    "job_state": "Incomplete",
    "job\_state\_description": "Job failed to deliver all events, please retry your replay job",
    "job_id": "1093226942650736640"
  }
}
```

<div id="job-failed-to-complete-message">
  #### Beispiel-curl-Befehl
</div>

```bash
    curl --request POST  --url 'https://api.x.com/1.1/account_activity/replay/webhooks/:webhook_id/subscriptions/all.json?from_date=yyyymmddhhmm&to_date=yyyymmddhhmm'
    --header 'authorization: Bearer TOKEN'
```

<div id="example-curl-request">
  #### Beispielantwort
</div>

HTTP 202

```bash
{
  "job_id": "1234567890",
  "created_at": "2016-06-02T23:54:02Z"
}
```