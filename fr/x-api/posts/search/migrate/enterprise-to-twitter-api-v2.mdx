---
title: v1 à v2 (Enterprise)
sidebarTitle: v1 à v2 (Enterprise)
---

<div id="enterprise-compared-to-x-api-v2">
  ### Comparaison de l’offre Enterprise avec l’API X v2
</div>

**Similarités**

- Pagination
- Fuseau horaire
- Prise en charge de l’historique des modifications de posts et des métadonnées

**Différences**

- URL des endpoints
- Exigences liées aux Applications et Projets
- Périodes disponibles
- Format des données de réponse
- Méthodes HTTP
- Formats temporels des requêtes
- Paramètres de requête
- Opérateurs de filtrage

<div id="similarities">
  #### Similarités
</div>

**Pagination**

Bien que la v2 propose des fonctionnalités de pagination supplémentaires (nouveaux paramètres qui permettent de naviguer à l’aide d’IDs de Post avec `since_id` et `until_id`), Enterprise comme la v2 permettent de paginer par temps (`fromDate` et `toDate` pour Enterprise, et `start_time` et `end_time` pour la v2).
 

**Fuseau horaire**

Comme indiqué dans la section sur la pagination, vous pouvez parcourir différentes pages de données en utilisant le temps, aussi bien avec Enterprise qu’avec la v2. Dans les deux cas, vous utiliserez UTC comme fuseau horaire avec ces paramètres.

**Prise en charge de l’historique d’édition des Posts et des métadonnées**

Les deux versions fournissent des métadonnées décrivant tout historique d’édition. Consultez les [références de l’API de recherche](/fr/x-api/posts/recent-search) et la [page sur les principes des éditions de Post](/fr/x-api/fundamentals/edit-posts) pour plus de détails. 

<div id="differences">
  #### Différences
</div>

**URL des endpoints**

- Endpoints Enterprise :
  - 30 jours - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label.json`
  - Archive complète - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label.json`
- Endpoints de l’API X v2
  - Récent (7 jours) - `https://api.x.com/2/tweets/search/recent`
  - Archive complète - `https://api.x.com/2/tweets/search/all`

**Exigences liées aux applications et aux projets**

Les endpoints de l’API X v2 exigent l’utilisation d’identifiants issus d’un Projet pour authentifier vos requêtes. Tous les endpoints de l’API X v1.1 peuvent utiliser des identifiants d’Applications autonomes ou d’Applications rattachées à un Projet.
 

**Périodes disponibles**

L’API Enterprise et l’API X v2 proposent toutes deux des endpoints permettant de récupérer des données de Posts filtrées sur l’archive complète des Posts.

Cependant, l’API X v2 ne propose pas de période de 30 jours comme l’API Enterprise. Elle propose à la place l’archive complète susmentionnée ou une période de 7 jours, qui s’alignent avec Native Enriched vers v2 et [Activity Streams vers v2](/fr/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2), ce qui peut vous aider à faire correspondre les champs Enterprise aux nouveaux champs v2. Ce guide vous fournira également les paramètres d’expansion et de champs spécifiques à transmettre avec votre requête v2 pour retourner des champs précis.
 

**Format des données de réponse**

L’une des plus grandes différences entre le [format de réponse Enterprise](https://developer.x.com/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary) et le [format de l’API X v2](/fr/x-api/fundamentals/data-dictionary) concerne la manière de sélectionner les champs renvoyés dans la charge utile.

Pour l’Enterprise Search API, de nombreux champs de réponse sont renvoyés par défaut, avec la possibilité d’utiliser des paramètres pour indiquer quels champs ou ensembles de champs doivent être inclus dans la charge utile.

La version API X v2 ne renvoie par défaut que les champs `id` et `text` du Post. Pour demander des champs ou objets supplémentaires, vous devez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs de Post demandés via ces endpoints seront renvoyés dans l’objet Post principal. Tous les objets et champs étendus relatifs aux utilisateurs, médias, sondages ou lieux seront renvoyés dans un objet `includes` dans la réponse. Vous pouvez ensuite faire correspondre tout objet étendu à l’objet Post en faisant correspondre les identifiants présents à la fois dans le Post et dans l’objet étendu.

Nous vous encourageons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en consultant notre guide sur [l’utilisation de fields et expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions).

En plus des changements dans la façon de demander certains champs, l’API X v2 introduit également de nouveaux modèles JSON pour les objets renvoyés par les API, y compris les objets [Post](/fr/x-api/fundamentals/data-dictionary#tweet) et [user](/fr/x-api/fundamentals/data-dictionary#user).

- Au niveau racine du JSON, les endpoints standards renvoient des objets Post dans un tableau `statuses`, tandis que l’API X v2 renvoie un tableau `data`.
- Au lieu de faire référence aux « statuses » Retweeted et Quoted, le JSON de l’API X v2 fait référence aux Tweets Retweeted et Quoted. De nombreux champs hérités et obsolètes, tels que `contributors` et `user.translator_type`, sont supprimés.
- Au lieu d’utiliser à la fois `favorites` (dans l’objet Post) et `favourites` (dans l’objet user), l’API X v2 utilise le terme like.
- X adopte la convention selon laquelle les valeurs JSON sans valeur (par exemple `null`) ne sont pas écrites dans la charge utile. Les attributs de Post et d’utilisateur ne sont inclus que s’ils ont des valeurs non nulles.
   

Nous avons également introduit un nouvel ensemble de champs dans l’objet Post, notamment :

- Un champ [conversation\_id](/fr/x-api/fundamentals/conversation-id)
- Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), incluant context et entities
- Plusieurs nouveaux champs [metrics](/fr/x-api/fundamentals/metrics)
- Un nouveau champ `reply_setting`, qui indique qui peut répondre à un Post donné

Et une dernière remarque. La réponse premium inclut un objet `requestParameters` au niveau racine, qui contient les paramètres inclus dans votre requête. La version v2 contient à la place un objet `meta` au niveau racine, qui inclut `newest_id`, `oldest_id`, `result_count` et `next_token` s’il existe une page de résultats supplémentaire.

**Méthodes HTTP**

La version Enterprise de l’API vous permet d’envoyer la requête soit avec la méthode HTTP POST et un corps JSON, soit avec la méthode HTTP GET et une chaîne de requête.

La v2 ne permet d’utiliser que la méthode HTTP GET avec une chaîne de requête.
 

**Formats d’horodatage des requêtes**

La version Enterprise de cet endpoint utilise le format date/heure suivant, à la fois dans les paramètres de pagination et dans le champ de réponse `timePeriod` : `YYYYMMDDHHmm`

L’endpoint v2 utilise le format date/heure ISO 8601/RFC 3339, à la fois dans les paramètres de pagination et dans les champs de réponse `start` et `end` : `YYYY-MM-DDTHH:mm:ssZ
 `

**Paramètres de requête**

Vous trouverez ci-dessous un tableau des paramètres de requête pour Enterprise et l’API X v2 :

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| maxResults | max\_results |
| fromDate (YYMMDDHHmm) | start\_time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end\_time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since\_id |
|     | until\_id |
| next | next\_token or pagination\_token |

**Opérateurs de filtrage**

Bien que les opérateurs entre Enterprise et l’API X v2 soient en grande partie identiques, il existe des différences de disponibilité de certains opérateurs, ainsi que de nouveaux opérateurs introduits uniquement dans la version API X v2.

Pour consulter un tableau complet des opérateurs disponibles pour l’API X v2, Enterprise, et même Premium et Standard, veuillez visiter la [page de migration de Search Posts](/fr/x-api/posts/search/migrate/overview).

**Prochaines étapes**

[Consultez notre guide de démarrage rapide pour la recherche sur l’archive complète de l’API X v2](/fr/x-api/posts/search/quickstart/full-archive-search)

[Consultez la référence de l’API pour la recherche sur l’archive complète](/fr/x-api/posts/full-archive-search)

[Découvrez des exemples de code pour ces endpoints](https://github.com/xdevplatform/Twitter-API-v2-sample-code)