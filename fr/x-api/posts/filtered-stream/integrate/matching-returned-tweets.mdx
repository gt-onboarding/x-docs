---
title: Mise en correspondance des posts avec des règles
sidebarTitle: Mise en correspondance des posts avec des règles
---

<div id="matching-returned-posts-to-their-associated-rule">
  ### Faire correspondre les Posts renvoyés à leur règle associée
</div>

L’endpoint du flux filtré vous permet de définir plusieurs règles via une seule connexion. Avant de commencer à recevoir des Posts dans votre flux, vous devez créer une règle qui précise les types de Posts qui vous intéressent.

Lorsque vous définissez des règles pour faire correspondre des Posts selon un large éventail d’attributs — notamment des attributs utilisateur, la géolocalisation, la langue, et bien d’autres — vous pouvez ajouter une balise pour distinguer cette règle à un niveau plus élevé. Les balises sont un bon moyen de contextualiser votre règle, surtout si vous avez de nombreuses règles en place. Les règles de filtrage déterminent quelles activités de Post seront envoyées via la connexion.

Si vous devez ajouter une nouvelle règle de filtrage pour capturer un autre type de Post, ou supprimer une règle existante, votre application peut envoyer une requête à l’endpoint [POST tweets/search/stream/rules](/fr/x-api/posts/filtered-stream#post-2-tweets-search-stream-rules) pour cela. Lorsque cette requête est envoyée, les règles de filtrage sont automatiquement modifiées et les changements prennent effet dans le flux de données sans qu’il soit nécessaire de se reconnecter. La plupart des ajouts de règles prennent effet en environ 20 secondes ou moins. Cela reste peu probable, mais selon des facteurs externes (par exemple, la connectivité réseau), il peut s’écouler plus de temps avant que vous ne commenciez à recevoir des Posts correspondants. Si vous ne trouvez pas une règle via l’endpoint de liste des règles, assurez-vous que la requête de création de règle a abouti ; vous pouvez le vérifier en consultant vos journaux pour d’éventuels messages d’erreur.

<div id="matching-rules">
  #### Règles de correspondance
</div>

Lorsqu’une activité est transmise via votre connexion au flux filtré, un tableau matching\_rules indique la liste des filtres qui ont correspondu au Post livré.

Dans la charge utile du Post, des métadonnées sous forme de chaîne incluent l’identifiant de règle et le tag qui ont entraîné la livraison d’un Post spécifique. Si plusieurs règles correspondent à un même Post, l’activité est transmise une seule fois, avec chacune des règles correspondantes incluse dans ces métadonnées. Les règles de correspondance offrent un moyen simple d’associer un Post précis à des règles précises, ce qui est particulièrement utile si vous avez de nombreuses règles distinctes. Étant donné que les données sont transmises via un flux unique de cette manière, il est essentiel d’utiliser des id et des tags uniques pour assurer la correspondance.

**Voici un exemple de l’apparition du tableau « matching\_rules » dans la charge utile d’un Post :**

```"matching_rules": [
    {
      "id": "1166916266197536768",
      "tag": "test-rule-tag-00000"
    },
    {
      "id": "1166916266197536769",
      "tag": "test-rule-tag-12345"
    }
  ]
```

<div id="rule-tags">
  #### Balises de règle
</div>

Lors de leur création, chaque règle de filtrage peut être assortie d’une balise. Les balises de règle n’ont aucune signification particulière : elles sont simplement traitées comme des chaînes opaques associées à une règle. Elles seront incluses dans les métadonnées matching\_rules des activités renvoyées et visent à faciliter la distinction de vos règles à un niveau plus global.

Les balises offrent un moyen simple de créer des regroupements logiques de règles de filtrage. Par exemple, vous pouvez générer un identifiant unique pour une règle spécifique et l’utiliser comme balise, afin que votre application puisse référencer cet identifiant dans les activités qu’elle traite pour associer un résultat à des clients, des campagnes, des catégories ou d’autres groupes connexes.

Notez que les balises ne peuvent pas être mises à jour sur une règle existante et ne peuvent être incluses qu’au moment de la création d’une règle. Pour « mettre à jour » ou « renommer » une balise, vous devez d’abord supprimer la règle, puis l’ajouter de nouveau avec la balise souhaitée. La meilleure solution consiste simplement à utiliser un identifiant unique comme balise, que votre système pourra associer à divers autres points de données au sein de votre application, sans avoir à modifier quoi que ce soit dans l’ensemble de règles.

<div id="filtered-stream-recovery-and-redundancy-features">
  ### Flux filtré - Fonctionnalités de récupération et de redondance
</div>

<Note>
  Remarque : ces fonctionnalités de récupération et de redondance ne sont disponibles que pour les utilisateurs disposant d’un accès Enterprise.
</Note>