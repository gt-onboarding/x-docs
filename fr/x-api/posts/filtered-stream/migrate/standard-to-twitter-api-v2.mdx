---
title: de v1 à v2
sidebarTitle: de v1 à v2
---

<div id="standard-v11-compared-to-x-api-v2">
  ### Standard v1.1 comparé à l’API X v2
</div>

Si vous avez travaillé avec le point de terminaison v1.1 [statuses/filter](https://developer.x.com/en/docs/x-api/v1/tweets/filter-realtime/api-reference/post-statuses-filter), ce guide peut vous aider à comprendre les similitudes et les différences entre les points de terminaison du Flux filtré standard et de l’API X v2.

- **Similarités**
  - Paramètres de requête et opérateurs
  - Prise en charge de l’historique de modification des posts et des métadonnées
- **Différences**
  - URL des points de terminaison
  - Exigence d’application et de projet
  - Méthode d’authentification
  - Volume de règles et flux persistant
  - Format des données de réponse
  - Paramètres de requête
  - Disponibilité des fonctionnalités de reprise et de redondance
  - Opérateurs de requête

<div id="similarities">
  #### Similarités
</div>

**Paramètres de requête et opérateurs**

L’endpoint standard v1.1 statuses/filter propose quelques paramètres pouvant être transmis avec la requête pour filtrer le flux. Avec le Flux filtré v2, vous utilisez plutôt un ensemble d’[opérateurs](/fr/x-api/posts/filtered-stream#building-rules-for-filtered-stream) pouvant être combinés à l’aide d’une logique booléenne pour filtrer les Posts souhaités. Les opérateurs disponibles incluent certains remplacements directs des paramètres standard v1.1 existants.

Les paramètres de requête standard v1.1 suivants ont des opérateurs équivalents dans l’API X v2 :
 

| **Standard** | **API X v2** |
| :--- | :--- |
| follow - Une liste d’ID utilisateur séparés par des virgules, indiquant les utilisateurs dont les Posts doivent être livrés sur le flux. | Plusieurs opérateurs peuvent vous aider à trouver des Posts liés à des utilisateurs spécifiques :<br /><br />\* @<br />\* from:<br />\* to:<br />\* etc. |
| track - Une liste de expressions séparées par des virgules qui sera utilisée pour déterminer quels Posts seront livrés sur le flux. | Plusieurs opérateurs peuvent vous aider à trouver des Posts liés à des mots-clés spécifiques :<br /><br />\* keyword<br />\* "correspondance exacte de la phrase"<br />\* #<br />\* etc. |

**Prise en charge de l’historique d’édition des Posts et des métadonnées**

Les deux versions fournissent des métadonnées décrivant tout historique d’édition. Consultez les [références de l’API Flux filtré](/fr/x-api/posts/filtered-stream#api-reference-index) et la [page sur les fondamentaux des éditions de Posts](/fr/x-api/fundamentals/edit-posts) pour plus de détails. 

<div id="differences">
  #### Différences
</div>

**URL des endpoints**

- Endpoints standard v1.1 :
  - https://stream.x.com/1.1/statuses/filter.json
- Endpoint de l’API X v2 :
  - https://api.x.com/2/tweets/search/stream
  - https://api.x.com/2/tweets/search/stream/rule

**Exigences relatives à l’App et au Projet**

Les endpoints de l’API X v2 exigent que vous utilisiez des identifiants provenant d’une [App développeur](/fr/resources/fundamentals/developer-apps) associée à un [Projet](/fr/resources/fundamentals/projects) lors de l’authentification de vos requêtes. Tous les endpoints de l’API X v1.1 peuvent utiliser des identifiants provenant d’Apps autonomes ou d’Apps associées à un Projet.

**Méthode d’authentification**

L’endpoint standard prend en charge [OAuth 1.0a User Context](/fr/resources/fundamentals/authentication), tandis que les endpoints du flux filtré de l’API X v2 prennent en charge [OAuth 2.0 App-Only](/fr/resources/fundamentals/authentication#oauth-2-0) (également appelé authentification « Application-only »). Pour effectuer des requêtes vers la version de l’API X v2, vous devez utiliser un App Access Token pour authentifier vos requêtes.

Si vous n’avez plus l’App Access Token qui vous a été présenté lors de la création de votre Projet et de votre App dans le portail développeur, vous pouvez en générer un nouveau en accédant à la page « Keys and tokens » de votre App sur le portail développeur. Si vous souhaitez générer un App Access Token par programmation, consultez ce [guide OAuth 2.0 App-Only](/fr/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token). 

**Volume des règles et flux persistant**

L’endpoint standard v1.1 ne prend en charge qu’une seule règle pour filtrer la connexion de streaming. Pour modifier la règle, vous devez déconnecter le flux et soumettre une nouvelle requête avec les règles de filtrage révisées transmises en paramètres. 

L’endpoint du flux filtré de l’API X v2 vous permet d’appliquer plusieurs règles à un même flux et d’ajouter ou de supprimer des règles de votre flux tout en maintenant la connexion. 

**Format des données de réponse**

L’une des principales différences entre les versions d’endpoint standard v1.1 et API X v2 est la manière dont vous sélectionnez les champs renvoyés dans la charge utile.

Pour les endpoints standard, de nombreux champs de réponse sont renvoyés par défaut, avec la possibilité d’utiliser des paramètres pour préciser quels champs ou ensembles de champs doivent être renvoyés dans la charge utile.

La version de l’API X v2 ne fournit par défaut que les champs id et text du Post. Pour demander des champs ou objets supplémentaires, vous devrez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs de Post que vous demandez à partir de ces endpoints seront renvoyés dans l’objet Post principal. Tous les objets et champs d’utilisateur, de média, de sondage ou de lieu étendus seront renvoyés dans un objet includes au sein de votre réponse. Vous pouvez ensuite faire correspondre les objets étendus à l’objet Post en faisant correspondre les ID présents à la fois dans le Post et dans l’objet étendu. 

Nous vous invitons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en consultant notre guide sur [l’utilisation des fields et expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

Nous avons également élaboré un [guide de migration du format de données](/fr/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) qui peut vous aider à établir la correspondance entre les champs standard v1.1 et les champs v2 plus récents. Ce guide vous fournira également les paramètres d’expansion et de champ spécifiques à transmettre avec votre requête v2 pour renvoyer des champs donnés. 
 

En plus des changements dans la manière de demander certains champs, l’API X v2 introduit également de nouvelles conceptions JSON pour les objets renvoyés par les API, y compris les objets Post et [user](/fr/x-api/fundamentals/data-dictionary#user).

- Au niveau racine du JSON, les endpoints standard renvoient des objets Post dans un tableau statuses, tandis que l’API X v2 renvoie un tableau data. 
- Au lieu de faire référence aux « statuses » Retweeted et Quoted, le JSON de l’API X v2 fait référence aux Tweets Retweeted et Quoted. De nombreux champs hérités et obsolètes, tels que contributors et user.translator\_type, sont supprimés. 
- Au lieu d’utiliser à la fois favorites (dans l’objet Post) et favourites (dans l’objet user), l’API X v2 utilise le terme like. 
- X adopte la convention selon laquelle les valeurs JSON sans valeur (par exemple null) ne sont pas écrites dans la charge utile. Les attributs de Post et user ne sont inclus que s’ils ont des valeurs non nulles. 
   

Nous avons également introduit un nouvel ensemble de champs dans l’[objet Post](/fr/x-api/fundamentals/data-dictionary#tweet), notamment les suivants :

- Un champ [conversation\_id](/fr/x-api/fundamentals/conversation-id)
- Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), notamment context et entities
- Plusieurs nouveaux champs [metrics](/fr/x-api/fundamentals/metrics)
- Un nouveau champ reply\_setting, qui indique qui peut répondre à un Post donné

**Paramètres de requête**

Il existe également un ensemble de paramètres standard du flux filtré **non** pris en charge dans l’API X v2 :

| Paramètre standard v1.1 | Détails |
| :--- | :--- |
| locations - Une liste de paires longitude,latitude séparées par des virgules, spécifiant un ensemble de boîtes englobantes pour filtrer les Posts. | Nous n’avons pas encore publié d’opérateurs basés sur la localisation pour l’API X v2. |
| Delimited | Avec le point de terminaison v1.1, définir cette valeur sur la longueur de la chaîne indique que les statuts doivent être délimités dans le flux, afin que les clients sachent combien d’octets lire avant la fin du message de statut.<br /><br />Cette fonctionnalité n’est pas disponible avec l’API X v2. |
| Stall\_warnings | Avec le point de terminaison v1.1, définir ce paramètre à true entraînera l’envoi de messages périodiques si le client risque d’être déconnecté.<br /><br />Avec l’API X v2, des avertissements de blocage sont envoyés par défaut, avec une nouvelle ligne envoyée périodiquement. |

**Disponibilité des fonctionnalités de reprise et de redondance**

La version du flux filtré de l’API X v2 introduit des fonctionnalités de reprise et de redondance qui peuvent vous aider à maximiser le temps de disponibilité du streaming ainsi qu’à récupérer les Posts qui auraient pu être manqués en raison d’une déconnexion d’au plus cinq minutes.

Les connexions redondantes vous permettent de vous connecter à un flux donné jusqu’à deux fois, ce qui peut aider à garantir le maintien d’une connexion au flux en permanence, même si l’une de vos connexions échoue. 

Le paramètre backfill\_minutes peut être utilisé pour récupérer jusqu’à cinq minutes de données manquées. 

Ces deux fonctionnalités ne sont disponibles que via l’[accès Academic Research](/fr/x-api/getting-started/about-x-api). Pour en savoir plus, consultez notre guide d’intégration sur les [fonctionnalités de reprise et de redondance](/fr/x-api/posts/filtered-stream#filtered-stream-recovery-and-redundancy-features). 

**Nouveaux opérateurs de requête**

L’API X v2 introduit de nouveaux opérateurs prenant en charge deux nouvelles fonctionnalités : 

- **[Conversation IDs](/fr/x-api/fundamentals/conversation-id)** - Au fil des conversations sur X, un ID de conversation est disponible pour marquer les Posts qui en font partie. Tous les Posts de la conversation auront leur conversation\_id défini sur l’ID du Post qui l’a initiée. 
  - conversation\_id:
- **[X Annotations](/fr/x-api/fundamentals/post-annotations)** fournissent des informations contextuelles sur les Posts et incluent des annotations entity et context. Les entités se composent de personnes, lieux, produits et organisations. Les contextes sont des domaines ou des sujets dont font partie les entités mises en avant. Par exemple, les personnes mentionnées dans un Post peuvent avoir un contexte indiquant s’il s’agit d’un athlète, d’un acteur ou d’un politicien.  
  - context : - correspond aux Posts annotés avec un contexte d’intérêt. 
  - entity : - correspond aux Posts annotés avec une entité d’intérêt. 