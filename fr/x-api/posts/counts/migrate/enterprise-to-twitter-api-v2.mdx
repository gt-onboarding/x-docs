---
title: v1 à v2 (Enterprise)
sidebarTitle: v1 à v2 (Enterprise)
---

<div id="enterprise-compared-to-x-api-v2">
  ### Comparaison de l’offre Enterprise avec l’API X v2
</div>

**Similarités**

- Granularité
- Pagination
- Fuseau horaire

**Différences**

- URL des endpoints
- Exigence d’application et de projet
- Périodes disponibles
- Format des données de réponse
- Méthodes HTTP
- Formats temporels des requêtes
- Paramètres de requête
- Opérateurs de filtrage

<div id="similarities">
  #### Similarités
</div>

**Granularité**

Bien que le paramètre pour sélectionner la granularité des données renvoyées soit différent (`bucket` pour la version Enterprise, `granularity` pour la version v2), les valeurs que vous pouvez transmettre à ce paramètre sont les mêmes, tout comme le comportement par défaut :

- `day`
- `hour` (par défaut)
- `minute`

**Pagination**

Bien que v2 propose des fonctionnalités de pagination supplémentaires (de nouveaux paramètres qui permettent de naviguer à l’aide d’ID de posts avec `since_id` et `until_id`), Enterprise et v2 permettent toutes deux de paginer dans le temps (`fromDate` et `toDate` avec Enterprise, et `start_time` et `end_time` pour v2).

Si vous utilisez la version Enterprise, vous utiliserez le paramètre `next` pour paginer ; le champ du jeton suivant s’appelle `next` et se trouve à la racine de la réponse.

Si vous utilisez v2, vous pouvez utiliser soit le paramètre `next_token`, soit `pagination_token` pour paginer, et le jeton suivant se trouvera à `meta.next_token` dans la réponse.
 

**Fuseau horaire**

Comme indiqué dans la section Pagination, vous pouvez parcourir différentes pages de données dans le temps, tant pour Enterprise que pour v2. Dans les deux cas, vous utiliserez UTC comme fuseau horaire lorsque vous emploierez ces paramètres.

<div id="differences">
  #### Différences
</div>

**URL des endpoints**

- Endpoints Enterprise :
  - 30 jours - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label/counts.json`
  - Archive complète - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label/counts.json`
- Endpoints API X v2
  - Récent (7 jours) - `https://api.x.com/2/tweets/counts/recent`
  - Archive complète - `https://api.x.com/2/tweets/counts/all`

**Exigences concernant les applications et les projets**

Les endpoints de l’API X v2 exigent l’utilisation d’identifiants provenant d’une [application développeur](/fr/resources/fundamentals/developer-apps) associée à un [projet](/fr/resources/fundamentals/developer-apps) pour authentifier vos requêtes. Tous les endpoints de l’API X v1.1 peuvent utiliser des identifiants d’applications autonomes ou d’applications associées à un projet.
 

**Périodes disponibles**

L’API Enterprise comme l’API X v2 proposent des endpoints permettant de récupérer les volumes de Posts pour l’archive complète des Posts.

Cependant, l’API X v2 ne propose pas d’endpoint de période de 30 jours comme l’API Enterprise. Elle propose à la place l’archive complète susmentionnée, ou une période de 7 jours, en cohérence avec les [endpoints de recherche de Posts v2](/fr/x-api/posts/search/introduction).
 

**Format des données de réponse**

Il existe quelques différences subtiles dans le format des données que vous recevrez via Enterprise et l’API X v2 :

- Les données de comptage d’Enterprise se trouvent dans un objet `results`, tandis que les données de comptage v2 se trouvent dans un objet `data`.
- Les champs de comptage d’Enterprise s’appellent `timePeriod` (heure de début) et `count`, tandis que v2 sépare la période en champs `start` et `end` (qui utilisent un format de date/heure différent de celui d’Enterprise, expliqué dans les formats temporels de requête) et renomme le champ de comptage en `tweet_count`.
- Les métadonnées Enterprise incluent `totalCount`, `next` et l’objet `requestParameters` au niveau racine. En revanche, v2 n’inclut pas l’objet `requestParameters`, et déplace/renomme les éléments suivants dans un objet `meta` au niveau racine : `total_tweet_count` et `next_token`.
   

**Méthodes HTTP**

La version Enterprise de l’API vous permet d’envoyer la requête soit via la méthode HTTP POST avec un corps JSON, soit via la méthode HTTP GET avec une chaîne de requête.

La v2 vous permet uniquement d’utiliser la méthode HTTP GET avec une chaîne de requête.
 

**Formats temporels de requête**

La version Enterprise de cet endpoint utilise le format de date/heure suivant, à la fois dans les paramètres de pagination et dans le champ de réponse `timePeriod` : `YYYYMMDDHHmm`

L’endpoint v2 utilise le format de date/heure ISO 8601/RFC 3339, à la fois dans les paramètres de pagination et dans les champs de réponse `start` et `end` : `YYYY-MM-DDTHH:mm:ssZ`

**Paramètres de requête**

Voici un tableau des paramètres de requête pour Enterprise et l’API X v2 :

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| bucket | granularity |
| fromDate (YYMMDDHHmm) | start\_time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end\_time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since\_id |
|     | until\_id |
| next | next\_token and pagination\_token |

**Opérateurs de filtrage**

Bien que les opérateurs entre Enterprise et l’API X v2 soient en grande partie les mêmes, il existe quelques différences de disponibilité, ainsi que de nouveaux opérateurs introduits uniquement dans l’API X v2.

Pour consulter un tableau complet des opérateurs disponibles pour l’API X v2, Enterprise et même Premium, veuillez visiter la [page de migration des comptages de Posts](/fr/x-api/posts/counts/migrate/overview).

<div id="api-reference-index">
  ## Index de référence de l’API
</div>

Pour consulter la référence complète de l’API, veuillez sélectionner un point de terminaison ci-dessous.

<div id="recent-post-counts">
  ### Comptages de Posts récents
</div>

|     |     |
| :--- | :--- |
| **Obtenir le nombre de Posts correspondant à une requête sur les 7 derniers jours** | `[GET /2/tweets/counts/recent](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-recent)` |

<div id="full-archive-post-counts">
  ### Décomptes de posts de l’archive complète
</div>

Uniquement disponible pour les personnes disposant de l’[accès Pro et Enterprise](/fr/x-api/getting-started/about-x-api)

|     |     |
| :--- | :--- |
| **Obtenir le décompte des posts correspondant à une requête** | `[GET /2/tweets/counts/all](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-all)` |