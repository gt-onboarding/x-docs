---
title: Guide de migration
sidebarTitle: Guide de migration
---

import { Button } from '/snippets/fr/button.mdx';

<div id="blocks-lookup-standard-v11-compared-to-x-api-v2">
  ### Recherche des blocages : Standard v1.1 comparé à l’API X v2
</div>

Si vous avez travaillé avec les endpoints standard v1.1 [GET blocks/ids](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-ids) et [GET blocks/list](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-list), l’objectif de ce guide est de vous aider à comprendre les similitudes et les différences entre les endpoints de recherche de blocages du standard v1.1 et de l’API X v2.

- **Similarités**
  - Authentification
- **Différences**
  - URL des endpoints

  - Limites d’utilisateurs par requête

  - Exigences pour l’application et le projet

  - Formats de données de la réponse

  - Paramètres de requête

<div id="similarities">
  #### Similarités
</div>

**Authentification**

Les endpoints de consultation des blocages, tant en v1.1 standard que dans l’API X v2, utilisent [OAuth 1.0a User Context](/fr/resources/fundamentals/authentication#oauth-1-0a-2). Par conséquent, si vous utilisiez auparavant l’un des endpoints v1.1 standard de consultation des blocages, vous pouvez continuer à utiliser la même méthode d’authentification lors de votre migration vers la version API X v2. 

<div id="differences">
  #### Différences
</div>

**URLs des endpoints**

- Endpoints standard v1.1 :
  - GET https://api.x.com/1.1/blocks/ids.json
    (liste des identifiants d’utilisateurs bloqués par l’utilisateur spécifié)
  - GET https://api.x.com/1.1/blocks/lists.json
    (liste des utilisateurs bloqués par l’utilisateur spécifié)
- Endpoint API X v2 :
  - GET https://api.x.com/2/users/:id/blocking
    (liste des utilisateurs bloqués par l’identifiant utilisateur spécifié)
     

**Limites d’utilisateurs par requête**

Les endpoints standard v1.1 permettent de renvoyer jusqu’à 5000 utilisateurs par requête. Les nouveaux endpoints v2 permettent de renvoyer jusqu’à 1000 utilisateurs par requête. Pour obtenir un total de 1000 utilisateurs, vous devez transmettre max\_results=1000 comme paramètre de requête ; vous pouvez ensuite transmettre le next\_token renvoyé dans la charge utile de la réponse au paramètre de requête pagination\_token dans votre requête suivante.
 

**Exigences liées aux applications et aux projets**

Les endpoints de l’API X v2 exigent l’utilisation d’identifiants issus d’une [application développeur](/fr/resources/fundamentals/developer-apps) associée à un [projet](/fr/resources/fundamentals/developer-apps) lors de l’authentification de vos requêtes. Tous les endpoints de l’API X v1.1 peuvent utiliser des identifiants d’applications autonomes ou d’applications associées à un projet.

**Format des données de réponse**

L’une des principales différences entre les versions d’endpoints standard v1.1 et API X v2 est la manière de sélectionner les champs renvoyés dans la charge utile.

Pour les endpoints standard, de nombreux champs de réponse sont renvoyés par défaut, avec la possibilité d’utiliser des paramètres pour indiquer quels champs ou ensembles de champs doivent figurer dans la charge utile.

La version API X v2 ne renvoie par défaut que les champs user id, name et username. Pour demander des champs ou objets supplémentaires, vous devez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs utilisateur que vous demandez depuis cet endpoint seront renvoyés dans l’objet utilisateur principal. Tout objet Post étendu et ses champs seront renvoyés dans un objet includes au sein de la réponse. Vous pouvez ensuite faire correspondre tout objet étendu à l’objet utilisateur en faisant correspondre les identifiants présents à la fois dans l’objet user et dans l’objet Post étendu. 

Nous vous encourageons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en lisant notre guide sur [l’utilisation des fields et expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

Nous avons également préparé un [guide de migration du format des données](/fr/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) qui peut vous aider à faire correspondre les champs standard v1.1 aux champs plus récents de la v2. Ce guide vous fournira aussi les paramètres d’expansion et de champ spécifiques que vous devrez transmettre avec votre requête v2 pour renvoyer des champs particuliers. 
 

En plus des changements concernant la façon de demander certains champs, l’API X v2 introduit également de nouveaux schémas JSON pour les objets renvoyés par les API, y compris les objets [P](/fr/x-api/fundamentals/data-dictionary#tweet)ost et [user](/fr/x-api/fundamentals/data-dictionary#user).

- Au niveau racine du JSON, les endpoints standard renvoient des objets Post dans un tableau statuses, tandis que l’API X v2 renvoie un tableau data. 
- Au lieu de faire référence aux « statuses » Retweeted et Quoted, le JSON de l’API X v2 fait référence aux Tweets Retweeted et Quoted. De nombreux champs hérités et obsolètes, tels que contributors et user.translator\_type, sont supprimés. 
- Au lieu d’utiliser à la fois favorites (dans l’objet Post) et favourites (dans l’objet user), l’API X v2 utilise le terme like. 
- X adopte la convention selon laquelle les valeurs JSON sans valeur (par exemple, null) ne sont pas écrites dans la charge utile. Les attributs Post et user ne sont inclus que s’ils ont des valeurs non nulles. 
   

Nous avons également introduit un nouvel ensemble de champs dans l’[objet Post](/fr/x-api/fundamentals/data-dictionary#tweet), notamment :

- Un champ [conversation\_id](/fr/x-api/fundamentals/conversation-id)
- Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), à savoir context et entities
- Plusieurs nouveaux champs de [metrics](/fr/x-api/fundamentals/metrics) 
- Un nouveau champ reply\_setting, qui indique qui peut répondre à un Post donné

**Paramètres de requête**

Les paramètres de requête standard de la v1.1 ci-dessous acceptaient deux paramètres (user\_id ou screen\_name). L’API X v2 n’accepte que l’ID utilisateur numérique, qui doit être transmis dans le chemin de l’endpoint.