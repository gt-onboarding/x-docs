---
title: de v1 à v2
sidebarTitle: de v1 à v2
---

import { Button } from '/snippets/fr/button.mdx';

<div id="standard-v11-compared-to-x-api-v2">
  ### Comparaison entre la version standard v1.1 et l’API X v2
</div>

Si vous avez travaillé avec les endpoints standard v1.1 GET users/show et GET users/lookup, ce guide a pour but de vous aider à comprendre les similitudes et les différences entre les endpoints de recherche d’utilisateurs de la version standard et de l’API X v2.

- **Similitudes**
  - Contexte utilisateur OAuth 1.0a
  - Limites d’utilisateurs par requête
- **Différences**
  - URLs des endpoints
  - Exigences pour les applications et les projets
  - Format des données de réponse
  - Paramètres de requête

<div id="similarities">
  #### Similarités
</div>

**Méthode d’authentification OAuth 1.0a en contexte utilisateur**

L’endpoint standard prend en charge [OAuth 1.0a en contexte utilisateur](/fr/resources/fundamentals/authentication#oauth-1-0a-2), tandis que les endpoints de recherche d’utilisateurs de la nouvelle API X v2 prennent en charge à la fois OAuth 1.0a en contexte utilisateur et [App only](/fr/resources/fundamentals/authentication#oauth-2-0). Par conséquent, si vous utilisiez auparavant l’un des endpoints standard v1.1 de recherche d’utilisateurs, vous pouvez continuer à utiliser la même méthode d’authentification en migrant vers la version API X v2. 

Selon la bibliothèque/le package d’authentification que vous utilisez, l’authentification App only est probablement la manière la plus simple de démarrer et peut être définie avec un simple en-tête de requête. Pour savoir comment générer un jeton d’accès App only, consultez [ce guide App only](/fr/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

**Limites d’utilisateurs par requête**

L’endpoint standard v1.1 GET users/lookup vous permet de spécifier 100 utilisateurs par requête. Il en va de même pour les endpoints GET /users et GET /users/by. Pour atteindre 100 utilisateurs, vous devrez passer le paramètre ids (GET /users) ou le paramètre username (GET /users/by) en tant que paramètre de requête, et inclure la liste des ID/nom d’utilisateur dans une liste séparée par des virgules. 
 

<div id="differences">
  #### Différences
</div>

**URL d’endpoint**

- Endpoints standard v1.1 :
  - https://api.x.com/1.1/users/show (recherche par ID unique ou nom d’utilisateur)
  - https://api.x.com/1.1/users/lookup (recherche par plusieurs ID ou noms d’utilisateur)
- Endpoint API X v2 :
  - https://api.x.com/2/users (recherche par plusieurs ID)
  - https://api.x.com/2/users/:id (recherche par ID unique)
  - https://api.x.com/2/users/by (recherche par plusieurs noms d’utilisateur)
  - https://api.x.com/2/users/by/username/:username (recherche par nom d’utilisateur unique)

**Exigences pour les applications et les projets**

Les endpoints de l’API X v2 exigent l’utilisation d’identifiants d’une [application développeur](/fr/resources/fundamentals/developer-apps) associée à un [projet](/fr/resources/fundamentals/projects) lors de l’authentification de vos requêtes. Tous les endpoints de l’API X v1.1 peuvent utiliser des identifiants provenant d’applications autonomes ou d’applications associées à un projet.

**Format des données de réponse**

L’une des principales différences entre les versions d’endpoints standard v1.1 et API X v2 est la manière de sélectionner les champs renvoyés dans la réponse.

Pour les endpoints standard, de nombreux champs de réponse sont fournis par défaut, avec la possibilité d’utiliser des paramètres pour indiquer quels champs ou ensembles de champs doivent être inclus dans la réponse.

La version API X v2 ne renvoie par défaut que les champs id utilisateur, name et username. Pour demander des champs ou objets supplémentaires, vous devrez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs utilisateur que vous demandez via cet endpoint seront renvoyés dans l’objet utilisateur principal. Tout objet Post étendu et ses champs seront renvoyés dans un objet includes au sein de la réponse. Vous pouvez ensuite faire correspondre les objets étendus à l’objet utilisateur en faisant correspondre les ID présents à la fois dans l’objet user et dans l’objet Post étendu.

Nous vous encourageons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en consultant notre guide sur [l’utilisation des fields et expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions).

Nous avons également élaboré un [guide de migration du format de données](/fr/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) qui peut vous aider à faire correspondre les champs standard v1.1 aux nouveaux champs v2. Ce guide vous indiquera également les paramètres d’expansion et de champ spécifiques à transmettre avec votre requête v2 pour renvoyer des champs précis.

En plus des changements portant sur la façon de demander certains champs, l’API X v2 introduit également de nouvelles conceptions JSON pour les objets renvoyés par les API, notamment les objets [Post](/fr/x-api/fundamentals/data-dictionary#tweet) et [user](/fr/x-api/fundamentals/data-dictionary#user).

- Au niveau racine du JSON, les endpoints standard renvoient des objets Post dans un tableau statuses, tandis que l’API X v2 renvoie un tableau data.
- Au lieu de faire référence à des « statuses » Retweeted et Quoted, le JSON de l’API X v2 fait référence à des Tweets Retweeted et Quoted. De nombreux champs hérités et obsolètes, tels que contributors et user.translator\_type, sont supprimés.
- Au lieu d’utiliser à la fois favorites (dans l’objet Post) et favourites (dans l’objet user), l’API X v2 utilise le terme like.
- X adopte la convention selon laquelle les valeurs JSON vides (par exemple, null) ne sont pas incluses dans la réponse. Les attributs Post et user ne sont inclus que s’ils ont des valeurs non nulles.

Nous avons également introduit un nouvel ensemble de champs dans l’[objet Post](/fr/x-api/fundamentals/data-dictionary#tweet), notamment :

- Un champ [conversation\_id](/fr/x-api/fundamentals/conversation-id)
- Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), dont context et entities
- Plusieurs nouveaux champs de [metrics](/fr/x-api/fundamentals/metrics)
- Un nouveau champ reply\_setting, qui indique qui peut répondre à un Post donné

**Paramètres de requête**

Les paramètres de requête standard v1.1 suivants ont des équivalents dans l’API X v2 :

|     |     |
| :--- | :--- |
| **Standard** | **API X v2** |
| user\_id | ids |
| screen\_name | username |

Il existe également un ensemble de paramètres de requête standard users lookup qui ne sont **pas** pris en charge dans l’API X v2 :

| Standard | Commentaire |
| :--- | :--- |
| include\_entities | Ce paramètre sert à retirer le nœud entities du payload du Post. Il a été remplacé par la fonctionnalité additive des champs et des expansions. |