---
title: API d’utilisation
description: "L’API d’utilisation est une API REST gratuite qui offre un accès programmatique et une visibilité sur la consommation d’activité sur l’ensemble des produits pour votre compte entreprise."
sidebarTitle: API d’utilisation
---

<div id="usage-api-twitter-api">
  ## API d’utilisation | API X
</div>

<div id="overview">
  ### Présentation
</div>

`Enterprise`

C’est l’outil le plus important et le plus efficace pour surveiller et gérer l’utilisation des différentes API associées à votre compte.

**Avertissement important :**

Les volumes d’utilisation renvoyés par l’API Usage peuvent ne pas correspondre à ceux d’une facture en raison des périodes d’essai et d’autres ajustements de facturation. Tous les chiffres sont basés sur des activités dédupliquées consommées au cours d’une journée (UTC).

<div id="features">
  #### Fonctionnalités
</div>

- Récupération programmatique des données d’utilisation disponibles dans l’interface console.gnip.com
- Données d’utilisation au niveau du flux — fournit des données d’utilisation au niveau du flux (p. ex., dev et prod) en plus du niveau produit
- Données granulaires et descriptives — les « requêtes » de recherche sont ventilées entre les produits Recherche sur l’archive complète et Recherche 30 jours
- « Jours » et « tâches » de Historical PowerTrack 

<div id="supported-apis">
  ### API prises en charge
</div>

Vous trouverez ci-dessous la liste des API actuellement prises en charge par l’API Usage :

- PowerTrack API `enterprise`
- 30-Day Search API `enterprise`
- Full-Archive Search API `enterprise`
- Historical PowerTrack `enterprise`

<div id="limitations">
  ### Limitations
</div>

- L’API Usage vous permet d’accéder aux données d’utilisation depuis le 1er mai 2018. À partir du 1er juillet 2019, l’API Usage vous permet d’accéder aux données d’utilisation des **13 derniers mois civils**

- Vous pouvez accéder aux données d’utilisation par **intervalles de trois mois** définis avec fromDate et toDate

Voir ci-dessous un exemple de requête et de réponse :

```bash
curl -u<username>:<password> \
"https://gnip-api.x.com/metrics/usage/accounts/<account-name>.json?bucket=month"
```

```json
{
  "account": {
    "name": "accountnamehere"
  },
  "publishers": [
    {
      "type": "twitter",
      "used": [
        {
          "timePeriod": "201805010000",
          "activities": 1235,
          "searchRequests30Day": 3,
          "searchRequestsFullArchive": 19,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0
        },
        {
          "timePeriod": "201806010000",
          "activities": 23467,
          "searchRequests30Day": 0,
          "searchRequestsFullArchive": 66,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0
        },
        {
          "timePeriod": "201807010000",
          "activities": 431,
          "searchRequests30Day": 11,
          "searchRequestsFullArchive": 4,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0
        }
      ],
      "projected": {
        "timePeriod": "201807010000",
        "activities": 803,
        "searchRequests30Day": 20,
        "searchRequestsFullArchive": 7,
        "historicalPowertrackDays": 0,
        "historicalPowertrackJobs": 0
      },
      "products": [
        {
          "type": "Abonnement à Historical PowerTrack",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            },
            {
              "timePeriod": "201806010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            },
            {
              "timePeriod": "201807010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 0,
            "days": 0,
            "jobs": 0
          }
        },
        {
          "type": "PowerTrack",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 267
            },
            {
              "timePeriod": "201806010000",
              "activities": 3
            },
            {
              "timePeriod": "201807010000",
              "activities": 32
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 59
          },
          "endpoints": [
            {
              "type": "PowerTrack 2.0",
              "label": "actformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 0
              }
            },
              {
              "type": "PowerTrack Replay 2.0",
              "label": "ogformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 0
              }
            }
          ]
        },
        {
          "type": "API de recherche (30 jours) 2.0",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 10,
              "searchRequests30Day": 3
            },
            {
              "timePeriod": "201806010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201807010000",
              "activities": 23,
              "searchRequests30Day": 11
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 42,
            "searchRequests30Day": 20
          },
          "endpoints": [
            {
              "type": "API de recherche (30 jours) 2.0",
              "label": "ogformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 10,
                  "searchRequests30Day": 3
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 21,
                  "searchRequests30Day": 10
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 39,
                "searchRequests30Day": 18
              }
            }
          ]
        },
        {
          "type": "API de recherche (archive complète)",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 961,
              "searchRequestsFullArchive": 19
            },
            {
              "timePeriod": "201806010000",
              "activities": 23466,
              "searchRequestsFullArchive": 66
            },
            {
              "timePeriod": "201807010000",
              "activities": 379,
              "searchRequestsFullArchive": 4
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 706,
            "searchRequestsFullArchive": 7
          },
          "endpoints": [
            {
              "type": "API de recherche (archive complète)",
              "label": "actformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 1,
                  "searchRequestsFullArchive": 3
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0,
                  "searchRequestsFullArchive": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 2,
                  "searchRequestsFullArchive": 1
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 3,
                "searchRequestsFullArchive": 1
              }
            },
            {
              "type": "API de recherche (archive complète)",
              "label": "ogformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 961,
                  "searchRequestsFullArchive": 16
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 23466,
                  "searchRequestsFullArchive": 66
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 379,
                  "searchRequestsFullArchive": 3
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 706,
                "searchRequestsFullArchive": 5
              }
            }
          ]
        }
      ]
    }
  ],
  "bucket": "mois"
  "fromDate": "201805010000",
  "toDate": "201808010000"
}
```

<div id="sample-payload">
  ### Exemple de payload
</div>

Ci-dessous, un exemple de payload :

```bash
{
  "account": {
    "name": "gnip-username"
  },
  "bucket": "mois",
  "publishers": [
    {
      "type": "automattic",
      "used": [
        {
          "activities": 0,
          "timePeriod": "201603010000"
        }
      ],
      "projected": {
        "activities": 0,
        "timePeriod": "201603010000"
      },
      "products": [
        {
          "type": "PowerTrack",
          "used": [
            {
              "timePeriod": "201603010000",
              "activities": 0
            }
          ],
          "projected": {
            "timePeriod": "201603010000",
            "activities": 0
          },
          "endpoints": [
            {
              "type": "PowerTrack",
              "label": "dev",
              "used": [
                {
                  "timePeriod": "201603010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201603010000",
                "activities": 0
              }
            }
          ]
        }
      ]
    },
    {
      "type": "twitter",
      "used": [
        {
          "activities": 84,
          "searchRequests30Day": 4,
          "searchRequestsFullArchive": 0,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0,
          "timePeriod": "201603010000"
        }
      ],
      "projected": {
        "activities": 0,
        "searchRequests30Day": 0,
        "searchRequestsFullArchive": 0,
        "historicalPowertrackDays": 0,
        "historicalPowertrackJobs": 0,
        "timePeriod": "201601010000"
      },
      "products": [
        {
          "type": "Historical PowerTrack 2.0",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 11884,
              "days": 5,
              "jobs": 5
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            }
          ]
        },
        {
          "type": "PowerTrack",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 27456
            },
            {
              "timePeriod": "201601010000",
              "activities": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0
          },
          "endpoints": [
            {
              "type": "PowerTrack",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 2930
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0
              }
            },
            {
              "type": "PowerTrack 2.0",
              "label": "devel-v2",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 24542
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0
              }
            },
            {
              "type": "PowerTrack 2.0",
              "label": "devel-v2-1",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0
              }
            }
          ]
        },
        {
          "type": "API de recherche",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "searchRequests30Day": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0,
            "searchRequests30Day": 0
          },
          "endpoints": [
            {
              "type": "API de recherche",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0,
                "searchRequests30Day": 0
              }
            }
          ]
        },
        {
          "type": "API de recherche (30 jours)",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "searchRequests30Day": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0,
            "searchRequests30Day": 0
          },
          "endpoints": [
            {
              "type": "API de recherche (30 jours)",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0,
                "searchRequests30Day": 0
              }
            }
          ]
        },
        {
          "type": "API de recherche (archive complète)",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0,
              "searchRequestsFullArchive": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "searchRequestsFullArchive": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "searchRequestsFullArchive": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0,
            "searchRequestsFullArchive": 0
          },
          "endpoints": [
            {
              "type": "API de recherche (archive complète)",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0,
                  "searchRequestsFullArchive": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0,
                  "searchRequestsFullArchive": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0,
                  "searchRequestsFullArchive": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0,
                "searchRequestsFullArchive": 0
              }
            }
          ]
        }
      ]
    }
  ]
}
```

<div id="api-reference">
  ## Référence de l’API
</div>

<div id="get-usage">
  ### get-usage
</div>

<div id="methods">
  #### **Méthodes**
</div>

| Méthode | Description |
| :--- | :--- |
| [GET /metrics/usage/accounts/{ACCOUNT_NAME}.json](#GETData) | Récupérer les données d’utilisation |

Où :

- :account\_name est le nom (respectant la casse) associé à votre compte, tel qu’affiché sur console.gnip.com

<div id="authentication-and-rate-limit">
  #### **Authentification et limitation de taux**
</div>

<div id="authentication">
  ##### **Authentification**
</div>

Toutes les requêtes adressées à l’API Usage requièrent l’authentification HTTP Basic, en utilisant n’importe quelles informations d’identification e‑mail/mot de passe activées sur votre compte pour vous connecter à console.gnip.com ou à n’importe quel flux Gnip.

<div id="rate-limit">
  ##### **Limitation de débit**
</div>

L’API Usage impose une limitation de débit de deux requêtes par minute.

<div id="best-practices-limitations">
  #### **Bonnes pratiques et limitations**
</div>

<div id="data-availability">
  ##### **Disponibilité des données**
</div>

Les données d’utilisation sont basées sur des activités dédupliquées, jusqu’à la dernière période complète (UTC) durant laquelle les données ont été traitées. Les données sont généralement traitées et mises à jour à la minute près, sauf lorsque Gnip déploie des systèmes.

- L’API Usage vous permet d’accéder aux données d’utilisation depuis le 1er mai 2018. À compter du 1er juillet 2019, l’API Usage permet d’accéder aux données d’utilisation pour les **13 derniers mois calendaires**.

- Vous pouvez accéder aux données d’utilisation par **intervalles de trois mois**, définis avec un fromDate et un toDate

<div id="requesting-and-receiving-data">
  #### **Demande et réception de données**
</div>

L’API Usage fonctionne en envoyant une requête HTTP GET avec des identifiants d’authentification HTTP Basic au point de terminaison de l’API associé à votre compte.

<div id="get-request">
  ##### Requête GET :
</div>

Effectuez une requête GET vers l’endpoint suivant avec vos identifiants utilisateur et le nom de votre compte :

https://gnip-api.x.com/metrics/usage/accounts/:account\_name.json

**Paramètres supplémentaires**

|     |     |
| :--- | :--- |
| bucket | Facultatif. Unité de temps pour laquelle les données d’utilisation seront fournies. Les données d’utilisation peuvent être renvoyées avec une granularité quotidienne ou mensuelle.  <br />  <br />Les requêtes effectuées sans bucket spécifié renverront des données avec une granularité mensuelle.  <br />  <br />Options : 'month' ou 'day' |
| fromDate (YYYYMMDDHHMM) | Facultatif. Les données d’utilisation ne sont disponibles qu’à partir du 1er mai 2018. Horodatage UTC le plus ancien à partir duquel les données d’utilisation seront fournies. L’horodatage est en granularité jour et est inclusif (p. ex., 201805010000 inclut le jour 0501). Les requêtes contenant des valeurs autres que '0000' pour l’heure et les minutes seront ramenées par défaut à '0000'.  <br />  <br />Les requêtes faites sans fromDate ni toDate renverront des données d’utilisation par mois pour le mois en cours et incluront une référence historique pour les deux mois précédents.  <br />  <br />**À noter :** À partir du 1er juin 2019, vous pouvez accéder aux 13 derniers mois calendaires de données d’utilisation. Par exemple, si nous sommes le 10 octobre, vous pouvez accéder aux données d’utilisation jusqu’au 1er septembre de l’année précédente.  <br />**Exemple :** 201810010000 renverra des données à partir du 1er octobre 2018 inclus. |
| toDate (YYYYMMDDHHMM) | Facultatif. Dernier horodatage UTC jusqu’auquel les données d’utilisation seront fournies. L’horodatage est en granularité jour et est exclusif (p. ex., 201703020000 n’inclut pas les données pour le jour 0302). Lorsqu’un toDate est spécifié pour le jour en cours ou un jour futur, les données d’utilisation seront renvoyées jusqu’au dernier jour complet (UTC). Les requêtes contenant des valeurs autres que '0000' pour l’heure et les minutes seront ramenées par défaut à '0000'.  <br />  <br />Une requête sans toDate prendra par défaut le prochain intervalle (demain pour bucket=day et le mois suivant pour bucket=month). Une requête effectuée sans fromDate ni toDate prendra par défaut bucket=month et affichera les données pour le mois en cours plus les deux mois immédiatement précédents.  <br />  <br />**Exemple :** 201703050000 renverra des données jusqu’au 5 mars 2017, sans inclure les données du 5 mars. |

**Exemple de requête GET**

Cette requête renverra des données avec une granularité mensuelle du 1er mars 2017 au 5 mars 2017, sans inclure aucune donnée du 5 mars 2017.

curl -u "https://gnip-api.x.com/metrics/usage/accounts/:account\_name.json?bucket=month\&fromdate=201403010000\&toDate=201403150000"

<div id="data-format">
  #### **Format des données**
</div>

Les tableaux suivants décrivent les structures de données au niveau racine pour les données d’utilisation renvoyées par l’API Usage. Pour les champs comportant plusieurs niveaux de sous-champs, cliquez sur les liens fournis pour afficher les détails des sous-champs.

Si vous souhaitez voir un exemple d’un payload complet de l’API Usage, veuillez consulter [cette page](/fr/x-api/usage/introduction).

|     |     |
| :--- | :--- |
| **account** | Objet représentant le compte pour lequel les données d’utilisation ont été demandées. |
| **bucket** | Unité de temps pour laquelle les données d’utilisation sont fournies. Peut être « day » ou « month ». |
| **fromDate** | Premier horodatage UTC pour lequel vous souhaitez récupérer des données d’utilisation (inclus). |
| **toDate** | Dernier horodatage UTC pour lequel vous souhaitez récupérer des données d’utilisation (exclus). |
| **publishers** | Inclut trois objets principaux : used, projected et products. |