---
title: Test A/B
---

import { Button } from '/snippets/fr/button.mdx';

<div id="overview">
  ## Présentation
</div>

<div id="introduction">
  ### Introduction
</div>

Les tests A/B permettent aux annonceurs de segmenter les utilisateurs qu’ils touchent sur X afin de comprendre comment optimiser au mieux les performances de leurs campagnes et de tirer des enseignements pour orienter leurs stratégies marketing.

Ces segments — appelés scissions de groupes d’utilisateurs — sont aléatoires et mutuellement exclusifs. Grâce à la randomisation, les facteurs qui influencent les résultats sont répartis de manière égale. Autrement dit, il n’existe aucune différence intrinsèque entre les groupes ni dans leurs comportements attendus. Ainsi, lorsqu’une seule variation est appliquée à un groupe d’utilisateurs et pas aux autres, l’écart de performance de la campagne peut être attribué à cette variation.

Bien qu’il soit possible de tester plusieurs variations en parallèle, nous recommandons fortement de tester une seule variation à la fois. Cela permet d’isoler le facteur causal de l’écart de performance observé.

Les variations sont définies au niveau de la campagne. Par exemple, si l’annonceur souhaite tester l’efficacité d’un nouveau créatif, il doit créer deux campagnes identiques dont la seule différence est le créatif. À l’avenir, nous prévoyons de prendre en charge les variations au niveau de la ligne d’achat.

<div id="use-cases">
  ### Cas d’usage
</div>

Les tests A/B sont le plus souvent utilisés pour (1) des cas d’optimisation destinés aux clients orientés performance, qui souhaitent comprendre ce qui fonctionne le mieux sur X afin d’optimiser leur investissement, et (2) des cas d’apprentissage pour les annonceurs de marque, qui veulent mettre à profit ces enseignements pour orienter leur stratégie marketing.

L’API prendra en charge les tests A/B pour n’importe quelle variable de campagne, notamment :

- Créatif

- Ciblage

- Type d’enchère

- Unité d’enchère

<div id="ab-testing">
  ## Test A/B
</div>

Le test A/B permet aux annonceurs de segmenter les utilisateurs qu’ils atteignent sur X afin de comprendre comment optimiser au mieux les performances des campagnes et d’en tirer des enseignements pour orienter leurs stratégies marketing.

Ces segments — appelés répartitions de groupes d’utilisateurs — sont aléatoires et mutuellement exclusifs. Grâce à l’aléatorisation, les facteurs influençant les résultats sont répartis de façon équitable. En d’autres termes, il n’existe pas de différences intrinsèques entre les groupes ni dans leurs comportements attendus. Ainsi, lorsqu’une seule variation est appliquée à un groupe d’utilisateurs et pas aux autres, l’écart de performance de la campagne peut être attribué à cette variation.

Bien qu’il soit possible de tester de nombreuses variations simultanément, nous recommandons fortement de n’en tester qu’une à la fois. Cela isole le facteur causal de la différence observée dans la performance de la campagne.

Les variations sont définies soit au niveau de la campagne, soit au niveau du groupe d’annonces. Le groupe d’annonces est défini via le [line item](https://developer.x.com/en/docs/twitter-ads-api/campaign-management/api-reference/line-items) dans l’API publicitaire X. À titre d’exemple d’une variation au niveau du groupe d’annonces, si l’annonceur souhaite tester l’efficacité d’une nouvelle création, il doit créer une campagne avec deux groupes d’annonces identiques où la seule différence est la création.

<div id="use-cases">
  ### Cas d’usage
</div>

Les tests A/B sont le plus souvent utilisés pour (1) des cas d’usage d’optimisation destinés aux clients orientés performance qui souhaitent déterminer ce qui fonctionne le mieux sur X afin d’optimiser leur investissement, et (2) des cas d’usage d’apprentissage pour les annonceurs de marque qui veulent exploiter ces enseignements pour orienter leur stratégie marketing.

L’API prendra en charge les tests A/B pour toute variable de campagne, notamment :

- Créatif

- Ciblage

- Type d’enchère

- Unité d’enchère

<div id="attributes">
  ### Attributs
</div>

Les tests A/B sont représentés sous forme de structures imbriquées. Il existe des champs de niveau supérieur pour le test A/B lui-même et un tableau d’objets représentant des groupes d’utilisateurs, chacun doté d’un ensemble de champs descriptifs.

À un niveau général, chaque test A/B doit inclure les informations suivantes.

- La durée du test, indiquée par les champs start\_time et end\_time

- Le niveau auquel la répartition s’effectuera, indiqué par le champ entity\_type

- Au moins deux (et au plus 30) groupes d’utilisateurs, chacun représenté par un objet dans le tableau user\_groups

Chaque groupe d’utilisateurs doit obligatoirement inclure les informations suivantes.

- Le pourcentage d’utilisateurs à allouer au groupe d’utilisateurs concerné, indiqué par le champ size

- Les IDs de campagnes/IDs d’éléments de ligne constituant le vivier d’utilisateurs pour le groupe d’utilisateurs concerné, indiqués par le tableau entity\_ids

En option, des valeurs name et description peuvent être définies pour les tests A/B et pour les groupes d’utilisateurs. Des informations sur les règles de validation et autres contraintes figurent ci-dessous.

D’autres métadonnées, comme l’ID ou l’heure de création, sont également incluses, mais sont définies automatiquement par X.

Un exemple d’entité de test A/B au niveau campagne est présenté ci-dessous.

```json
{
  "created_at": "2020-12-01T00:00:00Z",
  "created_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  },
  "deleted": false,
  "description": "documentation example",
  "end_time": "2020-12-05T01:00:00Z",
  "entity_type": "CAMPAIGN",
  "id": "hr7l0",
  "name": "first AB test",
  "start_time": "2020-12-01T01:00:00Z",
  "status": "SCHEDULED",
  "user_groups": [
    {
      "id": "p1bcx",
      "name": "first group",
      "description": null,
      "size": "50.0",
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ]
    },
    {
      "id": "p1bcy",
      "name": "second group",
      "description": "second AB test group",
      "size": 50,
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ]
    }
  ],
  "updated_at": "2020-12-01T00:00:00Z",
  "updated_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  }
}
```

Un exemple d’entité de test A/B au niveau élément de ligne est présenté ci-dessous.

```json
{
   "created_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "name":"Test2e",
   "start_time":"2022-08-15T00:00:00Z",
   "updated_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "description":"My Second AB test",
   "entity_type":"LINE_ITEM",
   "end_time":"2022-08-30T00:00:00Z",
   "id":"1ul",
   "user_groups":[
      {
         "name":"first group",
         "size":"50.0",
         "description":"first group description",
         "entity_ids":[
            "ij9dh"
         ],
         "id":"4xe"
      },
      {
         "name":"second group",
         "size":"50.0",
         "description":"second group description",
         "entity_ids":[
            "ihng8"
         ],
         "id":"4xf"
      }
   ],
   "status":"SCHEDULED",
   "created_at":"2022-08-11T00:10:50Z",
   "updated_at":"2022-08-11T00:10:50Z",
   "deleted":false
}
```

<div id="usage">
  ### Utilisation
</div>

Les sections ci-dessous expliquent comment créer et mettre à jour des tests A/B. La lecture et la suppression fonctionnent comme pour tous les autres endpoints de l’API publicitaire X.

<div id="creating">
  #### Création
</div>

Créez un test A/B à l’aide du point de terminaison [POST accounts/:account\_id/ab\_tests](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests). Ce point de terminaison accepte uniquement des corps de requête POST au format JSON. L’en-tête Content-Type doit être défini sur application/json.

Une fois que l’annonceur a configuré au moins deux campagnes, il peut créer un test A/B. Comme indiqué ci-dessus, les tests A/B _doivent_ inclure : la durée du test, le niveau de répartition et au moins deux groupes d’utilisateurs. Chaque groupe d’utilisateurs doit indiquer le pourcentage d’utilisateurs qui doit lui être attribué ainsi que les ID de campagne qui composent son ensemble d’utilisateurs. Chacun de ces éléments est détaillé ci-dessous.

Durée du test :

- Les valeurs start\_time et end\_time doivent

  - Être dans le futur (par rapport au moment de la création du test A/B)

  - Chevaucher les dates de diffusion de la campagne/du line item

- Le test doit durer au moins un jour pour les campagnes non liées à des applications et au moins cinq jours pour les campagnes liées à des applications

Niveau de répartition :

- Le champ entity\_type peut être défini sur CAMPAIGN ou LINE\_ITEM

Groupes d’utilisateurs :

- Chaque groupe d’utilisateurs est représenté par un objet dans le tableau user\_groups

  - Au minimum deux groupes d’utilisateurs sont requis

  - Un maximum de 30 groupes d’utilisateurs est autorisé

- La taille de chaque groupe d’utilisateurs est définie à l’aide d’une chaîne représentant une valeur numérique entre 1.00 et 99.00

  - **Remarque** : Les valeurs de taille _entre les objets_ **doivent** totaliser 100.00

- Les ID de campagne doivent être spécifiés dans le tableau entity\_ids de chaque groupe d’utilisateurs

Optionnellement, définissez le nom et la description du test A/B ou d’un ou plusieurs groupes d’utilisateurs.

La requête suivante crée un test A/B au niveau de la campagne, d’une durée de quatre jours, avec deux groupes d’utilisateurs contenant chacun 50 % des utilisateurs. Le premier groupe d’utilisateurs est basé sur les campagnes f2qcw et f2tht ; le second groupe d’utilisateurs est basé sur les campagnes f2rqi et f2tws. La requête ajoute également des noms et des descriptions à certaines parties de l’entité.

twurl -X POST -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab\_tests" -d '\{"end\_time": "2020-12-05T01:00:00Z", "entity\_type" : "CAMPAIGN", "start\_time": "2020-12-01T01:00:00Z", "user\_groups": \[\{"entity\_ids": \["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},\{"entity\_ids": \["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'

```json
twurl -X POST -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests" -d '{"end_time": "2020-12-05T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2020-12-01T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'

{
  "request": {
    "params": {
      "account_id": "18ce54d4x5t",
      "end_time": "2020-12-05T01:00:00Z",
      "entity_type": "CAMPAIGN",
      "start_time": "2020-12-01T01:00:00Z",
      "user_groups": [
        {
          "entity_ids": [
            "f2qcw",
            "f2tht"
          ],
          "size": "50.0",
          "name": "first group"
        },
        {
          "entity_ids": [
            "f2rqi",
            "f2tws"
          ],
          "size": "50.0",
          "name": "second group",
          "description": "second AB test group"
        }
      ],
      "name": "first AB test",
      "description": "documentation example"
    }
  },
  "data": {
    "created_at": "2020-12-01T00:00:00Z",
    "created_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    },
    "deleted": false,
    "description": "documentation example",
    "end_time": "2020-12-05T01:00:00Z",
    "entity_type": "CAMPAIGN",
    "id": "hr7l0",
    "name": "first AB test",
    "start_time": "2020-12-01T01:00:00Z",
    "status": "SCHEDULED",
    "user_groups": [
      {
        "id": "p1bcx",
        "name": "first group",
        "description": null,
        "size": "50.0",
        "entity_ids": [
          "f2qcw",
          "f2tht"
        ]
      },
      {
        "id": "p1bcy",
        "name": "second group",
        "description": "second AB test group",
        "size": "50.0",
        "entity_ids": [
          "f2rqi",
          "f2tws"
        ]
      }
    ],
    "updated_at": "2020-12-01T00:00:00Z",
    "updated_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    }
  }
}
```

Tests A/B au niveau de l’élément de ligne

La principale différence entre les tests A/B au niveau de la campagne et au niveau de l’élément de ligne est le champ entity\_type. Pour les tests A/B au niveau de l’élément de ligne, il faut définir ‘entity\_type’ = ‘LINE\_ITEM’. Cela s’applique à toutes les actions sur un test A/B déjà créé ci-dessous.

Exigences :

1. Tous les éléments de ligne de la campagne du test A/B doivent être inclus dans le test fractionné.
2. Seule une répartition égale est autorisée au niveau de l’élément de ligne.
3. Le nombre d’éléments de ligne par groupe d’utilisateurs autorisé dans un test fractionné doit être inférieur ou égal à 5.
4. Un seul élément de ligne par groupe d’utilisateurs.

<div id="updating">
  ### Mise à jour
</div>

Mettez à jour un test A/B à l’aide du point de terminaison [PUT accounts/:account\_id/ab\_tests/:ab\_test\_id](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests). Ce point de terminaison exige l’envoi d’un objet JSON dans la requête. L’en-tête Content-Type doit être défini sur application/json.

Comme pour les autres points de terminaison de mise à jour, le point de terminaison [PUT accounts/:account\_id/ab\_tests/:ab\_test\_id](/fr/x-ads-api/measurement/ab-testing#get-accounts-account-id-ab-tests) nécessite que l’ID du test A/B figure dans l’URL. En général, les tests A/B ne peuvent être mis à jour que lorsque leur statut est SCHEDULED. Il existe une exception : il est possible de mettre à jour le champ end\_time d’un test A/B lorsqu’il est LIVE.

Ce point de terminaison prend en charge le JSON partiel avec des ID d’objet. Les principes suivants s’appliquent :

- Pour ajouter ou supprimer des objets ou des éléments, transmettez l’intégralité du tableau (et ses sous-structures) ; il s’agit d’une opération de **remplacement**

- Sinon, modifiez (changer, ajouter, supprimer) les _champs_ existants en référencant les noms de clés ou les ID

  - Pour supprimer un champ, définissez sa valeur sur null

  - Les champs non transmis ne sont pas modifiés

Par exemple, l’ajout d’un troisième groupe d’utilisateurs au test A/B précédemment créé nécessiterait d’envoyer le tableau user\_groups avec les deux objets de groupe d’utilisateurs existants ainsi que le nouveau que nous souhaitons ajouter. Considérez cela comme une _recréation_ du tableau user\_groups ; transmettez les données comme si vous le créiez de cette manière dès le départ (ne transmettez pas d’ID d’objets de groupe d’utilisateurs). Le tableau user\_groups dans la requête de mise à jour pourrait être représenté comme suit.

```json
[
  {
    "entity_ids": [
      "f2qcw",
      "f2tht"
    ],
    "size": "30.0",
    "name": "first group"
  },
  {
    "entity_ids": [
      "f2rqi",
      "f2tws"
    ],
    "size": "30.0",
    "name": "second group",
    "description": "second AB test group"
  },
  {
    "entity_ids": [
      "i1vwr",
      "i1xre"
    ],
    "size": "40.0"
  }
]
```

Notez que les valeurs de size à travers les objets totalisent toujours 100.00. Si nous ne les avions pas mises à jour pour les deux premiers objets — précédemment définis à 50.00 chacun — la requête aurait échoué.

Si, au lieu de cela, nous voulions simplement ajouter une description au premier groupe d’utilisateurs, le tableau user\_groups dans la requête de mise à jour serait représenté comme suit.

```json
[
  {
    "id": "p1bcx",
    "description": "updated using a PUT request"
  }
]
```

Nous faisons référence à l’objet de groupe d’utilisateurs par ID et n’incluons que le champ que nous souhaitons modifier.

<div id="request-examples">
  #### Exemples de requêtes
</div>

Cette section fournit des exemples supplémentaires de requêtes de mise à jour. Considérez qu’elles sont exécutées séquentiellement. Les blocs JSON sont formatés pour la lisibilité. Les réponses sont omises.

Pour effectuer les modifications suivantes, la requête serait représentée comme suit. (Il s’agit du même exemple que celui utilisé précédemment.)

1. Ajoute un troisième groupe d’utilisateurs sans nom ni description

2. Modifie le pourcentage d’utilisateurs dans chaque groupe d’utilisateurs

twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab\_tests/hr7l0" -d '

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "30.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ],
      "size": "30.00",
      "name": "second group",
      "description": "second AB test group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "40.00"
    }
  ]
}'
```

Pour effectuer les modifications suivantes, la requête serait représentée comme suit.

1. Supprime la description du test A/B

2. Ajoute une description au premier groupe d’utilisateurs

3. Ajoute un ID d’entité (f2syz) au deuxième groupe d’utilisateurs

twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab\_tests/hr7l0" -d '

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "description": null,
  "user_groups": [
    {
      "id": "p1bcx",
      "description": "first AB test group"
    },
    {
      "id": "p1bcy",
      "entity_ids": [
        "f2rqi",
        "f2tws",
        "f2syz"
      ]
    }
  ]
}'
```

La troisième modification implique de transmettre les deux ID d’entité existants ainsi que le nouveau. Notez qu’aucune modification n’a été apportée au troisième groupe d’utilisateurs.

Pour effectuer les modifications suivantes, la requête serait représentée comme suit.

1. Supprime le deuxième groupe d’utilisateurs

2. Modifie le pourcentage d’utilisateurs dans chaque groupe d’utilisateurs

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "55.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "45.00"
    }
  ]
}'
```

<div id="api-reference">
  ## Référence de l’API
</div>

<div id="ab-tests">
  ### Tests A/B
</div>

[]()

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Exécuter dans Postman
</Button>

#### GET accounts/:account\_id/ab\_tests

Récupère les détails de certains ou de tous les tests A/B.

<div id="resource-url">
  ##### URL de ressource
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="parameters">
  ##### Exemple de requête
</div>

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests`

<div id="example-request">
  ##### Exemple de réponse
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t"
        }
      },
      "data": [
        {
          "created_at": "2022-05-25T00:00:00Z",
          "created_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          },
          "deleted": false,
          "description": "exemple de documentation",
          "end_time": "2022-05-30T01:00:00Z",
          "entities": [
            {
              "id": "p1bcx",
              "account_id": "18ce54d4x5t"
            },
            {
              "id": "p1bcy",
              "account_id": "18ce54d4x5t"
            }
          ],
          "entity_type": "CAMPAIGN",
          "id": "hr7l0",
          "name": "premier test A/B",
          "start_time": "2022-05-25T01:00:00Z",
          "status": "SCHEDULED",
          "user_groups": [
            {
              "id": "p1bcx",
              "name": "premier groupe",
              "description": null,
              "size": "50.0",
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ]
            },
            {
              "id": "p1bcy",
              "name": "deuxième groupe",
              "description": "deuxième groupe du test A/B",
              "size": "50.0",
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ]
            }
          ],
          "updated_at": "2022-05-25T00:00:00Z",
          "updated_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          }
        }
      ],
      "next_cursor": null
    }
```

#### POST accounts/:account\_id/ab\_tests

Créer un test A/B.

Tous les paramètres doivent être envoyés dans le corps de la requête et l’en-tête `Content-Type` doit être défini sur `application/json`.

<div id="resource-url">
  ##### URL de ressource
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="resource-url">
  ##### Paramètres
</div>

| Nom | Description |
| :--- | :--- |
| account\_id  <br />_requis_ | L’identifiant du compte utilisé. Apparaît dans le chemin de la ressource et constitue généralement un paramètre requis pour toutes les requêtes de l’API publicitaire X, à l’exception de [GET accounts](/fr/x-ads-api/campaign-management#accounts). Le compte spécifié doit être associé à l’utilisateur authentifié.<br /><br />Type : string<br /><br />Exemple : `18ce54d4x5t` |
| end\_time  <br />_requis_ | L’heure de fin du test A/B, au format ISO 8601.<br /><br />Type : string<br /><br />Exemple : `2020-10-02T00:00:00Z` |
| entity\_type  <br />_requis_ | Le type d’entité à utiliser pour répartir les groupes d’utilisateurs.<br /><br />Type : enum<br /><br />Valeurs possibles : `CAMPAIGN`, `LINE_ITEM` |
| start\_time  <br />_requis_ | L’heure de début du test A/B, au format ISO 8601.<br /><br />Type : string<br /><br />Exemple : `2022-05-30T00:00:00Z` |
| user\_groups  <br />_requis_ | Décrit les groupes d’utilisateurs. Plus d’informations dans le tableau ci-dessous. Entre 2 et 30 groupes d’utilisateurs peuvent être spécifiés.<br /><br />Type : array of objects |
| description  <br />_optionnel_ | La description du test A/B. Longueur maximale : 1 024 caractères.<br /><br />Type : string<br /><br />Exemple : `documentation example` |
| name  <br />_optionnel_ | Le nom du test A/B. Longueur maximale : 255 caractères.<br /><br />Type : string<br /><br />Exemple : `first AB test` |

#### Groupes d’utilisateurs

| Nom | Description |
| :--- | :--- |
| entity\_ids  <br />_required_ | Un tableau d’ID d’entité.<br /><br />**Remarque** : Les entités ne peuvent être associées qu’à un seul test A/B.<br /><br />Type : array<br /><br />Exemple : `["dxi0l", "e66bl"]` |
| size  <br />_required_ | Le pourcentage d’utilisateurs à allouer à ce groupe d’utilisateurs. Il s’agit d’une valeur numérique représentée sous forme de chaîne avec au maximum deux chiffres après la virgule. Par exemple, indiquez 40 % sous la forme : 40, 40.0 ou 40.00.<br /><br />**Remarque** : Les valeurs de taille entre les _objects_ **doivent** totaliser 100.00.<br /><br />Type : array<br /><br />Min, Max : `1.00`, `99.00` |
| description  <br />_optional_ | La description du groupe d’utilisateurs. Longueur maximale : 1 024 caractères.<br /><br />Type : string<br /><br />Exemple : `second AB test group` |
| name  <br />_optional_ | Le nom du groupe d’utilisateurs. Longueur maximale : 255 caractères.<br /><br />Type : string<br /><br />Exemple : `first group` |

### Exemple de requête

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests -d '{"end_time": "2022-05-30T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2022-05-25T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'`

<div id="example-request">
  ### Exemple de réponse
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "end_time": "2022-05-30T01:00:00Z",
          "entity_type": "CAMPAIGN",
          "start_time": "2022-05-25T01:00:00Z",
          "user_groups": [
            {
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ],
              "size": "50.0",
              "name": "first group"
            },
            {
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ],
              "size": "50.0",
              "name": "second group",
              "description": "second AB test group"
            }
          ],
          "name": "first AB test",
          "description": "documentation example"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": "documentation example",
        "end_time": "2022-05-30T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": null,
            "size": "50.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "50.0",
            "entity_ids": [
              "f2rqi",
              "f2tws"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:00:00Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

#### PUT accounts/:account\_id/ab\_tests/:ab\_test\_id

Met à jour le test A/B spécifié.

Tous les paramètres sont envoyés dans le corps de la requête et un `Content-Type` de `application/json` est requis.

Cet endpoint accepte du JSON partiel avec des ID d’objet. Les principes suivants s’appliquent :

- Pour ajouter ou supprimer des objets ou des éléments, transmettez l’intégralité du tableau (et ses sous-structures) ; il s’agit d’une opération de **remplacement**
  - Voyez cela comme la recréation du tableau
- Sinon, modifiez (ajoutez, changez, supprimez) les champs existants en faisant référence à leurs noms de clé ou à leurs ID
  - Pour supprimer un champ, définissez sa valeur sur `null`
  - Les champs non transmis ne sont pas modifiés

En général, les tests A/B ne peuvent être mis à jour que lorsque le `status` est `SCHEDULED`. Il existe une exception : il est possible de mettre à jour le `end_time` du test A/B lorsqu’il est `LIVE`.

##### URL de la ressource

`https://ads-api.x.com/12/accounts/18ce54d4x5t/:ab_test_id`
\---MDX\_CONTENTEND---

<div id="resource-url">
  ##### Paramètres
</div>

| Nom | Description |
| :--- | :--- |
| account\_id  <br />_requis_ | L’identifiant du compte utilisé. Apparaît dans le chemin de la ressource et constitue généralement un paramètre requis pour toutes les requêtes de l’API publicitaire X, à l’exception de [GET accounts](/fr/x-ads-api/campaign-management#accounts). Le compte spécifié doit être associé à l’utilisateur authentifié.<br /><br />Type : string<br /><br />Exemple : `18ce54d4x5t` |
| ab\_test\_id  <br />_requis_ | Référence du test A/B utilisé dans la requête.<br /><br />Type : string<br /><br />Exemple : `hr7l0` |
| description  <br />_optionnel_ | Description du test A/B. Longueur maximale : 1 024 caractères.<br /><br />**Remarque** : Ne peut être mis à jour que lorsque le `status` du test A/B est `SCHEDULED`.<br /><br />Type : string<br /><br />Exemple : `documentation example` |
| end\_time  <br />_optionnel_ | Heure, au format ISO 8601, à laquelle le test A/B se termine.<br /><br />**Remarque** : Ne peut être mis à jour que lorsque le `status` du test A/B est `SCHEDULED` ou `LIVE`.<br /><br />Type : string<br /><br />Exemple : `2020-10-02T00:00:00Z` |
| name  <br />_optionnel_ | Nom du test A/B. Longueur maximale : 255 caractères.<br /><br />**Remarque** : Ne peut être mis à jour que lorsque le `status` du test A/B est `SCHEDULED`.<br /><br />Type : string<br /><br />Exemple : `first AB test` |
| start\_time  <br />_optionnel_ | Heure, au format ISO 8601, à laquelle le test A/B commence.<br /><br />**Remarque** : Ne peut être mis à jour que lorsque le `status` du test A/B est `SCHEDULED`.<br /><br />Type : string<br /><br />Exemple : `2022-05-30T00:00:00Z` |
| user\_groups  <br />_requis_ | Décrit les groupes d’utilisateurs. Plus d’informations dans le tableau ci-dessous.<br /><br />**Remarque** : Ne peut être mis à jour que lorsque le `status` du test A/B est `SCHEDULED`.<br /><br />Type : array of objects |

#### Groupes d’utilisateurs

| Nom | Description |
| :--- | :--- |
| id  <br />_parfois requis_ | Référence à l’objet groupe d’utilisateurs utilisé dans la requête.<br /><br />**Remarque** : Requis lors de la modification (changement, ajout ou suppression) des _champs_ de l’objet groupe d’utilisateurs.<br /><br />**Remarque** : Ne spécifiez pas d’ID lors de l’ajout ou de la suppression d’objets groupe d’utilisateurs entiers.<br /><br />Type : string<br /><br />Exemple : `p1bcx` |
| description  <br />_optionnel_ | Description du groupe d’utilisateurs. Longueur maximale : 1 024 caractères.<br /><br />**Remarque** : Pour annuler (supprimer), indiquez le champ avec la valeur `null`.<br /><br />Type : string<br /><br />Exemple : `second AB test group` |
| entity\_ids  <br />_optionnel_ | Tableau d’IDs d’entité.<br /><br />**Remarque** : Il s’agit d’une opération de remplacement. Elle écrase la valeur précédemment définie.<br /><br />**Remarque** : Les entités ne peuvent être associées qu’à un seul test A/B.<br /><br />Type : array<br /><br />Exemple : `["dxi0l", "e66bl"]` |
| name  <br />_optionnel_ | Nom du groupe d’utilisateurs. Longueur maximale : 255 caractères.<br /><br />**Remarque** : Pour annuler (supprimer), indiquez le champ avec la valeur `null`.<br /><br />Type : string<br /><br />Exemple : `first group` |
| size  <br />_optionnel_ | Pourcentage d’utilisateurs à allouer à ce groupe d’utilisateurs. Valeur numérique représentée sous forme de chaîne, avec au plus deux décimales. Par exemple, représenter 40 % par : 40, 40.0 ou 40.00.<br /><br />**Remarque** : Les valeurs de taille entre les _objets_ **doivent** totaliser 100.00.<br /><br />Type : string<br /><br />Min, Max : `1.00`, `99.00` |

<div id="parameters">
  ##### Exemple de requête
</div>

Cette requête applique les modifications suivantes.

1. Supprime la description du test A/B
2. Modifie l’heure de fin
3. Ajoute une description au premier groupe d’utilisateurs
4. Modifie le pourcentage d’utilisateurs dans chaque groupe d’utilisateurs
5. Ajoute un ID d’entité (`f2syz`) au deuxième groupe d’utilisateurs

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0 -d '{"description": null, "end_time": "2022-06-01T01:00:00Z", "user_groups": [{"id": "p1bcx", "description": "first AB test group", "size": "60.00"},{"id": "p1bcy", "size": "40.00", "entity_ids": ["f2rqi", "f2tws", "f2syz"]}]}'`

<div id="example-request">
  ##### Exemple de réponse
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0",
          "description": null,
          "end_time": "2022-06-01T01:00:00Z",
          "user_groups": [
            {
              "id": "p1bcx",
              "description": "premier groupe de test A/B",
              "size": "60.0"
            },
            {
              "id": "p1bcy",
              "size": "40.0",
              "entity_ids": [
                "f2rqi",
                "f2tws",
                "f2syz"
              ]
            }
          ]
        }
      },
      "data": {
        "created_at": "2020-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "premier test A/B",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "premier groupe",
            "description": "premier groupe de test A/B",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "deuxième groupe",
            "description": "deuxième groupe de test A/B",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:17:23Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

#### DELETE accounts/:account\_id/ab\_tests/:ab\_test\_id

Supprime le test A/B spécifié.

**Remarque :** La suppression d’un test A/B est irréversible et toute tentative ultérieure de suppression de la ressource renverra un HTTP 404.

<div id="resource-url">
  ##### URL de ressource
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests/:ab_test_id`

<div id="resource-url">
  ##### Paramètres
</div>

| Nom | Description |
| :--- | :--- |
| ab\_test\_id  <br />_obligatoire_ | Une référence au test A/B utilisé dans la requête.<br /><br />Type : chaîne de caractères<br /><br />Exemple : `hr7l0` |

<div id="parameters">
  ##### Exemple de requête
</div>

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0`

<div id="example-request">
  ### Exemple de réponse
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": true,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "premier test AB",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "premier groupe",
            "description": "premier groupe du test AB",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "deuxième groupe",
            "description": "deuxième groupe du test AB",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-06-02T00:18:31Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```