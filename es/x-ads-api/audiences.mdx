---
title: Audiencias
---

import { Button } from '/snippets/es/button.mdx';

<div id="custom-audiences">
  ## Audiencias personalizadas
</div>

<div id="overview">
  ### Descripción general
</div>

Hay múltiples maneras para que los socios creen [Audiencias personalizadas](https://business.x.com/en/targeting/tailored-audiences.html).

- [API de Audiencias (CRM)](#crm)
- [Web](#web)
- [Móvil](#mobile)
- [Flexible](#flexible)

Tenga en cuenta que no puede excluir audiencias personalizadas de tipo semejanza del targeting. Además, no puede dirigir tanto a una audiencia personalizada como a una audiencia personalizada de tipo semejanza en el mismo elemento de línea de anuncio (grupo de anuncios).

**Administración de audiencias**

Las audiencias pueden administrarse mediante socios de audiencia y socios de la API de Anuncios. Ofrecemos una serie de endpoints en la API para acceder y mantener audiencias personalizadas.

Para la información de audiencias personalizadas, ofrecemos 2 endpoints:

- [GET accounts/:account\_id/custom\_audiences](/es/x-ads-api/audiences)
- [GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id](/es/x-ads-api/audiences)

Para más detalles sobre cómo cargar y administrar audiencias, consulte la [guía de la API de Audiencias](/es/x-ads-api/audiences).

**Tiempos de procesamiento**

En términos generales, los cambios de audiencia se procesan en lotes que se ejecutan cada 6–8 horas. Mientras se procesa un cambio de audiencia, la audiencia existente que se actualizará no se ve afectada. No recomendamos realizar más de una actualización de altas y una actualización de bajas por audiencia dentro de este período.

**Segmentación**

Una audiencia solo se puede segmentar si coincide con al menos 100 usuarios activos en los últimos 90 días en clientes propiedad y operados por X. [GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id](/es/x-ads-api/audiences) indicará si una audiencia no puede segmentarse porque coincide con muy pocos usuarios.

**API de Audiencias (CRM)**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_0.png" alt="image2" />
</Frame>

Los socios de audiencia o de API proporcionan una lista de identificadores con hash y X realiza la concordancia y produce segmentos que se ponen a disposición para la compra de medios en X. Los socios pueden crear estas audiencias con la [API de Audiencias](/es/x-ads-api/audiences).

**¿Cómo funciona?**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_1.png" alt="image3" />
</Frame>

**Web**

Ofrecemos un proceso estándar de coincidencia de cookies cuando trabajamos con socios de audiencia MPP para identificar segmentos a orientar en la compra de medios en X. Además, los anunciantes pueden configurar una [Etiqueta de eventos web de X](/es/x-ads-api/measurement/web-conversions#web-event-tags) para recopilar datos de usuarios del sitio web y crear la Audiencia personalizada correspondiente.

**Pasos de configuración**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/screen_shot_2013-11-26-cookie-usage.png" alt="image0" />
</Frame>

![]()

**¿Cómo funciona?**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/tailored_audience_web.png" alt="image1" />
</Frame>

**Móvil**

Consulte [la publicación del blog sobre Audiencias personalizadas desde apps móviles](https://blog.x.com/2014/introducing-tailored-audiences-from-mobile-apps) para obtener detalles.

**Flexible**

Las [audiencias flexibles](/es/x-ads-api/audiences) brindan a los anunciantes la capacidad de crear y guardar combinaciones de audiencias basadas en audiencias personalizadas existentes o subconjuntos de audiencias personalizadas existentes. Se pueden segmentar subconjuntos de los miembros de una audiencia personalizada en función de la recencia y la frecuencia de interacción.

**Casos de uso restringidos para Audiencias personalizadas**

[Leer más sobre las restricciones](https://developer.x.com/en/developer-terms/more-on-restricted-use-cases "Leer más sobre las restricciones")

<div id="audiences-faq">
  ### Preguntas frecuentes sobre audiencias[](#real-time-tailored-audiences "Enlace permanente a este encabezado")
</div>

**P: Enviamos una gran cantidad de datos, ¿por qué el tamaño de la audiencia aparece como TOO\_SMALL?**

R: Actualmente, los datos se están agregando a la audiencia en tiempo real, pero el proceso que calcula el tamaño de la audiencia solo se ejecuta después de un periodo de tiempo. El tamaño correcto debería mostrarse en la interfaz de usuario tras unas horas.

**P: Terminamos de enviar los datos de la audiencia y esperamos 24 horas o más, pero aún no podemos orientar la audiencia. ¿Cuál debería ser el siguiente paso?**

R: Confirme lo siguiente:

- El ID de usuario que se está enviando es correcto y no está malformado.
- Los nombres de audiencia que se están enviando son correctos y coinciden con actualizaciones de membresía anteriores.
- Verifique la respuesta de los comandos POST.
- Confirme que el píxel de sincronización de ID está implementado correctamente y que, según lo descrito por el proceso de sincronización de ID, suficientes usuarios han visitado el sitio en cuestión para poder mapearlos. Los usuarios no mapeados en las actualizaciones de membresía no se convertirán en usuarios segmentables.

Si todo lo demás se confirma como correcto y en funcionamiento, comuníquese con sus contactos de producto en X con la información más detallada posible (consulte la [Guía para solicitudes de socios](/es/x-ads-api/introduction) como ejemplo de la información preferida).

**P: ¿Cuántas veces podemos llamar al endpoint y con qué algoritmo?**

R: Recomendamos encarecidamente llamar a nuestro sistema con deltas incrementales y nunca volver a enviar la membresía completa de la audiencia. El sistema se ha probado para tener un rendimiento suficiente a fin de procesar actualizaciones incrementales de datos para algunos de los sitios web más grandes del mundo. La carga inicial de audiencias debe regularse cuidadosamente y se espera que la primera carga tome una cantidad significativa de tiempo en completarse.

**P: ¿Cuál es el tamaño mínimo de una audiencia para usarse en la segmentación?**

- El tamaño mínimo de una audiencia es de 100 usuarios (post-match). Si se hace coincidir una audiencia con menos de 500 usuarios, no estará disponible para la segmentación en la interfaz de X Ads.

**P: ¿Cuánto tiempo tomará procesar los archivos de audiencia? ¿Y cuánto tiempo tomará para que los archivos de audiencia estén listos en la Interfaz de Usuario de X?**

- Por lo general, el procesamiento de los archivos de audiencia toma entre 4 y 6 horas, pero dependerá del tamaño del archivo. Una vez procesado el archivo, las audiencias están disponibles en la interfaz de X Ads.

**P: ¿Cómo se calcula la tasa de coincidencia?**

- Tasa de coincidencia = usuarios activos de X en 90 días / número de usuarios proporcionados

**P: ¿Cómo probamos si un archivo de audiencia funciona correctamente?**

- Puede proporcionar un archivo de audiencia de prueba y usar “keltonlynn” como el handle del anunciante. Luego podemos verificar que el archivo pueda ingerirse y cargarse correctamente en la interfaz de X.

**P: ¿Qué es un identificador de usuario de socio (`p_user_id`)?**

- Es el identificador que usa su empresa para identificar de manera única a cada uno de sus clientes.

**P: ¿Qué es un ID estándar?**

- Puede ser una dirección de correo electrónico, un ID de dispositivo, un @handle de X o un ID.

**P: ¿Cómo obtengo la clave HMAC?**

- Se proporcionará por correo electrónico cifrado. Envíe su clave pública PGP a [mpp-inquiry%x.com](mailto:mpp-inquiry%x.com) y le enviaremos un correo electrónico de prueba para verificar que todo funcione. Una vez verificado, le enviaremos la clave HMAC.

**P: ¿Cómo verifico que el proceso de hashing funcionó usando la clave HMAC proporcionada?**

- X proporcionará un archivo de prueba (que contiene direcciones de correo electrónico de ejemplo, IDs de dispositivo, etc.) y un archivo de hash resultante contra el cual puede verificar sus resultados.

**P: ¿Existe una limitación de tamaño para el archivo de coincidencia de datos completo?**

- No, no hay limitación de tamaño para el archivo de coincidencia de datos completo.

**P: ¿Cuánto tiempo tomará procesar el archivo de coincidencia de datos completo?**

- Una vez que X reciba el archivo, tomará aproximadamente 1 día procesarlo.

<div id="crm">
  ### CRM
</div>

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_0.png" alt="image0" />
</Frame>

Este documento describe los detalles de la integración para socios de CRM de Audiencias personalizadas, incluidos los formatos de archivo y el proceso de intercambio de datos.

**Resumen**

La empresa proporcionará a X, en nombre de un cliente, una lista de identificadores de usuario comunes con hash (p. ej., direcciones de correo electrónico) o ID de usuario del socio para realizar una coincidencia ciega y generar una lista de ID de usuario de X para la segmentación. Los segmentos de segmentación estarán disponibles para el @handle específico del anunciante indicado por el nombre de archivo en la configuración de campaña de ads.x.com.

Todos los archivos de la empresa se proporcionarán a X mediante un paquete seguro en IronBox (www.golockbox.com) a través de una cuenta específica que X otorgará a la empresa. X proporcionará acceso a IronBox. La documentación de las API de IronBox está disponible en [https://secure.goironcloud.com/Docs/Help/](https://secure.goironcloud.com/Docs/Help/).

<div id="partner-id-matching-requirements">
  #### Requisitos para la coincidencia de IDs de socios
</div>

Si la empresa utiliza su propio sistema estándar de IDs para rastrear usuarios (es decir, no identificadores de usuario comunes como direcciones de correo electrónico, IDs de dispositivo, ID de usuario de X, etc.), entonces este es el proceso recomendado.

**1. Coincidencia completa de datos**

Inicialmente, la empresa proporcionará una lista integral de todos los registros de usuarios que incluya un identificador de usuario común único con X en un único archivo para realizar una coincidencia completa de datos y generar un mapeo, almacenado por X, de IDs de socio (`p_user_id`) a IDs de X (`tw_id`). Esto se realizará de manera regular cada 2-3 meses para garantizar el mantenimiento adecuado. Una vez completada la coincidencia, X compartirá por correo electrónico con la empresa una tasa de coincidencia de referencia obtenida de este archivo.

El formato de este archivo debe ser:

Convención de nombres: FullDataMatch.\[CompanyName].txt

Algoritmo de hashing: HMAC\_SHA-256

Formato:

Columna 1: valor con hash HMAC de los identificadores comunes

Columna 2: ID de usuario del socio (único por usuario; no único en el archivo)

Delimitador de columnas (CSV): se usarán comas para delimitar el identificador de usuario común con hash del ID del socio

Valores separados por líneas

- Ej.: si el registro de usuario A tiene ID de usuario del socio 1 e identificadores comunes 1, 2 y 3:

|     |     |
| :--- | :--- |
| identificador de usuario común 1 | p\_user\_1 |
| identificador de usuario común 2 | p\_user\_1 |
| identificador de usuario común 3 | p\_user\_1 |

\*Vea la sección de Instrucciones de hashing para los identificadores de usuario comunes a continuación

**2. Listas de segmentos personalizados**

La empresa proporcionará listas de usuarios en forma de `p_user_id` para crear audiencias personalizadas para clientes con fines de segmentación en X.

- Valores separados por líneas
- `p_user_id`
- - (Igual que lo proporcionado en la sección 1. Coincidencia completa de datos anterior. Si el valor proporcionado en la coincidencia completa de datos está con hash, la empresa proporcionará el mismo valor con hash en el archivo de audiencia. Si el valor proporcionado no está con hash, la empresa proporcionará el valor sin hash.)

<div id="standard-matching-requirements">
  #### Requisitos estándar de coincidencia
</div>

Si la empresa no utiliza un ID estándar para el mapeo de todos los identificadores de usuario de los clientes, este es el proceso recomendado.

**Listas de segmentos personalizados**

La empresa proporcionará a X, en nombre de los clientes, listas de identificadores de usuario comunes con hash para crear audiencias personalizadas.

El formato de este archivo debe ser:

- Valores separados por líneas
- Identificador de usuario común con hash (p. ej., dirección de correo electrónico)
- Seguir las convenciones de nomenclatura de archivos descritas a continuación
- Seguir las instrucciones de hashing para direcciones de correo electrónico a continuación (en Instrucciones de hashing)

<div id="custom-segment-list-file-naming-operations">
  #### Convenciones de nomenclatura y operaciones de archivos de Segmento personalizado
</div>

La operación de un archivo estará determinada por su nombre, con las siguientes operaciones disponibles y la convención general de nomenclatura: audiencename\_partnername.handle.operation.filetype

- audiencename: El nombre de la Audiencia personalizada. Este campo es el nombre que se mostrará al seleccionar la audiencia en la interfaz de configuración de campañas de ads.x.com; por ejemplo, brand\_loyalty\_card\_holders.
- partnername: Nombre de la empresa que entrega los datos en nombre del anunciante; por ejemplo, company\_name.
- handle: Cuenta de X (@handle) que tendrá acceso a las Audiencias personalizadas; por ejemplo, @pepsi, @dietpepsi
- operation: new, add, remove, removeall, replace (detalles a continuación)
- timestamp: Hora Unix epoch estándar en segundos, utilizada para garantizar que cada archivo de audiencia cargado sea único
- filetype: el archivo debe estar en formato .txt

<div id="creating-and-updating-audiences">
  #### Creación y actualización de audiencias
</div>

Cree una nueva audiencia con un único archivo, p. ej., loyalty\_card\_holders\_partnername.pepsi.new.txt

Add - Agregar las coincidencias de una lista a una audiencia existente, p. ej., loyalty\_card\_holders\_partnername.pepsi.add..txt

Remove - Quitar las coincidencias de una lista de una audiencia existente. Ej.: loyalty\_card\_holders\_partnername.pepsi.remove..txt

Remove All - Quitar de todas las audiencias de ese cliente las coincidencias generadas a partir de una lista acumulativa que se actualiza regularmente (es decir, la lista de exclusión del cliente). Ej.: partnername.pepsi.removeall.txt

- Esto se puede usar para una lista completa de usuarios que han optado por no recibir comunicaciones del anunciante.
- X solo respetará la lista más reciente proporcionada en este archivo y la aplicará a todas las audiencias existentes y futuras para los usuarios coincidentes.

Usuarios de X en el momento en que este archivo fue proporcionado y procesado.

Replace - Eliminar una audiencia existente y reemplazarla por una nueva lista de audiencia. Ej.: loyalty\_card\_holders\_partnername.pepsi.replace..txt

Opt-Out general de la compañía - La compañía proporcionará un archivo acumulativo de opt-out para eliminar a los usuarios que hayan optado por no participar, según la política de opt-out de la compañía.

X solo respetará la lista más reciente proporcionada en este archivo de opt-out de la compañía y la aplicará a todas las audiencias existentes y futuras para los usuarios de X coincidentes en el momento en que este archivo fue proporcionado y procesado. El formato del archivo de opt-out de la compañía será el siguiente: Ej.: partnername.removeall.txt

Delete - Eliminar una audiencia existente de la lista actual de audiencias, p. ej., loyalty\_card\_holders\_partnername.pepsi.delete.txt

<div id="hashing-directions">
  #### Indicaciones de hash
</div>

X compartirá de forma segura una clave de producción codificada en base64 mediante PGP para aplicar hashing a identificadores comunes de usuarios (p. ej., direcciones de correo electrónico). La empresa decodificará la clave en base64 para obtener una clave de 32 bytes que se utilizará para realizar el hashing.

Ejemplo de clave codificada en base64:

BrQvOg+dACBUmKjRiNxZgJLh6zydjS0ZOv80FelTNzM=

Ejemplo de clave decodificada en base64:

/:� TшY

Normalización: La empresa realizará una normalización básica de los identificadores comunes de usuarios antes de aplicar el hashing (excepto en los ID de dispositivo; consulte la sección Normalización de ID de dispositivo).

<div id="e-mail-normalization">
  #### Normalización de correo electrónico
</div>

Específicamente, elimine los espacios iniciales y finales y convierta la dirección de correo electrónico a minúsculas.

Ej.: Dirección de correo electrónico sin procesar: testemail\_Organisational\_baseball+884`@`It92I6Ev2B`.`Com

Después de la normalización: testemail\_organisational\_baseball+884`@`it92i6ev2b`.`com

Valor con hash: 74d9584eded0ad1e5572a1c1849f3716751d371d6117a6155dad5363f4b4fbec

Nota: La cantidad de caracteres tanto del HMAC codificado como de la clave puede variar según la entrada y la codificación; por lo tanto, el número exacto de caracteres no es fijo.

<div id="device-id-normalization">
  #### Normalización de ID de dispositivo
</div>

Aplicaremos los mismos requisitos para el hash de los ID de dispositivo usando el algoritmo SHA-256 y una sal común que proporcionamos a los socios de datos. Eliminamos los espacios como hacemos con las direcciones de correo electrónico, pero no hay normalización a minúsculas para IDFA/ID de Android y se debe usar el formato exacto del IDFA/ID de Android.

A continuación se muestra un ejemplo del formato en bruto de los ID de dispositivo para iOS y Android, antes del hash:

IDFA de iOS: DD99CFF7-6186-4602-9DF2-ED3FD0B2D431

ID de Android: b5bf2122961b3595

IDFA de iOS con hash: 134fb8cd95c7fd42e2793f469a447198ca5f990968db2dbadad70e723ed9750b

ID de Android con hash: 130dddff1939f229476f50bc8adab8fcb7e3525b0e9604fe8effc15e68cee4a4

<div id="x-user-id-normalization">
  #### Normalización de ID de X
</div>

Los ID de X seguirán siendo con hash, ya que la agrupación de datos —es decir, la lista de clientes de @handles— es privada para el anunciante aunque no sea PII. Tendremos los mismos requisitos para el hash de ID de X usando el algoritmo SHA-256 y una sal común que proporcionamos a los socios de datos. Se deben eliminar los espacios tanto del ID de X como del nombre de usuario (`@username`), pero los ID de usuario no requieren normalización. Los @usernames deben convertirse a minúsculas para su normalización. Además, el símbolo @ no debe incluirse como parte del nombre de usuario.

El formato de ID sin procesar será:

- User ID: 27674040
- @username: testusername

ID de usuario con hash: bf6b57d4e861e83bea8bbed2b800b251a64c95468ee6e8cb07c3368c9ed45e85

@username con hash: 12201ae78ad1afa907c7112d17f498154ffb0bf9ea523f5390e072a06d7d9812

<div id="id-sync-integration">
  ### Integración de sincronización de ID
</div>

Los socios que envían datos con un `p_id` deben completar un proceso de sincronización de ID para generar un mapeo entre los ID de usuario del anunciante o del socio y los ID de usuario de X. Esto permite a los anunciantes dirigirse directamente a sus propios segmentos de usuarios en X. Los socios también deben establecer el valor del parámetro `user_identifier_type` en `TALIST_PARTNER_USER_ID` o `TAWEB_PARTNER_USER_ID` al enviar sus actualizaciones de membresía.

- **Solo web**: Esto se puede hacer colocando un píxel en el sitio del anunciante, como se describe a continuación.
- **Lista**: Esto se puede hacer mediante cualquiera de los métodos descritos en la página de [CRM](/es/x-ads-api/audiences#crm).

<div id="pixel-url">
  #### URL del píxel
</div>

|     |
| :--- |
| **URL base** |
| [https://analytics.x.com/i/adsct](https://analytics.x.com/i/adsct) |

<div id="pixel-parameters">
  #### Parámetros del píxel
</div>

|     |     |
| :--- | :--- |
| **Parámetro** | **Descripción** |
| `p_id` | Tu identificador de socio asignado por X |
| `p_user_id` | El identificador del usuario en el sistema del socio |

<div id="id-sync-pixel">
  #### Píxel de sincronización de ID:
</div>

Con un ID de socio de ejemplo 111 y un `p_user_id` de ejemplo abc, el píxel resultante sería el siguiente:

```json
    <pre class="brush: xml">
    <img height="1" width="1" src="https://analytics.x.com/i/adsct?p_id=111&p_user_id=abc" style="display:none" />
    </pre>
```

**Configuración del archivo de exclusión y envío de archivos de exclusión**

Los socios deben proporcionar a X una lista de usuarios que, según su mejor conocimiento, hayan optado por no recibir publicidad dirigida. El archivo debe tener el siguiente formato:

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Número de columna** | **Nombre de la columna** | **Tipo de columna** | **Descripción** |
| 1   | ID de socio | string | El “partner id” es el ID que X proporciona al socio para identificar de forma única a cada socio. |
| 2   | ID del usuario en el sistema del socio | string | El `p_user_id` es el ID único que el socio utiliza para identificar al usuario. El archivo con estos usuarios excluidos debe cargarse mediante el endpoint [TON upload](/es/x-ads-api/audiences) y la ruta de los datos cargados debe enviarse al endpoint de exclusión global aquí: [PUT accounts/:account\_id/custom\_audiences/global\_opt\_out](/es/x-ads-api/audiences). |

**Envío de actualizaciones de membresía**

Como se especifica en la documentación de nuestro endpoint, al enviar usuarios mediante el endpoint [POST custom\_audience\_memberships](/es/x-ads-api/audiences) debe incluir un ID de cliente para habilitar la coincidencia basada en cookies. Los socios que envíen datos con un `p_id` **deben** establecer `user_identifier_type` en `TALIST_PARTNER_USER_ID` o `TAWEB_PARTNER_USER_ID`.

Todos los demás pasos se mantienen como en la [Guía de integración de la API de Audiencias en tiempo real](/es/x-ads-api/audiences)

<div id="custom-audiences-user-data">
  ### Datos de usuario de Audiencias personalizadas
</div>

Este documento describe el formato de los datos de usuario de \[Audiencia personalizada]/x-ads-api/audiences.

**Normalización de datos**

**ID de dispositivo**:

- IDFA: en minúsculas y con guiones; p. ej.: `4b61639e-47cc-4056-a16a-c8217e029462`
- AdID: se requiere el formato original del dispositivo; no en mayúsculas y con guiones; p. ej.: `2f5f5391-3e45-4d02-b645-4575a08f86e`
- Android ID: se requiere el formato original del dispositivo; no en mayúsculas y sin guiones ni espacios; p. ej.: `af3802a465767e36`

**Direcciones de correo electrónico**:

- en minúsculas; eliminar espacios iniciales y finales; p. ej.: `support@x.com`

**Nombres de usuario de X**:

- sin @, en minúsculas y sin espacios iniciales ni finales; p. ej.: `jack`

**ID de usuario de X**:

- Entero estándar; p. ej.: `143567`

**Hashing de datos**

Los datos de cada línea deben hashificarse usando `SHA256`, sin salt. Además, el hash de salida final debe estar en minúsculas. P. ej., 49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d y **no** 49E0BE2AECCFB51A8DEE4C945C8A70A9AC500CF6F5CB08112575F74DB9B1470D

```
# hasing user @AdsAPI using python
import hashlib
hashlib.sha256("adsapi".encode()).hexdigest()

#output
49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d
```

Se pueden encontrar ejemplos de código adicionales para hashing en [github.com/xdevplatform/ads-platform-tools](https://github.com/xdevplatform/ads-platform-tools).

<div id="custom-audiences-web">
  ### Audiencias personalizadas: Web
</div>

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/info.png" alt="info.png" />
</Frame>

**Información**

Los partners enviarán una lista de IDs (`p_user_ids`) para segmentar en nombre de un anunciante. Esto se realiza mediante un proceso de sincronización de IDs que crea un mapeo entre los `p_user_ids` y el ID de usuario de X. Este mapeo luego se utiliza para generar listas de IDs de usuario de X que pueden usarse para la segmentación. Estas audiencias personalizadas estarán disponibles en el @handle específico del anunciante indicado por la etiqueta en la configuración de campaña de Custom Audiences Web en ads.x.com.

X proporcionará el píxel seguro que puede insertarse en las etiquetas y sitios del partner para hacer coincidir los IDs (`p_user_ids`) con los IDs de usuario de X. Una vez completado el proceso de sincronización de IDs, los archivos de segmentación serán creados por el partner y estarán disponibles para X a través de un endpoint HTTPS. X ingiere estos archivos de segmentación de forma regular y luego están disponibles en la interfaz de X.

**Píxel seguro de X**

El píxel seguro de X tendrá el siguiente formato:

https://analytics.x.com/i/adsct?p\_user\_id=xyz\&p\_id=123

**`p_user_id`** - xyz representa el ID de usuario del partner proporcionado por el partner

**`p_id`** - 123 representa el ID único del partner (proporcionado por X)

**Endpoint HTTPS del partner y archivo de usuarios para segmentación**

El partner deberá proporcionar a X un endpoint HTTPS y credenciales (usuario/contraseña) que puedan utilizarse para ingerir el archivo de segmentación de forma regular. Un endpoint HTTPS de ejemplo tendría el siguiente formato:

```
https://<partnerdomain>/twitter/partner_targeting_%Y-%M-%D.tsv.gz
```

%Y - Código de formato para el año (YYYY)

%M - Código de formato para el mes (MM)

%D - Código de formato para el día (DD)

Los datos transmitidos consistirán en los siguientes archivos:

1. Archivo de usuarios para segmentación del partner
2. Archivo de conversiones de segmentación

Todos los archivos estarán en formato TSV, donde los campos individuales de cada fila están separados entre sí por un carácter de tabulación. Los valores válidos de los campos nunca contendrán el carácter de tabulación.

**Rango de IP permitidas de X:**

Este es el rango de IP que se puede permitir para acceder al endpoint del partner.

- 199.16.156.0/22
- 199.59.148.0/22

**Archivo de usuarios para segmentación del partner:**

| **Número de columna** | **Nombre de columna** | **Tipo de columna** | **Descripción** |
| :--- | :--- | :--- | :--- |
| 1   | partner id | string | El “partner id” es el ID que X proporciona al partner para identificar de manera única a cada partner. |
| 2   | advertiser id | string | El “advertiser id” es el @handle del anunciante. |
| 3   | p\_user\_id | string | El “p\_user\_id” es el ID único que utiliza el partner para identificar al usuario. |
| 3   | confidence score | integer | El “confidence score” es opcional. Recomendamos usar un rango de 0 a 100. Si el caso de uso es retargeting, entonces un confidence score de “100” indica un usuario que ha sido reimpactado directamente. Cualquier puntaje de 0 a 99 correspondería al nivel de confianza del similar (look-alike). |
| 4   | segment label | string | El “segment label” es opcional. Los partners pueden usar “segment label” para especificar, por ejemplo, categorías de producto. Recomendamos usar este “segment label”, ya que es el nombre legible por humanos para Custom Audiences en la interfaz de ads.x.com. |

**Notas:**

Cada vez que recibamos un nuevo archivo de segmentación del partner, esperamos que sea la lista completa de usuarios que el partner recomienda segmentar, no incremental, a menos que se acuerde lo contrario. Acordaremos con cada partner la frecuencia de entrega de este archivo. Si no recibimos un archivo de segmentación del partner como se espera, usaremos la versión anterior con un tiempo de expiración predefinido.

<div id="audience-api-integration">
  ## Integración de la API de Audiencias
</div>

<div id="overview">
  ### Descripción general
</div>

La Audience API se lanzó como parte de la [v4](/es/x-ads-api/introduction) de la API de Anuncios y, con ello, incorpora varias mejoras a los endpoints heredados de Audiences. Este nuevo endpoint está respaldado por un nuevo backend de procesamiento de Audiences y aporta varias mejoras en términos de estabilidad, robustez y fiabilidad. El propósito de esta guía es resaltar las diferencias entre la Audience API y los procesos heredados de carga y gestión de Audiences.

La documentación de referencia se encuentra en la página de documentación de referencia de la [Audience API](/es/x-ads-api/audiences).

Nota: Todos los datos de usuario de Audience deben estar hasheados con SHA-256 antes de la carga. Encontrará más detalles, junto con los tipos de identificadores de usuario aceptados y la normalización de datos, en la página de [user data](/es/x-ads-api/audiences).

Cambios en la funcionalidad de Audience

Se han introducido los siguientes cambios en las Audiencias personalizadas a partir de la v4 y cualquier endpoint en desuso dejará de estar disponible una vez que la v3 de la API de Anuncios haya sido retirada:

- Obsoleto TON Upload:
  - GET accounts/:account\_id/custom\_audience\_changes
  - GET accounts/:account\_id/custom\_audience\_changes/:custom\_audience\_change\_id
  - POST accounts/:account\_id/custom\_audience\_changes
  - PUT accounts/:account\_id/custom\_audiences/global\_opt\_out
- Obsoleto Real Time Audiences:
  - POST custom\_audience\_memberships
- Audiencia personalizada:
  - El parámetro `list_type` se eliminará de la solicitud y la respuesta en todos los endpoints de [Custom Audience](/es/x-ads-api/audiences). Este parámetro se usaba anteriormente para identificar el tipo de identificador de usuario de la Audience (p. ej., correo electrónico, X User ID, etc.); sin embargo, ahora las Audiences pueden aceptar múltiples identificadores de usuario para la misma Audience, lo que hace que este valor sea irrelevante.
- General:
  - La ventana de lookback de la Audience se ha actualizado para coincidir con usuarios activos en los últimos 90 días (antes 30 días)
  - El número mínimo de usuarios coincidentes requerido para que una audiencia sea apta para segmentación se ha reducido a 100 usuarios (antes 500 usuarios)

<Note>
  **Requisitos previos**

  - Acceso a la API de Anuncios
  - Para acceder al endpoint de Audience, deberá ser agregado a una allowlist. Complete este formulario y acepte el nuevo [X Ads Products and Services Agreement](/es/x-ads-api/introduction) si fue aceptado inicialmente antes del 2018-08-01
</Note>

Proceso de carga de Audience

La tabla siguiente enumera las diferencias principales entre los flujos de creación de Audience antiguo y nuevo, con más detalles disponibles más abajo:

| Paso en el proceso | Audience API | (Obsoleto) TON Upload |
| :--- | :--- | :--- |
| Crear una Audience inicial | Se puede crear mediante el \[POST custom\_audience endpoint]/x-ads-api/audiences | Se puede crear mediante el \[POST custom\_audience endpoint]/x-ads-api/audiences |
| Agregar un nuevo usuario | Use `operation_type` `Update` con el [Audience endpoint](/es/x-ads-api/audiences) | Use `operation` `ADD` con el endpoint [POST custom\_audience\_changes](/es/x-ads-api/audiences) |
| Eliminar un usuario | Use `operation_type` `Delete` con el [Audience endpoint](/es/x-ads-api/audiences) | Use `operation` `REMOVE` con el endpoint [POST custom\_audience\_changes](/es/x-ads-api/audiences) |
| Excluir usuarios (opt-out) | Use `operation_type` `Delete` con el [Audience endpoint](/es/x-ads-api/audiences) y los `custom_audience_id` correspondientes de los que forma parte el usuario | Use el [Global opt-out endpoint](/es/x-ads-api/audiences) |

Nota Cualquier Audience que se esté actualizando o excluyendo (opt-out) mediante la ruta de TON Upload debe tener una lista correspondiente cargada mediante el endpoint [TON Upload](/es/x-ads-api/audiences) y asociada con una Audience usando el endpoint [custom\_audience\_changes](/es/x-ads-api/audiences).

Limitación de tasa

El endpoint de Audience API tiene un límite de 1500/1min por cuenta. No hay límites en la cantidad de usuarios que se pueden enviar en un solo payload. Las únicas restricciones del payload son:

1. Número total de operaciones: 2500 operaciones

2. Tamaño máximo del payload: 5,000,000 bytes

Gestión de usuarios de Audience

Para crear una nueva Audience, se requieren los siguientes pasos

<div id="create-a-new-custom-audience">
  ### Crear una nueva Audiencia personalizada
</div>

Cree una nueva “plantilla” de Audiencia personalizada usando el endpoint \[POST custom\_audience]/x-ads-api/audiences y obtenga el `id` de la Audiencia personalizada correspondiente. Este paso es obligatorio si crea una Audiencia desde cero. Si va a actualizar una Audiencia existente, pase a la siguiente sección.

<div id="add-users-to-an-audience">
  ### Agregar usuarios a una Audiencia
</div>

Use [POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/users](/es/x-ads-api/audiences) con el `id` de la Audiencia personalizada y una carga útil de ejemplo como la siguiente:

POST https://ads-api.x.com/11/accounts/18ce54d4x5t/custom\_audiences/1nmth/users

```
    # Todos los valores deben estar con hash; en este ejemplo se usan valores sin hash con fines ilustrativos
    [
      {
        "operation_type": "Update",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "abc@x.com"
              ],
              "handle": [
                "x",
                "adsapi"
              ]
            },
            {
              "email": [
                "edf@x.com"
              ],
              "twitter_id": [
                "121291606",
                "17874544"
              ]
            }
          ]
        }
      }
    ]
```

Para agregar un usuario a una Audiencia, use `operation_type` `Update`. La nueva interfaz de Audiencias permite enviar varias claves de usuario para un mismo usuario. Cada objeto en la matriz de objetos JSON corresponde a un único usuario. Con la carga útil de ejemplo anterior, la solicitud agregará dos usuarios a una Audiencia: uno con `email` y `handle`, y otro con `email` y `twitter_id`. 

<div id="remove-users-from-an-audience">
  #### Eliminar usuarios de una audiencia
</div>

De forma similar al proceso descrito para agregar usuarios, se pueden eliminar usuarios de una audiencia de la siguiente manera:

POST https://ads-api.x.com/11/accounts/18ce54d4x5t/custom\_audiences/1nmth/users

```
    # Todos los valores deben estar hasheados; en este ejemplo se muestran sin hash solo con fines ilustrativos
    [
      {
        "operation_type": "Delete",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "abc@x.com"
              ],
              "twitter_id": [
                "783214",
                "1225933934"
              ]
            },
            {
              "email": [
                "edf@x.com"
              ],
              "twitter_id": [
                "121291606",
                "17874544"
              ]
            }
          ]
        }
      }
    ]
```

El `operation_type` debe establecerse en `Delete` y los usuarios se harán coincidir según cualquiera de las claves que estuvieran presentes al agregarlos a la audiencia. Por ejemplo, si un usuario se añadió a una audiencia con `email` y `twitter_id`, ese mismo usuario se puede eliminar usando cualquiera de esas claves, es decir, `email`, `twitter_id` o ambos.

Además, es posible agregar y eliminar usuarios de una audiencia en la misma solicitud. El endpoint admite múltiples `operation_type` por solicitud.

<div id="opt-out-users">
  #### Usuarios que optaron por no participar
</div>

Con la retirada del endpoint global de exclusión, los partners deben ejecutar `Delete` para cualquier usuario que haya optado por no participar en cualquier Audiencia. Hay varias formas de lograrlo:

1. Llevar un registro de qué usuarios forman parte de qué Audiencias y eliminarlos individualmente de cada Audiencia.
2. Eliminar al usuario de **todas** las Audiencias asociadas con una cuenta de Anuncios.

**Mejores prácticas generales**

- Recomendamos encarecidamente llamar a este endpoint en lotes casi en tiempo real para evitar colas con picos que tardan más en procesarse y, en general, generan carga innecesaria en nuestro sistema. Esto también garantiza que los usuarios estén disponibles antes para la segmentación de campañas.
- Una llamada exitosa a la API devolverá `success_count` y `total_count` correspondientes al número de objetos `user` que se han recibido en la solicitud.
- Este endpoint es atómico por naturaleza; es decir, o bien toda la solicitud se completa correctamente o, en caso de cualquier error, toda la solicitud falla. En caso de una respuesta de error, se recomienda a los consumidores de la API corregirlo y volver a intentar la solicitud con todo el payload.
- En caso de error, se recomienda a los partners usar un enfoque de [retroceso exponencial](https://en.wikipedia.org/wiki/Exponential_backoff) con reintentos. Por ejemplo, reintentar inmediatamente tras el primer error, volver a intentar después de 1 minuto tras el segundo error y volver a intentar después de 5 minutos tras el tercer error consecutivo, y así sucesivamente.

<div id="api-reference">
  ## Referencia de la API
</div>

<div id="keyword-insights">
  ### Información de palabras clave
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Ejecutar en Postman
</Button>

<div id="get-insightskeywordssearch">
  #### GET insights/keywords/search[](#get-insights-keywords-search "Permalink to this headline")
</div>

Dado un grupo de palabras clave, obtén el volumen de Tweets asociado, así como un conjunto de 30 palabras clave relacionadas. El volumen de Tweets corresponde solo a las palabras clave de entrada, no a las relacionadas.

Se permite un intervalo de tiempo máximo (`end_time` - `start_time`) de 7 días.

Ten en cuenta que los resultados están acotados a una única ubicación geográfica (país).

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/insights/keywords/search`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| granularity  <br />_required_ | Especifica la Granularidad de los datos devueltos para el intervalo de tiempo definido por `start_time` y `end_time`. Por ejemplo, cuando se establece en `HOUR`, se presentará un punto de datos por cada hora entre `start_time` y `end_time`.<br /><br />Type: enum<br /><br />Possible values: `DAY`, `HOUR` |
| keywords  <br />_required_ | Cadena de palabras clave separadas por comas para acotar la búsqueda. Todas las palabras clave se combinan con OR entre sí.<br /><br />**Note**: Se puede usar un máximo de 10 palabras clave (combinando `keywords` y `negative_keywords`).<br /><br />Type: string<br /><br />Example: `developers` |
| start\_time  <br />_required_ | Acota los datos recuperados a los recopilados en la ventana de tiempo entre `start_time` y `end_time`. Expresado en [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).<br /><br />Type: string<br /><br />Example: `2017-07-10T00:00:00Z` |
| end\_time  <br />_optional_ | Acota los datos recuperados a los recopilados en la ventana de tiempo entre `start_time` y `end_time`. Expresado en [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).<br /><br />**Note**: De forma predeterminada, usa la hora actual.<br /><br />Type: string<br /><br />Example: `2017-07-11T00:00:00Z` |
| location  <br />_optional_ | Valor de segmentación que obtendrías del endpoint [GET targeting\_criteria/locations](/es/x-ads-api/campaign-management#get-targeting-criteria-locations) para acotar los resultados según la ubicación del usuario de la cuenta. Ten en cuenta que, por el momento, solo se admiten ubicaciones a nivel de país.<br /><br />Type: string<br /><br />Example: `0ce8b9a7b2742f7e` |
| negative\_keywords  <br />_optional_ | Cadena de palabras clave separadas por comas para excluir. Todas las palabras clave negativas se combinan con OR entre sí.<br /><br />**Note**: Se puede usar un máximo de 10 palabras clave (combinando `keywords` y `negative_keywords`).<br /><br />Type: string<br /><br />Example: `rain` |

**Example Request[](#example-request "Permalink to this headline")**

```json
GET https://ads-api.x.com/12/insights/keywords/search?end_time=2018-02-02&granularity=DAY&keywords=developers&start_time=2018-02-01
```

**Example Response[](#example-response "Permalink to this headline")**\*

```
    {
      "request": {
        "params": {
          "start_time": "2018-02-01T00:00:00Z",
          "end_time": "2018-02-02T00:00:00Z",
          "granularity": "DAY",
          "keywords": [
            "developers"
          ]
        }
      },
      "data": {
        "related_keywords": [
          "dev",
          "developer",
          "coders",
          "mysql",
          "devs",
          "#technology",
          "#developers",
          "security",
          "programmers",
          "#tech",
          "javascript",
          "#iot",
          "#bigdata",
          "cloud",
          "devops",
          "php",
          "developer",
          "programmer",
          "engineer",
          "big data",
          "agile",
          "app",
          "programming",
          "ios",
          "maker",
          "startups",
          "developer's",
          "java",
          "#devops",
          "startup"
        ],
        "tweet_volume": [
          15707
        ]
      }
    }
```

<div id="tailored-audience-permissions">
  ### Permisos de audiencias personalizadas
</div>

<Button href="https://app.getpostman.com/run-collection/369a02c0adc626ff6a06#?env%5BTwitter%20Ads%20API%5D=W3sia2V5IjoiYWNjb3VudF9pZCIsInZhbHVlIjoieW91cl9hZHNfYWNjb3VudF9pZCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidmVyc2lvbiIsInZhbHVlIjoiNSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfa2V5IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX2tleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfc2VjcmV0IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX3NlY3JldCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiYWNjZXNzX3Rva2VuIiwidmFsdWUiOiJ5b3VyX2FjY2Vzc190b2tlbiIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidG9rZW5fc2VjcmV0IiwidmFsdWUiOiJ5b3VyX3Rva2VuX3NlY3JldCIsImVuYWJsZWQiOnRydWV9XQ==">
  Ejecutar en Postman
</Button>

#### GET accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions[](#get-accounts-account-id-tailored-audiences-tailored-audience-id-permissions "Permalink to this headline")

Recupera los detalles de algunos o todos los permisos asociados a la audiencia personalizada especificada.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | Identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anuncios, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada al usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| tailored\_audience\_id  <br />_required_ | Referencia a la audiencia personalizada con la que se opera en la solicitud.<br /><br />Type: string<br /><br />Example: `1nmth` |
| count  <br />_optional_ | Especifica la cantidad de registros que se intentará recuperar por cada solicitud.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Especifica un cursor para obtener la siguiente página de resultados. Consulte [Pagination](/es/x-ads-api/introduction) para más información.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| granted\_account\_ids  <br />_optional_ | Limita la respuesta a las cuentas deseadas especificando una lista de identificadores separados por comas. Se pueden proporcionar hasta 200 ID.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| sort\_by  <br />_optional_ | Ordena por un atributo admitido en orden ascendente o descendente. Consulte [Sorting](/es/x-ads-api/introduction) para más información.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| tailored\_audience\_permission\_ids  <br />_optional_ | Limita la respuesta a los permisos de audiencia personalizada deseados especificando una lista de identificadores separados por comas. Se pueden proporcionar hasta 200 ID.<br /><br />Type: string<br /><br />Example: `ri` |
| with\_total\_count  <br />_optional_ | Incluye el atributo de respuesta `total_count`.<br /><br />**Nota**: Este parámetro y `cursor` son excluyentes.<br /><br />**Nota**: Las solicitudes que incluyen `total_count` tendrán límites de tasa más bajos, actualmente establecidos en 200 por 15 minutos.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/1nmth/permissions`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "tailored_audience_id": "1nmth"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "tailored_audience_id": "1nmth",
          "permission_level": "READ_ONLY",
          "id": "ri",
          "created_at": "2017-06-08T23:17:59Z",
          "granted_account_id": "18ce54aymz3",
          "updated_at": "2017-06-08T23:17:59Z",
          "deleted": false
        }
      ]
    }

```

#### POST accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions[](#post-accounts-account-id-tailored-audiences-tailored-audience-id-permissions "Permalink to this headline")

Crea un nuevo objeto de permiso que permite compartir la audiencia especificada con una cuenta determinada.

**Nota**: Crear o modificar permisos para una audiencia personalizada requiere que la audiencia sea propiedad de la cuenta que intenta modificar los permisos. Puede verificar la propiedad de una audiencia personalizada consultando el atributo `is_owner` en la respuesta de la audiencia correspondiente.

**Nota**: Las audiencias solo pueden compartirse entre cuentas de anuncios dentro de la misma empresa o si la cuenta de anuncios que es propietaria de la audiencia tiene la característica de cuenta `SHARE_AUDIENCE_OUTSIDE_BUSINESS`.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta aprovechada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la Advertiser API, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| granted\_account\_id  <br />_required_ | La cuenta a la que desea otorgar permisos sobre la audiencia personalizada.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| permission\_level  <br />_required_ | El tipo de acceso a la audiencia personalizada que debe tener el `granted_account_id`.<br /><br />Type: enum<br /><br />Possible values: `READ_ONLY`, `READ_WRITE` |
| tailored\_audience\_id  <br />_required_ | Una referencia a la audiencia personalizada con la que está operando en la solicitud.<br /><br />Type: string<br /><br />Example: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/2906h/permissions?granted_account_id=18ce54aymz3&permission_level=READ_ONLY`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "granted_account_id": "18ce54aymz3",
          "permission_level": "READ_ONLY",
          "tailored_audience_id": "2906h"
        }
      },
      "data": {
        "tailored_audience_id": "2906h",
        "permission_level": "READ_ONLY",
        "id": "14m",
        "created_at": "2017-09-12T23:49:34Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-09-12T23:49:34Z",
        "deleted": false
      }
    }
```

#### DELETE accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions/:tailored\_audience\_permission\_id[](#delete-accounts-account-id-tailored-audiences-tailored-audience-id-permissions-tailored-audience-permission-id "Enlace permanente a este encabezado")

Revoca el permiso de uso compartido de la Audiencia personalizada especificada.

**Nota**: Para crear o modificar permisos de una audiencia personalizada, la audiencia debe ser propiedad de la cuenta que intenta modificar los permisos. Puede verificar la propiedad de una audiencia personalizada consultando el atributo de respuesta `is_owner` en la respuesta de la audiencia correspondiente.

Una vez revocado, garantizamos que la cuenta a la que se le concedió acceso (`granted_account_id`) no podrá segmentar la audiencia en campañas futuras. Las campañas existentes seguirán ejecutándose con las audiencias compartidas; las campañas no se detienen y la audiencia no se elimina de la campaña. No es posible copiar esa campaña después de revocar el permiso de compartición de la audiencia.

**Resource URL[](#resource-url "Enlace permanente a este encabezado")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions/:tailored_audience_permission_id`

**Parameters[](#parameters "Enlace permanente a este encabezado")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | Identificador de la cuenta utilizada. Aparece en la ruta del recurso y generalmente es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Tipo: string<br /><br />Ejemplo: `18ce54d4x5t` |
| tailored\_audience\_id  <br />_required_ | Referencia a la audiencia personalizada con la que opera en la solicitud.<br /><br />Tipo: string<br /><br />Ejemplo: `1nmth` |
| tailored\_audience\_permission\_id  <br />_required_ | Referencia al permiso de audiencia personalizada con el que opera en la solicitud.<br /><br />Tipo: string<br /><br />Ejemplo: `ri` |

**Example Request[](#example-request "Enlace permanente a este encabezado")**

`DELETE https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/1nmth/permissions/ri`

**Example Response[](#example-response "Enlace permanente a este encabezado")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "tailored_audience_permission_id": "ri",
          "tailored_audience_id": "1nmth"
        }
      },
      "data": {
        "tailored_audience_id": "1nmth",
        "permission_level": "READ_ONLY",
        "id": "ri",
        "created_at": "2017-06-08T23:17:59Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-08-30T18:29:35Z",
        "deleted": true
      }
    }
```

<div id="targeted-audiences">
  ### Audiencias segmentadas
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Ejecutar en Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id/targeted[](#get-accounts-account-id-custom-audiences-custom-audience-id-targeted "Enlace permanente a este encabezado")

Recupera una lista de todos o solo los elementos de línea y campañas activas que segmentan a un `custom_audience_id` dado

| Nombre | Descripción |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro requerido para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada al usuario autenticado.<br /><br />Tipo: string<br /><br />Ejemplo: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Una referencia a la audiencia personalizada con la que opera en la solicitud.<br /><br />Tipo: string<br /><br />Ejemplo: `2906h` |
| with\_active  <br />_optional_ | Cuando es `false`, incluye elementos de línea con estado `servable=false`.<br /><br />Tipo: boolean<br /><br />Predeterminado: `true`  <br />Valores posibles: `true`, `false` |
| cursor  <br />_optional_ | Especifica un cursor para obtener la página siguiente de resultados. Consulte [Paginación](/es/x-ads-api/introduction) para más información.  <br />  <br />Tipo: string  <br />  <br />Ejemplo: `8x7v00oow` |

**Example Request[](#example-request "Enlace permanente a este encabezado")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h/targeted`

**Example Response[](#example-response "Enlace permanente a este encabezado")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "2906h",
        }
      },
      "next_cursor": null,
      "data": [
        {
          "campaign_id": "59hod",
          "campaign_name": "test-campaign",
          "line_items": [
            {
              "id": "5gzog",
              "name": "test-line-item",
              "servable": true
            }
          ]
        },
        {
          "campaign_id": "arja7",
          "campaign_name": "Untitled campaign",
          "line_items": [
            {
              "id": "bjw1q",
              "name": null,
              "servable": true
            }
          ]
        }
      ]
    }
```

<div id="custom-audiences-users">
  ### Usuarios de Audiencias personalizadas
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Ejecutar en Postman
</Button>

#### POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/users[](#post-accounts-account-id-custom-audiences-custom-audience-id-users "Permalink to this headline")

Este endpoint permite a los partners agregar, actualizar y eliminar usuarios de un `custom_audience_id` determinado. El endpoint también acepta múltiples tipos de identificadores por usuario.

Todos los datos proporcionados en el campo `users` de la solicitud, **excepto** `partner_user_id`, deben estar hasheados con `SHA256` y [normalizados](/es/x-ads-api/audiences#twitter-user-id-normalization).

**Solicitudes por lotes**

- El tamaño máximo de lote actual es de `2500` **para este endpoint**. El tamaño del lote se determina por el número de operaciones (`Update`/`Delete`) por solicitud. Por ejemplo, más de 2500 objetos de operación (`{"operation_type": "Update/Delete", [..] }`) en un array resultan en un error.
- El tamaño máximo del cuerpo de la solicitud POST que este endpoint puede aceptar es de `5,000,000` bytes.
- Los límites de tasa para este endpoint son 1500 por ventana de 1 minuto.
- Todos los parámetros se envían en el cuerpo de la solicitud y se requiere un `Content-Type` de `application/json`.
- Las solicitudes por lotes fallan o tienen éxito juntas como grupo y todas las respuestas de la API, tanto de error como de éxito, preservan el orden de los elementos de la solicitud inicial.

**Respuestas por lotes**

La respuesta devuelta por la API de Anuncios de X contiene dos campos: `success_count` y `total_count`. Estos valores siempre deben ser iguales y representan el número de registros de la solicitud que han sido procesados por el backend. Si el número de registros enviados en el cuerpo de la solicitud **no** es igual a `success_count` y `total_count`, debe tratarse como una condición de error que requiere reintento.

**Errores por lotes**

- Los errores a nivel de solicitud (p. ej., tamaño máximo del lote excedido) se muestran en la respuesta bajo el objeto `errors`.
- Los errores a nivel de elemento (p. ej., falta de parámetros obligatorios) se muestran en la respuesta bajo el objeto `operation_errors`.
- El índice del error en `operation_errors` se refiere al índice del elemento de entrada, con el mensaje de error correspondiente.

<div id="resource-url">
  #### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/users`

<div id="parameters">
  #### Parámetros[](#parameters "Permalink to this headline")
</div>

| Nombre | Descripción |
| :--- | :--- |
| operation\_type  <br />_obligatorio_ | El tipo de operación por grupo de `users` que se está realizando.<br /><br />Tipo: enum<br /><br />Valores posibles: `Update`, `Delete` |
| params  <br />_obligatorio_ | Un objeto JSON que contiene el arreglo `users` y las marcas de tiempo `effective_at` y `expires_at`.<br /><br />Tipo: JSON |
| users  <br />_obligatorio_ | Un arreglo de objetos JSON que contienen todos los parámetros de un usuario individual.<br /><br />Tipo: JSON |
| effective\_at  <br />_opcional_ | La hora UTC a la que la(s) asociación(es) de audiencia personalizada deben entrar en vigor. Expresada en [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). De forma predeterminada, la fecha y hora actuales.<br /><br />Tipo: string<br /><br />Ejemplo: `2017-07-05T07:00:00Z` |
| expires\_at  <br />_opcional_ | La hora UTC a la que la(s) asociación(es) de audiencia personalizada deben expirar. La hora especificada debe ser posterior al valor de `effective_at`. Expresada en [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). De forma predeterminada, 13 meses desde la marca de tiempo de la solicitud.<br /><br />Tipo: string<br /><br />Ejemplo: `2017-07-05T07:00:00Z` |

Dado el enfoque de múltiples claves para el objeto `users`, cada elemento de este objeto se documenta a continuación:

| Nombre | Descripción |
| :--- | :--- |
| email  <br />_opcional_ | Dirección(es) de correo electrónico del usuario.<br /><br />Tipo: Array\[String] |
| device\_id  <br />_opcional_ | IDFA/AdID/Android ID<br /><br />Tipo: Array\[String] |
| handle  <br />_opcional_ | El/los @handle(s) del usuario<br /><br />Tipo: Array\[String] |
| twitter\_id  <br />_opcional_ | El ID de X del usuario<br /><br />Tipo: Array\[String] |
| phone\_number  <br />_opcional_ | Número(s) de teléfono del usuario<br /><br />Tipo: Array\[String] |
| partner\_user\_id  <br />_opcional_ | El ID del usuario en el sistema del socio.<br /><br />Tipo: Array\[String] |

<div id="example-request">
  #### Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")
</div>

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/users`

```
    [
      {
        "operation_type": "Update",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "4798b8bbdcf6f2a52e527f46a3d7a7c9aefb541afda03af79c74809ecc6376f3"
              ],
              "handle": [
                "7352f353c460e74c7ae226952d04f8aa307b12329c5512ec8cb6f1a0f8f9b2cb",
                "49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d"
              ]
            },
            {
              "email": [
                "5bf13d5ad4200407c5bc8b9bb578e425d05ef936fd488e3799a9d0806669223c"
              ],
              "twitter_id": [
                "34d56c7159a7eea941f359653029410f813f65a1d2d13ecc5ccbdd5a8cb755cf",
                "00e7b76c9739dec57f4c4a20ec021a20ffcf26bd00f519b17ea00f0ed6048f85"
              ]
            }
          ]
        }
      },
      {
        "operation_type": "Delete",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "device_id": [
                "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"
              ],
              "email": [
                "4798b8bbdcf6f2a52e527f46a3d7a7c9aefb541afda03af79c74809ecc6376f3"
              ],
              "handle": [
                "461222f5dd690a20651c3d19848015cb0369db3f8e937571ffb775de70750847"
              ],
              "twitter_id": [
                "c623c7e163984493b46c547088542e95d0aaa529bc52bbecce3ff91eb6b7843b"
              ]
            },
            {
              "email": [
                "5bf13d5ad4200407c5bc8b9bb578e425d05ef936fd488e3799a9d0806669223c"
              ],
              "twitter_id": [
                "858cdc7f313f84a3f3c48e9a6323307c1ef1bb7439b8e3623e140454b0fd8fa5",
                "bb074e154657b91d99bd1bb3757409149670e8ae7a0fe9136fae29a26a7881c8"
              ]
            }
          ]
        }
      }
    ]
```

<div id="example-response">
  #### Ejemplo de respuesta[](#example-response "Enlace permanente a este encabezado")
</div>

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "1nmth"
        }
      },
      "data": {
        "success_count": 4,
        "total_count": 4
      }
    }
```

<div id="custom-audience-permissions">
  ### Permisos de Audiencia personalizada
</div>

<Button href="https://app.getpostman.com/run-collection/369a02c0adc626ff6a06#?env%5BTwitter%20Ads%20API%5D=W3sia2V5IjoiYWNjb3VudF9pZCIsInZhbHVlIjoieW91cl9hZHNfYWNjb3VudF9pZCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidmVyc2lvbiIsInZhbHVlIjoiNSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfa2V5IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX2tleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfc2VjcmV0IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX3NlY3JldCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiYWNjZXNzX3Rva2VuIiwidmFsdWUiOiJ5b3VyX2FjY2Vzc190b2tlbiIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidG9rZW5fc2VjcmV0IiwidmFsdWUiOiJ5b3VyX3Rva2VuX3NlY3JldCIsImVuYWJsZWQiOnRydWV9XQ==">
  Ejecutar en Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions[](#get-accounts-account-id-custom-audiences-custom-audience-id-permissions "Permalink to this headline")

Recupera los detalles de algunos o todos los permisos asociados con la audiencia personalizada especificada.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anuncios, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada al usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Referencia a la audiencia personalizada con la que opera en la solicitud.<br /><br />Type: string<br /><br />Example: `1nmth` |
| count  <br />_optional_ | Especifica la cantidad de registros a intentar recuperar por cada solicitud.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Especifica un cursor para obtener la siguiente página de resultados. Consulte [Pagination](/es/x-ads-api/introduction) para más información.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| granted\_account\_ids  <br />_optional_ | Limita la respuesta solo a las cuentas deseadas especificando una lista de identificadores separados por comas. Se pueden proporcionar hasta 200 ID.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| sort\_by  <br />_optional_ | Ordena por un atributo admitido en orden ascendente o descendente. Consulte [Sorting](/es/x-ads-api/fundamentals/sorting) para más información.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| custom\_audience\_permission\_ids  <br />_optional_ | Limita la respuesta solo a los permisos de audiencia personalizada deseados especificando una lista de identificadores separados por comas. Se pueden proporcionar hasta 200 ID.<br /><br />Type: string<br /><br />Example: `ri` |
| with\_total\_count  <br />_optional_ | Incluye el atributo de respuesta `total_count`.<br /><br />**Nota**: Este parámetro y `cursor` son excluyentes.<br /><br />**Nota**: Las solicitudes que incluyan `total_count` tendrán límites de tasa más bajos, actualmente establecidos en 200 por 15 minutos.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/permissions`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "1nmth"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "custom_audience_id": "1nmth",
          "permission_level": "READ_ONLY",
          "id": "ri",
          "created_at": "2017-06-08T23:17:59Z",
          "granted_account_id": "18ce54aymz3",
          "updated_at": "2017-06-08T23:17:59Z",
          "deleted": false
        }
      ]
    }
```

#### POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions[](#post-accounts-account-id-custom-audiences-custom-audience-id-permissions "Permalink to this headline")

Crea un nuevo objeto de permiso que permite compartir la audiencia especificada con una cuenta determinada.

**Nota**: Crear o modificar permisos para una audiencia personalizada requiere que la audiencia sea propiedad de la cuenta que intenta modificar los permisos. Puede comprobar la titularidad de una audiencia personalizada consultando el atributo `is_owner` en la respuesta para una audiencia determinada.

**Nota**: Las audiencias solo pueden compartirse entre cuentas de anuncios dentro de la misma empresa o si la cuenta de anuncios que es propietaria de la audiencia tiene la función de cuenta `SHARE_AUDIENCE_OUTSIDE_BUSINESS`.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta aprovechada. Aparece dentro de la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| granted\_account\_id  <br />_required_ | La cuenta a la que desea otorgar permisos para la audiencia personalizada.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| permission\_level  <br />_required_ | El tipo de acceso a la audiencia personalizada que debería tener `granted_account_id`.<br /><br />Type: enum<br /><br />Possible values: `READ_ONLY`, `READ_WRITE` |
| custom\_audience\_id  <br />_required_ | Una referencia a la audiencia personalizada con la que opera en la solicitud.<br /><br />Type: string<br /><br />Example: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

```
POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h/permissions?granted_account_id=18ce54aymz3&permission_level=READ_ONLY
```

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "granted_account_id": "18ce54aymz3",
          "permission_level": "READ_ONLY",
          "custom_audience_id": "2906h"
        }
      },
      "data": {
        "custom_audience_id": "2906h",
        "permission_level": "READ_ONLY",
        "id": "14m",
        "created_at": "2017-09-12T23:49:34Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-09-12T23:49:34Z",
        "deleted": false
      }
    }
```

#### DELETE accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions/:custom\_audience\_permission\_id[](#delete-accounts-account-id-custom-audiences-custom-audience-id-permissions-custom-audience-permission-id "Enlace permanente a este encabezado")

Revoca el permiso de uso compartido de la Audiencia personalizada especificada.

**Nota**: Crear o modificar permisos para una audiencia personalizada requiere que la audiencia sea propiedad de la cuenta que intenta modificar los permisos. Puedes verificar la titularidad de una audiencia personalizada consultando el atributo `is_owner` en la respuesta de la audiencia correspondiente.

Al revocarse, garantizamos que la cuenta a la que se le había concedido acceso (`granted_account_id`) no podrá segmentar la audiencia en campañas futuras. Las campañas existentes continuarán ejecutándose con las audiencias compartidas; las campañas no se detienen y la audiencia no se elimina de la campaña. No es posible copiar esa campaña después de que se haya revocado el permiso de uso compartido de la audiencia.

**Resource URL[](#resource-url "Enlace permanente a este encabezado")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions/:custom_audience_permission_id`

**Parameters[](#parameters "Enlace permanente a este encabezado")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Referencia a la audiencia personalizada con la que operas en la solicitud.<br /><br />Type: string<br /><br />Example: `1nmth` |
| custom\_audience\_permission\_id  <br />_required_ | Referencia al permiso de audiencia personalizada con el que operas en la solicitud.<br /><br />Type: string<br /><br />Example: `ri` |

**Example Request[](#example-request "Enlace permanente a este encabezado")**

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/permissions/ri`

**Example Response[](#example-response "Enlace permanente a este encabezado")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_permission_id": "ri",
          "custom_audience_id": "1nmth"
        }
      },
      "data": {
        "custom_audience_id": "1nmth",
        "permission_level": "READ_ONLY",
        "id": "ri",
        "created_at": "2017-06-08T23:17:59Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-08-30T18:29:35Z",
        "deleted": true
      }
    }
```

<div id="custom-audiences">
  ### Audiencias personalizadas
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Ejecutar en Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences[](#get-accounts-account-id-custom-audiences "Permalink to this headline")

Recupera los detalles de algunas o todas las Audiencias personalizadas asociadas a la cuenta actual.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada al usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| count  <br />_optional_ | Especifica la cantidad de registros que se intentará recuperar por cada solicitud.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Especifica un cursor para obtener la página siguiente de resultados. Consulta [Pagination](/es/x-ads-api/introduction) para más información.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| permission\_scope  <br />_optional_ | Permite filtrar la respuesta a listas que posees o listas que se han compartido contigo. De forma predeterminada, si no especificas este parámetro, solo verás audiencias que posees.<br /><br />Type: enum<br /><br />Default: `OWNER`  <br />Possible values: `OWNER`, `SHARED` |
| q  <br />_optional_ | Consulta opcional para acotar el recurso por `name`.<br /><br />**Nota**: Realiza coincidencia de prefijo sin distinción entre mayúsculas y minúsculas.<br /><br />Type: string<br /><br />Min, Max length: `1`, `255` |
| sort\_by  <br />_optional_ | Ordena por un atributo admitido en orden ascendente o descendente. Consulta [Sorting](/es/x-ads-api/fundamentals/sorting) para más información.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| custom\_audience\_ids  <br />_optional_ | Limita la respuesta únicamente a las audiencias personalizadas deseadas especificando una lista de identificadores separados por comas. Se pueden proporcionar hasta 200 IDs.<br /><br />Type: string<br /><br />Example: `1nmth` |
| with\_deleted  <br />_optional_ | Incluye resultados eliminados en tu solicitud.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |
| with\_total\_count  <br />_optional_ | Incluye el atributo de respuesta `total_count`.<br /><br />**Nota**: Este parámetro y `cursor` son excluyentes.<br /><br />**Nota**: Las solicitudes que incluyen `total_count` tendrán límites de frecuencia más bajos, actualmente establecidos en 200 por 15 minutos.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences?custom_audience_ids=1nmth`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "custom_audience_ids": [
            "1nmth"
          ],
          "account_id": "18ce54d4x5t"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "targetable": true,
          "name": "twurl-using-subshell-for-file",
          "targetable_types": [
            "CRM",
            "EXCLUDED_CRM"
          ],
          "audience_type": "CRM",
          "description": null,
          "permission_level": "READ_WRITE",
          "owner_account_id": "18ce54d4x5t",
          "id": "1nmth",
          "reasons_not_targetable": [],
          "created_at": "2017-01-08T08:19:58Z",
          "updated_at": "2017-01-08T16:21:13Z",
          "partner_source": "OTHER",
          "deleted": false,
          "audience_size": 1470
        }
      ]
    }
```

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#get-accounts-account-id-custom-audiences-custom-audience-id "Enlace permanente a este encabezado")

Recupera Audiencias personalizadas específicas asociadas a la cuenta actual.

**Resource URL[](#resource-url "Enlace permanente a este encabezado")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Enlace permanente a este encabezado")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anuncios de X, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada al usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Referencia a la audiencia personalizada con la que opera en la solicitud.<br /><br />Type: string<br /><br />Example: `2906h` |
| with\_deleted  <br />_optional_ | Incluye en la respuesta los resultados eliminados.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Enlace permanente a este encabezado")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h`

**Example Response[](#example-response "Enlace permanente a este encabezado")**

```
    {
      "request": {
        "params": {
          "custom_audience_id": "2906h",
          "account_id": "18ce54d4x5t"
        }
      },
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": 140321
      }
    }
```

#### POST accounts/:account\_id/custom\_audiences[](#post-accounts-account-id-custom-audiences "Enlace permanente a este encabezado")

Cree una nueva Audiencia personalizada de marcador de posición asociada a la cuenta actual.

**URL del recurso[](#resource-url "Enlace permanente a este encabezado")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences`

**Parámetros[](#parameters "Enlace permanente a este encabezado")**

| Nombre | Descripción |
| :--- | :--- |
| account\_id  <br />_requerido_ | Identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro requerido para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Tipo: string<br /><br />Ejemplo: `18ce54d4x5t` |
| name  <br />_requerido_ | Nombre para mostrar de esta audiencia. Debe usarse un valor de nombre único; de lo contrario, se producirá un error.<br /><br />Tipo: string<br /><br />Ejemplo: `ads api users` |
| description  <br />_opcional_ | Descripción de esta audiencia.<br /><br />Tipo: string<br /><br />Ejemplo: `Collection of all users of the Ads API` |

**Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")**

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences?name=developers`

**Ejemplo de respuesta[](#example-response "Enlace permanente a este encabezado")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "name": "developers"
        }
      }
    }
```

#### PUT accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#put-accounts-account-id-custom-audiences-custom-audience-id "Permalink to this headline")

Actualiza la Audiencia personalizada específica asociada con la cuenta actual.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anuncios de X, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Referencia a la Audiencia personalizada con la que opera en la solicitud.<br /><br />Type: string<br /><br />Example: `2906h` |
| name  <br />_optional_ | El nombre para mostrar de esta audiencia. Debe usarse un valor de nombre único. De lo contrario, se producirá un error.<br /><br />Type: string<br /><br />Example: `ads api users` |
| description  <br />_optional_ | Una descripción de esta audiencia.<br /><br />Type: string<br /><br />Example: `Collection of all users of the Ads API` |

**Example Request[](#example-request "Permalink to this headline")**

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h?name=developers_changed`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers_changed",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "is_owner": true,
        "id": "2906h",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "name": "developers_changed"
        }
      }
    }
```

#### POST batch/accounts/:account\_id/custom\_audiences[](#post-batch-accounts-account-id-custom-audiences "Permalink to this headline")

Permite la creación por lotes de Audiencias personalizadas. Consulta la página [Descripción general de Audiencias personalizadas](/es/x-ads-api/audiences) para obtener información sobre audiencias.

**Nota:** Este endpoint por lotes está actualmente en **beta cerrada** y disponible para anunciantes seleccionados. Durante este período beta, solo se pueden crear Audiencias flexibles basadas en audiencias personalizadas móviles.

**Solicitudes por lotes**

- El tamaño máximo actual del lote es de 10.
- Todos los parámetros se envían en el cuerpo de la solicitud y se requiere un `Content-Type` de `application/json`.
- Las solicitudes por lotes fallan o se completan correctamente en conjunto como un grupo y todas las respuestas de la API, tanto de error como de éxito, preservan el orden de los elementos de la solicitud inicial.

**Respuestas por lotes**

Las respuestas de la API por lotes devuelven una colección ordenada de elementos. Por lo demás, son idénticas en estructura a sus endpoints correspondientes de un solo elemento.

**Errores por lotes**

- Los errores a nivel de solicitud (p. ej., se superó el tamaño máximo del lote) se muestran en la respuesta en el objeto `errors`.
- Los errores a nivel de elemento (p. ej., falta un parámetro obligatorio) se muestran en la respuesta en el objeto `operation_errors`.

**Audiencias flexibles**

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Ejecutar en Postman
</Button>

- Las Audiencias flexibles son inmutables una vez creadas.
- Las Audiencias personalizadas se envían en una estructura de árbol con combinaciones de lógica booleana para crear Audiencias flexibles.
- Se puede usar un máximo de 10 nodos hoja de Audiencias personalizadas para crear una Audiencia flexible.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/batch/accounts/:account_id/custom_audiences`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y por lo general es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada al usuario autenticado.<br /><br />Tipo: string<br /><br />Ejemplo: `18ce54d4x5t` |
| audience\_type  <br />_required_ | El tipo de audiencia que se va a crear.<br /><br />Tipo: enum<br /><br />Valores posibles: `FLEXIBLE`, `MOBILE_AUDIENCE` |
| child\_segments  <br />_required_ | Una matriz que contiene objetos que definen el subconjunto de miembros de una Audiencia personalizada que quieres segmentar. Cada objeto debe incluir `custom_audience_id`, `frequency`, `frequency_comparator`, `lookback_window`, `negate` y, en algunos casos, `child_segments` adicionales.<br /><br />Tipo: array |
| name  <br />_required_ | El nombre para mostrar de la audiencia. Debe usarse un valor de nombre único. De lo contrario, se producirá un error.<br /><br />Tipo: string<br /><br />Ejemplo: `my_flexible_audience_name` |
| operation\_type  <br />_required_ | El tipo de operación por elemento que se está realizando.<br /><br />Tipo: enum<br /><br />Valores posibles: `Create`, `Update`, `Delete` |
| boolean\_operator  <br />_sometimes required_ | La relación lógica entre los segmentos hijos en su objeto padre (contenedor). Es obligatorio si el objeto padre tiene un child\_segments no vacío.<br /><br />Tipo: enum<br /><br />Valores posibles: `AND`, `OR` |
| lookback\_window  <br />_sometimes required_ | Un valor entero que indica el rango de días dentro del cual el usuario realizó la acción específica y calificó para la audiencia personalizada indicada.<br /><br />Tipo: int<br /><br />Valores posibles: `1`, `7`, `14`, `30` |
| segments  <br />_sometimes required_ | Un objeto que contiene `boolean_operator` y `child_segments` que definen el subconjunto de miembros de una Audiencia personalizada que quieres segmentar.<br /><br />Tipo: object |
| custom\_audience\_id  <br />_sometimes required_ | El ID de la audiencia personalizada que se usará como segmento hijo.<br /><br />Tipo: string<br /><br />Ejemplo: `tyfo` |
| frequency  <br />_optional_ | Un valor entero que indica la frecuencia, dentro de la ventana de retrospectiva, con la que el usuario realizó la acción específica y calificó para la audiencia personalizada indicada.<br /><br />Tipo: int<br /><br />Valor predeterminado: `1` |
| frequency\_comparator  <br />_optional_ | El comparador aplicado al `frequency` enviado en la solicitud.<br /><br />**Nota**: En los valores siguientes, `GTE` significa mayor o igual que, `LT` menor que, y así sucesivamente.<br /><br />Tipo: string<br /><br />Valores posibles: `NUM_GTE`, `NUM_GT`, `NUM_EQ`, `NUM_LTE`, `NUM_LT` Valor predeterminado: `NUM_GTE` |
| negate  <br />_optional_ | Niega el segmento y, por lo tanto, se excluye en la combinación.<br /><br />Tipo: boolean<br /><br />Valor predeterminado: `true`  <br />Valores posibles: `true`, `false` |

**Solicitud de ejemplo[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/batch/accounts/18ce54d4x5t/custom_audiences`

```
    [
      {
        "operation_type":"Create",
        "params":{
          "name":"my_flexible_audience_name",
          "audience_type":"FLEXIBLE",
          "segments":{
            "boolean_operator":"AND",
            "child_segments":[
              {
                "custom_audience_id":"TYIF",
                "frequency":1,
                "frequency_comparator":"NUM_GT",
                "lookback_window":30,
                "negate":true,
                "child_segments":[

                ]
              },
              {
                "boolean_operator":"OR",
                "child_segments":[
                  {
                    "custom_audience_id":"TXR1",
                    "lookback_window":30,
                    "child_segments":[

                    ]
                  },
                  {
                    "custom_audience_id":"TYFO",
                    "frequency":1,
                    "frequency_comparator":"NUM_GT",
                    "lookback_window":30,
                    "negate":true,
                    "child_segments":[

                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
```

**Respuesta de ejemplo[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "my_flexible_audience_name",
        "targetable_types": [
          "FLEXIBLE",
          "EXCLUDED_FLEXIBLE"
        ],
        "audience_type": "FLEXIBLE",
        "id": "13ld7",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "metadata": [
          {
            "custom_audience_id": "13ld7",
            "account_id": "qsx3w2",
            "name": "my_flexible_audience_name",
            "audience_source": "FLEXIBLE_AUDIENCE",
            "upload_status": "UPLOADED",
            "segments": {
              "boolean_operator": "AND",
              "frequency": 1,
              "frequency_comparator": "NUM_GTE",
              "negate": false,
              "child_segments": [
                {
                  "custom_audience_id": "tyif",
                  "lookback_window": 30,
                  "frequency": 1,
                  "frequency_comparator": "NUM_GT",
                  "negate": true,
                  "child_segments": [

                  ]
                },
                {
                  "boolean_operator": "OR",
                  "frequency": 1,
                  "frequency_comparator": "NUM_GTE",
                  "negate": false,
                  "child_segments": [
                    {
                      "custom_audience_id": "txr1",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GTE",
                      "negate": false,
                      "child_segments": [

                      ]
                    },
                    {
                      "custom_audience_id": "tyfo",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GT",
                      "negate": true,
                      "child_segments": [

                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "created_at": "2015-11-10T21:26:43Z",
        "updated_at": "2015-11-11T01:11:47Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": [
        {
          "params": {
            "name": "my_flexible_audience_name",
            "audience_type": "FLEXIBLE",
            "segments": {
              "boolean_operator": "AND",
              "child_segments": [
                {
                  "custom_audience_id": "TYIF",
                  "lookback_window": 30,
                  "frequency": 1,
                  "frequency_comparator": "NUM_GT",
                  "negate": true,
                  "child_segments": [

                  ]
                },
                {
                  "boolean_operator": "OR",
                  "child_segments": [
                    {
                      "custom_audience_id": "TXR1",
                      "lookback_window": 30,
                      "child_segments": [

                      ]
                    },
                    {
                      "custom_audience_id": "TYFO",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GT",
                      "negate": true,
                      "child_segments": [

                      ]
                    }
                  ]
                }
              ]
            },
            "account_id": "qsx3w2"
          },
          "operation_type": "Create"
        }
      ]
    }
```

#### DELETE accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#delete-accounts-account-id-custom-audiences-custom-audience-id "Permalink to this headline")

Elimina la Audiencia personalizada especificada que pertenece a la cuenta actual.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anuncios, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Referencia a la audiencia personalizada con la que se opera en la solicitud.<br /><br />Type: string<br /><br />Example: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-30T18:09:00Z",
        "partner_source": "OTHER",
        "deleted": true,
        "audience_size": null
      },
      "request": {
        "params": {
          "custom_audience_id": "2906h",
          "account_id": "18ce54d4x5t"
        }
      }
    }
```

<div id="do-not-reach-lists">
  ### Listas de No Alcance
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Ejecutar en Postman
</Button>

#### GET accounts/:account\_id/do\_not\_reach\_lists[](#get-accounts-account-id-do-not-reach-lists "Enlace permanente a este encabezado")

Recupera los detalles de una o de todas las Listas de No Alcance asociadas con la cuenta actual.

**Nota**: Un `account_id` solo puede tener como máximo una Lista de No Alcance

**Resource URL[](#resource-url "Enlace permanente a este encabezado")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists`

**Parameters[](#parameters "Enlace permanente a este encabezado")**

| Nombre | Descripción |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Tipo: string<br /><br />Ejemplo: `18ce54d4x5t` |
| with\_deleted  <br />_optional_ | Incluye resultados eliminados en la solicitud.<br /><br />Tipo: boolean<br /><br />Predeterminado: `false`  <br />Valores posibles: `true`, `false` |

**Example Request[](#example-request "Enlace permanente a este encabezado")**

`GET https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists`

**Example Response[](#example-response "Enlace permanente a este encabezado")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54bgxky"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "targetable": false,
          "name": "Do Not Reach List",
          "description": "test DNRL",
          "id": "4kzrq",
          "reasons_not_targetable": [
            "TOO_SMALL"
          ],
          "created_at": "2021-10-28T22:09:29Z",
          "list_size": null,
          "updated_at": "2021-11-04T03:33:06Z",
          "deleted": false
        }
      ]
    }
```

#### POST accounts/:account\_id/do\_not\_reach\_lists[](#post-accounts-account-id-do-not-reach-lists "Permalink to this headline")

Cree una nueva Lista de No Alcance asociada con la cuenta actual.

Nota: Un `account_id` solo puede tener como máximo una Lista de No Alcance.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | El identificador de la cuenta utilizada. Aparece en la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| description  <br />_optional_ | Una descripción para esta audiencia.<br /><br />Type: string<br /><br />Example: `A list of users to exclude` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists?description=A list of users to exclude`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "description": "A list of users to exclude",
          "account_id": "18ce54bgxky"
        }
      },
      "data": {
        "targetable": false,
        "name": "Do Not Reach List",
        "description": "A list of users to exclude",
        "id": "4ofrq",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2022-02-08T23:02:48Z",
        "list_size": null,
        "updated_at": "2022-02-08T23:02:48Z",
        "deleted": false
      }
    }
```

#### POST batch/accounts/:account\_id/do\_not\_reach\_lists/:do\_not\_reach\_list\_id/users[](#post-batch-accounts-account-id-do-not-reach-lists-do-not-reach-list-id-users "Enlace permanente a este encabezado")

Este endpoint permite agregar, actualizar y eliminar usuarios de un `do_not_reach_list_id` dado. Este endpoint solo acepta correos electrónicos como tipo válido de identificador de usuario.

Todos los datos proporcionados en el campo `emails` de la solicitud deben estar con hash usando `SHA256` y [normalizados](/es/x-ads-api/audiences#e-mail-normalization).

**Notas**

- Un `account_id` solo puede tener como máximo una Lista de No Alcance
- Los usuarios agregados a esta lista **deben** tener una marca de tiempo `expires_at` establecida a menos de 13 meses desde la marca de tiempo actual
- La API de Lista de No Alcance no acepta una marca de tiempo `effective_at` y, de forma predeterminada, usa la marca de tiempo actual
- La Lista de No Alcance no elimina usuarios de ninguna audiencia personalizada de la cuenta, sino que actúa como segmentación de exclusión para todas las campañas que se publiquen para la cuenta

**Solicitudes por lotes**

- El tamaño máximo actual del lote es de `2500` **para este endpoint**. El tamaño del lote se determina por la cantidad de operaciones (`Update`/`Delete`) por solicitud. Por ejemplo, más de 2500 objetos de operación (`{"operation_type": "Update/Delete", [..] }`) en una sola matriz generan un error.
- El tamaño máximo del cuerpo de la solicitud POST que este endpoint puede aceptar es de `5,000,000` bytes.
- Los límites de tasa para este endpoint son 1500 por ventana de 1 minuto
- Todos los parámetros se envían en el cuerpo de la solicitud y se requiere un `Content-Type` de `application/json`.
- Las solicitudes por lotes fallan o tienen éxito juntas como grupo y todas las respuestas de la API, tanto de error como de éxito, preservan el orden de los elementos de la solicitud inicial.

**Respuestas por lotes**

La API de Anuncios devuelve una respuesta con dos campos: `success_count` y `total_count`. Estos valores siempre deben ser iguales y representan el conteo de registros de la solicitud que han sido procesados por el backend. Una situación en la que el número de registros enviados en el cuerpo de la solicitud **no** sea igual a `success_count` y `total_count` debe tratarse como una condición de error que requiere un reintento.

**Errores por lotes**

- Los errores a nivel de solicitud (p. ej., tamaño máximo de lote excedido) se muestran en la respuesta bajo el objeto `errors`.
- Los errores a nivel de elemento (p. ej., parámetros obligatorios faltantes) se muestran en la respuesta bajo el objeto `operation_errors`.
- El índice del error en `operation_errors` se refiere al índice del elemento de entrada, con el mensaje de error correspondiente

**URL del recurso[](#resource-url "Enlace permanente a este encabezado")**

`https://ads-api.x.com/12/batch/accounts/:account_id/do_not_reach_lists/:do_not_reach_list_id/users`

**Parámetros[](#parameters "Enlace permanente a este encabezado")**

| Nombre | Descripción |
| :--- | :--- |
| account\_id  <br />_obligatorio_ | El identificador de la cuenta utilizada. Aparece dentro de la ruta del recurso y, por lo general, es un parámetro obligatorio para todas las solicitudes de la API de Anunciantes, excepto [GET accounts](/es/x-ads-api/campaign-management#accounts). La cuenta especificada debe estar asociada con el usuario autenticado.<br /><br />Tipo: string<br /><br />Ejemplo: `18ce54d4x5t` |
| do\_not\_reach\_list\_id  <br />_obligatorio_ | Una referencia a la Lista de No Alcance con la que está operando en la solicitud<br /><br />Tipo: string<br /><br />Ejemplo: `2906h` |
| operation\_type  <br />_obligatorio_ | El tipo de operación por grupo `users` que se está realizando.<br /><br />Tipo: enum<br /><br />Valores posibles: `Update`, `Delete` |
| params  <br />_obligatorio_ | Un objeto JSON que contiene la matriz `emails` y la marca de tiempo `expires_at`.<br /><br />Tipo: JSON |
| users  <br />_obligatorio_ | Una matriz de objetos JSON que contiene todos los parámetros para un usuario individual.<br /><br />Tipo: JSON |
| expires\_at  <br />_opcional_ | La hora UTC a la que debe expirar la(s) asociación(es) del usuario. La hora especificada debe ser posterior al valor de la marca de tiempo actual. Expresada en [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). De forma predeterminada, es 13 meses desde la marca de tiempo actual.<br /><br />Tipo: string<br /><br />Ejemplo: `2017-07-05T07:00:00Z` |

Dado el enfoque de múltiples claves para el objeto `users`, cada elemento de este objeto se documenta a continuación:

| Nombre | Descripción |
| :--- | :--- |
| email  <br />_opcional_ | Direcciones de correo electrónico del usuario.<br /><br />Tipo: Array\[String] |
| phone\_number  <br />_opcional_ | Números de teléfono del usuario.<br /><br />Tipo: Array\[String] |

**Ejemplo de solicitud[](#example-request "Permalink to this headline")**

```
`POST https://ads-api.x.com/12/batch/accounts/18ce54bgxky/do_not_reach_lists/4kzro/users`

    [
      {
        "operation_type": "Update",
        "params": {
          "expires_at": "2023-01-22T00:00:00Z",
          "users": [
            {
              "email": [
                "FEAD76F6ADF99FFFB997AA4E3C8AD38FF531BC4C956DBD03CD0163F744D8AABC"
              ],
              "phone_number": [
                "CCABF1B62A202E0FE28BC6C014983C89A65451DD4482BD66A0ADB65366F38A9A"
              ]
            },
            {
              "email": [
                "FEAD76F6ADF99FFFB997AA4E3C8AD38FF531BC4C956DBD03CD0163F744D8AABA"
              ],
              "phone_number": [
                "CCABF1B62A202E0FE28BC6C014983C89A65451DD4482BD66A0ADB65366F38A9E"
              ]
            }
          ]
        }
      }
    ]
```

**Ejemplo de respuesta[](#example-response "Permalink to this headline")**

```
    {
      "data": [
        {
          "success_count": 2,
          "total_count": 2
        }
      ],
      "request": [
        {
          "params": {
            "do_not_reach_list_id": "4ofrq",
            "expires_at": "2023-01-22T00:00:00Z",
            "account_id": "18ce54bgxky"
          },
          "operation_type": "Update"
        }
      ]
    }
```

#### DELETE accounts/:account\_id/do\_not\_reach\_lists/:do\_not\_reach\_list\_id[](#delete-accounts-account-id-do-not-reach-lists-do-not-reach-list-id "Permalink to this headline")

Elimina la Lista de No Alcance especificada que pertenece a la cuenta actual.

**URL del recurso[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists/:do_not_reach_list_id`

**Parámetros[](#parameters "Permalink to this headline")**

Ninguno

**Ejemplo de solicitud[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists/4ofrp`

**Ejemplo de respuesta[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "do_not_reach_list_id": "4ofrp",
          "account_id": "18ce54bgxky"
        }
      },
      "data": {
        "targetable": false,
        "name": "Do Not Reach List",
        "description": null,
        "id": "4ofrp",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2022-02-08T23:02:07Z",
        "list_size": null,
        "updated_at": "2022-02-08T23:02:21Z",
        "deleted": true
      }
    }
```