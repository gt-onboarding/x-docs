---
title: Obtener publicaciones históricas con el endpoint de Búsqueda de archivo completo de la API v2
mode: wide
---

<div id="introduction">
  ## Introducción
</div>

Los [endpoints de Search Posts](/es/x-api/posts/search/introduction)
en el entorno de la v2 te permiten recibir publicaciones relacionadas con temas de interés,
basadas en una consulta de búsqueda que generes. Tenemos dos endpoints diferentes
disponibles con la v2 de Search Posts: búsqueda reciente, que está disponible para todos los
desarrolladores con una cuenta aprobada y puede buscar publicaciones de hasta siete días
de antigüedad, y búsqueda de archivo completo, que solo está disponible para
investigadores aprobados para el
[programa Academic Research](https://developer.x.com/en/products/x-api/early-access/guide#na_2),
y que puede buscar en todo el archivo de publicaciones desde marzo de 2006.

Puedes ver nuestra oferta completa de búsqueda en nuestra
[página de introducción a la búsqueda](/es/x-api/posts/search/introduction).

Estos endpoints de Search Posts cubren uno de los casos de uso más comunes para
investigadores académicos, quienes podrían usarlos para estudios longitudinales o para analizar
un tema o evento pasado.

Este tutorial proporciona una guía paso a paso para investigadores que deseen usar el
endpoint de búsqueda de archivo completo para consultar el historial completo de datos públicos de X.
También mostrará las diferentes formas de crear un conjunto de datos, por ejemplo
recuperando publicaciones con geotags, y cómo paginar por las publicaciones disponibles para una
consulta.

<div id="prerequisites">
  ### Requisitos previos
</div>

Actualmente, este endpoint solo está disponible como parte del
[producto para Investigación Académica](https://developer.x.com/en/solutions/academic-research/products-for-researchers).
Para usar este endpoint, debes
[solicitar acceso](https://developer.x.com/en/portal/petition/academic/is-it-right-for-you).
Obtén más información sobre la
[solicitud y los requisitos para este producto](https://developer.x.com/en/solutions/academic-research/application-info).

<div id="connect-an-app-to-the-academic-project">
  ### Conectar una App al proyecto académico
</div>

Una vez que se le apruebe el uso del producto Academic Research, verá
su [Proyecto](/es/resources/fundamentals/projects) académico en el
[portal para desarrolladores](https://developer.x.com/en/portal/dashboard). En la sección
“Projects and Apps”, haga clic en “Add App” para conectar su
[App de X](/es/resources/fundamentals/developer-apps) al Proyecto.

[](https://res.cloudinary.com/practicaldev/image/fetch/s--gHFOyuDc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/gb7aevhqyfvfjznd0pnd.png)

![Esta imagen muestra un Proyecto Académico en el portal para desarrolladores que aún no tiene una App agregada](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-1.png.twimg.1920.png)

Luego, puede elegir una App existente y conectarla a su proyecto (como se muestra
a continuación).

![Esta imagen muestra la página que aparece cuando intenta agregar una App a su Proyecto Académico](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-2.png.twimg.1920.png)

O puede crear una App nueva, asignarle un nombre y hacer clic en “Complete” para
conectar una App nueva a su Proyecto Académico.

![Esta imagen muestra la página donde ingresará un nombre para su nueva App o le permite seleccionar una App existente](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-3.png.twimg.1920.png)

Esto le proporcionará sus claves de API y el
[Bearer Token](/es/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token), que luego podrá
usar para conectarse al endpoint de búsqueda de archivo completo.

![Esta imagen muestra la página que se le presenta después de crear una App nueva y que muestra sus claves y tokens](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-4.png.twimg.1920.png)

**Tenga en cuenta**

Las claves en la captura de pantalla anterior están ocultas, pero en su propio
portal para desarrolladores podrá ver los valores reales de la API Key, la API Secret Key y el
Bearer Token. Guarde estas claves y el Bearer Token porque las necesitará para
invocar el endpoint de búsqueda de archivo completo.

<div id="connecting-to-the-full-archive-search-endpoint">
  ### Conexión al endpoint de búsqueda de archivo completo
</div>

El siguiente comando cURL muestra cómo obtener publicaciones históricas del handle @XDevelopers. Reemplaza $BEARER\_TOKEN por tu propio Bearer Token, pega la solicitud completa en tu terminal y presiona “Enter”.

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Verás el JSON de respuesta.

De forma predeterminada, solo se devolverán las 10 publicaciones más recientes. Si deseas más de 10 publicaciones por solicitud, puedes usar el parámetro max\_results y establecerlo en un máximo de 500 publicaciones por solicitud, como se muestra a continuación:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

Creación de consultas

Como se muestra en los ejemplos de llamadas anteriores, usando el parámetro query puedes
especificar los datos que deseas buscar. Por ejemplo, si quisieras
obtener todas las publicaciones que contengan la palabra _covid_ o la palabra _coronavirus_, puedes
usar el operador OR entre paréntesis; tu consulta puede ser
`(covid OR coronavirus)` y tu llamada a la API se verá así:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=(covid%20OR%20coronavirus)&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

De manera similar, si quieres todas las publicaciones que contengan la palabra _covid19_ y que no sean
republicaciones, puedes usar el operador is:retweet con la negación lógica (representada
por -), por lo que tu consulta puede ser covid19 -is:retweet y tu llamada a la API será:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=covid19%20-is:retweet&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Consulta
[esta guía para una lista completa de operadores](/es/x-api/posts/search/integrate/build-a-query)
compatibles con el endpoint de búsqueda de archivo completo.

### Uso de los parámetros start\_time y end\_time para obtener publicaciones históricas

Al usar el endpoint de búsqueda de archivo completo, de forma predeterminada se devolverán las publicaciones de los últimos 30 días. Si desea obtener publicaciones de más de 30 días, puede usar los parámetros start\_time y end\_time en su llamada a la API. Estos parámetros deben estar en un formato de fecha y hora RFC3339 válido, por ejemplo, 2020-12-21T13:00:00.00Z. Así, si desea obtener todas las publicaciones de la cuenta XDevelopers para el mes de diciembre de 2020, su llamada a la API será:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:XDevelopers&start_time=2020-12-01T00:00:00.00Z&end_time=2021-01-01T00:00:00.00Z' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

Obtención de publicaciones históricas con geotag

Las publicaciones con geotag son aquellas que tienen información geográfica asociada, como ciudad, estado, país, etc.

<div id="using-hasgeo-operator">
  #### Uso del operador has:geo
</div>

Si desea obtener publicaciones que incluyan datos de geolocalización, puede usar el operador has:geo.
Por ejemplo, la siguiente solicitud de cURL obtendrá solo aquellas publicaciones del
usuario @XDevelopers que tienen datos de geolocalización:

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20has:geo' --header
'Authorization: Bearer $BEARER_TOKEN'
```

#### Uso del operador place\_country

De manera similar, puedes limitar las publicaciones que tienen datos geográficos a un país específico usando
el operador place\_country. El siguiente comando cURL obtendrá todas las publicaciones del
handle @XDevelopers de Estados Unidos:

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20place_country:US'
--hbasheader 'Authorization: Bearer XXXXX'
```

El país se especifica arriba usando el código ISO alfa-2 de dos letras. Los códigos ISO válidos se pueden encontrar [aquí](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).

### Obtener más de 500 publicaciones históricas usando el next\_token

Como se mencionó anteriormente, de forma predeterminada solo puede obtener hasta 500 publicaciones por solicitud en
una consulta al endpoint de búsqueda de archivo completo. Si hay más de 500 publicaciones
disponibles para su consulta, su respuesta JSON incluirá un next\_token que
puede agregar a su llamada a la API para obtener las siguientes publicaciones disponibles para esta
consulta. Este next\_token está disponible en el objeto meta de su respuesta JSON,
que se ve así:

```
{ "newest_id": "12345678...", "oldest_id": "12345678...", "result_count": 500,
"next_token": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" }
```

Por lo tanto, para obtener las siguientes publicaciones disponibles, use el valor de next\_token de este objeto meta
y utilícelo como valor de next\_token en su llamada a la API al
endpoint de búsqueda de archivo completo como se muestra a continuación (utilizará su propio Bearer Token
y el valor que obtenga para el next\_token de su llamada a la API anterior).

```
curl --request GET
'https://api.x.com/2/tweets/search/all?max_results=500&query=covid&next_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
--header 'Authorization: Bearer $BEARER_TOKEN'
```

De esta manera, puede seguir verificando si hay un next\_token disponible y, si no ha
alcanzado la cantidad deseada de publicaciones a recopilar, puede seguir llamando al
endpoint de archivo completo con el nuevo next\_token en cada solicitud. Tenga en cuenta
que el endpoint de búsqueda de archivo completo cuenta para su
[Límite de publicaciones](/es/x-api/fundamentals/post-cap); es decir, la cantidad de
publicaciones por mes que puede obtener de la API de X por
[Proyecto](/es/resources/fundamentals/projects). Por ello, tenga en cuenta la lógica de su código al paginar
por los resultados para asegurarse de no agotar inadvertidamente su límite de publicaciones.

A continuación se muestran algunos recursos que pueden ayudarle cuando use el endpoint de
búsqueda de archivo completo. Nos encantaría conocer sus comentarios. Comuníquese con nosotros en
[@XDevelopers](https://x.com/XDevelopers) o en nuestros
[foros de la comunidad](https://devcommunity.x.com/) con preguntas sobre este
endpoint.

<div id="additional-resources">
  ### Recursos adicionales
</div>

- [Referencia de la API del endpoint de búsqueda de archivo completo](/es/x-api/posts/full-archive-search)
- [Aprende los conceptos básicos para crear una consulta de búsqueda](/es/x-api/posts/search/integrate/build-a-query)