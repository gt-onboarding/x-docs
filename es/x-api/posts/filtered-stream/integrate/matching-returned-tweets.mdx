---
title: Correspondencia de publicaciones con reglas
sidebarTitle: Correspondencia de publicaciones con reglas
---

<div id="matching-returned-posts-to-their-associated-rule">
  ### Hacer coincidir las Publicaciones devueltas con su regla asociada
</div>

El endpoint de Flujo filtrado le permite definir múltiples reglas mediante una sola conexión. Antes de comenzar a recibir Publicaciones en su flujo, deberá crear una regla que especifique qué tipos de Publicaciones le interesan.

Cuando defina reglas para hacer coincidir Publicaciones según una amplia variedad de atributos (incluidos atributos de usuario, geolocalización, idioma y otros), puede adjuntar una etiqueta para distinguir esa regla a un nivel superior. Las etiquetas son una buena forma de contextualizar su regla, especialmente si tiene muchas reglas activas. Las reglas de filtrado determinan qué actividades de Publicación se enviarán a través de la conexión.

Si necesita agregar una nueva regla de filtrado para capturar un tipo diferente de Publicación o eliminar una regla existente, su app puede enviar una solicitud al endpoint [POST tweets/search/stream/rules](/es/x-api/posts/filtered-stream#post-2-tweets-search-stream-rules) para hacerlo. Cuando se envía esa solicitud, las reglas de filtrado se modifican automáticamente y los cambios surten efecto en el flujo de datos sin necesidad de volver a conectar. La mayoría de las nuevas reglas entran en vigor en aproximadamente 20 segundos o menos. Es poco probable, pero dependiendo de factores externos (por ejemplo, la conectividad de red), podría tomar más tiempo antes de que comience a recibir Publicaciones coincidentes. Si no encuentra una regla en el endpoint de listado de reglas, asegúrese de que la solicitud de creación de la regla haya sido exitosa; puede verificarlo revisando sus logs en busca de mensajes de error.

<div id="matching-rules">
  #### Reglas de coincidencia
</div>

Cuando una actividad se entrega a través de tu conexión del Flujo filtrado, en un array matching\_rules se incluye la lista de filtros que coincidieron con la Publicación entregada.

En la carga útil de la Publicación hay metadatos de texto adicionales que incluyen el id de la regla y la etiqueta que provocaron la entrega de una Publicación específica. Si varias reglas coinciden con una sola Publicación, la actividad se entrega una sola vez con cada una de las reglas coincidentes incluidas en estos metadatos. Las reglas de coincidencia ofrecen una forma sencilla de asociar una Publicación específica con reglas específicas, lo cual es especialmente útil si tienes muchas reglas distintas. Dado que los datos se entregan a través de un único flujo de esta manera, es esencial asegurarte de que el id y la etiqueta sean únicos para poder hacer la coincidencia.

**Aquí tienes un ejemplo de cómo aparece el array “matching\_rules” en la carga útil de la Publicación:**

```"matching_rules": [
    {
      "id": "1166916266197536768",
      "tag": "test-rule-tag-00000"
    },
    {
      "id": "1166916266197536769",
      "tag": "test-rule-tag-12345"
    }
  ]
```

<div id="rule-tags">
  #### Etiquetas de reglas
</div>

Al crearlas, cada regla de filtrado puede incluir una etiqueta. Las etiquetas de reglas no tienen un significado especial: se tratan simplemente como cadenas opacas asociadas a la regla. Se incluirán en los metadatos matching\_rules de las actividades devueltas y están pensadas para facilitar la diferenciación de las reglas a un nivel superior.

Las etiquetas ofrecen una forma sencilla de crear agrupaciones lógicas de reglas de filtrado. Por ejemplo, puede generar un ID único como etiqueta de una regla específica y permitir que su app haga referencia a ese ID dentro de las actividades que procesa para asociar un resultado con clientes, campañas, categorías u otros grupos relacionados.

Tenga en cuenta que las etiquetas no se pueden actualizar en una regla existente y solo se pueden incluir al crearla. Para “actualizar” o “renombrar” una etiqueta, primero debe eliminar la regla y luego volver a agregarla con la etiqueta deseada. La mejor práctica es usar un identificador único como etiqueta, que su sistema pueda asociar con distintos puntos de datos dentro de su app, sin necesidad de cambiar nada en el conjunto de reglas.

<div id="filtered-stream-recovery-and-redundancy-features">
  ### Flujo filtrado - Funciones de recuperación y redundancia
</div>

<Note>
  Nota: Estas funciones de recuperación y redundancia solo están disponibles para quienes cuentan con acceso Enterprise.
</Note>