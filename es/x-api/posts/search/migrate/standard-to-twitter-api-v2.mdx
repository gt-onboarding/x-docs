---
title: de v1 a v2
sidebarTitle: de v1 a v2
---

<div id="standard-v11-compared-to-x-api-v2">
  ### Estándar v1.1 en comparación con la API de X v2
</div>

Si has estado trabajando con [search/posts](/es/x-api/posts/search/introduction) de la v1.1, el objetivo de esta guía es ayudarte a comprender las similitudes y diferencias entre el endpoint de búsqueda de Publicaciones estándar y el de la API de X v2.

- **Similitudes**
  - OAuth 1.0a en contexto de usuario y OAuth 2.0 solo para apps
  - Compatibilidad con el historial de edición de Publicaciones y metadatos.
- **Diferencias**
  - URL de endpoints

  - Requisitos de App y Proyecto

  - Formato de los datos de respuesta

  - Parámetros de la solicitud

  - Nuevos operadores de consulta

  - Precedencia de los operadores AND / OR 

<div id="similarities">
  #### Similitudes
</div>

**OAuth 1.0a en contexto de usuario y autenticación OAuth 2.0 solo para apps**

Los endpoints v1.1 search/posts y el endpoint de búsqueda reciente de la API de X v2 admiten tanto [OAuth 1.0a en contexto de usuario](/es/resources/fundamentals/authentication) como [OAuth 2.0 solo para apps](/es/resources/fundamentals/authentication#oauth-2-0).

Por lo tanto, si anteriormente utilizaba el endpoint estándar de búsqueda v1.1, puede seguir usando el mismo método de autenticación si migra a la versión de la API de X v2.

Según la biblioteca o paquete de autenticación que utilice, la autenticación solo para apps probablemente sea la forma más sencilla de empezar y se puede configurar con un encabezado de solicitud simple. Para aprender a generar un App Access Token, consulte esta [guía de OAuth 2.0 solo para apps](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only).

Si desea aprovechar la posibilidad de obtener métricas privadas o publicitarias con el endpoint de la API de X v2, deberá usar OAuth 1.0a en contexto de usuario y pasar los tokens de acceso del usuario que publicó la publicación para la cual desea obtener métricas.

**Compatibilidad con el historial de edición de publicaciones y metadatos**

Ambas versiones proporcionan metadatos que describen cualquier historial de edición. Consulte las [referencias del API de búsqueda](/es/x-api/posts/recent-search) y la [página de fundamentos sobre ediciones de publicaciones](/es/x-api/fundamentals/edit-posts) para obtener más detalles. 

<div id="differences">
  #### Diferencias
</div>

**URLs de endpoints**

- Endpoints estándar v1.1:
  - https://api.x.com/1.1/search/tweets

- Endpoint de la API de X v2:
  - https://api.x.com/2/tweets/search/recent
     

**Requisitos de App y Proyecto**

Los endpoints de la API de X v2 requieren que utilices credenciales de una [App de desarrollador](/es/resources/fundamentals/developer-apps) asociada a un [Proyecto](/es/resources/fundamentals/projects) al autenticar tus solicitudes. Todos los endpoints de la API de X v1.1 pueden usar credenciales de Apps independientes o de Apps asociadas a un Proyecto. 

**Formato de datos de respuesta**

Una de las mayores diferencias entre la versión estándar v1.1 y la versión de endpoint de la API de X v2 es cómo seleccionas qué campos se devuelven en tu payload.

Para los endpoints estándar, recibes muchos de los campos de respuesta de forma predeterminada y luego tienes la opción de usar parámetros para indicar qué campos o conjuntos de campos deben devolverse en el payload.

La versión de la API de X v2 solo entrega de forma predeterminada los campos id y text de la Publicación. Para solicitar campos u objetos adicionales, deberás usar los parámetros [fields](/es/x-api/fundamentals/fields) y [expansions](/es/x-api/fundamentals/expansions). Cualquier campo de Publicación que solicites desde estos endpoints se devolverá en el objeto principal de la Publicación. Cualquier objeto y campo expandido de usuario, media, encuesta o lugar se devolverá en un objeto includes dentro de tu respuesta. Luego puedes vincular cualquier objeto expandido con el objeto de la Publicación haciendo coincidir los IDs presentes tanto en la Publicación como en el objeto expandido. 

Te recomendamos leer más sobre estos nuevos parámetros en sus respectivas guías o consultando nuestra guía sobre [cómo usar fields y expansions](/es/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

También hemos elaborado una [guía de migración de formato de datos](/es/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) que puede ayudarte a mapear los campos estándar v1.1 a los más recientes de v2. Esta guía también te proporcionará el parámetro específico de expansión y de campo que deberás pasar con tu solicitud v2 para devolver campos específicos. 
 

Además de los cambios en cómo solicitas ciertos campos, la API de X v2 también introduce nuevos diseños JSON para los objetos devueltos por las APIs, incluidos los objetos [Post](/es/x-api/fundamentals/data-dictionary#tweet) y [user](/es/x-api/fundamentals/data-dictionary#user).

- En el nivel raíz de JSON, los endpoints estándar devuelven objetos de Publicación en un arreglo statuses, mientras que la API de X v2 devuelve un arreglo data. 
- En lugar de referirse a “statuses” Retweeted y Quoted, el JSON de la API de X v2 se refiere a Retweeted y Quoted Tweets. Muchos campos heredados y obsoletos, como contributors y user.translator\_type, se están eliminando. 
- En lugar de usar tanto favorites (en el objeto de Publicación) como favourites (en el objeto user), la API de X v2 usa el término like. 
- X adopta la convención de que los valores JSON sin valor (por ejemplo, null) no se escriben en el payload. Los atributos de Publicación y de usuario solo se incluyen si tienen valores no nulos. 
   

También incorporamos un nuevo conjunto de campos en el [objeto Post](/es/x-api/fundamentals/data-dictionary#tweet), incluidos los siguientes:

- Un campo [conversation\_id](/es/x-api/fundamentals/conversation-id)
- Dos nuevos campos de [annotations](/es/x-api/fundamentals/post-annotations), incluidos context y entities
- Varios campos nuevos de [metrics](/es/x-api/fundamentals/metrics) 
- Un nuevo campo reply\_setting, que muestra quién puede responder a una Publicación determinada

<div id="request-parameters">
  #### Parámetros de la solicitud
</div>

Los siguientes parámetros estándar de la solicitud v1.1 tienen equivalentes en la API de X v2:

| Búsqueda estándar v1.1 | Search Posts v2 |
| :--- | :--- |
| q   | query |
|     | start\_time (YYYY-MM-DDTHH:mm:ssZ) |
| until (YYYY-MM-DD) | end\_time (YYYY-MM-DDTHH:mm:ssZ) |
| since\_id | since\_id |
| max\_id | until\_id |
| count | max\_results |
| La respuesta proporciona search\_metadata.next\_results | next\_token |

También hay un conjunto de parámetros estándar de solicitud de búsqueda de Posts que **no** son compatibles en la API de X v2:

| **Parámetro estándar v1.1** | **Detalles** |
| :--- | :--- |
| geocode | Search Posts en el nivel de Acceso Básico no admite operadores geográficos. |
| locale | En la búsqueda estándar, se usaba para especificar el idioma de la consulta, pero nunca se implementó por completo. |
| lang | Los endpoints de Search Posts ofrecen un operador de consulta lang para filtrar por idiomas de interés. |
| include\_entities | Las entidades de la publicación siempre se incluyen. |
| result\_type | Los endpoints de Search Posts devuelven todas las publicaciones coincidentes, independientemente del nivel de interacción. |
| extended | La API de X v2 está diseñada desde cero para admitir publicaciones de hasta 280 caracteres. En v2, no existe el concepto de publicaciones “extendidas”. |

Aquí tienes un ejemplo de solicitud que muestra la diferencia entre una solicitud estándar y una solicitud de Search Posts:

|     |     |
| :--- | :--- |
| **Standard v1.1** | **API de X v2** |
| https://api.x.com/1.1/search/tweets.json?q=snow\&count=50 | https://api.x.com/2/tweets/search/recent?query=snow\&max\_results=50 |

Ambas solicitudes devolverán las 50 publicaciones más recientes que contienen la palabra clave snow. La solicitud de v2 devolverá los campos predeterminados id y text de las publicaciones coincidentes. Aquí tienes un ejemplo de cómo especificar campos adicionales de publicaciones y de usuario para incluir en la carga útil JSON:

|     |
| :--- |
| **API de X v2** |
| https://api.x.com/2/tweets/search/recent?query=snow\&max\_results=50\&tweet.fields=id,created\_at,author\_id,text,source,entities,attachments\&user.fields=id,name,username,description |

**Nuevos operadores de consulta**

Search Posts introduce nuevos operadores en apoyo de dos funciones nuevas de la API de X v2:

- **[Conversation IDs](/es/x-api/fundamentals/conversation-id)** - A medida que se desarrollan las conversaciones en X, habrá disponible un Conversation ID para marcar las publicaciones que forman parte de la conversación. Todas las publicaciones de la conversación tendrán su conversation\_id establecido en el ID de la publicación que la inició.
  - `conversation_id:`
- **[X Annotations](/es/x-api/fundamentals/post-annotations)** proporcionan información contextual sobre las publicaciones e incluyen anotaciones de entidad y de contexto. Las entidades se componen de personas, lugares, productos y organizaciones. Los contextos son dominios o temas de los que forman parte las entidades detectadas. Por ejemplo, las personas mencionadas en una publicación pueden tener un contexto que indique si son deportistas, actores o políticos.
  - context: coincide con publicaciones que han sido anotadas con un contexto de interés.
  - entity: coincide con publicaciones que han sido anotadas con una entidad de interés. 

     

#### Precedencia de los operadores AND / OR 

El elemento básico para crear consultas de búsqueda es el uso de agrupaciones lógicas OR y AND. La API de búsqueda estándar aplica los OR antes que los AND, mientras que los endpoints de Search Posts (así como las versiones premium y enterprise) aplican los AND antes que los OR. Esta diferencia es fundamental al traducir consultas entre ambas. 

Por ejemplo, con la búsqueda estándar, si quisiera encontrar publicaciones que contengan la palabra clave ‘storm’ y mencionen la palabra ‘colorado’ o el hashtag #COwx, podría hacerlo con la siguiente consulta de búsqueda:

storm #COwx OR colorado

Con la precedencia de operadores de Search Posts, los AND se aplican antes que los OR. Así que la consulta anterior es equivalente a: 

(storm #COwx) OR colorado

Sin embargo, la regla anterior coincidiría con cualquier publicación que mencione ‘Colorado’, independientemente de si la publicación menciona ‘storm’ o el hashtag #COwx. Además, también coincidiría con publicaciones que mencionaran tanto la palabra clave ‘storm’ como el hashtag #COwx. 

Para que la consulta se comporte como se pretendía originalmente, las cláusulas OR deben agruparse. La traducción de la consulta estándar original a Search Posts sería:

storm (#COwx OR colorado)

Estas dos reglas tienen un comportamiento de coincidencia muy diferente. Para el mes de octubre de 2019, la regla original coincide con más de 1,175,000 publicaciones, mientras que la regla correctamente traducida coincide con alrededor de 5,600 publicaciones. Asegúrese de tener en cuenta sus AND y OR, y use paréntesis cuando sea necesario. 

<div id="curl-requests">
  #### Solicitudes cURL
</div>

**La siguiente sección muestra solicitudes cURL para el endpoint estándar v1.1 y su endpoint equivalente en v2.**

Las solicitudes se realizan usando \[OAuth 2.0 App-Only]\(https://developer.x.com(/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token). Para ejecutar las siguientes solicitudes cURL, debe reemplazar ACCESS\_TOKEN en el encabezado Authorization por el token de acceso de su app. Para los endpoints de v2, el token de acceso de su app debe pertenecer a una [App de desarrollador](/es/resources/fundamentals/developer-apps/overview) dentro de un [Proyecto](/es/resources/fundamentals/projects/overview). 

La carga útil (payload) de la respuesta devuelta por el endpoint v1.1 será diferente de la devuelta por el endpoint v2. Con v2, la respuesta incluirá los campos predeterminados, además de cualquier otro campo solicitado con los parámetros [fields](/es/x-api/fundamentals/fields) y [expansions](/es/x-api/fundamentals/expansions). Puede usar estos parámetros para solicitar un conjunto distinto de campos a devolver.

**Endpoints estándar v1.1 [GET search/tweets](https://developer.x.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets) y v2 [GET tweets/search/recent](/es/x-api/posts/recent-search)**

```bash
      curl --request GET \
  --url 'https://api.x.com/1.1/search/tweets.json?q=from%3ATwitterDev%20-is%3Aretweet&count=100' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

```bash
      curl --request GET \
  --url 'https://api.x.com/2/tweets/search/recent?query=from%3ATwitterDev%20-is%3Aretweet&tweet.fields=created_at%2Cconversation_id%2Centities&max_results=100' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

**Próximos pasos**

[Consulte nuestra guía de inicio rápido para la búsqueda reciente de la API de X v2](/es/x-api/posts/search/quickstart/recent-search)

[Revise la referencia de la API para la búsqueda reciente](/es/x-api/posts/recent-search)

[Consulte código de ejemplo para estos endpoints](https://github.com/xdevplatform/Twitter-API-v2-sample-code "Consulte código de ejemplo para estos endpoints")

[Guía paso a paso para realizar su primera solicitud a la búsqueda reciente](/es/x-api/getting-started/make-your-first-request "Guía paso a paso para realizar su primera solicitud a la búsqueda reciente")