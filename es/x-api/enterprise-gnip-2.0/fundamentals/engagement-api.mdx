---
title: API de interacción
---

<div id="overview">
  ## Descripción general
</div>

[`Enterprise`](https://developer.x.com/en/products/x-api/enterprise)

_Esta es una API para empresas disponible únicamente dentro de nuestros niveles de acceso gestionados. Para usar esta API, primero debe crear una cuenta con nuestro equipo de ventas para empresas. [Más información](/es/x-api/enterprise-gnip-2.0/enterprise-gnip)_

La Engagement API proporciona acceso a métricas de impresiones y de interacción de publicaciones. Aunque la mayoría de las métricas y los endpoints requieren autenticación mediante [OAuth 1.0a User Context](/es/resources/fundamentals/authentication), puede acceder a las métricas públicas de Me gusta, Retuits, Respuestas y Reproducciones de video usando [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#oauth-2-0) y el endpoint /totals.  

**Nota:** Es posible que observe diferencias entre los datos mostrados en algunos paneles web de X y los datos reportados por la Engagement API. Estas diferencias se deben a que los paneles web suelen mostrar únicamente las interacciones y/o impresiones que ocurrieron dentro del rango de tiempo seleccionado. Por ejemplo, un panel web puede mostrar interacciones en publicaciones dentro del lapso de un mes calendario, mientras que la Engagement API puede mostrar interacciones que quedan fuera de ese mes, pero dentro del rango de tiempo solicitado. En estos casos, la Engagement API debe considerarse la fuente válida.
 

<div id="request-endpoints">
  ### Endpoints de solicitud
</div>

La API de Engagement tiene tres endpoints:

#### Totales actuales: \[/totals]

- Las solicitudes devuelven una métrica total de impresiones y una métrica total de interacciones para las publicaciones deseadas
- Limitado a las siguientes métricas: impresiones, interacciones, me gusta, respuestas, retuits, citas y reproducciones de video
- Permite recuperar métricas de **impresiones** e **interacciones** para publicaciones creadas **en los últimos 90 días** usando OAuth 1.0a User Context
- Permite recuperar métricas de **me gusta, retuits, citas, respuestas** y **reproducciones de video** para **cualquier publicación** usando un token portador de OAuth 2.0
- Los resultados se basan en el total actual de impresiones e interacciones en el momento en que se realiza la solicitud
- Ideal para impulsar un panel de control y para calcular tasas de interacción en una variedad de @handles
- Permite solicitar métricas para hasta 250 publicaciones por solicitud
   

#### Últimas 28 horas: \[/28hr]

- Las solicitudes pueden devolver una métrica total de impresiones, una métrica total de interacciones y un desglose de métricas de interacción individuales ocurridas en las últimas 28 horas
- Los datos se pueden agrupar por ID de publicación y, en series temporales agregadas, por día o por hora
- Ideal para hacer seguimiento del rendimiento del contenido creado recientemente
- Compatible con todas las métricas disponibles
- Permite solicitar métricas para hasta 25 publicaciones por solicitud
   

#### Histórico: \[/historical]

- Las solicitudes pueden devolver impresiones, interacciones y un desglose de métricas de interacción individuales del último año, basadas en la hora de la interacción (no en la creación de la publicación).
- Las solicitudes admiten parámetros de fecha de inicio y fecha de fin, lo que aporta flexibilidad para acotar un periodo específico de hasta 4 semanas de duración.
- Los datos de interacción de publicaciones se limitan a 365 días hacia atrás.
- Los datos pueden agruparse por ID de publicación y, en series temporales agregadas, por día o por hora.
- Ideal para evaluar el rendimiento reciente frente a un punto de referencia histórico o para desarrollar una visión histórica del rendimiento de un @handle.
- Admite todas las métricas disponibles.
- Permite solicitar métricas para hasta 25 publicaciones por solicitud.

<div id="available-metrics">
  ### Métricas disponibles
</div>

La siguiente tabla describe los tipos de métricas a los que se puede acceder mediante la Engagement API.

Consulta nuestra [página sobre la interpretación de las métricas](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#interpreting-the-metrics) para obtener más información sobre las métricas indicadas a continuación.

| Métrica | Disponibilidad del endpoint | Requiere contexto de usuario | Descripción |
| :--- | :--- | :--- | :--- |
| impressions | Todas | Sí | Recuento de cuántas veces se ha visto la Publicación. Esta métrica solo está disponible para Publicaciones que se hayan publicado en los últimos 90 días. |
| engagements | Todas | Sí | Recuento del número de veces que un usuario ha interactuado con la Publicación. Esta métrica solo está disponible para Publicaciones que se hayan publicado en los últimos 90 días. |
| favorites | Todas | Sí - /28hrs y /Historical<br /><br />No - /totals | Recuento de cuántas veces se ha marcado como favorita la Publicación. |
| retweets | Todas | Sí - /28hrs y /Historical<br /><br />No - /totals | Recuento de cuántas veces se ha retuiteado la Publicación. |
| quote\_tweets | /totals | No - /totals | Recuento de las veces que una Publicación ha sido retuiteada con un comentario (también conocido como Cita). |
| replies | Todas | Sí - /28hrs y /Historical<br /><br />No - /totals | Recuento de cuántas veces se ha respondido a la Publicación. |
| video\_views | Todas | Sí - /28hrs y /Historical<br /><br />No - /totals | Recuento de cuántas veces un video en la Publicación indicada ha estado visible en un 50% durante al menos dos segundos.<br /><br />Las visualizaciones de video solo están disponibles para Publicaciones de 1800 días o menos. Si intenta solicitar visualizaciones de video para cualquier Publicación de más de 1800 días, recibirá el siguiente objeto en su respuesta, junto con un objeto aparte que contiene cualquier otra métrica que haya solicitado:<br /><br />"unsupported\_for\_video\_views\_tweet\_ids": \["TWEET\_ID"]<br /><br />Nota: Puede observar una discrepancia entre la métrica de visualizaciones de video mostrada en las plataformas de X (aplicación móvil y sitio web) y el número que recibe a través de los endpoints /28hr y /historical.  <br /><br />\*   Las visualizaciones de video mostradas en la interfaz de usuario de X y con el endpoint /totals presentan la métrica agregada del video en todas las Publicaciones en las que se haya publicado dicho video. Es decir, la métrica mostrada en la IU incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido retuiteado o vuelto a publicar en Publicaciones distintas. Esta métrica no incluye visualizaciones de video en GIF.<br />\*   Las visualizaciones de video proporcionadas por los endpoints /28hr y /historical solo incluyen las generadas por la Publicación específica para la que está obteniendo métricas. Esta métrica no incluye visualizaciones de video en GIF. |
| media\_views | /28hr /historical | Sí | Recuento de todas las visualizaciones (autorreproducción y por clic) de su contenido multimedia, contabilizadas en videos, GIF e imágenes. |
| media\_engagements<br /><br />([antes Media Clicks](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#recent-changes-to-the-engagement-api)) | /28hr /historical | Sí | Recuento de cuántas veces se ha hecho clic en contenido multimedia, como una imagen o un video, en la Publicación. |
| url\_clicks | /28hr /historical | Sí | Recuento de cuántas veces se ha hecho clic en una URL en la Publicación. |
| hashtag\_clicks | /28hr /historical | Sí | Recuento de cuántas veces se ha hecho clic en un hashtag en la Publicación. |
| detail\_expands | /28hr /historical | Sí | Recuento de cuántas veces se ha hecho clic en la Publicación para ver más detalles. |
| permalink\_clicks | /28hr /historical | Sí | Recuento de cuántas veces se ha hecho clic en el enlace permanente de la Publicación (la página web individual dedicada a esta Publicación). |
| app\_install\_attempts | /28hr /historical | Sí | Recuento de cuántas veces se ha producido un evento de instalación de app desde la Publicación. |
| app\_opens | /28hr /historical | Sí | Recuento de cuántas veces se ha producido un evento de apertura de app desde la Publicación. |
| email\_tweet | /28hr /historical | Sí | Recuento de cuántas veces la Publicación se ha compartido por correo electrónico. |
| user\_follows | /28hr /historical | Sí | Recuento de cuántas veces se ha seguido al usuario (autor de la Publicación) desde esta Publicación. || user\_profile\_clicks | /28hr /historical | Sí | Número de veces que se hizo clic en el perfil del Usuario (autor de la Publicación) desde esta Publicación. |

<div id="engagement-groupings">
  ### Agrupaciones de interacción
</div>

Las agrupaciones permiten organizar de forma personalizada las métricas de interacción devueltas. Puede incluir un máximo de 3 agrupaciones por solicitud. Puede optar por agrupar las métricas por uno o más de los siguientes valores:

_Los tres endpoints admiten:_

- tweet.id
- engagement.type
   

_Los endpoints `/28hr` y `/historical` pueden proporcionar métricas de series temporales y, por lo tanto, admiten:_

- engagement.day
- engagement.hour

Para obtener más información sobre las agrupaciones, visite la página [Engagement API Grouping](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) en la sección de guías.

<div id="guides">
  ## Guías
</div>

<div id="developer-getting-started-guide">
  ### Guía de introducción para desarrolladores
</div>

<div id="introduction">
  #### Introducción
</div>

El propósito de esta documentación es brindar a los desarrolladores una introducción a la integración con la Engagement API. Comenzaremos por explicar los motivos para integrar y luego profundizaremos en los detalles técnicos sobre cómo hacerlo.

<div id="what-does-the-engagement-api-provide">
  ##### **¿Qué ofrece la Engagement API?**
</div>

- La Engagement API proporciona datos de impresiones e interacción de las Publicaciones propias de cualquier cuenta de X de los últimos 90 días, siempre que esa cuenta haya autorizado tu App para solicitar métricas en su nombre mediante [OAuth con 3 partes](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow). Esta solución potente y fácil de implementar ofrece acceso inmediato a impresiones e interacciones en profundidad como clics en URL, clics en hashtags y muchas más.
- La Engagement API proporciona métricas agregadas totales de favoritos, Retweets, Tweets con cita, respuestas y reproducciones de video para cualquier Publicación. Esto puede utilizarse como una forma eficaz de obtener datos básicos de interacción sobre cualquier Publicación o conjunto de Publicaciones.
- La Engagement API aporta nuevo valor a las plataformas de social listening, marketing y publicación al permitir que los clientes midan el ROI en X evaluando el rendimiento del contenido con más de 15 métricas de desempeño.
- La Engagement API es una API de solicitud/respuesta que permite a los desarrolladores de apps enviar solicitudes con IDs de Publicación, métricas deseadas y un intervalo de tiempo, para lo cual la API devuelve los datos de forma instantánea.
   

<div id="why-integrate-example-use-cases">
  ##### **¿Por qué integrar? Casos de uso de ejemplo**
</div>

- Comprenda el alcance total de su contenido para ver cuántas personas lo ven. Vea cuántas personas reproducen videos, hacen clic en enlaces, interactúan con hashtags o instalan mis apps.
- Genere métricas de interacción tanto totales como de series temporales.
- Comprenda métricas básicas de interacción (Me gusta, Retweets, Citas, respuestas) sobre cualquier Publicación pública.
- Use estas métricas para determinar qué tipos de Publicaciones funcionan, de modo que pueda publicarlas con más frecuencia y obtener más impresiones y más interacciones para mi contenido.
- Automatice acciones de marketing (como hacer Retweet de contenido desde otra cuenta propia) cada vez que una de mis Publicaciones alcance 100 Me gusta u otro umbral.
- Compare y evalúe mis campañas entre sí como herramienta para pruebas A/B.
- Analice qué tipo de contenido genera resonancia para mi departamento de atención al cliente para determinar cómo y cuándo responder.
- Muestre analítica para el contenido que se publica desde mi plataforma.
   

La [Engagement API se lanzó en 2016](https://blog.x.com/official/en_us/a/2016/gnip-s-engagement-api-is-now-generally-available.html) y fue la primera API de X en proporcionar estas métricas de interacción en profundidad a escala. La Engagement API es fácil de usar y permite a los clientes automatizar el proceso. Aquí hay un estudio de caso que describe una integración de ejemplo:

- [Medición del éxito de la campaña con la Cruz Roja](https://blog.x.com/developer/en_us/topics/spotlight/2016/measuring-campaign-success-with-the-red-cross.html)[](https://simplymeasured.com/blog/true-twitter-impressions-and-url-clicks-new-from-simply-measured/#sm.0007werel134td8zqf02m2mduumr6)

Ahora que hemos explorado los “porqués” de la Engagement API, comencemos a profundizar en los detalles técnicos.

<div id="integrating-the-engagement-api">
  #### Integración de la API de interacción
</div>

<div id="introduction-to-api">
  ##### **Introducción a la API**
</div>

La Engagement API es una API RESTful sencilla que recibe solicitudes codificadas en JSON y responde con métricas de interacción codificadas en JSON. Las solicitudes constan de tres partes principales (consulta los enlaces para más documentación):

- Matriz de **_IDs de publicaciones_**.
- Matriz que especifica los [tipos de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes) de interés. Los tipos incluyen elementos como “impressions”, “retweets”, “hashtag\_clicks” y “user\_follows”.
- [Agrupaciones de interacción](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings), que es una estructura JSON que indica cómo deseas que se organicen los datos de interacción en la respuesta de la API.

En muchas situaciones, los tipos de interacción y las agrupaciones se mantienen relativamente constantes de una solicitud a otra, actualizándose únicamente los IDs de publicaciones.

La Engagement API proporciona [tres endpoints](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#RequestEndpoints):

- **Totals** - Proporciona totales generales de interacciones para publicaciones. Algunas métricas están disponibles para todas las publicaciones, mientras que otras solo están disponibles para los últimos 90 días.
- **28 hour** - Proporciona métricas de interacción en series temporales de las últimas 28 horas.
- **Historical** - Proporciona métricas de interacción en series temporales de hasta cuatro semanas consecutivas para publicaciones realizadas desde el 1 de septiembre de 2014.

El endpoint **/totals** permite solicitar métricas para hasta **250 publicaciones por solicitud**. Los endpoints **/28hour** y **/historical** permiten **25 por solicitud**.

Después de hablar sobre cómo obtener acceso a la Engagement API, recorreremos la realización de una solicitud a la API, ofreceremos una descripción general de OAuth y proporcionaremos enlaces a otros recursos técnicos.

<div id="getting-api-access">
  ##### **Obtención de acceso a la API**
</div>

Si está leyendo este documento, lo más probable es que ya tenga acceso a la Engagement API. Si no, póngase en contacto con su gerente de cuenta Enterprise o solicite acceso Enterprise [aquí](/es/x-api/enterprise-gnip-2.0/enterprise-gnip).

El primer paso es crear una [app de X](/es/resources/fundamentals/developer-apps) usando una cuenta de desarrollador aprobada a través del [portal para desarrolladores](/es/resources/fundamentals/developer-portal). Su gerente de cuenta necesitará el ID numérico de la app asociado con esta aplicación para otorgarle acceso. Si necesita solicitar una cuenta de desarrollador, puede hacerlo [aquí](/es/resources/fundamentals/developer-apps).

<div id="making-a-request">
  ##### **Realizar una solicitud**
</div>

La buena noticia es que hacer solicitudes a la Engagement API es sencillo. En nuestra solicitud, pediremos los Retuits totales, Tweets con cita, Favoritos y respuestas de las siguientes dos Publicaciones de [@XDevelopers](https://x.com/XDevelopers):

> 1/ Hoy compartimos nuestra visión para el futuro de la plataforma de la API de X![https://t.co/XweGngmxlP](https://t.co/XweGngmxlP)
>
> — Twitter Dev (@TwitterDev) [6 de abril de 2017](https://x.com/TwitterDev/status/850006245121695744)

> No te pierdas las Publicaciones sobre tu Publicación.
>
> Ahora en iOS, puedes ver los Retuits con comentarios en un solo lugar. [pic.x.com/oanjZfzC6y](https://t.co/oanjZfzC6y)
>
> — X (@X) [12 de mayo de 2020](https://x.com/status/1260294888811347969?ref_src=twsrc%5Etfw)

El primer paso es construir la solicitud a la API en JSON, que consiste en estos dos IDs de Publicación colocados en un arreglo, un arreglo de tipos de interacción de interés, y un objeto JSON personalizado llamado “groupings” que indica cómo queremos que se organicen las métricas en la respuesta. Así se ve nuestra solicitud:

```json
{
  "tweet_ids": [
    1260294888811347969, 850006245121695744
  ],
  "engagement_types": [
    "retweets", "quote_tweets", "favorites", "replies"
  ],
  "groupings": {
    "engagement-types-by-id": {
      "group_by": [
        "Tweet.id", "engagement.type"
      ]
    }
  }
}
```

Para recuperar estas métricas totales, enviamos esta solicitud JSON mediante POST al endpoint https://data-api.x.com/insights/engagement/totals.

Incluiremos los siguientes encabezados para indicar que nuestra solicitud está codificada en JSON y que está comprimida con Gzip (los cuerpos de las solicitudes pueden ser grandes):

- Content-Type: application/json
- Accept-Encoding: gzip
   

Al realizar solicitudes, autenticamos usando OAuth, lo cual trataremos con más detalle en la siguiente sección.

La API devuelve la siguiente carga:

```json
{
  "grouping name": {
    "1260294888811347969": {
      "favorites": "17111",
      "quote_tweets": "3254",
      "replies": "1828",
      "retweets": "5218"
    },
    "850006245121695744": {
      "favorites": "492",
      "quote_tweets": "66",
      "replies": "42",
      "retweets": "324"
    }
  }
}
```

Observa que la respuesta contiene las métricas solicitadas en la estructura descrita por las definiciones de “groupings”, con las métricas listadas primero por ID de Publicación y luego por tipo de interacción en el siguiente nivel.

Eso fue bastante sencillo. Si eres nuevo en la autenticación con OAuth, consulta la siguiente sección.

<div id="authenticating-with-oauth">
  #### Autenticación con OAuth
</div>

OAuth es un estándar de autenticación muy común en la industria tecnológica. Si ya usas OAuth (quizá con otras APIs de X), es probable que utilices un paquete de OAuth específico del lenguaje que abstrae todos los detalles complejos. Si eres nuevo en OAuth, visita nuestra página [OAuth con la API de X](/es/resources/fundamentals/authentication) o dirígete directamente a [https://oauth.net](https://oauth.net/) para obtener más información. Luego recomendamos que encuentres un paquete de OAuth para el lenguaje de tu integración y comiences por ahí. Con estos paquetes, el proceso de autenticación suele implicar configurar tus claves y tokens, crear algún tipo de objeto HTTP y luego hacer solicitudes con ese objeto.

Por ejemplo, en el mundo de Ruby, el siguiente seudocódigo muestra cómo crear una app con OAuth usando la gema de Ruby ‘oauth’ y realizar una solicitud POST:

```js
require 'oauth'

# Ensambla la solicitud JSON (como arriba).
request = make_json_request()

# Crea un objeto consumer de la app con la consumer key y el consumer secret de mi app.
consumer = OAuth::Consumer.new(keys['consumer_key'], keys['consumer_secret'], {:site => 'https://data-api.x.com'})
# Crea un token de usuario con los tokens proporcionados por la cuenta que otorga permiso. Si haces una solicitud solo de app (consultando publicaciones que no requieren permiso con el endpoint /totals), este paso puede omitirse.
token = {:oauth_token => keys['access_token'], :oauth_token_secret => keys['access_token_secret']}

# Crea el objeto de app con OAuth.
app = OAuth::AccessToken.from_hash(consumer, token)
# Realiza la solicitud POST.
result = app.post("/insights/engagement/totals", request, {"content-type" => "application/json", "Accept-Encoding" => "gzip"})
```

La Engagement API admite autenticación tanto solo de aplicación como con contexto de usuario. Si estás recopilando métricas de interacción para publicaciones públicas no propias con el endpoint /totals, no se requiere permiso de usuario y puedes usar autenticación solo de aplicación. En este caso, usarás únicamente la clave y el secreto de tu app para autenticarte.

OAuth también permite que una app haga una solicitud a la API en nombre de otro usuario, usando tokens asociados a ese usuario. Si estás generando métricas de interacción para publicaciones propias (es decir, publicadas por un usuario para el que tienes tokens de usuario), harás solicitudes con contexto de usuario, lo que significa autenticarte tanto con las claves de tu app como con tokens de acceso específicos del usuario. Estos tokens de acceso de usuario suelen obtenerse mediante el proceso de '[Iniciar sesión con X](/es/resources/fundamentals/authentication#log-in-with-x)' o directamente del usuario (ten en cuenta que debes usar [xurl](https://github.com/xdevplatform/xurl) si obtienes los tokens directamente del usuario). Una vez que el usuario proporciona sus tokens, no expiran y pueden usarse con la Engagement API para hacer solicitudes en su nombre, siempre que el usuario no restablezca sus tokens ni cambie su contraseña; en ese caso, tendrá que proporcionarte los nuevos tokens.

Puedes revisar qué métricas requieren qué tipo de autenticación en [esta tabla](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings).
 

<div id="selecting-an-engagement-api-endpoint">
  ### Selección de un endpoint de la Engagement API
</div>

La Engagement API ofrece tres endpoints distintos:

- **[Totals](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)**: proporciona totales globales de determinadas métricas de publicaciones “propias” u “ajenas”. Algunas métricas están disponibles para todas las publicaciones, mientras que otras solo lo están para publicaciones de los últimos 90 días. Admite 250 publicaciones por solicitud.
- **[28 hour](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)**: proporciona métricas de engagement en series temporales para publicaciones “propias” de las últimas 28 horas. Admite 25 publicaciones por solicitud.
- **[Historical](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)**: proporciona métricas de engagement en series temporales durante hasta cuatro semanas consecutivas para publicaciones “propias” publicadas desde el 1 de septiembre de 2014. Admite 25 publicaciones por solicitud.
   

Cada endpoint tiene características particulares. Ya sea que planee usar los tres o esté tratando de decidir cuál se ajusta mejor a su caso de uso, es importante comprender las diferencias entre ellos.

A continuación presentamos algunos conceptos clave, exploramos con más detalle los tres endpoints y luego mostramos ejemplos de casos de uso que, en general, se corresponden con un endpoint específico. Esperamos que esta información le ayude a integrar los tres de forma más eficiente o a decidir qué endpoint individual se ajusta mejor a su objetivo.
 

<div id="key-concepts">
  #### Conceptos clave
</div>

Hay varios conceptos clave que ayudan a ilustrar las distintas funciones y los datos que proporcionan los tres endpoints de la API de Engagement.
 

<div id="impressions-and-engagement-metrics">
  ##### Métricas de impresiones e interacción
</div>

Las impresiones representan la cantidad de veces que una Publicación se ha mostrado en la plataforma X en un contexto orgánico. No se incluyen las impresiones generadas por Publicaciones vistas en un contexto promocionado o de pago. Antes de la Engagement API, las impresiones de Publicaciones representaban solo una medida de vistas potenciales. Se basaban en contar a los seguidores de la cuenta del autor y a los de cualquier cuenta que hiciera Retweet del contenido. No se tenía en cuenta la situación común en la que un usuario determinado no llega a ver la Publicación.

Las métricas de impresiones generadas por la Engagement API miden realmente la cantidad de veces que una Publicación se ha renderizado para su visualización. Si un seguidor de tu cuenta no ve tu Publicación, no cuenta como una impresión.

La Engagement API proporciona métricas sobre 14 tipos de métricas de interacción únicos [metric types](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#available-metrics), cada uno de los cuales representa una acción distinta que un usuario puede realizar cuando se le presenta una Publicación. Estas incluyen hacer Retweet, indicar que le gusta, responder, hacer clic en entidades como #hashtags, enlaces y contenido multimedia, seguir al autor y ver el perfil del autor. Todas estas acciones individuales se consolidan en una única métrica de Interacciones.

<div id="owned-and-unowned-x-content">
  ##### Contenido de X propio y no propio
</div>

La API de Engagement distingue claramente entre Publicaciones propias y no propias. Las Publicaciones propias son aquellas que se publican desde tu cuenta o para las que has obtenido permiso para solicitar datos de engagement. Como en otras API de X, obtienes permiso cuando otros usuarios/cuentas de X comparten tokens de acceso que te permiten realizar solicitudes a la API en su nombre. Una forma común de obtener estos tokens es mediante el [proceso de “Iniciar sesión con X”](/es/resources/fundamentals/authentication#log-in-with-x).

El endpoint /totals proporciona datos de engagement tanto para Publicaciones propias como no propias. Para las Publicaciones no propias, puedes solicitar métricas de engagement que están disponibles públicamente en la interfaz de una Publicación: Favorito, Retuit y Respuesta. Para estas métricas, lo que aporta la API de Engagement es la capacidad de recuperarlas de forma automatizada y a escala. Para las Publicaciones propias, el endpoint /totals también proporciona métricas de Impresiones y de Engagement (total).

Los endpoints /28hr y /historical proporcionan métricas únicamente para Publicaciones propias, lo que significa que debes incluir el contexto de usuario al realizar la solicitud a estos endpoints.

<div id="total-and-time-series-engagement-data">
  ##### Datos de interacción totales y de series temporales
</div>

El endpoint /totals proporciona, como su nombre lo indica, únicamente totales generales para sus tipos de interacción. Sus cifras representan los totales actualizados desde que se publicó la publicación. Si una publicación se acaba de publicar y solicita sus métricas repetidamente, estos totales suelen cambiar con cada solicitud.

Los endpoints /28hr y /historical pueden proporcionar tanto totales generales como datos de series temporales. Al solicitar datos de series temporales, las métricas de interacción pueden agregarse en datos diarios u horarios.   

Consulte nuestra documentación sobre [agrupaciones de interacción](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) para saber cómo solicitar datos de series temporales con los endpoints /28hr y /historical.

<div id="endpoints-and-example-use-cases">
  #### Endpoints y casos de uso de ejemplo
</div>

Dadas las características y diferencias descritas arriba, cada endpoint suele corresponderse con distintos tipos de casos de uso. Para ayudarte a decidir qué endpoint se ajusta mejor a tu caso particular, a continuación se presentan algunas declaraciones de usuarios a modo de ejemplo y el endpoint que mejor las satisface.

<div id="totals">
  ##### **/totals**
</div>

- Solo necesito acceso a algunos tipos de métricas (Impressions, Engagements, Favorites, Retweets, Quote Tweets, Replies y Video Views).
- Necesito acceso a datos básicos de interacción para cualquier publicación, no solo publicaciones propias.
- Quiero comparar el rendimiento con un competidor.
- Quiero hacer seguimiento de estadísticas básicas de interacción para un hashtag o campaña que incluya publicaciones que no me pertenecen.
- No necesito datos desglosados por día u hora; solo necesito el total actual cuando hago una solicitud.
- Necesito una única métrica para mostrar en un informe o panel y no quiero almacenar ningún dato.
- Quiero mostrar datos al cargar la página, y solo necesito hacer una solicitud y obtener una respuesta.
- Necesito acceso para obtener datos de cientos de miles o millones de publicaciones por día.
   

<div id="28hr">
  ##### **/28hr**
</div>

- Necesito acceso a los 17 tipos de métricas.
- Quiero mostrar datos de publicaciones muy recientes, publicadas en las últimas 28 horas.
- Tengo un proceso que se ejecuta una vez al día para obtener los datos que me interesan y solo necesito los del último día.
- Necesito que las métricas se desglosen por día u hora.
- Quiero mostrar series temporales de actividad por hora en un panel.
- Necesito un nivel de acceso alto para cientos de miles de publicaciones por día.
- Tengo capacidad de almacenamiento y puedo actualizar los datos una vez al día y mantener un conteo acumulado.
   

<div id="historical">
  ##### **/historical**
</div>

- Necesito acceso a los 17 tipos de métricas.
- Necesito obtener datos históricos de publicaciones creadas desde septiembre de 2014.
- Quiero mostrar un análisis histórico detallado que compare campañas.
- Necesito que las métricas se desglosen por día u hora.
- No necesito un alto nivel de acceso a la Engagement API y solo necesito obtener datos para unos cientos o miles de publicaciones al día.

<div id="engagement-api-key-characteristics">
  ### Características clave de la Engagement API
</div>

- **API RESTful** que entrega datos JSON y admite solicitudes POST con cuerpos JSON.
- **Tipos de solicitudes:** Las apps cliente pueden realizar los siguientes tipos de solicitudes:
  - **Engagements totales** -- Solicitud HTTP POST al endpoint /totals
  - **Engagements de las últimas 28 horas** -- Solicitud HTTP POST al endpoint /28hr
  - **Engagements históricos** -- Solicitud HTTP POST al endpoint /historical
- **Autenticación OAuth:**
  - [OAuth 1.0 Contexto de usuario](/es/resources/fundamentals/authentication): Todas las métricas están disponibles para Publicaciones que pertenecen a un usuario que ha autorizado tu App usando [OAuth de 3 patas](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens). Debes usar los tokens de acceso de ese usuario al realizar tu solicitud.[](/es/resources/fundamentals/authentication)
  - [OAuth 2.0 Token de portador](/es/resources/fundamentals/authentication#oauth-2-0): Métricas seleccionadas (Retweets, Quote Tweets, Replies, Favorites y Video Views) están disponibles para cualquier Publicación pública.
- **Metadatos y estructura de la solicitud**: Los datos de la solicitud son un objeto JSON que consta de un arreglo de IDs de Publicación, un arreglo de tipos de engagement y una estructura de agrupación de engagement.
- **Publicaciones por solicitud:**
  - endpoint /totals: 250 IDs de Publicación
  - endpoint /28hr: 25 IDs de Publicación
  - endpoint /historical: 25 IDs de Publicación
- **Disponibilidad de métricas de engagement:**
  - **/totals** -- Totales de métricas desde que se publicó la Publicación. Impressions y Engagements están disponibles para Publicaciones publicadas en los últimos 90 días, mientras que Retweets, Quote Tweets, Replies, Favorites y Video Views están disponibles para todas las Publicaciones.
  - **/28hr** -- Últimas 28 horas desde el momento de la solicitud.
  - **/historical** -- Cualquier período de 28 días a partir del 1 de septiembre de 2014.
- **Tipos de métricas**: Cada solicitud incluye un arreglo de [Metric Types](http://support.gnip.com/apis/engagement_api/overview.html#EngagementTypes). Su disponibilidad depende del endpoint y, si se solicita desde el endpoint /totals, de si las Publicaciones cuentan con permiso del usuario.
  - endpoint /totals:
    - Todas las Publicaciones: Favorites, Retweets, Quote Tweets, Replies y Video Views
    - Requiere OAuth 1.0a Contexto de usuario: Impressions, Engagements, Favorites, Replies y Retweets
  - endpoints /28hr y /historical (requieren OAuth 1.0a Contexto de usuario con el token de acceso del propietario de la Publicación): Impressions, Engagements, Favorites, Replies, Retweets, URL Clicks, Hashtag Clicks, Detail Click, Permalink Clicks, Media Clicks, App Install Attempts, App Opens, Post Emails, Video Views y Media Views
- **Agrupaciones de engagement:** Cada solicitud incluye un arreglo de [Engagement Groupings](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings). Con estas agrupaciones puedes personalizar cómo se organizan las métricas devueltas. Se pueden incluir hasta tres agrupaciones en cada solicitud. Las métricas se pueden organizar por los siguientes valores:
  - Todos los endpoints: Post ID, Engagement Type
  - endpoints /28hr y /historical: Estos endpoints proporcionan series temporales si se especifican estas agrupaciones adicionales: Engagement Day, Engagement Hour
- **Expectativas de integración:** Tu equipo será responsable de lo siguiente.
  - Crear y mantener una app cliente que pueda enviar solicitudes HTTP a la Engagement API que devuelvan métricas de engagement para el ID de Publicación incluido en la solicitud.
- **Limitaciones**
- Las reproducciones de video solo están disponibles para Publicaciones con 1800 días de antigüedad o menos.

<div id="authenticating-with-the-engagement-api">
  ### Autenticación con la Engagement API
</div>

> **Tenga en cuenta**: 
>
> X debe habilitar el acceso a la Engagement API para su App de desarrollador antes de que pueda empezar a usar la API. Para ello, asegúrese de compartir el App ID que piensa usar para la autenticación con su account manager o con el equipo de soporte técnico.

Hay dos métodos de autenticación disponibles con la Engagement API: [OAuth 1.0a](/es/resources/fundamentals/authentication#oauth-1-0a-2) y [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

**OAuth 2.0 Bearer Token** (también conocido como “solo aplicación”) le permite acceder a métricas de interacción disponibles públicamente. Este método de autenticación se puede usar para obtener recuentos totales de Favorites (también llamados Likes), Retweets, Quote Tweets, Replies y reproducciones de video para cualquier publicación disponible públicamente al realizar solicitudes al [/totals endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-totals). 

**OAuth 1.0a** (también conocido como “contexto de usuario”) le permite realizar solicitudes en nombre de un usuario y acceder a métricas de interacción privadas que pertenecen al usuario en cuestión. 

Este método de autenticación es obligatorio para:

- Todas las solicitudes enviadas al [/28hr endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-28hr) y [/historical endpoint](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)
- Acceder a cualquiera de las siguientes métricas privadas: Impressions, Engagements, Media Views, Media Engagements, URL Clicks, Hashtag Clicks, Detail Expands, Permalink Clicks, App Install Attempts, App Opens, Email Post, User Follows y User Profile Clicks

Al enviar una solicitud con OAuth 1.0a, debe incluir los Access Tokens (Access Token y Secret) del usuario que es propietario de la publicación o del recurso protegido de interés. Si no proporciona los Access Tokens correctos del usuario al solicitar datos de usuario protegidos, la Engagement API devolverá un error `403 Forbidden`.

La Engagement API no le permitirá obtener datos de interacción para [publicaciones protegidas](https://help.x.com/en/safety-and-security/public-and-protected-tweets), incluso si se está autenticando en nombre del usuario propietario de esas publicaciones. Intentar hacerlo devolverá un error `400 Bad Request`, con el mensaje `"Tweet ID(s) are unavailable"`.

Si está enviando una solicitud en nombre de su propia cuenta de X (en otras palabras, la cuenta que es propietaria de la App de desarrollador), puede generar los Access Tokens necesarios directamente desde el [portal para desarrolladores](https://developer.x.com/en/portal/projects-and-apps), en la pestaña “Keys and tokens” de la App de desarrollador.

Si está realizando una solicitud en nombre de cualquier otro usuario, deberá usar el flujo OAuth de 3 patas para obtener los Access Tokens necesarios. La siguiente documentación contiene más información sobre cómo hacerlo: [OAuth 1.0a: how to obtain a user’s access tokens](/es/resources/fundamentals/authentication#oauth-1-0a-2).

Para ejemplos adicionales, incluido cómo autenticarse con OAuth 1.0a, consulte el [código de ejemplo en Python de XDevelopers para la Engagement API](https://github.com/xdevplatform/enterprise-scripts-python/tree/master/Engagement-API).

<div id="recent-changes-to-the-engagement-api">
  ### Cambios recientes en la Engagement API
</div>

La Engagement API ofrece métricas invaluables de impresiones y participación que le permiten monitorear el rendimiento de su actividad en X. En nuestro esfuerzo continuo por habilitar decisiones de marketing basadas en nuestros datos, nos complace compartir cambios recientes en la Engagement API que aportan mayor consistencia a las métricas en todo X.

Recientemente implementamos cambios para modernizar la Engagement API y utilizar la misma metodología de agregación de métricas que se usa en el panel de analíticas de X (analytics.x.com). Adoptamos un enfoque cuidadoso para minimizar cambios que rompan compatibilidad en la API al incorporar estas nuevas métricas y desplegamos el primer conjunto de cambios el 9 de octubre de 2017. Estos cambios mejoran la consistencia entre todos los lugares donde usted o sus clientes podrían monitorear su rendimiento en X. Consulte a continuación el detalle de los cambios:

|     |     |
| :--- | :--- |
| **Métrica** | **Cambio** |
| engagements | Actualizamos las métricas que se incluyen en el total de engagements para alinearlas con el panel de analíticas de Publicaciones. Engagements mide “las veces que las personas interactuaron con esta Publicación”.<br /><br />Para Publicaciones que incluyen medios como un video o un GIF, la métrica engagements ya no incluirá visualizaciones de medios. Las visualizaciones de medios ahora están disponibles en una nueva métrica, _media\_views_. |
| media\_clicks\* | Esta métrica ha sido reemplazada por una nueva métrica llamada “_media\_engagements_”. |
| video\_views | A partir del 6 de julio de 2018, esta métrica está disponible para Publicaciones “no propias” mediante el endpoint [/totals](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement). Esto significa que puede acceder a las visualizaciones de video de **todas** las Publicaciones usando autenticación de solo aplicación. <br /><br />Solo puede solicitar visualizaciones de video de hasta 1800 días de antigüedad. Si intenta solicitar visualizaciones de video de una Publicación con más de 1800 días, recibirá lo siguiente:<br /><br />"unsupported\_for\_video\_views\_tweet\_ids": \["TWEET\_ID"]<br /><br />**Tenga en cuenta** que difiere de media\_views en que video\_views se basa en el estándar MRC de 50% del video en vista durante al menos dos segundos.  <br /><br />**Además,** puede observar una discrepancia entre la métrica de visualizaciones de video mostrada en las plataformas propias y operadas por X (aplicación móvil y sitio web) y el número que recibe a través de los endpoints /28hr e /historical.<br /><br />\* Las visualizaciones de video mostradas en la interfaz de usuario de X y entregadas mediante el endpoint /totals mostrarán la visualización de video agregada en todas las Publicaciones en las que se haya publicado el video en cuestión. Eso significa que la métrica mostrada en la IU incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido Retuiteado o vuelto a publicar en Publicaciones separadas.<br />\* Las visualizaciones de video proporcionadas por los endpoints /28hr e /historical solo incluirán aquellas visualizaciones generadas por la Publicación específica para la cual está extrayendo métricas. |
| media\_views | Incluye todas las visualizaciones (reproducción automática y por clic) de sus medios contabilizadas en videos, vines, GIFs e imágenes.<br /><br />**Tenga en cuenta** que las Publicaciones con imágenes no muestran una métrica media\_views en el panel de analíticas, pero sí se devolverá en la Engagement API. |
| media\_engagements\* | Incluye la cantidad de clics en sus medios en videos, vines, GIFs e imágenes. Esta métrica reemplaza a _media\_clicks_. |
| quote\_tweets | A partir del 7 de julio de 2020, esta métrica está disponible para Publicaciones “no propias” mediante el endpoint /totals. Esto significa que puede acceder al recuento de Publicaciones con cita para todas las Publicaciones usando autenticación de solo aplicación. |

<div id="interpreting-the-metrics">
  ### Interpretación de las métricas
</div>

**Nota:** Es posible que observe diferencias entre los datos mostrados en algunos paneles web de X y los datos reportados en la Engagement API. Estas diferencias se deben a que los paneles web normalmente solo muestran interacciones y/o impresiones ocurridas dentro del intervalo de tiempo seleccionado. Por ejemplo, un panel web puede mostrar interacciones en publicaciones dentro de un mes calendario, mientras que la Engagement API puede incluir interacciones que quedan fuera de ese mes, pero dentro del intervalo de tiempo solicitado. En estos casos, la Engagement API debe considerarse la fuente válida.
 

<div id="impressions-and-engagement-data">
  #### Datos de impresiones y participación
</div>

La Engagement API proporciona datos de impresiones y de participación **orgánicos**.

Las impresiones representan la cantidad de veces que una Publicación determinada se ha visto en la plataforma X en un contexto orgánico. Las impresiones generadas por Publicaciones vistas en un contexto promocionado o de pago **no** se incluyen.

Las participaciones representan la cantidad de veces que una persona interactuó con una Publicación determinada tanto en un contexto **orgánico** como **promocionado**. Las participaciones incluyen, entre otras, los Retuits, los Me gusta, las Respuestas, los clics en URL, los clics en hashtags, los clics en menciones y las visualizaciones de medios. Para la lista completa de acciones de participación incluidas, consulta la sección Datos de participación.

Para calcular una tasa de participación de referencia, utiliza el número total de participaciones dividido por el número total de impresiones de una Publicación determinada para el período que estés analizando.

Los datos de impresiones y participación solo se pueden recuperar para Publicaciones de @handles propios o de @handles que hayan autorizado tu aplicación a ver detalles sobre sus Publicaciones. Internamente, la Engagement API realizará un seguimiento del número de @handles únicos que se han solicitado con respecto al límite de @handles contratado. Se recomienda también realizar un seguimiento del uso de solicitudes de @handle en el lado del cliente a lo largo del mes.  

<div id="video-metrics">
  #### Métricas de video
</div>

Hay un par de métricas diferentes que representan impresiones de medios en X. La primera es la métrica de vistas de video, que se basa en el estándar del MRC de tener el 50% del video en pantalla durante al menos dos segundos. La segunda es Vistas de medios, que incluye todas las visualizaciones (autoplay y clic) de tu contenido, contabilizadas en videos, vines, GIF y imágenes.

La métrica de vistas de video está disponible para Publicaciones propias a través de los endpoints /28hour y /historical, así como para todas las Publicaciones no propias a través del endpoint /totals.

Aunque la métrica de vistas de video en la interfaz de usuario de X utiliza el mismo estándar del MRC, ten en cuenta que puedes observar discrepancias entre la métrica de vistas de video mostrada en las plataformas propiedad de X (aplicación móvil y sitio web) y la cifra que recibes a través de los diferentes endpoints de la Engagement API.

- Las vistas de video proporcionadas por el endpoint /totals y la interfaz de usuario de X muestran las vistas agregadas del video en todas las Publicaciones en las que se haya publicado dicho video. Es decir, la métrica entregada vía /totals y mostrada en la IU de X incluye las visualizaciones combinadas de cualquier instancia en la que el video haya sido Retuiteado o republicado en Publicaciones diferentes.
- Las vistas de video proporcionadas por los endpoints /28hour y /historical de la Engagement API solo incluyen las vistas generadas por la Publicación específica para la que estás obteniendo métricas.

Ten en cuenta que no proporcionamos vistas de video para Publicaciones con más de 1800 días. En su lugar, entregamos un objeto que enumera las Publicaciones que superan los 1800 días. Aun así, recibirás todas las demás métricas de tus Publicaciones solicitadas en un objeto separado. Aquí tienes un ejemplo de respuesta:

```json
{
  "unsupported_for_video_views_tweet_ids": [
    "479311209565413376",
    "477139122520219648"
  ],
  "grouping name": {
    "479311209565413376": {
      "favorites": "69",
      "impressions": "1692",
      "retweets": "142",
      "video_views": "0"
    },
    "477139122520219648": {
      "favorites": "10",
      "impressions": "1023",
      "retweets": "6",
      "video_views": "0"
    },
    "1397568983931392004": {
      "favorites": "268",
      "impressions": "26803",
      "retweets": "56",
      "video_views": "17902"
    }
  }
}
```

La métrica de Vistas de medios solo está disponible para Publicaciones propias con los endpoints /28hour y /historical.

<div id="engagement-api-groupings">
  ### Agrupaciones de la Engagement API
</div>

Las agrupaciones permiten organizar de forma personalizada las métricas de interacción devueltas. Puede incluir como máximo 3 agrupaciones por solicitud. Puede elegir agrupar las métricas por uno o más de los siguientes valores:

_Los tres endpoints admiten:_

- tweet.id
- engagement.type
   

_Los `/28hr` y `/historical` pueden proporcionar métricas en series temporales y, por lo tanto, admiten:_

- engagement.day
- engagement.hour

Las agrupaciones se aplican en serie, por lo que puede cambiar el formato del resultado modificando el orden de sus valores de `group_by`. Las agrupaciones que contengan cuatro valores de `group_by` solo serán compatibles en uno de los dos formatos siguientes:
 

```bash
"group_by": [
    "tweet.id",
    "engagement.type",
    "engagement.day",
    "engagement.hour"
  ]
```

O

```bash
"group_by": [
    "engagement.type",
    "tweet.id",
    "engagement.day",
    "engagement.hour"
]
```

Por ejemplo, si desea generar totales generales por tipo de métrica, incluya la siguiente especificación de “groupings” como parte de su solicitud (y consulte la página de [API Reference](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) para obtener más información sobre cómo armar las solicitudes):
 

```json
{
  "engagement_types": [
    "favorites",
    "replies",
    "retweets"
  ],
  "groupings": {
    "Grand Totals": {
      "group_by": [
        "engagement.type"
      ]
    }
  }
}
```

Con esta agrupación, la respuesta JSON de la Engagement API incluirá un atributo de nivel raíz `"Grand Totals"` que contiene los totales generales por tipo de métrica:

```json
{
  "Grand Totals": {
    "favorites": "12",
    "replies": "2",
    "retweets": "2"
  }
}
```

Para generar una serie temporal de 4 horas de métricas para una sola publicación agrupada por ID de publicación, la siguiente especificación de agrupación formaría parte de la solicitud:

```json
{
  "start": "2016-02-10T17:00:00Z",
  "end": "2016-02-10T21:00:00Z",
  "tweet_ids": [
    "697506383516729344"
  ],
  "engagement_types": [
    "impressions",
    "engagements"
  ],
  "groupings": {
    "Tweets_MetricType_TimeSeries": {
      "group_by": [
        "tweet.id",
        "engagement.type",
        "engagement.hour"
      ]
    }
  }
}
```

Con esta agrupación, la respuesta JSON de la Engagement API incluirá un atributo de nivel raíz `"Tweets_MetricType_TimeSeries"` que contiene las métricas desglosadas por ID de publicación, luego por tipo de métrica y la correspondiente serie temporal por hora:

```json
{
  "Tweets_MetricType_TimeSeries": {
    "697506383516729344": {
      "impressions": {
        "2016-02-10": {
          "17": "551",
          "18": "412",
          "19": "371",
          "20": "280"
        }
      },
      "engagements": {
        "2016-02-10": {
          "17": "8",
          "18": "6",
          "19": "3",
          "20": "0"
        }
      }
    }
  }
}
```

<div id="frequently-asked-questions">
  ## Preguntas frecuentes
</div>

`Enterprise`

<div id="engagement-api">
  ### API de interacción
</div>

<AccordionGroup>
  <Accordion title="¿Cómo puedo acceder a la API de interacción?">
    El acceso a la API de interacción se ofrece mediante una suscripción para empresas. Complete [este formulario](/es/x-api/enterprise-gnip-2.0/enterprise-gnip) para ponerse en contacto con nuestro equipo de ventas.
  </Accordion>

  <Accordion title="¿Cómo se registra mi uso por «@handle»?">
    Si su contrato incluye un límite de identificadores únicos que pueden usarse con la API de interacción, el sistema interno de X llevará el conteo del número de usuarios autenticados propietarios de Publicaciones consultadas con la API de interacción. Los clientes también deben llevar el control de ese número único en el lado del cliente. Actualmente, no existe una API ni una interfaz para verificar el uso de @handle en la API de interacción. El sistema no bloqueará excedentes si se solicitan más @handles que los contratados. Al final del mes de facturación, el número de @handles únicos consultados se compara con el monto contratado y se cobrará el excedente conforme a los términos del contrato.
  </Accordion>

  <Accordion title="¿Puedo verificar mi uso de @handle en la API de interacción?">
    Actualmente, no existe una API ni una interfaz para verificar el uso de @handle en la API de interacción. El sistema no bloqueará excedentes si se solicitan más @handles que los contratados. Al final del mes de facturación, el número de @handles únicos consultados se compara con el monto contratado y se cobrará el excedente conforme a los términos del contrato.

    **El campo de metadatos `engagements` devuelto en la carga útil no es igual a la suma de todos los totales de métricas de interacción. ¿Por qué sucede esto?**

    Es lo esperado. El campo de metadatos `engagements` puede no correlacionarse siempre con la suma de todas las métricas de interacción individuales devueltas por la API. Esto se debe a que el campo `engagements` puede incluir interacciones adicionales que no tienen métricas específicas desglosadas en la carga útil. Dicho de otro modo, sumar todos los totales de métricas de interacción puede no igualar el valor que ve en el campo `engagements` devuelto en la carga útil.

    Puede considerar el campo de metadatos `engagements` como cualquier clic o interacción realizada en la Publicación.
     

    **El campo `url_clicks` en la respuesta está devolviendo un número, cuando en realidad la Publicación no tiene una URL. ¿Cómo es posible?**

    Esto puede deberse a que una Publicación que contiene, por ejemplo, un hashtag (que crea un enlace a otra página) contará como un clic de URL si un usuario hace clic en él.
     
  </Accordion>

  <Accordion title="¿Por qué no puedo recibir datos de interacción de una Publicación específica?">
    Existen varias razones por las que podría no poder recuperar datos de interacción de una Publicación específica, entre ellas:

    - El ID de la Publicación o los IDs que solicitó no están disponibles en función del token de autenticación que utiliza para recuperar datos en nombre de un tercero.
    - El ID de la Publicación o los IDs que solicitó específicamente para el endpoint /totals no son de 90 días o más recientes y, por lo tanto, no están disponibles para devolver impresiones o métricas de interacción.
    - El ID de la Publicación o los IDs que solicitó ya no están disponibles, lo que generalmente indica que se han eliminado o que ya no están disponibles públicamente por otra razón.

    Revise los diferentes [mensajes de error](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#error-messages) que probablemente recibirá en cualquiera de los casos anteriores.
  </Accordion>

  <Accordion title="¿Cómo puedo gestionar la limitación de tasa con la API de interacción?">
    Puede utilizar la información `x-per-minute-limit` y `x-per-minute-remaining` devuelta en el encabezado de la respuesta cuando realice una solicitud a la API de interacción para monitorear su consumo.

    `x-per-minute-limit` indica cuál es su asignación y `x-per-minute-remaining` cuántas llamadas le quedan.
  </Accordion>
</AccordionGroup>

<div id="error-troubleshooting-guide">
  ### Guía para resolver errores
</div>

<AccordionGroup>
  <Accordion title="Tengo problemas para autenticarme">
    Asegúrese de revisar nuestras [pautas de autenticación](/es/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#authentication) para la Engagement API.
  </Accordion>

  <Accordion title="He pasado la clave y el secreto del consumidor correctos, así como el token de acceso y el secreto del token de acceso, pero aparece el siguiente error. ¿Qué puedo hacer?">
    ```bash
    [
        Your account could not be authenticated. Reason: Unknown Authorization Type;
    ]
    ```

    Asegúrese de no usar ningún token ni secreto de acceso cuando intente autenticarse con el endpoint /totals. Esto se debe a que, si incluye esos tokens y está intentando obtener contenido de una publicación que no está asociada a ellos, probablemente recibirá un error como:

    ```bash
    [
        Forbidden to access tweets: 1054424731825229824;
    ]
    ```
  </Accordion>
</AccordionGroup>

<div id="still-cant-find-what-youre-looking-for">
  ### ¿Aún no encuentras lo que buscas?
</div>

<AccordionGroup>
  <Accordion title="Tengo una pregunta que aún no ha sido respondida">
    Comuníquese con el soporte técnico y le responderemos a la brevedad.
  </Accordion>
</AccordionGroup>

<div id="api-reference">
  ## Referencia de la API
</div>

<div id="post-insightsengagement">
  ### **POST insights/engagement**
</div>

<div id="methods">
  #### **Métodos**
</div>

| Método | Descripción |
| :--- | :--- |
| [POST /insights/engagement/totals](#Totals) | Recupera el total de impresiones e interacciones para una colección de Tweets. |
| [POST /insights/engagement/historical](#Historical) | Recupera impresiones e interacciones para una colección de Tweets durante un periodo de hasta 4 semanas, con retroactividad hasta el 1 de septiembre de 2014. |
| [POST /insights/engagement/28hr](#api-28hr) | Recupera impresiones e interacciones para una colección de Tweets de las últimas 28 horas. |

<div id="authentication">
  #### **Autenticación**
</div>

La Engagement API requiere HTTPS y admite tanto User Context como Application-Only OAuth. La mayoría de las solicitudes a la Engagement API requieren 3-Legged OAuth (una variante específica de User Context), lo que significa que debes usar la consumer key y el consumer secret de la app registrada y aprobada para acceder a la Engagement API por tu account manager de Twitter, así como el access token y el access token secret de los propietarios del Tweet para invocar el endpoint. Las siguientes solicitudes requieren este tipo de OAuth:

- Cualquier solicitud a /totals para obtener los tipos de métricas Impressions y Engagements, que se limitan a Tweets propios
- Cualquier solicitud a /28hr
- Cualquier solicitud a /historical

Algunas solicitudes a la Engagement API pueden realizarse con Application-Only OAuth, lo que significa que solo necesitas proporcionar tu consumer key y consumer secret, o un bearer token. La siguiente solicitud puede realizarse con este tipo de OAuth:

- Cualquier solicitud a /totals para obtener los tipos de métricas Favorites, Replies, Retweets o Video Views, que pueden recuperarse para cualquier Tweet

Para cualquier solicitud, deberás configurar una app de Twitter y la clave de API correspondiente mediante la consola de administración de apps disponible en [developer.x.com](https://developer.x.com/en/portal/dashboard).

Ten en cuenta: puedes ver y editar tus [apps de Twitter](/es/resources/fundamentals/developer-apps) existentes a través del [panel de apps de Twitter](https://developer.x.com/en/apps) si has iniciado sesión en tu cuenta de Twitter en developer.x.com.

Una vez que hayas configurado tu app, el ID de la app deberá ser aprobado por tu representante de cuenta para que tu app pueda realizar solicitudes a la Engagement API. Los access tokens deben usarse para representar al “usuario actual”, y las solicitudes realizadas en nombre de otro usuario deben firmarse con un token válido. Asegúrate de [codificar los caracteres reservados](https://tools.ietf.org/html/rfc3986) adecuadamente en las URL y en los cuerpos de las solicitudes POST antes de preparar las signature base strings de OAuth.

Para obtener más información sobre cómo empezar con OAuth, visita los siguientes enlaces:

- [Descripción general de OAuth](/es/resources/fundamentals/authentication)
- [Uso de 3-Legged OAuth, también conocido como User Context](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)
- [Uso de Application-Only OAuth](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)

<div id="post-insightsengagementtotals">
  #### **POST /insights/engagement/totals**
</div>

El endpoint totals permite obtener las impresiones y las interacciones totales actuales para una colección de hasta 250 Tweets a la vez.

|     |     |
| :--- | :--- |
| **Método de solicitud** | HTTP POST |
| **URL** | `https://data-api.x.com/insights/engagement/totals` |
| **Tipo de contenido** | `application/json` |
| **Compresión** | Gzip. Para realizar una solicitud usando compresión Gzip, envíe un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe verse así:  <br />  <br />`Accept-Encoding: gzip` |
| **Formato de POST** | Las solicitudes pueden enviarse como una petición POST cuyo cuerpo es un objeto JSON que contiene una colección de IDs de tuit y una agrupación deseada. El POST se formatea como un arreglo con objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede incluir como máximo 250 IDs de tuit.  <br />  <br />Ejemplo de cuerpo de POST:  <br />  <br /><br />  \{<br />    "tweet\_ids": \[<br />        "ID de tuit 1",<br />        "ID de tuit 2",<br />        "ID de tuit 3"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "favorites",<br />        "quote\_tweets"<br />    ],<br />    "groupings": \{<br />      "nombre de la agrupación": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type"<br />        ]<br />      }<br />    }<br />  } |
| **IDs de tuit** | Un arreglo que incluye los IDs de tuit de los tuits para los que se consultarán datos de interacción. Tenga en cuenta que solo puede solicitar datos de tuits creados por el @handle autenticado. Se pueden incluir hasta 250 tuits por solicitud, y los IDs de tuit deben representarse como cadenas. |
| **Tipos de interacción** | Un arreglo que incluye los tipos de métricas de interacción a consultar. El endpoint Totals solo admite los siguientes tipos de interacción: `impressions`, `engagements`, `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`.  <br />El endpoint `/totals` permite recuperar `impressions` y `engagements` para tuits creados en los últimos 90 días, y `favorites`, `retweets`, `quote_tweets`, `replies` y `video_views` para cualquier tuit. |
| **Agrupaciones** | Los resultados de la Engagement API pueden devolverse en distintos grupos para ajustarse mejor a sus necesidades. Puede incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puede definir un nombre personalizado para facilitar la referencia a ese tipo de agrupación en su aplicación.  <br />  <br />Una vez que haya definido un nombre de agrupación, puede optar por agrupar por `tweet.id` y/o `engagement.type`.  <br />  <br />Las agrupaciones se aplican de forma secuencial, por lo que puede cambiar el formato de los resultados modificando el orden de los valores de group\_by. Un ejemplo de agrupación que mostrará métricas separadas por ID de tuit y tipo de métrica se ve así:  <br />  <br /><br />  "groupings": \{<br />      "mi nombre de agrupación": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type"<br />        ]<br />      }<br />    } |
| **Límite de tamaño de POST** | Las solicitudes pueden incluir como máximo 250 IDs de tuit a la vez. |
| **Formato de respuesta** | JSON. El encabezado de su solicitud debe especificar el formato JSON para la respuesta. |
| **Límite de frecuencia** | Estará limitado por minuto, según lo especificado en su contrato y su nivel de acceso. |
| **Ejemplo de solicitud (métricas públicas)** | curl --request POST <br />  --url https://data-api.x.com/insights/engagement/totals <br />  --header 'accept-encoding: gzip' <br />  --header 'authorization: Bearer ' <br />  --header 'content-type: application/json' <br />  --data '\{<br />                "tweet\_ids": \[<br />                    "1070059276213702656","1021817816134156288","1067094924124872705"<br />                ],<br />                "engagement\_types": \[<br />                    "favorites","retweets","replies","quote\_tweets","video\_views"<br />                ],<br />                "groupings": \{<br />                    "perTweetMetricsUnowned": \{<br />                        "group\_by": \[<br />                            "tweet.id",<br />                            "engagement.type"<br />                        ]<br />                    }<br />                }<br />            } <br />  --verbose <br />  --compressed |
| **Ejemplo de solicitud** | curl --request POST <br />  --url https://data-api.x.com/insights/engagement/totals <br />  --header 'accept-encoding: gzip' <br />  --header 'authorization: OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br />  --header 'content-type: application/json' <br />  --data '\{<br />                "tweet\_ids": \[<br />                    "1060976163948904448","1045709644067471360"<br />                ],<br />                "engagement\_types": \[<br />                    "favorites","replies","retweets","video\_views","impressions","engagements"<br />                ],<br />                "groupings": \{<br />                    "perTweetMetricsOwned": \{<br />                        "group\_by": \[<br />                            "tweet.id",<br />                            "engagement.type"<br />                        ]<br />                    }<br />                }<br />            }' <br />  --verbose <br />  --compressed |
| **Ejemplo de respuesta (métricas públicas)** | \{<br />  "perTweetMetricsUnowned": \{<br />    "1021817816134156288": \{<br />      "favorites": "530",<br />      "quote\_tweets": "79",<br />      "replies": "147",<br />      "retweets": "323",<br />      "video\_views": "0"<br />    },<br />    "1067094924124872705": \{<br />      "favorites": "1360",<br />      "quote\_tweets": "29",<br />      "replies": "56",<br />      "retweets": "178",<br />      "video\_views": "5754512"<br />    },<br />    "1070059276213702656": \{<br />      "favorites": "69",<br />      "quote\_tweets": "5",<br />      "replies": "7",<br />      "retweets": "26",<br />      "video\_views": "0"<br />    }<br />  }<br />} |
| **Respuesta de ejemplo** | \{<br />  "perTweetMetricsOwned": \{<br />    "1045709644067471360": \{<br />      "engagements": "2",<br />      "favorites": "0",<br />      "impressions": "47",<br />      "replies": "0",<br />      "retweets": "8",<br />      "quote\_tweets": "5",<br />      "video\_views": "0"<br />    },<br />    "1060976163948904448": \{<br />      "engagements": "4",<br />      "favorites": "0",<br />      "impressions": "148",<br />      "replies": "1",<br />      "retweets": "9",<br />      "quote\_tweets": "2",<br />      "video\_views": "0"<br />    }<br />  }<br />} |
| **IDs de Tweets no disponibles** | Para consultas que incluyan IDs de Tweets que ya no estén disponibles (p. ej., porque se eliminaron), se devolverán los datos correspondientes para todos los IDs de Tweets disponibles y los IDs no disponibles se indicarán en una matriz llamada `unavailable_tweet_ids`. Por ejemplo:  <br /><br />  \{<br />    "start": "2015-11-17T22:00:00Z",<br />    "end": "2015-11-19T02:00:00Z",<br />    "unavailable\_tweet\_ids": \[<br />        "323456789"<br />    ],<br />    "group1": \{<br />     "423456789": \{<br />      "favorites": "67",<br />      "replies": "8",<br />      "retweets": "26",<br />      "quote\_tweets": "2"<br />     }<br />    }<br />  } |

<div id="post-insightsengagement28hr">
  #### **POST /insights/engagement/28hr**
</div>

El endpoint de 28 horas permite obtener impresiones e interacciones de una colección de hasta 25 Tweets de las últimas 28 horas. También permite solicitar todas las métricas individuales compatibles. Para ver la lista completa de métricas compatibles, consulta [Disponibilidad de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes).

|     |     |
| :--- | :--- |
| **Método de solicitud** | HTTP POST |
| **URL** | `https://data-api.x.com/insights/engagement/28hr` |
| **Tipo de contenido** | `application/json` |
| **Compresión** | Gzip. Para realizar una solicitud con compresión Gzip, envíe un encabezado Accept-Encoding en la solicitud.  <br />El encabezado debe verse así:  <br />  <br />`Accept-Encoding: gzip` |
| **Formato de POST** | Las solicitudes pueden enviarse como una POST donde el cuerpo es un objeto JSON que contiene una colección de IDs de tuit y una agrupación deseada. El POST se estructura como un arreglo con los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede incluir un máximo de 25 IDs de tuit.  <br />  <br />Ejemplo de cuerpo de POST:  <br />  <br /><br />  \{<br />    "tweet\_ids": \[<br />       "ID de tuit 1",<br />       "ID de tuit 2",<br />       "ID de tuit 3"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "url\_clicks",<br />        "detail\_expands"<br />    ],<br />    "groupings": \{<br />      "nombre de la agrupación": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type",<br />          "engagement.hour"<br />        ]<br />      }<br />    }<br />  } |
| **IDs de tuit** | Un arreglo que incluye los IDs de tuit de los tuits para consultar datos de interacción. Tenga en cuenta que solo puede solicitar datos de tuits creados por el @handle autenticado. El endpoint de 28 horas admite hasta un máximo de 25 tuits por solicitud, y los IDs de tuit deben representarse como cadenas. |
| **Tipos de interacción** | Un arreglo con los tipos de métricas de interacción a consultar.  <br />  <br />Para el endpoint de 28 horas, `impressions`, `engagements` y todos los tipos individuales de interacción son métricas compatibles. Para la lista completa de métricas de interacción compatibles, consulte [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData). |
| **Agrupaciones** | Los resultados de la API de Interacción pueden devolverse en diferentes grupos para ajustarse mejor a sus necesidades. Puede incluir un máximo de 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puede definir un nombre personalizado para facilitar su referencia en su aplicación. Una vez definido el nombre, puede elegir agrupar por uno o más de los siguientes valores:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />Las agrupaciones se aplican en serie, por lo que puede cambiar el formato del resultado modificando el orden de los valores de group\_by. Un ejemplo de agrupación que mostrará métricas separadas por ID de tuit, tipo de métrica y día se ve así:<br /><br />  "groupings": \{<br />    "mi nombre de agrupación": \{<br />      "group\_by": \[<br />        "tweet.id",<br />        "engagement.type",<br />        "engagement.day"<br />      ]<br />    }<br />  }<br /><br />  <br />Las agrupaciones que tengan 4 elementos `group_by` solo son válidas si usan uno de los dos órdenes siguientes. Las solicitudes que incluyan 4 elementos `group_by` en una sola agrupación y no sigan uno de los órdenes indicados devolverán un error. Además, solo se permitirá una agrupación con 4 elementos `group_by` por solicitud.  <br /><br />"group\_by": \[<br />    "tweet.id",<br />    "engagement.type",<br />    "engagement.day",<br />    "engagement.hour"<br />  ]<br /><br />"group\_by": \[<br />    "engagement.type",<br />    "tweet.id",<br />    "engagement.day",<br />    "engagement.hour"<br />  ] |
| **Límite de tamaño de POST** | Se pueden realizar solicitudes para un máximo de 25 IDs de tuit a la vez. |
| **Formato de respuesta** | JSON. El encabezado de la solicitud debe especificar que la respuesta será en formato JSON. |
| **Límite de solicitudes** | Se aplicarán límites por minuto, según lo establecido en su contrato y su nivel de acceso. |
| **Ejemplo de solicitud** | curl -X POST "https://data-api.x.com/insights/engagement/28hr" <br />  -H 'Accept-Encoding: gzip' <br />  -H 'Authorization OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br />  -d '\{<br />    "tweet\_ids": \[<br />       "123456789"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements"<br />    ],<br />    "groupings": \{<br />      "hourly-time-series": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type",<br />          "engagement.day",<br />          "engagement.hour"<br />        ]<br />      }<br />    }<br />  }' |
| **Respuesta de ejemplo** | \{<br />    "start": "2015-09-14T17:00:00Z",<br />    "end": "2015-09-15T22:00:00Z",<br />    "hourly-time-series": \{<br />      "123456789": \{<br />        "impressions": \{<br />          "2015-09-14": \{<br />            "17": "551",<br />            "18": "412",<br />            "19": "371",<br />            "20": "280",<br />            "21": "100",<br />            "22": "19",<br />            "23": "6"<br />          },<br />          "2015-09-15": \{<br />            "00": "5",<br />            "01": "2",<br />            "02": "7",<br />            "03": "3",<br />            "04": "1",<br />            "05": "0",<br />            "06": "0",<br />            "07": "0",<br />            "08": "0",<br />            "09": "0",<br />            "10": "0",<br />            "11": "0",<br />            "12": "0",<br />            "13": "0",<br />            "14": "0",<br />            "15": "0",<br />            "16": "0",<br />            "17": "0",<br />            "18": "0",<br />            "19": "0",<br />            "20": "0",<br />            "21": "0"<br />          }<br />        },<br />        "engagements": \{<br />          "2015-09-14": \{<br />            "17": "0",<br />            "18": "0",<br />            "19": "0",<br />            "20": "0",<br />            "21": "0",<br />            "22": "0",<br />            "23": "0"<br />          },<br />          "2015-09-15": \{<br />            "00": "0",<br />            "01": "0",<br />            "02": "0",<br />            "03": "0",<br />            "04": "0",<br />            "05": "0",<br />            "06": "0",<br />            "07": "0",<br />            "08": "0",<br />            "09": "0",<br />            "10": "0",<br />            "11": "0",<br />            "12": "0",<br />            "13": "0",<br />            "14": "0",<br />            "15": "0",<br />            "16": "0",<br />            "17": "0",<br />            "18": "0",<br />            "19": "0",<br />            "20": "0",<br />            "21": "0"<br />          }<br />        }<br />      }<br />    }<br />  } |
| **ID de tuits no disponibles** | En las consultas que incluyan ID de tuits que ya no estén disponibles (p. ej., porque se eliminaron), se devolverán los datos correspondientes para todos los ID de tuits disponibles, y los ID no disponibles se incluirán en una matriz llamada `unavailable_tweet_ids`. Por ejemplo:  <br /><br />  \{<br />    "start": "2015-11-17T22:00:00Z",<br />    "end": "2015-11-19T02:00:00Z",<br />    "unavailable\_tweet\_ids": \[<br />        "323456789"<br />    ],<br />    "group1": \{<br />     "423456789": \{<br />      "favorites": "67",<br />      "replies": "8",<br />      "retweets": 26<br />     }<br />    }<br />  } |

<div id="post-insightsengagementhistorical">
  #### **POST /insights/engagement/historical**
</div>

El endpoint histórico permite recuperar impresiones e interacciones de una colección de hasta 25 Tweets para cualquier periodo de hasta 4 semanas. Actualmente, la API no permite solicitar datos anteriores al 1 de septiembre de 2014. El endpoint histórico también permite solicitar todas las métricas individuales admitidas. Para ver la lista completa de métricas admitidas, consulta [Disponibilidad de métricas](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes).

|     |     |
| :--- | :--- |
| **Método de la solicitud** | HTTP POST |
| **URL** | `https://data-api.x.com/insights/engagement/historical` |
| **Tipo de contenido** | `application/json` |
| **Compresión** | Gzip. Para realizar una solicitud con compresión Gzip, envíe un encabezado Accept-Encoding en la solicitud de conexión.  <br />El encabezado debe verse de la siguiente manera:  <br />  <br />`Accept-Encoding: gzip` |
| **Formato de POST** | Las solicitudes se pueden enviar como una solicitud POST cuyo cuerpo es un objeto JSON que contiene una colección de IDs de Tweet y una agrupación deseada. El POST se estructura como un arreglo con los objetos `tweets`, `engagements` y `groupings`. Cada solicitud puede incluir un máximo de 25 IDs de Tweet. En cada solicitud se pueden especificar una fecha de inicio y una de fin personalizadas con una duración de hasta cuatro semanas.  <br />  <br /><br />  \{<br />    "tweet\_ids": \[<br />       "ID de Tweet 1",<br />       "ID de Tweet 2",<br />       "ID de Tweet 3"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "url\_clicks",<br />        "detail\_expands"<br />    ],<br />    "groupings": \{<br />      "nombre de agrupación": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type",<br />          "engagement.hour"<br />        ]<br />      }<br />    }<br />  } |
| **Fecha de inicio y fin** | Se puede especificar una fecha de inicio y otra de fin personalizadas mediante los valores `start` y `end` como parte de la solicitud. Debe especificar una fecha de inicio y fin cuya duración no exceda las 4 semanas. La fecha de inicio más antigua posible en este momento es el 1 de septiembre de 2014. No se admiten fechas de fin en el futuro. Si no se proporcionan fechas de inicio y fin, la API usará por defecto las 4 semanas inmediatamente anteriores.  <br />  <br />La granularidad más baja a la que la Engagement API puede devolver datos es por hora. Para cualquier solicitud realizada con valores de inicio o fin que no caigan exactamente en un límite horario, las solicitudes se ajustarán por defecto a la hora inclusiva más cercana. Por ejemplo, una solicitud con "start":"2015-07-01T12:24:00Z" y "end":"2015-07-10T08:37:00Z" se ajustará a "start":"2015-07-01T12:00:00Z","end":"2015-07-10T09:00:00Z". |
| **IDs de Tweet** | Un arreglo que incluye los IDs de Tweet de los Tweets que se consultarán para obtener datos de interacción. Tenga en cuenta que solo puede solicitar datos para Tweets creados por el @handle autenticado. El endpoint histórico de 4 semanas admite hasta un máximo de 25 Tweets por solicitud, y los IDs de Tweet deben representarse como cadenas. |
| **Tipos de interacción** | Un arreglo que incluye los tipos de métricas de interacción a consultar.  <br />  <br />Para el endpoint histórico de 4 semanas, `impressions`, `engagements` y todos los tipos de interacción individuales son métricas admitidas. Para la lista completa de métricas de interacción admitidas, consulte [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData).  <br />  <br />**Nota:** Actualmente hay tres métricas que se mostrarán como cero para consultas realizadas antes del 15 de septiembre de 2015: `favorites`, `replies` y `retweets`. |
| **Agrupaciones** | Los resultados de la Engagement API pueden devolverse en distintos grupos según lo que necesite. Puede incluir como máximo 3 agrupaciones por solicitud.  <br />  <br />Para cada agrupación, puede definir un nombre personalizado que facilite su referencia en la aplicación. Una vez definido el nombre, puede agrupar por uno o más de los siguientes valores:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />Las agrupaciones se aplican en serie, por lo que puede cambiar el formato de los resultados modificando el orden de los valores group\_by. Un ejemplo de agrupación que mostrará métricas separadas por ID del Tweet, tipo de métrica y día es el siguiente:<br /><br />  "groupings": \{<br />    "my grouping name": \{<br />      "group\_by": \[<br />        "tweet.id",<br />        "engagement.type",<br />        "engagement.day"<br />      ]<br />    }<br />  }<br /><br />  <br />Las agrupaciones con 4 elementos `group_by` solo son válidas si utilizan uno de los dos órdenes siguientes. Las solicitudes que incluyan 4 elementos `group_by` en una sola agrupación y no sigan uno de los órdenes siguientes devolverán un error. Además, solo se permitirá una agrupación con 4 elementos `group_by` por solicitud.  <br /><br />"group\_by": \[<br />    "tweet.id",<br />    "engagement.type",<br />    "engagement.day",<br />    "engagement.hour"<br />  ]<br /><br />"group\_by": \[<br />    "engagement.type",<br />    "tweet.id",<br />    "engagement.day",<br />    "engagement.hour"<br />  ] |
| **Límite de tamaño de POST** | Las solicitudes pueden incluir como máximo 25 IDs de Tweet a la vez. |
| **Formato de respuesta** | JSON. El encabezado de la solicitud debe especificar JSON como formato de la respuesta. |
| **Límite de tasa** | Estará sujeto a limitación por minuto, según lo especificado en su contrato y de acuerdo con su nivel de acceso. |
| **Solicitud de ejemplo** | curl -XPOST "https://data-api.x.com/insights/engagement/historical" <br />  -H 'Accept-Encoding: gzip' <br />  -H 'Authorization OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br />  -d '\{<br />    "start": "2015-08-01",<br />    "end": "2015-08-15",<br />    "tweet\_ids": \[<br />       "123456789",<br />       "223456789",<br />       "323456789"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "url\_clicks",<br />        "detail\_expands"<br />    ],<br />    "groupings": \{<br />      "types-by-tweet-id": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type"<br />        ]<br />      }<br />    }<br />  }' |
| **Respuesta de ejemplo** | \{<br />    "start": "2015-08-01T00:00:00Z",<br />    "end": "2015-08-15T00:00:00Z",<br />    "types-by-tweet-id": \{<br />      "123456789": \{<br />        "impressions": "0",<br />        "engagements": "0",<br />        "url\_clicks": "0",<br />        "detail\_expands": "0"<br />      },<br />      "223456789": \{<br />        "impressions": "788",<br />        "engagements": "134",<br />        "url\_clicks": "30",<br />        "detail\_expands": "1323"<br />      },<br />      "323456789": \{<br />        "impressions": "4",<br />        "engagements": "0",<br />        "url\_clicks": "2",<br />        "detail\_expands": "0"<br />      }<br />    }<br />  } |
| **IDs de Tweets no disponibles** | Para las consultas que incluyan IDs de Tweets que ya no estén disponibles (p. ej., porque se eliminaron), se devolverán los datos correspondientes para todos los IDs de Tweets disponibles y los IDs no disponibles se indicarán en una matriz llamada `unavailable_tweet_ids`. Por ejemplo:<br /><br />\{<br />    "start": "2015-11-17T22:00:00Z",<br />    "end": "2015-11-19T02:27:50Z",<br />    "unavailable\_tweet\_ids": \[<br />        "323456789"<br />    ],<br />    "group1": \{<br />     "423456789": \{<br />      "favorites": "67",<br />      "replies": "8",<br />      "retweets": 26<br />     }<br />    }<br />  } |

<div id="response-codes">
  #### **Códigos de respuesta**
</div>

| Estado | Texto | Descripción |
| :--- | :--- | :--- |
| 200 | OK  | La solicitud se completó correctamente. |
| 400 | Bad Request | Generalmente, esta respuesta ocurre por JSON no válido en la solicitud o porque no se envió ningún cuerpo JSON. |
| 401 | Unauthorized | La autenticación HTTP falló debido a credenciales no válidas. Verifique sus claves y tokens de OAuth. |
| 404 | Not Found | El recurso no se encontró en la URL a la que se envió la solicitud, probablemente porque se usó una URL incorrecta. |
| 429 | Too Many Requests | Su app superó el límite de solicitudes a la API. |
| 500 | Internal Server Error | Se produjo un error del lado de Gnip. Intente nuevamente su solicitud usando retroceso exponencial. |
| 502 | Proxy Error | Se produjo un error del lado de Gnip. Intente nuevamente su solicitud usando retroceso exponencial. |
| 503 | Service Unavailable | Se produjo un error del lado de Gnip. Intente nuevamente su solicitud usando retroceso exponencial. |

<div id="error-messages">
  #### **Mensajes de error**
</div>

En distintos escenarios, la Engagement API generará mensajes de error específicos de la situación que su aplicación debe estar preparada para manejar. La tabla siguiente incluye ejemplos comunes de estos mensajes y cómo debe interpretarlos. Tenga en cuenta que, en muchos casos, la Engagement API devolverá resultados parciales de los datos disponibles junto con mensajes de error específicos como parte de una respuesta 200 OK con información adicional.

| Mensaje de error | Descripción |
| :--- | :--- |
| `"errors":["Your account could not be authenticated. Reason: Access token not found"]` | Error en el componente de autenticación de la solicitud. El “Reason” debería proporcionar información útil para diagnosticar el error. Si no puede resolverlo, envíe el error completo, incluido el “Reason”, a nuestro equipo de soporte. |
| `"errors":["1 Tweet ID(s) are unavailable"],"unavailable_tweet_ids": ["TWEET_IDS"]` | El ID o los IDs de Tweet que ha solicitado ya no están disponibles, lo que generalmente indica que se han eliminado o que ya no están disponibles públicamente por otro motivo. |
| `"errors":["Impressions & engagements for tweets older than 90 days (*TIME_PERIOD*) are not supported"],"unsupported_for_impressions_engagements_tweet_ids":[*TWEET_IDS*]` | El ID o los IDs de Tweet que ha solicitado para el endpoint /totals no tienen 90 días o menos y, por lo tanto, no están disponibles para devolver las métricas de impresiones o de interacciones. |
| `"errors":["Forbidden to access tweets: *TWEET_IDS*"]` | El ID o los IDs de Tweet que ha solicitado no están disponibles en función del token de autenticación que está utilizando para recuperar datos en nombre de un tercero. |