---
title: "Account Activity API: Enterprise"
---

<Note>
  Este endpoint se actualizó para incluir metadatos de edición de publicaciones. Obtén más información sobre estos metadatos en la página de fundamentos ["Editar publicaciones"](/es/x-api/enterprise-gnip-2.0/fundamentals/edit-tweets). 

  Este endpoint suele usarse con los endpoints de Mensajes Directos. Hemos lanzado nuevos [endpoints de Mensajes Directos v2](/es/x-api/direct-messages/manage/introduction). Ten en cuenta que las Account Activity API de Enterprise y Premium admiten mensajes uno a uno de v2, pero todavía no admiten conversaciones en grupo.   
</Note>

Descripción general

`Enterprise`

La Account Activity API te permite suscribirte a actividades en tiempo real relacionadas con una cuenta de usuario mediante webhooks. Esto significa que puedes recibir publicaciones en tiempo real, Mensajes Directos y otros eventos de cuenta de una o varias de tus cuentas propias o suscritas a través de una única conexión.

Recibirás todas las actividades que se indican a continuación para cada suscripción de usuario en tu registro de webhook:

| Tipos de actividad |     |
| :--- | :--- |
| \* Publicaciones (del usuario)  <br />    <br />\* Eliminaciones de publicaciones (del usuario)<br />\* @menciones (del usuario)<br />\* Respuestas (al usuario o del usuario)<br />\* Retuits (del usuario o del usuario)<br />\* Citas (del usuario o del usuario)<br />\* Retuits de publicaciones citadas (del usuario o del usuario)<br />\* Me gusta (del usuario o del usuario)<br />\* Seguimientos (del usuario o del usuario)  <br />    <br />\* Dejar de seguir (del usuario) | \* Bloqueos (del usuario)<br />\* Desbloqueos (del usuario)<br />\* Silenciamientos (del usuario)<br />\* Quitar silencio (del usuario)<br />\* Mensajes Directos enviados (por el usuario)<br />\* Mensajes Directos recibidos (por el usuario)<br />\* Indicadores de escritura (para el usuario)<br />\* Confirmaciones de lectura (para el usuario)<br />\* Revocaciones de suscripción (del usuario) |

**Ten en cuenta** - No entregamos datos del timeline de inicio a través de la Account Activity API. Utiliza [GET statuses/home\_timeline](https://developer.x.com/en/docs/x-api/v1/tweets/timelines/overview) para extraer estos datos.
 

<div id="video-series">
  #### Serie de videos
</div>

Consulta nuestra [serie de videos en cuatro partes](https://www.youtube.com/watch?v=otPxejFhyy8\&index=0\&list=PLFKjcMIU2WshGG6Yj940XM7Z6BFs1zfBg) sobre la API de actividad de cuentas para ponerte al día.

<iframe src="https://platform.x.com/embed/Tweet.html?dnt=false&embedId=twitter-widget-0&features=eyJ0ZndfdGltZWxpbmVfbGlzdCI6eyJidWNrZXQiOltdLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X2ZvbGxvd2VyX2NvdW50X3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9iYWNrZW5kIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19yZWZzcmNfc2Vzc2lvbiI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfZm9zbnJfc29mdF9pbnRlcnZlbnRpb25zX2VuYWJsZWQiOnsiYnVja2V0Ijoib24iLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X21peGVkX21lZGlhXzE1ODk3Ijp7ImJ1Y2tldCI6InRyZWF0bWVudCIsInZlcnNpb24iOm51bGx9LCJ0ZndfZXhwZXJpbWVudHNfY29va2llX2V4cGlyYXRpb24iOnsiYnVja2V0IjoxMjA5NjAwLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X3Nob3dfYmlyZHdhdGNoX3Bpdm90c19lbmFibGVkIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19kdXBsaWNhdGVfc2NyaWJlc190b19zZXR0aW5ncyI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdXNlX3Byb2ZpbGVfaW1hZ2Vfc2hhcGVfZW5hYmxlZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdmlkZW9faGxzX2R5bmFtaWNfbWFuaWZlc3RzXzE1MDgyIjp7ImJ1Y2tldCI6InRydWVfYml0cmF0ZSIsInZlcnNpb24iOm51bGx9LCJ0ZndfbGVnYWN5X3RpbWVsaW5lX3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9mcm9udGVuZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9fQ%3D%3D&frame=false&hideCard=false&hideThread=false&id=996790447048613888&lang=en&origin=https%3A%2F%2Fdeveloper.x.com%2Fen%2Fdocs%2Fx-api%2Fenterprise%2Faccount-activity-api%2Foverview&sessionId=81f4a0339cbd7bd77b669faa00bd3a7224bc4418&theme=light&widgetsVersion=2615f7e52b7e0%3A1702314776716&width=550px" height="400px" />

<div id="feature-summary">
  ### Resumen de funciones
</div>

| Nivel | Precio | Número de suscripciones únicas | Número de webhooks | Fiabilidad y recuperación de actividad |
| :--- | :--- | :--- | :--- | :--- |
| Enterprise | [Contactar al equipo de ventas](/es/x-api/enterprise-gnip-2.0/enterprise-gnip) | Hasta 500+ | 3+  | [Reintentos](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) y [Reproducción](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api) |

- ¿Tienes preguntas? ¿Estás teniendo errores?
  - Lee nuestras [Preguntas frecuentes](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions) o la [guía de resolución de errores](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions).

- Explora nuestro código de ejemplo:
  - [Enterprise Account Activity API dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise), una aplicación web en Node que muestra eventos de webhook usando el nivel Enterprise de la Account Activity API e incluye la funcionalidad de [Reproducción](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api).
  - El [chatbot SnowBot](https://github.com/xdevplatform/SnowBotDev), una aplicación web en Ruby basada en las APIs Enterprise de Account Activity y Direct Message.

<div id="manage-webhooks-and-subscribed-users">
  ## Gestionar webhooks y usuarios suscritos
</div>

**⏱ Lectura de 10 min**

La Account Activity API para empresas proporciona mensajes JSON basados en webhooks cada vez que haya eventos asociados con cuentas de X suscritas a su servicio. X entrega esas actividades a su webhook registrado. En los siguientes pasos, aprenderá a gestionar webhooks y usuarios suscritos.

Aprenderá a registrar, ver y eliminar tanto webhooks como usuarios suscritos. Usaremos comandos simples de cURL para realizar solicitudes a los distintos endpoints de la API. cURL es una herramienta de línea de comandos para enviar o recibir solicitudes utilizando la sintaxis de URL.

Necesitará:

- Una app de X registrada - _[regístrese aquí](https://developer.x.com/content/developer-twitter/en/apps)_
- Un token de portador (bearer token) - _[más información](/es/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)_
- Un webhook que supere una comprobación de Desafío-Respuesta (CRC) - _[más información](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks)_
- Una cuenta empresarial - _\[solicite aquí]https://developer.x.com/en/products/x-api/enterprise_

_Antes de comenzar, le recomendamos revisar nuestro [repositorio de GitHub](https://github.com/xdevplatform/account-activity-dashboard), que proporciona una aplicación web de ejemplo y scripts auxiliares para comenzar con la Account Activity API de X_

<div id="managing-a-webhook">
  #### Gestión de un webhook:
</div>

Usar un webhook le permite suscribirse a actividades en tiempo real relacionadas con una cuenta de usuario mediante una única conexión.

<Tabs>
  <Tab title="Agregar un webhook">
    Comencemos registrando una nueva URL de webhook para el contexto de la aplicación indicada.

    La URL se validará mediante una solicitud CRC antes de guardarla. Una vez registrado el webhook, asegúrese de anotar el ID del webhook, ya que lo necesitará más adelante.

    Copie la siguiente solicitud cURL en su línea de comandos tras actualizar lo siguiente:

    - **URL** `<URL>` p. ej., `https://yourdomain.com/webhooks/twitter/`

    - **Consumer key** `<CONSUMER_KEY>` p. ej., `xvz1evFS4wEEPTGEFPHBog`

    - **Access token** `<ACCESS_TOKEN>` p. ej., `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```
      curl --request POST --url 'https://api.x.com/1.1/account_activity/webhooks.json?url=<URL>' --header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<ACCESS_TOKEN>", oauth_version="1.0"'
      ```
  </Tab>

  <Tab title="Ver un webhook">
    Ejecutaremos el siguiente comando para obtener todas las URL de webhook registradas y sus estados para la aplicación indicada.

    Copie la siguiente solicitud cURL en su línea de comandos tras actualizar lo siguiente:

    - **Bearer token** `<BEARER_TOKEN>` p. ej., `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

      ```curl --request GET --url https://api.x.com/1.1/account_activity/webhooks.json --header 'authorization: Bearer <BEARER_TOKEN>'
      ```
  </Tab>

  <Tab title="Eliminar un webhook">
    Para eliminar un webhook de la configuración de la aplicación indicada, copie la siguiente solicitud cURL en su línea de comandos tras actualizar lo siguiente:

    - **Webhook ID** `<:WEBHOOK_ID>` p. ej., `1234567890`

    - **Consumer key** `<CONSUMER_KEY>` p. ej., `xvz1evFS4wEEPTGEFPHBog`

    - **Access token** `<ACCESS_TOKEN>` p. ej., `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```curl --request DELETE --url https://api.x.com/1.1/account_activity/webhooks/<:WEBHOOK_ID>.json --header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<ACCESS_TOKEN>", oauth_version="1.0"'
      ```
  </Tab>
</Tabs>

<div id="managing-subscribed-users">
  #### Gestión de usuarios suscritos:
</div>

Una vez que hayas registrado un webhook, puedes agregar un usuario suscrito a la Account Activity API para comenzar a recibir la actividad de su cuenta.

<Tabs>
  <Tab title="Adding a subscription">
    Comenzaremos suscribiendo a un usuario para que recibas todos los tipos de eventos.

    Copia la siguiente solicitud cURL en tu línea de comandos después de realizar los siguientes cambios:

    - **ID del webhook** `<:WEBHOOK_ID>` p. ej., `1234567890`

    - **Nombre de la consumer key** `<CONSUMER_KEY>` p. ej., `xvz1evFS4wEEPTGEFPHBog`

    - **Token de acceso del usuario suscrito** `<SUBSCRIBING_USER'S_ACCESS_TOKEN>` p. ej., `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```
      curl --request POST --url https://api.x.com/1.1/account_activity/webhooks/<:WEBHOOK_ID>/subscriptions/all.json --header 'authorization: OAuth oauth_consumer_key="<CONSUMER_KEY>", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="<SUBSCRIBING_USER'S_ACCESS_TOKEN>", oauth_version="1.0"'
      ```
  </Tab>

  <Tab title="Viewing subscriptions">
    Para ver una lista de todas las suscripciones por tipo de actividad para un webhook específico, copia la siguiente solicitud cURL en tu línea de comandos después de realizar los siguientes cambios:

    - **ID del webhook** `<:WEBHOOK_ID>` p. ej., `1234567890`

    - **Bearer token** `<BEARER_TOKEN>` p. ej., `AAAAAAAAAAAA0%2EUifi76ZC9Ub0wn...`

      ```
      curl --request GET --url https://api.x.com/1.1/account_activity/webhooks/<:WEBHOOK_ID>/subscriptions/all/list.json --header 'authorization: Bearer <BEARER_TOKEN>'
      ```
  </Tab>

  <Tab title="Removing a subscription">
    Tras la desactivación, ya no se enviarán eventos del usuario solicitante a la URL del webhook.

    Para desactivar una suscripción desde el contexto del usuario y la aplicación proporcionados, copia la siguiente solicitud cURL en tu línea de comandos después de realizar los siguientes cambios:

    - **ID del webhook** `<:WEBHOOK_ID>` p. ej., `1234567890`

    - **Consumer key** `<CONSUMER_KEY>` p. ej., `xvz1evFS4wEEPTGEFPHBog`

    - **Token de acceso del usuario suscrito** `<SUBSCRIBING_USER'S_ACCESS_TOKEN>` p. ej., `370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb`

      ```
      curl --request DELETE --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all.json --header 'authorization: OAuth oauth_consumer_key="CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="SUBSCRIBED_USER'S_ACCESS_TOKEN", oauth_version="1.0"'
      ```
  </Tab>
</Tabs>

¡Buen trabajo! Ahora deberías poder gestionar tus webhooks y usuarios suscritos.

<div id="referenced-articles">
  #### Artículos relacionados
</div>

- [Descripción general de Challenge-Response Check (CRC)](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks)
- \[Tipos de datos de Account Activity]\(/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-data-object-structure
- [Gestión de webhooks y suscripciones](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#managing-webhooks-and-subscriptions)

<div id="a-video-walkthrough-of-the-account-activity-api">
  ## Un recorrido en video de la Account Activity API
</div>

En este recorrido en video, aprenderá sobre las capacidades de los niveles Premium y Enterprise de la Account Activity API.

Al final de este video, conocerá las siguientes capacidades:

- Registrar un webhook
- Agregar una suscripción de usuario
- Eliminar una suscripción de usuario
- Recibir actividades de cuenta
- Reprocesar actividades de cuenta

<iframe src="https://platform.x.com/embed/Tweet.html?dnt=false&embedId=twitter-widget-0&features=eyJ0ZndfdGltZWxpbmVfbGlzdCI6eyJidWNrZXQiOltdLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X2ZvbGxvd2VyX2NvdW50X3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9iYWNrZW5kIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19yZWZzcmNfc2Vzc2lvbiI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfZm9zbnJfc29mdF9pbnRlcnZlbnRpb25zX2VuYWJsZWQiOnsiYnVja2V0Ijoib24iLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X21peGVkX21lZGlhXzE1ODk3Ijp7ImJ1Y2tldCI6InRyZWF0bWVudCIsInZlcnNpb24iOm51bGx9LCJ0ZndfZXhwZXJpbWVudHNfY29va2llX2V4cGlyYXRpb24iOnsiYnVja2V0IjoxMjA5NjAwLCJ2ZXJzaW9uIjpudWxsfSwidGZ3X3Nob3dfYmlyZHdhdGNoX3Bpdm90c19lbmFibGVkIjp7ImJ1Y2tldCI6Im9uIiwidmVyc2lvbiI6bnVsbH0sInRmd19kdXBsaWNhdGVfc2NyaWJlc190b19zZXR0aW5ncyI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdXNlX3Byb2ZpbGVfaW1hZ2Vfc2hhcGVfZW5hYmxlZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9LCJ0ZndfdmlkZW9faGxzX2R5bmFtaWNfbWFuaWZlc3RzXzE1MDgyIjp7ImJ1Y2tldCI6InRydWVfYml0cmF0ZSIsInZlcnNpb24iOm51bGx9LCJ0ZndfbGVnYWN5X3RpbWVsaW5lX3N1bnNldCI6eyJidWNrZXQiOnRydWUsInZlcnNpb24iOm51bGx9LCJ0ZndfdHdlZXRfZWRpdF9mcm9udGVuZCI6eyJidWNrZXQiOiJvbiIsInZlcnNpb24iOm51bGx9fQ%3D%3D&frame=false&hideCard=false&hideThread=false&id=1204084171334832128&lang=en&origin=https%3A%2F%2Fdeveloper.x.com%2Fen%2Fdocs%2Fx-api%2Fenterprise%2Faccount-activity-api%2Fquick-start%2Fa-visual-walkthrough-of-the-account-activity-api&sessionId=b5b8e259a4c6287be2413de9059093170036fb30&theme=light&widgetsVersion=2615f7e52b7e0%3A1702314776716&width=550px" />

- ¿Tienes preguntas? ¿Te encuentras con errores?
  - Lee nuestras [Preguntas frecuentes](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions) o la [guía de resolución de errores](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#frequently-asked-questions).

- Explora nuestro código de ejemplo:
  - [Enterprise Account Activity API dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise), una aplicación web en Node que muestra eventos de webhook usando el nivel Enterprise de la Account Activity API e incluye la funcionalidad de [Replay](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api).
  - El [SnowBot chatbot](https://github.com/xdevplatform/SnowBotDev), una aplicación web en Ruby creada sobre las APIs Enterprise de Account Activity y Direct Message.

**Enterprise**

<div id="getting-started-with-webhooks">
  ## Introducción a los webhooks
</div>

La Account Activity API es una API basada en webhooks que envía eventos de cuenta a una aplicación web que usted desarrolla, despliega y aloja.

Hay varios detalles de “infraestructura” que requieren atención antes de poder empezar a recibir eventos de webhook en su aplicación consumidora de eventos. Como se describe a continuación, necesitará crear una app de X, obtener acceso a la Account Activity API y desarrollar una aplicación web que consuma eventos de webhook. 

<div id="1-create-a-x-app">
  ### 1. Crea una app de X.
</div>

- Crea una [app de X](/es/resources/fundamentals/developer-apps) con una cuenta de desarrollador aprobada desde el [portal para desarrolladores](/es/resources/fundamentals/developer-portal). Si creas la app en nombre de tu empresa, se recomienda hacerlo con una cuenta corporativa de X. Para solicitar una cuenta de desarrollador, [haz clic aquí](/es/resources/fundamentals/developer-apps).
- Habilita “Read, Write and Access direct messages” en la pestaña [Permissions](/es/resources/fundamentals/developer-apps#oauth-1-0a-app-permissions) de la página de tu app.
- En la pestaña “Keys and Access Tokens”, toma nota del Consumer Key (API Key) y del Consumer Token (API Secret) de tu app.
- En la misma pestaña, genera el [Access Token y el Access Token Secret](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) de tu app. Necesitarás estos access tokens para registrar tu URL de webhook, que es donde X enviará los eventos de cuenta.
- Si no estás familiarizado con [X Sign-in](/es/resources/fundamentals/authentication#log-in-with-x) y cómo funcionan los contextos de usuario con la API de X, revisa [Obtaining Access Tokens](https://dev.x.com/webhooks/access-tokens). A medida que agregues cuentas para recibir eventos, las suscribirás usando los access tokens de esa cuenta.
- Toma nota del ID numérico de tu app, tal como aparece en la página [“Apps”](/es/resources/fundamentals/developer-apps) del [portal para desarrolladores](/es/resources/fundamentals/developer-portal). Cuando solicites acceso a Account Activity API, necesitarás este ID de app.
   

<div id="2-get-account-activity-api-access">
  ### 2. Obtener acceso a la API de Account Activity
</div>

Después de crear una app de X, el siguiente paso es solicitar acceso a la API de Account Activity.

La API de Account Activity solo está disponible para Enterprise, por lo que deberá enviar una solicitud mediante el siguiente enlace.

<Button href="https://developer.x.com/en/enterprise-application.html">
  Solicitar acceso a Enterprise
</Button>

<div id="3-develop-webhook-consumer-app">
  ### 3. Desarrollar la app consumidora de webhooks
</div>

Una vez que haya recibido acceso a la Account Activity API, debe desarrollar, implementar y alojar una aplicación web que reciba eventos de webhooks de X.

- Cree una aplicación web con una URL para usar como su webhook para recibir eventos. Este es el endpoint implementado en su servidor que escuchará los eventos de webhook entrantes de X.
  - La _ruta_ del URI depende completamente de usted. Este ejemplo sería válido: https://mydomain.com\_/service/listen\_

  - Si va a escuchar webhooks de diversas fuentes, un patrón común es: https://mydomain.com/webhook/twitter

  - Tenga en cuenta que la URL especificada no puede incluir un puerto (https://mydomain.com:5000/NoWorkie).

- Como se describe en nuestra guía [Asegurar webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks), el primer paso es escribir código que reciba una solicitud GET de X Challenge Response Check (CRC) y responda con un JSON correctamente formateado.

- Registre la URL de su webhook. Hará una solicitud POST al endpoint /webhooks.json?url=. Cuando haga esta solicitud, X enviará una solicitud CRC a su aplicación web. Cuando un webhook se registra correctamente, la respuesta incluye un id de webhook. Este id de webhook se necesitará más adelante al realizar algunas solicitudes a la Account Activity API.

- X enviará eventos de webhook de cuenta a la URL que registró. Asegúrese de que su aplicación web admita solicitudes POST para eventos entrantes. Estos eventos estarán codificados en JSON. Consulte [AQUÍ](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-data-object-structure) para ver ejemplos de cargas JSON de webhooks.

- Una vez que su aplicación web esté lista, el siguiente paso es agregar cuentas para recibir actividades. Al agregar (o eliminar) cuentas, realizará solicitudes POST haciendo referencia al id de la cuenta. Consulte nuestra [guía sobre cómo agregar suscripciones](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#managing-webhooks-and-subscriptions) para obtener más información.

<div id="4-validate-setup">
  ### 4. Validar la configuración
</div>

- Para validar que tu app y el webhook están configurados correctamente, marca como favorita una Publicación de una de las cuentas de X a las que tu app esté suscrita. Deberías recibir un `favorite_events` mediante una solicitud POST a la URL de tu webhook por cada favorito que reciban tus suscriptores.
- Ten en cuenta que pueden transcurrir hasta 10 segundos antes de que los eventos comiencen a entregarse después de agregar una suscripción.

**Notas importantes**

- Al registrar la URL de tu webhook, tu aplicación web debe autenticarse con su token y secreto de consumidor y con el token y secreto de acceso de usuario del propietario de la app.

- Todos los Mensajes Directos entrantes se entregarán mediante webhooks. Todos los Mensajes Directos enviados mediante [POST direct\_messages/events/new (message\_create)](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) también se entregarán mediante webhooks. Esto permite que tu aplicación web conozca los Mensajes Directos enviados desde un cliente diferente.

- Ten en cuenta que cada evento de webhook incluye un for\_user\_id (ID de usuario) que indica para qué suscripción se entregó el evento.

- Si tienes dos usuarios usando tu aplicación web para Mensajes Directos en la misma conversación, tu webhook recibirá dos eventos duplicados (uno por cada usuario). Tu aplicación web debe contemplarlo.

- Si tienes más de una aplicación web que comparte la misma URL de webhook y el mismo usuario asignado a cada app, el mismo evento se enviará a tu webhook varias veces (una por cada aplicación web).

- En algunos casos, tu webhook puede recibir eventos duplicados. Tu aplicación de webhook debe tolerarlo y realizar la desduplicación por ID de evento.

- No esperes que la respuesta de Respuesta rápida siga inmediatamente a una solicitud. Un usuario puede ignorar una solicitud de Respuesta rápida y responder mediante un Mensaje Directo tradicional. El usuario también puede proporcionar una Respuesta rápida a una solicitud a la que no haya respondido antes en el hilo de mensajes.

- Consulta el código de ejemplo:
  - [Enterprise Account Activity API dashboard](https://github.com/xdevplatform/account-activity-dashboard-enterprise), una aplicación web en Node que muestra eventos de webhook usando el nivel enterprise de la Account Activity API e incluye la funcionalidad de [Replay](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api).

  - El [chatbot SnowBot](https://github.com/xdevplatform/SnowBotDev), una aplicación web en Ruby creada sobre las API de Account Activity y Direct Message. Este código base incluye un [script](https://github.com/xdevplatform/SnowBotDev/wiki/Account-Activity-API-setup-script) para ayudar a configurar los webhooks de la Account Activity API.

<div id="securing-webhooks">
  ## Asegurar los webhooks
</div>

Las API de X basadas en webhooks ofrecen dos métodos para confirmar la seguridad de tu servidor de webhooks:

1. Las comprobaciones de desafío-respuesta permiten a X confirmar la propiedad de la aplicación web que recibe eventos de webhook.
2. El encabezado de la firma en cada solicitud POST te permite confirmar que X es el origen de los webhooks entrantes.
    

<div id="challenge-response-checks">
  ### Comprobaciones de desafío-respuesta
</div>

Para verificar que usted es el propietario tanto de la app como de la URL del webhook, X realizará una Comprobación de Desafío-Respuesta (CRC), que no debe confundirse con una comprobación de redundancia cíclica. Cuando se envía un CRC, X hará una solicitud GET a su app web con un parámetro _`crc_token`_. Cuando se reciba esa solicitud, su app web deberá construir un `response_token` cifrado basado en el parámetro _`crc_token`_ y el Consumer Secret de su app (detalles a continuación). El `response_token` debe codificarse en JSON (vea el ejemplo a continuación) y devolverse en un plazo de tres segundos. Si tiene éxito, se devolverá un `id` de webhook.

Se enviará un CRC cuando registre su URL de webhook, por lo que implementar su código de respuesta de CRC es un primer paso fundamental. Una vez que su webhook esté establecido, X activará un CRC aproximadamente cada 24 horas desde la última vez que recibimos una respuesta satisfactoria. Su app también puede activar un CRC cuando sea necesario realizando una solicitud PUT con el `id` de su webhook. Activar un CRC es útil mientras desarrolla su aplicación de webhook, después de implementar código nuevo y reiniciar su servicio.

Se debe esperar que el _`crc_token`_ cambie para cada solicitud de CRC entrante y debe usarse como el mensaje en el cálculo, donde su Consumer Secret es la clave.

En caso de que la respuesta no se envíe dentro de 3 segundos o se vuelva inválida, los eventos dejarán de enviarse al webhook registrado.

<div id="the-crc-request-will-occur">
  #### La solicitud de CRC se producirá:
</div>

- Cuando se registre una URL de webhook.
- Aproximadamente cada _hora_ para validar tu URL de webhook.
- Puedes activar manualmente un CRC realizando una solicitud PUT. A medida que desarrolles tu cliente de webhook, deberías planificar activar manualmente el CRC mientras elaboras tu respuesta de CRC. 
   

<div id="response-requirements">
  #### Requisitos de la respuesta:
</div>

- Un hash HMAC SHA-256 codificado en base64 generado a partir del `crc_token` y el Consumer Secret de tu app.
- `response_token` válido y formato JSON.
- Latencia inferior a 3 segundos.
- Código de respuesta HTTP 200.
   

<div id="language-specific-hmac-libraries">
  #### Bibliotecas HMAC específicas del lenguaje:
</div>

- [Java/Scala](https://docs.oracle.com/javase/8/docs/api/index.html?javax/crypto/Mac.html)
- [Ruby](http://ruby-doc.org/stdlib-2.1.0/libdoc/openssl/rdoc/OpenSSL/HMAC.html)
- [Node.js](https://nodejs.org/api/crypto.html#crypto_class_hmac)
- [Python](https://docs.python.org/2/library/hmac.html)

<div id="example-response-token-generation-in-python">
  #### Ejemplo de generación de token de respuesta en Python:
</div>

A continuación se define una ruta en una aplicación web de Flask para Python 2.7 que responderá correctamente a la verificación de desafío-respuesta.

```
import base64
import hashlib
import hmac
import json


\# Defines a route for the GET request
@app.route('/webhooks/twitter', methods=\['GET'\])
def webhook_challenge():

  # crea un hash HMAC SHA-256 a partir del token entrante y tu consumer secret
  sha256\_hash\_digest = hmac.new(TWITTER\_CONSUMER\_SECRET, msg=request.args.get('crc_token'), digestmod=hashlib.sha256).digest()

  # construye los datos de la respuesta con el hash codificado en base64
  response = {
    'response\_token': 'sha256=' + base64.b64encode(sha256\_hash_digest)
  }

  # devuelve una respuesta JSON con el formato correcto
  return json.dumps(response)
```

<div id="example-json-response">
  #### Ejemplo de respuesta JSON:
</div>

Con la ruta definida como arriba, su aplicación web debería devolver una respuesta similar a la siguiente al navegar a https://your-app-domain/webhooks/twitter?crc\_token=foo en su navegador web.

```
{
  "response_token": "sha256=x0mYd8hz2goCTfcNAaMqENy2BFgJJfJOb4PdvTffpwg="
}
```

<div id="other-examples">
  #### Otros ejemplos:
</div>

- [AQUÍ](https://github.com/xdevplatform/account-activity-dashboard/blob/master/helpers/security.js) encontrarás un método de respuesta CRC de ejemplo escrito en Node/JS.
- [AQUÍ](https://github.com/xdevplatform/SnowBotDev/blob/master/app/controllers/snow_bot_dev_app.rb) encontrarás un método de respuesta CRC de ejemplo escrito en Ruby (consulta _generate\_crc\_response_ y la ruta /GET que recibe eventos CRC).

<div id="optional-signature-header-validation">
  ### Validación opcional del encabezado de firma
</div>

Al recibir una solicitud POST de X, al enviar una solicitud GET para crear un webhook o al enviar una solicitud GET para realizar un CRC manual, se incluirá una firma hash en los encabezados como x-twitter-webhooks-signature. Esta firma puede utilizarse para validar que el origen de los datos es X. La firma hash de POST comienza con sha256=, lo que indica el uso de HMAC SHA-256 para cifrar tu X App Consumer Secret y la carga útil. El hash de GET se calcula a partir de la cadena de parámetros de consulta crc\_token=$token\&nonce=$nonce.

**Pasos para validar una solicitud**

1. Crea un hash usando tu consumer secret y el cuerpo de la carga útil entrante.
2. Compara el hash creado con el valor x-twitter-webhooks-signature codificado en base64. Usa un método como [compare\_digest](https://docs.python.org/2/library/hmac.html) para reducir la vulnerabilidad a ataques de temporización.

<div id="additional-security-guidelines">
  ### Directrices de seguridad adicionales
</div>

A continuación, se presentan directrices de seguridad adicionales que debe considerar para su aplicación web. No implementar estas directrices no impedirá que su webhook funcione, pero el equipo de Seguridad de la Información de X las recomienda encarecidamente. Si no está familiarizado con las recomendaciones a continuación, consulte con el administrador de su servidor.

<div id="x-aggregate-network-blocks">
  #### Bloques de red agregados de X
</div>

Para mayor seguridad, quizá desee añadir los siguientes bloques de red agregados a una lista de permitidos:

- 199.59.148.0/22

- 199.16.156.0/22

- 192.133.77.0/26

- 64.63.15.0/24

- 64.63.31.0/24

- 64.63.47.0/24

- 202.160.128.0/24

- 202.160.129.0/24

- 202.160.130.0/24

<div id="recommended-server-configurations">
  #### Configuraciones recomendadas del servidor
</div>

- Calificación “A” en la prueba de [ssllabs.com](http://ssllabs.com/)
- **Habilitar TLS 1.2**
- Habilitar Forward Secrecy
- Desactivar SSLv2
- Desactivar SSLv3 (por POODLE)
- Desactivar TLS 1.0
- Desactivar TLS 1.1
- Desactivar la compresión de TLS
- Desactivar los Session Tickets a menos que roten las claves de los session tickets.
- Establecer en “on” la opción “ssl\_prefer\_server\_ciphers” o “SSLHonorCipherOrder” en la configuración de SSL.
- Asegurarse de que la lista de cifrados sea moderna, por ejemplo:
  `ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:DES-CBC3-SHA`

<div id="managing-webhooks-and-subscriptions">
  ## Administración de webhooks y suscripciones
</div>

<div id="creating-changing-webhooks">
  ### Creación y modificación de webhooks
</div>

Para cambiar las URL de los webhooks, debe eliminar el webhook existente y luego crear uno nuevo. Tenga en cuenta que, al hacerlo, deberá volver a agregar las suscripciones de usuarios al nuevo webhook.

<div id="webhook-configuration-management-endpoints">
  #### Endpoints para la administración de la configuración de webhooks:
</div>

|     |     |
| :--- | :--- |
| **Método** | Enterprise |
| Registra una URL de webhook / Genera un webhook\_id | [POST webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) |
| Devuelve todas las URL de webhook y sus estados | [GET webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |
| Elimina la configuración de webhook actual de la app | [DELETE webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) |
| Activa manualmente una solicitud CRC | [PUT webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) |

<div id="why-cant-i-just-update-the-webhook-url">
  #### ¿Por qué no puedo simplemente actualizar la URL del webhook?
</div>

¿Por qué las configuraciones de webhook son inmutables? X se toma la seguridad muy en serio. Si se cambia la URL de tu webhook, cabe la posibilidad de que la consumer key y la consumer secret de tu aplicación se hayan visto comprometidas. Al exigirte crear una nueva configuración de webhook, también debes volver a suscribirte a los eventos de tus usuarios. Esto requiere el uso de tokens de acceso que es menos probable que un actor malicioso posea. Como resultado, se reduce la probabilidad de que un tercero reciba la información privada de tus usuarios.
 

<div id="adding-removing-user-subscriptions">
  ### Agregar y eliminar suscripciones de usuario
</div>

El soporte para miles de suscripciones está disponible con el nivel Enterprise. Si ya cuenta con un administrador de cuenta, comuníquese con esa persona para cualquier consulta. Para solicitar acceso a las API de Enterprise, [haga clic aquí](https://developer.x.com/en/products/x-api/enterprise). 

<div id="subscription-management-endpoints">
  #### Endpoints de gestión de suscripciones
</div>

|     |     |
| :--- | :--- |
| Método | Enterprise |
| Agregar nueva suscripción de usuario | [POST webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) |
| Recuperar una suscripción de usuario | [GET webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) |
| Devuelve una lista de todas las suscripciones activas | [GET webhooks/:webhook\_id/subscriptions/all/list](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |
| Desactiva una suscripción de usuario usando OAuth solo de la aplicación | [DELETE webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |

Account Activity API: Enterprise

<Note>
  **Tenga en cuenta**: 

  X debe habilitar el acceso a la Account Activity API para su App de desarrollador antes de que pueda empezar a usar la API. Para ello, asegúrese de compartir el App ID que piensa usar para la autenticación con su account manager o con el equipo de soporte técnico.
</Note>

La [Account Activity API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity) consta de un conjunto de endpoints que le permiten crear y administrar suscripciones de usuario para recibir actividades de cuenta en tiempo real de todas sus cuentas suscritas a través de una única conexión. 

Hay dos métodos de autenticación disponibles con la Account Activity API ([OAuth 1.0a](/es/resources/fundamentals/authentication#oauth-1-0a-2) y [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)). El método de autenticación que debe usar dependerá del endpoint que esté utilizando.

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Descripción** | **Endpoint** | OAuth 1.0a  <br />(contexto de usuario) | Token Bearer de OAuth 2.0 (solo aplicación) |
| Registrar una nueva URL de webhook para el contexto de la aplicación especificada | [POST account\_activity/webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks) | ✓   |     |
| Devolver todas las URL y sus estados para la aplicación especificada | [GET account\_activity/webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |     | ✓   |
| Activar una comprobación de respuesta de desafío (CRC) para la URL de un webhook específico | [PUT account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) | ✓   |     |
| Suscribir la aplicación a los eventos de cuenta de un usuario | [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Devolver un conteo de suscripciones activas actualmente | [GET account\_activity/subscriptions/count](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |     | ✓   |
| Comprobar si una configuración de webhook está suscrita a los eventos de un usuario | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Devolver una lista de suscripciones activas actualmente | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all/list](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all-list) |     | ✓   |
| Eliminar un webhook | [DELETE account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) | ✓   |     |
| \[OBSOLETO] Desactivar una suscripción para el contexto de usuario y la aplicación proporcionados | [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) | ✓ \* |     |
| Desactivar una suscripción usando OAuth de solo aplicación | [DELETE /account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |     | ✓   |
| Reentregar actividades a un webhook | [POST /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#replay-api) |     | ✓   |

\*\_ La autenticación requiere los tokens de acceso del usuario suscriptor. \_

Para los endpoints que requieren autenticación con contexto de usuario de OAuth 1.0a, deberá proporcionar las siguientes credenciales para autenticar la solicitud:

- Claves de consumidor (Clave de API y Secreto)
- Tokens de acceso (Token de acceso y Secreto)

En el caso de los siguientes tres endpoints, se realizan acciones de escritura en el contexto de su aplicación (no se involucran usuarios de X). Por lo tanto, los tokens de acceso que debe proporcionar son los de su App de desarrollador. Estos se pueden generar directamente en el [portal para desarrolladores](https://developer.x.com/en/portal/projects-and-apps), en la pestaña “Keys and tokens” de su App.  

- [POST account\_activity/webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks): Registrar una nueva URL de webhook para el contexto de aplicación indicado
- [PUT account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id): Iniciar una verificación de respuesta de desafío (CRC) para la URL del webhook especificado
- [DELETE account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id): Eliminar un webhook

Por otro lado, en el caso de los siguientes tres endpoints, se realiza una solicitud que permite que su aplicación acceda a datos protegidos en nombre de un usuario de X (por ejemplo, Mensajes Directos). Por lo tanto, debe proporcionar los tokens de acceso pertenecientes al usuario suscriptor en cuestión. Los tokens de acceso requeridos se pueden obtener usando el flujo OAuth de 3 partes (consulte [OAuth 1.0a: how to obtain a user’s Access Tokens](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)). Estos endpoints se han marcado con un asterisco en la tabla anterior (\*).

- [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all): Suscribir la aplicación a los eventos de la cuenta de un usuario
- [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all): Verificar si una configuración de webhook está suscrita a los eventos de un usuario
- [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated): Desactivar una suscripción para el contexto de usuario y la aplicación proporcionados \[EN DESUSO]

<Note>
  **Tenga en cuenta**: 

  Asegúrese de que su App de desarrollador esté habilitada para “Read, Write, and Direct Messages”. Puede cambiar esta configuración en la [sección Projects & Apps](https://developer.x.com/en/portal/projects-and-apps) de su cuenta de desarrollador, en “App permissions” de la App seleccionada. Deberá volver a generar sus credenciales de la App después de cambiar la configuración de permisos.
</Note>

Puede encontrar una lista de todos los endpoints disponibles con la Account Activity API, incluida la descripción correspondiente y ejemplos de solicitudes cURL con ejemplos de implementación de autenticación, en [the API reference documentation](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index).

Para obtener información adicional, consulte la [aplicación web de ejemplo y scripts auxiliares](https://github.com/xdevplatform/account-activity-dashboard-enterprise) de XDev para comenzar con la Enterprise Account Activity API.

<Note>
  **Tenga en cuenta**: 

  X debe habilitar el acceso a la Account Activity API para su App de desarrollador antes de que pueda comenzar a usar la API. Para ello, asegúrese de compartir el App ID que piensa usar para fines de autenticación con su account manager o equipo de soporte técnico.
</Note>

La [Account Activity API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity) consta de un conjunto de endpoints que le permiten crear y administrar suscripciones de usuario para recibir actividades de cuenta en tiempo real de todas sus cuentas suscritas a través de una sola conexión. 

Hay dos métodos de autenticación disponibles con la Account Activity API ([OAuth 1.0a](/es/resources/fundamentals/authentication#oauth-1-0a-2) y [OAuth 2.0 Bearer Token](/es/resources/fundamentals/authentication#oauth-2-0)). El método de autenticación que debe usar dependerá del endpoint que esté utilizando.

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Descripción** | **Endpoint** | OAuth 1.0a  <br />(contexto de usuario) | Token portador de OAuth 2.0 (solo aplicación) |
| Registrar una nueva URL de webhook para el contexto de la aplicación indicada | [POST account\_activity/webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks) | ✓   |     |
| Devolver todas las URL y sus estados para la aplicación indicada | [GET account\_activity/webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |     | ✓   |
| Activar una verificación de respuesta al desafío (CRC) para la URL de un webhook dado | [PUT account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) | ✓   |     |
| Suscribir la aplicación a los eventos de la cuenta de un usuario | [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Devolver el recuento de las suscripciones activas actualmente | [GET account\_activity/subscriptions/count](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |     | ✓   |
| Comprobar si una configuración de webhook está suscrita a los eventos de un usuario | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) | ✓ \* |     |
| Devolver una lista de las suscripciones activas actualmente | [GET account\_activity/webhooks/:webhook\_id/subscriptions/all/list](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all-list) |     | ✓   |
| Eliminar un webhook | [DELETE account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) | ✓   |     |
| \[EN DESUSO] Desactivar una suscripción para el contexto de usuario y la aplicación proporcionados | [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) | ✓ \* |     |
| Desactivar una suscripción usando OAuth de solo aplicación | [DELETE /account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |     | ✓   |
| Reentregar actividades a un webhook | [POST /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#replay-api) |     | ✓   |

\*\_ La autenticación requiere los tokens de acceso del usuario suscriptor. \_

Para los endpoints que requieren autenticación con contexto de usuario de OAuth 1.0a, deberá proporcionar las siguientes credenciales para autenticar la solicitud:

- Claves de consumidor (clave y secreto de API)
- Tokens de acceso (token y secreto de acceso)

En el caso de los siguientes tres endpoints, realiza acciones de escritura dentro del contexto de su aplicación (no intervienen usuarios de X). Por lo tanto, los tokens de acceso que debe proporcionar son los que pertenecen a su App de desarrollador. Estos se pueden generar directamente en el [portal para desarrolladores](https://developer.x.com/en/portal/projects-and-apps), en la pestaña “Keys and tokens” de su App.  

- [POST account\_activity/webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks): Registrar una nueva URL de webhook para el contexto de aplicación indicado
- [PUT account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id): Iniciar una verificación de respuesta al desafío (CRC) para la URL de un webhook determinado
- [DELETE account\_activity/webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id): Eliminar un webhook

Por otro lado, en el caso de los siguientes tres endpoints, está realizando una solicitud que permite a su aplicación acceder a datos protegidos en nombre de un usuario de X (por ejemplo, Mensajes Directos). Por lo tanto, debe proporcionar los tokens de acceso pertenecientes al usuario suscriptor en cuestión. Los tokens de acceso requeridos pueden obtenerse utilizando el flujo OAuth de 3 partes (consulte [OAuth 1.0a: how to obtain a user’s Access Tokens](/es/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)). Estos endpoints han sido marcados con un asterisco en la tabla anterior (\*).

- [POST account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all): Suscribir la aplicación a los eventos de la cuenta de un usuario
- [GET account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all): Verificar si una configuración de webhook está suscrita a los eventos de un usuario
- [DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated): Desactivar una suscripción para el contexto de usuario y la aplicación proporcionados \[EN DESUSO]

<Note>
  **Tenga en cuenta**: 

  Asegúrese de que su App de desarrollador esté habilitada para “Read, Write, and Direct Messages.” Puede cambiar esta configuración en la [sección Projects & Apps](https://developer.x.com/en/portal/projects-and-apps) de su cuenta de desarrollador, en “App permissions” para la App de desarrollador seleccionada. Deberá volver a generar las credenciales de su App después de cambiar la configuración de permisos.
</Note>

La lista de todos los endpoints disponibles con la Account Activity API, incluida la descripción asociada y ejemplos de solicitudes cURL con ejemplos de implementación de autenticación, se encuentra en [la documentación de referencia de la API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index).

Para obtener más información, consulte la [aplicación web de ejemplo y scripts auxiliares](https://github.com/xdevplatform/account-activity-dashboard-enterprise) de XDev para comenzar con la Enterprise Account Activity API.

<div id="retries">
  ## Reintentos
</div>

`Enterprise`

Uno de los beneficios del nivel Enterprise de la Account Activity API es un mecanismo de reintento para eventos de webhook. Si no se recibe un código de respuesta HTTP 200 "success", el servidor de X iniciará un mecanismo de reintento y reenviará el evento de webhook hasta tres veces en un período de cinco minutos. Este servicio de reintento de eventos de webhook ayuda a garantizar la confiabilidad y la recuperación de eventos cuando se producen problemas de red y durante interrupciones y despliegues del servicio del lado del cliente.
 

<div id="what-are-retries">
  ### ¿Qué son los reintentos?
</div>

La Account Activity API ofrece una función de reintento cuando la aplicación web del cliente no devuelve una respuesta 200 de “success” para un evento de webhook de actividad de cuenta. Cuando el cliente no confirma la recepción correcta de un evento, X asume que el evento no se recibió. Si se recibe una respuesta distinta de 200, no se recibe respuesta en tres segundos o no recibimos respuesta alguna, volvemos a intentar la solicitud y la mantenemos abierta durante tres segundos. Esto significa que dispone de aproximadamente cinco segundos en dos intentos para responder y recibir la actividad que intentamos enviar a su URL de webhook. En caso de que su servidor no responda o devuelva un error transitorio, reintentaremos durante cinco minutos. Habrá un total de tres intentos de reintento para confirmar la validación. Esto aporta redundancia y garantiza que reciba todos los eventos de webhook. Tenga en cuenta que las suscripciones con reintentos recibirán eventos reintentados para cualquier/todas las actividades de todos los usuarios suscritos en su webhook.

Si no confirma la validación dentro de estos ocho intentos, la actividad ya no estará disponible a través de la Account Activity API. 

<div id="retry-timeline">
  ### Cronograma de reintentos
</div>

La Account Activity API reintentará hasta tres veces durante un período de cinco minutos, hasta recibir una respuesta 200. Consulte la tabla a continuación para más detalles. Después de aproximadamente cinco minutos, la actividad no puede reenviarse a través de la Account Activity API. Deberá usar otros endpoints de X para recopilar los datos omitidos. Por ejemplo, las [APIs de búsqueda](/es/x-api/enterprise-gnip-2.0/fundamentals/search-api) pueden utilizarse para recuperar publicaciones relevantes, retuits, citas de tuits, menciones y respuestas. Los mensajes directos omitidos pueden recuperarse con [este endpoint](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events).

<div id="retries-timeline">
  #### Cronograma de reintentos
</div>

|     |
| :--- |
| Actividad creada; se realiza un POST a la URL del webhook desde la Account Activity API y expira a los tres segundos. |
| Espera tres segundos tras finalizar el tiempo de espera anterior y luego realiza un POST a la URL del webhook desde la Account Activity API; vuelve a expirar a los tres segundos. |
| Espera 27 segundos tras finalizar el tiempo de espera anterior y luego realiza un POST a la URL del webhook desde la Account Activity API; expira a los tres segundos. |
| Espera 242 segundos tras finalizar el tiempo de espera anterior y luego realiza un POST a la URL del webhook desde la Account Activity API; expira a los tres segundos. |
| La Account Activity API dejará de intentar hacer POST después de esto. El cliente debe usar otros endpoints de X para recuperar los datos. |

<div id="account-activity-data-object-structure">
  ## Estructura del objeto de datos de Account Activity
</div>

| Objeto | Detalles |
| :--- | :--- |
| for\_user\_id | Identifica la suscripción de usuario con la que está relacionado el evento. |
| is\_blocked\_by | (condicional) Se muestra solo cuando otro usuario menciona a tu usuario suscrito. Se incluye si es true únicamente para eventos de mención de publicaciones. |
| source | El usuario que realiza la actividad. Por ejemplo, el usuario que sigue, bloquea o silencia es el usuario origen. |
| target | El usuario al que se aplica la actividad. Por ejemplo, el usuario al que se sigue, bloquea o silencia es el usuario destino. |

**Actividades disponibles**

| Tipo de mensaje | Detalles |
| :--- | :--- |
| [tweet\_create\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#tweet-create-events-posts-retweets-replies-quotetweets) | Carga útil de estado de publicación cuando el usuario de la suscripción realiza o recibe cualquiera de las siguientes acciones: publicaciones, retweets, respuestas, @menciones, quote tweets, retweet de quote tweets. |
| [favorite\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#favorite-events) | Evento de favorito (me gusta) con el usuario y el destino. |
| [follow\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#follow-events) | Evento de seguir con el usuario y el destino. |
| [unfollow\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#unfollow-events) | Evento de dejar de seguir con el usuario y el destino. |
| [block\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#block-events) | Evento de bloqueo con el usuario y el destino. |
| [unblock\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#unblock-events) | Evento de desbloqueo con el usuario y el destino. |
| [mute\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#mute-events) | Evento de silenciar con el usuario y el destino. |
| [unmute\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#unmute-events) | Evento de reactivar silencio con el usuario y el destino. |
| [user\_event](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#user-event) | Eventos de revocación enviados cuando un usuario elimina la autorización de la aplicación y la suscripción se borra automáticamente. |
| [direct\_message\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-events) | Evento de mensaje directo con el usuario y el destino cuando se envía o recibe un MD. |
| [direct\_message\_indicate\_typing\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-indicate-typing-events) | Evento de indicación de escritura en mensaje directo con el usuario y el destino. |
| [direct\_message\_mark\_read\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-mark-read-events) | Evento de marcado como leído en mensaje directo con el usuario y el destino. |
| [tweet\_delete\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#tweet-delete-events) | Aviso de publicaciones eliminadas para facilitar el cumplimiento. |

**Ejemplos de cargas útiles**

Consulta los ejemplos de cargas útiles a continuación para cada evento de Account Activity descrito en la tabla anterior.

#### tweet\_create\_events (Publicaciones, Retuits, Respuestas, Citas) 

```
{
	"for_user_id": "2244994945",
	"tweet_create_events": [
	  {
		<Tweet Object>
	  }
	]
}
```

#### tweet\_create\_events (@menciones) 

```
{
	"for_user_id": "2244994945",
	"user_has_blocked": "false",
	"tweet_create_events": [
	  {
		<Tweet Object>
	  }
	]
}
```

#### favorite\_events

```
{
	"for_user_id": "2244994945",
	"favorite_events": [{
		"id": "a7ba59eab0bfcba386f7acedac279542",
		"created_at": "Mon Mar 26 16:33:26 +0000 2018",
		"timestamp_ms": 1522082006140,
		"favorited_status": {
			<Tweet Object>
		},
		"user": {
			<User Object>
		}
	}]
}
```

#### follow\_events

```
{
	"for_user_id": "2244994945",
	"follow_events": [{
			"type": "follow",
			"created_timestamp": "1517588749178",
			"target": {
				<Objeto de usuario>
			},
			"source": {
				<Objeto de usuario>
			}
		]
	}
}
```

#### unfollow\_events

```
{
	"for_user_id": "2244994945",
	"follow_events": [{
			"type": "unfollow",
			"created_timestamp": "1517588749178",
			"target": {
				< Objeto de usuario >
			},
			"source": {
				< Objeto de usuario >
			}
		]
	}
}
```

#### block\_events

```
{
	"for_user_id": "2244994945",
	"block_events": [{
		"type": "block",
		"created_timestamp": "1518127020304",
		"source": {
			<User Object>
		},
		"target": {
			<User Object>
		}
	}]
}
```

#### unblock\_events

```
{
	"for_user_id": "2244994945",
	"block_events": [{
		"type": "unblock",
		"created_timestamp": "1518127020304",
		"source": {
			<Objeto de usuario>
		},
		"target": {
			<Objeto de usuario>
		}
	}]
}
```

#### mute\_events

```
{
	"for_user_id": "2244994945",
	"mute_events": [
		{
			"type": "mute",
		  	"created_timestamp": "1518127020304",
			"source": {
				<User Object>
			},
			"target": {
				<User Object>
			}
		}
	]
}
```

#### eventos\_desilenciar

```
{
	"for_user_id": "2244994945",
	"mute_events": [
		{
			"type": "unmute",
		  	"created_timestamp": "1518127020304",
			"source": {
				<User Object>
			},
			"target": {
				<User Object>
			}
		}
	]
}
```

#### user\_event

```
{
	"user_event": {
		"revoke": {
			"date_time": "2018-05-24T09:48:12+00:00",
			"target": {
				"app_id": "13090192"
			},
			"source": {
				"user_id": "63046977"
			}
		}
	}
}
```

#### direct\_message\_events

```
{
  	"for_user_id": "4337869213",
	"direct_message_events": [{
		"type": "message_create",
		"id": "954491830116155396",
		"created_timestamp": "1516403560557",
		"message_create": {
			"target": {
				"recipient_id": "4337869213"
			},
			"sender_id": "3001969357",
			"source_app_id": "13090192",
			"message_data": {
				"text": "¡Hola, mundo!",
				"entities": {
					"hashtags": [],
					"symbols": [],
					"user_mentions": [],
					"urls": []
				}
			}
		}
	}],
	"apps": {
		"13090192": {
			"id": "13090192",
			"name": "FuriousCamperTestApp1",
			"url": "https://x.com/furiouscamper"
		},
		"users": {},
		"3001969357": {
			"id": "3001969357",
			"created_timestamp": "1422556069340",
			"name": "Jordan Brinks",
			"screen_name": "furiouscamper",
			"location": "Boulder, CO",
			"description": "Alter ego - opiniones personales sobre X PE",
			"url": "https://t.co/SnxaA15ZuY",
			"protected": false,
			"verified": false,
			"followers_count": 22,
			"friends_count": 45,
			"statuses_count": 494,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
		},
		"4337869213": {
			"id": "4337869213",
			"created_timestamp": "1448312972328",
			"name": "Harrison Test",
			"screen_name": "Harris_0ff",
			"location": "Burlington, MA",
			"protected": false,
			"verified": false,
			"followers_count": 8,
			"friends_count": 8,
			"profile_image_url": "null",
			"statuses_count": 240,
			"profile_image_url_https": "https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png"
		}
	}
}
```

#### direct\_message\_indicate\_typing\_events

```
{
	"for_user_id": "4337869213",
	"direct_message_indicate_typing_events": [{
		"created_timestamp": "1518127183443",
		"sender_id": "3284025577",
		"target": {
			"recipient_id": "3001969357"
		}
	}],
	"users": {
		"3001969357": {
			"id": "3001969357",
			"created_timestamp": "1422556069340",
			"name": "Jordan Brinks",
			"screen_name": "furiouscamper",
			"location": "Boulder, CO",
			"description": "Alter ego - X PE opiniones personales",
			"url": "https://t.co/SnxaA15ZuY",
			"protected": false,
			"verified": false,
			"followers_count": 23,
			"friends_count": 47,
			"statuses_count": 509,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
		},
		"3284025577": {
			"id": "3284025577",
			"created_timestamp": "1437281176085",
			"name": "Bogus Bogart",
			"screen_name": "bogusbogart",
			"protected": true,
			"verified": false,
			"followers_count": 1,
			"friends_count": 4,
			"statuses_count": 35,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/763383202857779200/ndvZ96mE_normal.jpg"
		}
	}
}
```

#### direct\_message\_mark\_read\_events

```
{
	"for_user_id": "4337869213",
	"direct_message_mark_read_events": [{
		"created_timestamp": "1518452444662",
		"sender_id": "199566737",
		"target": {
			"recipient_id": "3001969357"
		},
		"last_read_event_id": "963085315333238788"
	}],
	"users": {
		"199566737": {
			"id": "199566737",
			"created_timestamp": "1286429788000",
			"name": "Le Braat",
			"screen_name": "LeBraat",
			"location": "Denver, CO",
			"description": "datos de día en @X, diseño al anochecer",
			"protected": false,
			"verified": false,
			"followers_count": 299,
			"friends_count": 336,
			"statuses_count": 752,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/936652894371119105/YHEozVAg_normal.jpg"
		},
		"3001969357": {
			"id": "3001969357",
			"created_timestamp": "1422556069340",
			"name": "Jordan Brinks",
			"screen_name": "furiouscamper",
			"location": "Boulder, CO",
			"description": "Alter ego - X PE opiniones-mías",
			"url": "https://t.co/SnxaA15ZuY",
			"protected": false,
			"verified": false,
			"followers_count": 23,
			"friends_count": 48,
			"statuses_count": 510,
			"profile_image_url": "null",
			"profile_image_url_https": "https://pbs.twimg.com/profile_images/851526626785480705/cW4WTi7C_normal.jpg"
		}
	}
}
```

#### tweet\_delete\_events

```
{
    "for_user_id": "930524282358325248",
    "tweet_delete_events": [
{
        "status": {
            "id": "1045405559317569537",
            "user_id": "930524282358325248"
        },
        "timestamp_ms": "1432228155593"
    }
   ]
}
```

<div id="account-activity-replay-api">
  ## API de Reproducción de Actividad de la Cuenta
</div>

`Enterprise`

La API de Reproducción de Actividad de la Cuenta es una herramienta de recuperación de datos que le permite obtener eventos de hasta cinco días atrás. Debe usarse para recuperar datos en escenarios en los que su servidor de [webhook](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) pierda eventos, ya sea por desconexiones que duren más que la [ventana de reintento](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries), o en aquellos casos de recuperación ante desastres en los que necesita unos días para restablecer su sistema a la normalidad.

La API de Reproducción de Actividad de la Cuenta se desarrolló para cualquier escenario en el que no se logren ingerir [actividades](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity) durante un período de tiempo. Entrega las actividades al mismo webhook utilizado para la entrega original en tiempo real. Este producto es una herramienta de recuperación y no de backfill, lo que significa que los eventos solo se reproducirán si se intentó una entrega previa. La API de Reproducción de Actividad de la Cuenta no puede entregar eventos correspondientes a un período anterior al momento de creación de una suscripción.

<div id="using-account-activity-replay-api">
  ### Uso de la API de Reproducción de Actividad de Cuenta
</div>

Si su cuenta está configurada con la funcionalidad de Reproducción, puede realizar solicitudes de forma similar a como lo haría con la API de Actividad de Cuenta. Es importante tener en cuenta que su solicitud debe especificar un parámetro id de webhook para indicar las actividades de qué webhook desea reproducir. En otras palabras, una solicitud de Reproducción le pide a la API de Reproducción de Actividad de Cuenta que recupere eventos desde una fecha y hora de inicio hasta una fecha y hora de fin, en función del id de webhook y del id de la aplicación.

Tenga en cuenta que se espera la hora UTC. Estas actividades se entregan a través del webhook registrado asociado con el id, a una tasa de hasta 2.500 eventos por segundo. También tenga en cuenta que solo puede ejecutarse un trabajo de Reproducción por webhook a la vez, aunque se reproducirán todas las suscripciones que estuvieron activas durante la fecha y hora especificadas para ese webhook.

Los eventos se entregan comenzando por el primer minuto (el más antiguo) del periodo de tiempo especificado y continúan en orden cronológico (en la medida de lo posible) hasta que se entregue el último minuto. En ese punto, Reproducción enviará un [evento de finalización del trabajo](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#job-completed-successfully-message) al webhook. Dado que entregamos las actividades de forma cronológica, si hay pocos o ningún resultado coincidente cerca de la hora de inicio, probablemente transcurrirá un periodo antes de que se entreguen los primeros resultados.

<div id="limitations">
  ### Limitaciones
</div>

Replay está concebido como una herramienta para recuperar fácilmente actividades de hasta cinco días atrás, pero no entregará eventos anteriores al momento de creación de una suscripción. Por ejemplo, si hace tres días agregó una nueva suscripción y ejecutó un trabajo de Replay con una ventana de cinco días previos a hoy, solo recibiría datos de los tres días en que esta nueva suscripción estuvo activa.

<div id="data-availability-and-types">
  ### Disponibilidad y tipos de datos
</div>

Las actividades de la Account Activity Replay API están disponibles durante cinco días a partir del inicio de la solicitud, y los datos nuevos estarán disponibles aproximadamente 10 minutos después de que se cree una actividad determinada. Podrá realizar solicitudes especificando un periodo dentro de esta ventana de cinco días mediante los parámetros from\_date y to\_date en la solicitud. Los eventos que se entregaron originalmente antes de obtener acceso a Replay no se pueden reproducir. Por ejemplo, si su cuenta se habilitó para acceder a la Account Activity Replay API el 1 de junio de 2019 a las 3:30 p. m. UTC, no podrá usar Replay para recuperar ningún evento anterior a esa fecha y hora.

Continúe a la [referencia de la Account Activity Replay API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated)

<div id="migration-introduction">
  ## Introducción a la migración
</div>

**Retiramos los productos Site Streams, User Streams y la versión beta estándar de la Account Activity API (solo MD) en 2018. Si estuvo usando esos productos, asegúrese de migrar a la versión premium o enterprise de la Account Activity API.**

**También retiramos los endpoints heredados de Mensajes Directos. Si estuvo usando esos endpoints, asegúrese de migrar a los nuevos endpoints de MD o a la versión premium o enterprise de la Account Activity API.**

**Revise [este anuncio](https://devcommunity.x.com/t/details-and-what-to-expect-from-the-api-deprecations-this-week-on-august-16-2018/110746) para obtener más información.**

Estos son los endpoints que se verán afectados por estos cambios:

- User Streams
- Site Streams
- GET direct\_messages
- GET direct\_messages/sent
- GET direct\_messages/show
- POST direct\_messages/new
- POST direct\_messages/destroy
   

Contamos con nuevos endpoints y servicios que ofrecen un acceso similar y, para Mensajes Directos, funcionalidad adicional:

- Account Activity API [enterprise](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) y [premium](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index)
- [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events)
- [GET direct\_messages/events/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event)
- [POST direct\_messages/events/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event)
- [POST direct\_messages/events/destroy](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/delete-message-event)

Para ayudarle a realizar una migración sin contratiempos a estos nuevos endpoints y servicios, contamos con dos guías de migración:

- [Guía de migración de Account Activity API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#migration-guide-moving-from-user-streams-site-streams-to-account-activity-api) para quienes pasan de User Streams y Site Streams a nuestro nuevo servicio basado en webhooks
- [Guía de migración de Mensajes Directos](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/guides/direct-message-migration) para quienes migran entre endpoints REST de Mensajes Directos
   

Además, contamos con una [serie de videos](https://www.youtube.com/playlist?list=PLFKjcMIU2WshGG6Yj940XM7Z6BFs1zfBg) sobre la Account Activity API y cómo empezar.

Y, por último, tenemos ejemplos de código para profundizar su comprensión y ayudarle a empezar rápidamente:

- El [Account Activity Dashboard](https://github.com/xdevplatform/Account-Activity-dashboard) es una aplicación web de ejemplo en Node.js con scripts auxiliares para empezar con la Account Activity API.
- [SnowBot](https://github.com/xdevplatform/SnowBotDev) es un chatbot de ejemplo que utiliza la Account Activity API y endpoints REST de Mensajes Directos. Está escrito en Ruby, usa el framework web Sinatra y está implementado en Heroku.

<div id="migration-guide-moving-from-user-streamssite-streams-to-account-activity-api">
  ## Guía de migración: De User Streams/Site Streams a Account Activity API
</div>

**Desde el 23 de agosto de 2018, retiramos Site Streams y User Streams. Asegúrate de migrar a Account Activity API.**

**Consulta [este anuncio](https://devcommunity.x.com/t/details-and-what-to-expect-from-the-api-deprecations-this-week-on-august-16-2018/110746) para obtener más información.**

Esta guía está diseñada para ayudarte a migrar de las API heredadas User Streams y Site Streams a su reemplazo, Account Activity API. A continuación encontrarás un resumen de los cambios, una lista de funciones nuevas, así como diferencias y consideraciones clave para facilitar la transición. Para obtener orientación sobre la migración desde los endpoints básicos de MD, consulta la [guía de migración de Mensajes Directos](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/guides/direct-message-migration).

<div id="summary-of-changes">
  ### Resumen de cambios
</div>

La Account Activity API le entregará eventos de cuentas autenticadas y suscritas mediante webhooks, en lugar de a través de una conexión de transmisión como en User Streams y Site Streams.

<div id="deprecated-apis">
  #### API en desuso
</div>

GET user

GET site (incluidas las corrientes de control: GET site/c/:stream\_id, GET site/c/:stream\_id/info.json, GET site/c/:stream\_id/friends/ids.json, POST site/c/:stream\_id/add\_user.json, POST /site/c/:stream\_id/remove\_user.json)

<div id="replacement-apis">
  #### API de reemplazo
</div>

[Enterprise Account Activity API: todas las actividades](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api)

<div id="differences-migration-considerations">
  ### Diferencias y consideraciones de migración
</div>

**Formato de la API:** La nueva Account Activity API funciona de manera diferente a User Streams y Site Streams. Deberá modificar su aplicación web para recibir datos mediante webhooks. Puede encontrar más información sobre webhooks [aquí](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).

**Datos disponibles:** Otra diferencia clave que notará es en cuanto a los datos que se entregan. X ya no enviará eventos de personas a las que sigue en X (es decir, su cronología de inicio). Este fue un cambio intencional y no es algo que planeamos modificar en el futuro.

**Confiabilidad:** A diferencia del streaming, los webhooks permiten confirmar la entrega y ofrecen opciones para reintentar actividades enviadas por POST que no lleguen a la URL del webhook. Esto brinda mayor garantía de que la aplicación está recibiendo todas las actividades aplicables, incluso si hay breves desconexiones o períodos de inactividad.

<div id="new-features">
  ### Novedades
</div>

La Account Activity API incorpora numerosas funciones nuevas; la más destacada es que ahora los datos se entregan mediante webhooks en lugar de streaming. Los webhooks ofrecen muchas ventajas frente al streaming, siendo las más importantes la velocidad y la fiabilidad. La API enviará los datos en forma de eventos JSON a medida que estén disponibles, por lo que ya no será necesario mantener una conexión activa ni consultar el endpoint. Esto reduce la necesidad de mecanismos de redundancia y aumenta la eficiencia en general. Puedes encontrar más información sobre los webhooks en la [documentación técnica](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).

<div id="managing-user-subscriptions">
  ### Gestión de suscripciones de usuario
</div>

La Account Activity API permite múltiples suscripciones para un único webhook registrado. Esto posibilita que las actividades de varias suscripciones de usuario se entreguen en la misma ubicación, de forma similar a la arquitectura de Site Streams pero mediante webhooks. Esto significa que puede realizar un seguimiento de las suscripciones, en lo que respecta a sus límites de suscripción, de manera independiente de la conexión del webhook. Esto también permite escalar desde una o unas pocas suscripciones hasta miles de suscripciones para un único webhook.

<div id="how-to-migrate">
  ### **Cómo realizar la migración**
</div>

<div id="follow-the-steps-below-to-easily-migrate-from-the-site-streams-api-to-the-account-activity-api">
  ### **Siga los pasos a continuación para migrar fácilmente de la Site Streams API a la Account Activity API**
</div>

**Paso 1: Decida un paquete**

Dependiendo de cómo opere actualmente con User Streams o Site Streams, debería considerar pasar a la versión enterprise o premium de la Account Activity API. Tenga en cuenta la cantidad de aplicaciones o usuarios autorizados que admite actualmente y escale de forma adecuada al volumen y la confiabilidad necesarios. Al decidir el paquete que mejor se adapta a sus necesidades, considere:

- Número de webhooks necesarios
- Suscripciones/usuarios autorizados actuales y proyectados gestionados en su aplicación
- Número actual de aplicaciones cliente de X
- El nivel de soporte que prefiere de X (soporte en el foro o soporte administrado enterprise 1:1)
- Precio de cada paquete

**Paso 2:** **Verifique la configuración de su app de X en el portal para desarrolladores**

La [app de X](/es/resources/fundamentals/developer-apps) que usa actualmente para User Streams o Site Streams aparecerá listada para el usuario propietario dentro del [portal para desarrolladores](/es/resources/fundamentals/developer-portal). Esta app de X también puede usarse con la Account Activity API para conservar los usuarios autorizados de esa aplicación. También puede crear una app nueva y volver a autorizar a los usuarios para esta nueva app si lo desea. Si crea una app en nombre de una empresa, se recomienda hacerlo con una cuenta corporativa de X @handle.

- Habilite “Read, Write and Access direct messages” en la pestaña [permissions](/es/resources/fundamentals/developer-apps#app-permissions) de la página de su app de X.
  \*Tenga en cuenta que cambiar estas configuraciones no es retroactivo; cualquier usuario autorizado mantendrá la configuración de autorización del momento en que fue autorizado. Si un usuario aún no le ha otorgado acceso de lectura, escritura y mensajes directos, deberá hacer que ese usuario vuelva a autorizar su aplicación.
- Si no está familiarizado con [X Sign-in](/es/resources/fundamentals/authentication#log-in-with-x) y cómo funcionan los contextos de usuario con la API de X, revise [Obtaining Access Tokens](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).
- Genere tokens de acceso para el propietario de la app de X en la parte inferior de la pestaña “Keys and Tokens”. En esta misma pestaña, tome nota de su Consumer Key, Consumer Secret, Access Token y Access Token Secret. Los necesitará para usar la API.
- Genere un bearer token usando su Consumer Key y Consumer Secret para métodos de API [application-only](/es/resources/fundamentals/authentication#bearer-token-also-known-as-app-only).

**Paso 3: Configure sus webhooks**

- Cree una aplicación web con un endpoint para usar como webhook para recibir eventos (p. ej., https://your\_domain.com/webhook/twitter o https://webhooks.your\_domain.com).

- Use su Consumer Key, Consumer Secret, Access Token y Access Token Secret al crear su webhook. Tenga en cuenta que su endpoint debe devolver una respuesta JSON con un response\_token que sea un hash HMAC SHA-256 codificado en base64 creado a partir del crc\_token y el Consumer Secret de su app.

- Revise la documentación de [Securing Webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks), prestando especial atención a los requisitos de Challenge Response Check (CRC).

- Asegúrese de que su webhook admita solicitudes POST para eventos entrantes y solicitudes GET para el CRC.

- Asegúrese de que su webhook tenga baja latencia (menor de 3 segundos para responder a solicitudes POST).

**Paso 4: Valide la configuración de su webhook**

- Las Webhook APIs asegurarán sus webhooks de dos maneras:

               - Requiriendo verificaciones de respuesta de desafío para validar que el propietario del webhook es el propietario de la aplicación web.

               - Incluyendo un encabezado de firma en cada solicitud POST para que su aplicación web valide el origen.

- Para verificar que usted es tanto el propietario de la aplicación web como de la URL del webhook, X realizará un Challenge Response Check (CRC), que no debe confundirse con un cyclic redundancy check.
- Se enviará una solicitud GET con un parámetro llamado crc\_token a la URL de su webhook. Su endpoint debe devolver una respuesta JSON con un response\_token que sea un hash HMAC SHA-256 codificado en base64 creado a partir del crc\_token y el Consumer Secret de su app.
- Debe esperar que el crc\_token cambie en cada solicitud CRC entrante. El crc\_token debe usarse como el mensaje en el cálculo, donde su Consumer Secret es la clave.
- Si la respuesta es inválida, se dejarán de enviar eventos al webhook registrado.

**Paso 5: Cree suscripciones para cada usuario autorizado de User Streams o Site Streams**

Convirtiendo a la Account Activity API desde User Streams:

- Genera una lista de tus suscripciones de usuario actuales en User Streams
- Configura tus nuevas suscripciones de la API de actividad de cuentas usando la solicitud:  _POST account\_activity/all/:env\_name/subscriptions_
- Confirma tus suscripciones de la API de actividad de cuentas usando la solicitud:  \_GET account\_activity/all/:env\_name/subscriptions/list
  \_

Conversión a la API de actividad de cuentas desde Site Streams: (usando streams de control):

- Genera una lista de tus suscripciones actuales en Site Streams usando la solicitud:  _GET /1.1/site/c/:stream\_id/info.json_
- Configura tus nuevas suscripciones de la API de actividad de cuentas usando la solicitud:  _POST account\_activity/all/:env\_name/subscriptions_
- Confirma tus suscripciones de la API de actividad de cuentas usando la solicitud:  \_GET account\_activity/all/:env\_name/subscriptions/list
  \_

Registro de un webhook y creación de suscripciones (sin migrar desde Site Streams o User Streams)

- Registra la URL de tu webhook en tu app usando [POST webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) y recibe un webhook\_id.
- Usa el webhook\_id devuelto para agregar suscripciones de usuario con [POST webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all).

<div id="the-account-activity-dashboard-sample-account-activity-api-application">
  ### El panel de Account Activity (aplicación de ejemplo de la Account Activity API)
</div>

Hemos creado una aplicación de ejemplo para agilizar las pruebas de la Account Activity API:   

- Descarga la aplicación de ejemplo Account Activity Dashboard [aquí](https://github.com/xdevplatform/Account-Activity-dashboard) (usa Node.js)
- Sigue las instrucciones del README para instalar y ejecutar la aplicación
- Una vez que la aplicación se haya iniciado, puedes usar la interfaz para configurar fácilmente tu webhook y crear una nueva suscripción

<div id="available-activities">
  ### Actividades disponibles
</div>

| Tipo de mensaje | Detalles |
| :--- | :--- |
| [tweet\_create\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#tweet-create-events-posts-retweets-replies-quotetweets) | Payload de estado de publicación cuando el usuario de la suscripción realiza o recibe alguna de las siguientes acciones: Publicaciones, Retuits, Respuestas, @menciones, Citas |
| [favorite\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#favorite-events) | Estado del evento de favorito (me gusta) con el usuario y el destinatario. |
| [follow\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#follow-events) | Evento de seguimiento con el usuario y el destinatario. |
| [block\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#block-events) | Evento de bloqueo con el usuario y el destinatario. |
| [mute\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#mute-events) | Evento de silenciar con el usuario y el destinatario. |
| [direct\_message\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-events) | Estado de mensaje directo con el usuario y el destinatario. |
| [direct\_message\_indicate\_typing\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-indicate-typing-events) | Evento de indicación de escritura en mensaje directo con el usuario y el destinatario. |
| [direct\_message\_mark\_read\_events](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#direct-message-mark-read-events) | Evento de marcado como leído de mensaje directo con el usuario y el destinatario. |

### Tipos de mensajes de streaming en desuso 

|     |     |
| :--- | :--- |
| Líneas en blanco | Las líneas en blanco ya no se entregarán en la Account Activity API, ya que se usaban como mensajes de keep-alive en User Streams y Site Streams. |
| Avisos de límite | Los avisos de límite ya no se enviarán a un webhook específico. En su lugar, los usuarios pueden llamar a la API para obtener el uso actual de los handles disponibles. Esto se incluirá en el portal para desarrolladores en algún momento en el futuro. |
| Mensajes de desconexión | Los avisos de desconexión ya no serán necesarios, ya que los webhooks no dependen de una conexión activa. |
| Advertencias de estancamiento | Las advertencias de estancamiento ya no serán necesarias, ya que los webhooks no dependen de una conexión activa capaz de manejar grandes volúmenes de mensajes entrantes. |
| Lista de amigos | Las listas de amigos ya no se enviarán de forma proactiva. Ahora habrá un endpoint REST para obtener esta información. |

<div id="deprecated-event-types">
  ### Tipos de eventos obsoletos
</div>

|     |     |     |     |     |
| :--- | :--- | :--- | :--- | :--- |
| **Descripción** | **Nombre del evento** | **Origen** | **Destino** | **Objeto de destino** |
| El usuario elimina una publicación | delete | Usuario actual | Usuario actual | Publicación |
| Un usuario seguido elimina una publicación | delete | Usuario seguido | Usuario seguido | Publicación |
| El usuario quita “Me gusta” a una publicación | unfavorite | Usuario actual | Autor de la publicación | Publicación |
| Quitan “Me gusta” a la publicación del usuario | unfavorite | Usuario que quita “Me gusta” | Usuario actual | Publicación |
| El usuario deja de seguir a alguien | unfollow | Usuario actual | Usuario seguido | Nulo |
| El usuario crea una lista | list\_created | Usuario actual | Usuario actual | Lista |
| El usuario elimina una lista | list\_destroyed | Usuario actual | Usuario actual | Lista |
| El usuario edita una lista | list\_updated | Usuario actual | Usuario actual | Lista |
| El usuario agrega a alguien a una lista | list\_member\_added | Usuario actual | Usuario agregado | Lista |
| Agregan al usuario a una lista | list\_member\_added | Usuario que agrega | Usuario actual | Lista |
| El usuario elimina a alguien de una lista | list\_member\_removed | Usuario actual | Usuario eliminado | Lista |
| Eliminan al usuario de una lista | list\_member\_removed | Usuario que elimina | Usuario actual | Lista |
| El usuario se suscribe a una lista | list\_user\_subscribed | Usuario actual | Propietario de la lista | Lista |
| Se suscriben a la lista del usuario | list\_user\_subscribed | Usuario que se suscribe | Usuario actual | Lista |
| El usuario cancela la suscripción a una lista | list\_user\_unsubscribed | Usuario actual | Propietario de la lista | Lista |
| Cancelan la suscripción a la lista del usuario | list\_user\_unsubscribed | Usuario que cancela la suscripción | Usuario actual | Lista |
| El usuario actualiza su perfil | user\_update | Usuario actual | Usuario actual | Nulo |
| El usuario actualiza su estado de protección | user\_update | Usuario actual | Usuario actual | Nulo |

<div id="direct-message-migration-guide">
  ## Guía de migración de Mensajes Directos
</div>

**El 17 de septiembre de 2018 retiramos los endpoints heredados de Mensajes Directos.
Si estaba utilizando esos endpoints, asegúrese de migrar a los nuevos endpoints de Mensajes Directos o a la Account Activity API.**

**Revise [este anuncio](https://devcommunity.x.com//t/details-and-what-to-expect-from-the-api-deprecations-this-week-on-august-16-2018/110746) para obtener más información.**

Esta guía está diseñada para ayudarle a migrar de las API REST heredadas de Mensajes Directos a sus reemplazos mejorados, que han salido de la fase beta. A continuación encontrará un resumen de los cambios, una lista de nuevas funciones y diferencias y consideraciones clave para facilitar la transición. Los nuevos endpoints de Mensajes Directos ya están disponibles para todos los desarrolladores. Para obtener orientación sobre la migración desde User Streams o Site Streams, consulte la [guía de migración a la Account Activity API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#migration-guide-moving-from-user-streams-site-streams-to-account-activity-api).

- [Resumen de cambios](#summary)
- [Nuevas funciones](#features)
- [Envío de Mensajes Directos](#sending)
- [Recepción de Mensajes Directos](#receiving)
- [Eliminación de Mensajes Directos](#deleting)

<div id="summary-of-changes">
  ### Resumen de cambios
</div>

Si todavía utiliza los siguientes endpoints de MD, deberá migrar a los endpoints más recientes.

| Endpoint obsoleto | Nueva alternativa de migración |
| :--- | :--- |
| [POST direct\_messages/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) | [POST direct\_messages/events/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) |
| [GET direct\_messages/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) | [GET direct\_messages/events/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) |
| [GET direct\_messages](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) | [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) |
| [GET direct\_messages/sent](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) | [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) |
| [POST direct\_messages/destroy](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/delete-message-event) | [DELETE direct\_messages/events/destroy](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/delete-message-event "GET direct_messages/events/list") |

<div id="new-features">
  ### Nuevas funciones
</div>

Los nuevos endpoints de la API de Mensajes Directos incorporan varias capacidades y mejoran el acceso a mensajes directos anteriores. Entre las novedades se incluyen:

- Compatibilidad con archivos multimedia adjuntos (imagen, GIF y vídeo).
- Posibilidad de solicitar a los usuarios respuestas estructuradas con una lista de opciones predefinida.
- Hasta 30 días de acceso a mensajes directos anteriores.

Para ver la lista completa de las nuevas funciones de Mensajes Directos y los endpoints adicionales de la API, consulta la [documentación técnica](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/overview).
 

<div id="differences-migration-considerations">
  ### Diferencias y consideraciones de migración
</div>

Los nuevos endpoints de la API se comportan de forma muy distinta a sus predecesores. Limitarse a actualizar las URL de los endpoints provocará errores en su aplicación. Tenga en cuenta lo siguiente al actualizar su aplicación para la migración.

<div id="new-direct-message-object">
  #### Nuevo objeto de Mensaje Directo
</div>

Lo primero que probablemente notará es la nueva estructura de objetos de los Mensajes Directos. Esta nueva estructura del objeto Message Create se ha introducido para habilitar capacidades como [Quick Replies](https://developer.x.com/en/docs/x-api/v1/direct-messages/quick-replies/overview) y [Attachments](https://developer.x.com/en/docs/x-api/v1/direct-messages/message-attachments/overview). El nuevo objeto también incluye un objeto de usuario más pequeño y condensado. Su aplicación deberá actualizarse para considerar esta nueva estructura de objeto al realizar el parsing y, potencialmente, en los modelos de datos o el almacenamiento. Para obtener descripciones de cada propiedad, consulte la [documentación completa sobre el objeto Message Create](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/guides/message-create-object).

**Ejemplo de objeto message\_create**

```json
{
      "type": "message_create",
      "id": "1234858592",
      "created_timestamp": "1392078023603",
      "initiated_via": {
        "tweet_id": "123456",
        "welcome_message_id": "456789"
      },
      "message_create": {
        "target": {
          "recipient_id": "1234858592"
        },
        "sender_id": "3805104374",
        "source_app_id": "268278",
        "message_data": {
          "text": "Blue Bird",
          "entities": {
            "hashtags": [],
            "symbols": [],
            "urls": [],
            "user_mentions": []
          },
          "quick_reply_response": {
            "type": "options",
            "metadata": "external_id_2"
          },
          "attachment": {
            "type": "media",
            "media": {
             ...
            }
          }
        }
      }
```

<div id="summary">
  #### Resumen
</div>

- Estructura completamente nueva del objeto de Mensaje Directo.
- Objeto de usuario simplificado.
- Nueva información disponible (respuestas de quick reply, adjuntos, etc.).

<div id="sending-direct-messages">
  ### Envío de Mensajes Directos
</div>

[POST direct\_messages/events/new](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/new-event) es un reemplazo directo para enviar Mensajes Directos. La diferencia más significativa con este endpoint es que ahora toda la información se envía como JSON en el cuerpo de la solicitud POST, en lugar de como parámetros POST individuales.

**Ejemplo de solicitud con Twurl**

```bash
twurl -A 'Content-type: application/json' -X POST /1.1/direct\_messages/events/new.json -d '{"event": {"type": "message\_create", "message\_create": {"target": {"recipient\_id": "4534871"}, "message_data": {"text": "Hello World!"}}}}'
```

Tenga en cuenta en la solicitud anterior que el tipo de contenido está establecido en application/json en lugar de application/x-www-form-urlencoded. Además, si está construyendo la firma de OAuth 1.0a, observe que el cuerpo JSON no se incluye en la generación de la firma. La mayoría de las bibliotecas de OAuth ya contemplan esto. Si está utilizando [twurl](https://github.com/twitter/twurl), asegúrese de usar al menos la versión 0.9.3.

<div id="summary">
  #### Resumen
</div>

- El mensaje se define en el cuerpo del POST en formato JSON
- El encabezado Content-Type debe establecerse en application/json
- El cuerpo JSON no se incluye en la generación de la firma de OAuth.
   

<div id="retrieving-direct-messages">
  ### Recuperar Mensajes Directos
</div>

La recuperación de Mensajes Directos anteriores ahora se realiza con un único endpoint de API: [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events). La principal diferencia con este nuevo endpoint es que ahora devuelve tanto los mensajes enviados como los recibidos en orden cronológico inverso, lo que puede facilitar la reconstrucción de una conversación. Sin embargo, si solo busca mensajes enviados o recibidos, deberá posprocesar la respuesta consultando la propiedad sender\_id.

La paginación ahora se basa en un valor de cursor en lugar del ID de un Mensaje Directo. Con cada respuesta se devuelve una propiedad cursor. [GET direct\_messages/events/list](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/list-events) devolverá hasta 30 días de mensajes anteriores, independientemente de cuántos mensajes existan dentro de ese periodo. Cuando no se devuelve un cursor, no hay más mensajes para devolver. El método para acceder a Mensajes Directos individuales con [GET direct\_messages/events/show](https://developer.x.com/en/docs/x-api/v1/direct-messages/sending-and-receiving/api-reference/get-event) sigue siendo el mismo, aunque el objeto de Mensaje Directo devuelto tiene una estructura diferente, como se describió anteriormente.

Por último, el acceso en tiempo real a los Mensajes Directos ahora se realizará mediante webhooks con la [Account Activity API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity). Para obtener orientación sobre la migración desde User Streams o Site Streams, consulte la guía de migración a Account Activity API para más información.

<div id="summary">
  #### Resumen
</div>

- Los mensajes enviados y recibidos ahora se devuelven en el mismo endpoint.
- Se devuelven hasta 30 días de mensajes.
- Paginación basada en cursores.
- Acceso en tiempo real a los Mensajes Directos mediante webhook.

<div id="deleting-direct-messages">
  ### Eliminación de Mensajes Directos
</div>

Ahora se pueden eliminar los Mensajes Directos con DELETE direct\_messages/events/destroy. La interfaz es en gran medida la misma y requiere el ID del mensaje que se desea eliminar. La diferencia clave es que el endpoint ahora requiere una solicitud DELETE en lugar de una solicitud POST.

La forma en que los Mensajes Directos eliminados se reflejan en los clientes oficiales de X sigue siendo la misma. Los Mensajes Directos solo se eliminan de la interfaz del usuario cuyo contexto se proporciona. Otros miembros de la conversación aún pueden acceder al Mensaje Directo.

<div id="summary">
  #### Resumen
</div>

- Para eliminar un Mensaje Directo se requiere el ID.
- El nuevo endpoint requiere una solicitud DELETE.
- La forma en que los clientes oficiales de X reflejan los Mensajes Directos eliminados no cambia.

\*\*¿Tienes preguntas sobre la migración a los nuevos endpoints de Mensajes Directos?
\*\*Publica tu pregunta en el foro de la comunidad de desarrolladores en [devcommunity.com](https://devcommunity.x.com/).

<div id="frequently-asked-questions">
  ## Preguntas frecuentes
</div>

<div id="general">
  ### General
</div>

**¿Cuáles son las ventajas de usar la Account Activity API?**

La Account Activity API utiliza webhooks, lo que significa que, a diferencia de las APIs de streaming, no necesitas mantener una conexión abierta para que te enviemos información. Los webhooks también difieren de las REST APIs porque no tienes que consultarnos cientos de veces cada 15 minutos para obtener los datos que te interesan. Esto mejora la eficiencia entre el usuario y tu aplicación, ya que entrega los datos en el momento en que ocurren.

La Account Activity API tiene varias ventajas:

1. **Velocidad**: entregamos datos a la velocidad de X.
2. **Simplicidad**: entregamos todos los eventos de una cuenta a través de una única conexión de webhook. Las actividades entregadas en la API incluyen publicaciones, @menciones, respuestas, Retweets, Tweets con cita, Retweets de Tweets con cita, favoritos, Mensajes Directos enviados, Mensajes Directos recibidos, seguimientos, bloqueos y silenciamientos.
3. **Escala**: recibes todas las actividades de una cuenta que administras sin estar restringido por límites de frecuencia ni topes de eventos.

La Account Activity API está disponible como sandbox premium, premium de pago y enterprise, para que puedas escalar a medida que necesites más cuentas para funciones críticas o funcionalidad adicional.

Para comenzar, descarga fragmentos de código de ejemplo desde [GitHub](https://github.com/xdevplatform/account-activity-dashboard).
 

**¿Cómo identifico qué nivel de producto es el mejor para mí?**

Lee nuestra página de [Account Activity API Overview](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity) para obtener más información sobre las diferencias entre las opciones Premium y la opción Enterprise. 
 

**¿Cuál es la diferencia entre un entorno Premium y un webhook Enterprise?**

No hay diferencia. Cada entorno Premium tendrá su propio webhook\_id.
 

**Necesito entornos de desarrollo, staging y producción para la Account Activity API, ¿es esto posible?**

Sí. Con los niveles de pago de la Account Activity API (Premium de pago y Enterprise), es posible registrar varias URL de webhook y administrar las suscripciones por separado para cada una mediante los métodos de la API. Además, se pueden agregar varias aplicaciones cliente a una allowlist para mantener la autorización de tus usuarios actualmente autorizados.
 

**¿Tienen guías paso a paso sobre cómo configurar la Account Activity API?**

¡Sí!

- Si recién empiezas, te recomendamos visitar nuestra guía [Getting started with webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks)

- Sigue nuestros scripts compatibles del equipo X Dev: 
  - [Account Activity API dashboard](https://github.com/xdevplatform/account-activity-dashboard), una aplicación web en Node que muestra eventos de webhook.
  - El [SnowBot chatbot](https://github.com/xdevplatform/SnowBotDev), una aplicación web en Ruby creada sobre las APIs de Account Activity y Direct Message. Este repositorio incluye un [script](https://github.com/xdevplatform/SnowBotDev/wiki/Account-Activity-API-setup-script) para ayudar a configurar los webhooks de la Account Activity API.
     

**¿Existe alguna manera de recuperar datos si nuestro sistema se cae por un período de tiempo?**

Con los niveles de pago de la Account Activity API (Premium de pago y Enterprise), nuestro sistema [reintentará](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) enviarte las actividades varias veces durante un período de cuatro horas. Si tu sistema no responde dentro de esas cuatro horas, la actividad se perderá y tendrás que usar otros endpoints REST para recuperar datos dentro de los 7 días.

Sugerimos que uses tus diferentes webhooks o entornos como herramienta de redundancia, por ejemplo la [Account Activity Replay API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-replay-api), para asegurarte de no perder ninguna actividad si uno de tus sistemas se cae.
 

**¿Qué autenticación tengo que usar con la Account Activity API?**

Los métodos de autorización requeridos para la Account Activity API se describen por método en las [páginas de referencia de la API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#account-activity-api-reference-index). Si recién comienzas con la autenticación de X, te recomendamos leer [esta sección](/es/resources/fundamentals/authentication).

**¿Qué es una verificación de desafío-respuesta (CRC)?**

La verificación de respuesta al desafío de la Account Activity API es una medida de seguridad diseñada para garantizar que las actividades de la Account Activity API se envíen al desarrollador adecuado. También puede ser utilizada por los desarrolladores para asegurarse de que los datos que reciben provienen de X. X enviará automáticamente un CRC a tu URL de webhook una vez cada 24 horas, contando desde la última vez que se validó la URL del webhook. Tu sistema debe responder con una respuesta válida en un plazo de 3 segundos para mantener la validación.

Visita nuestra página [Securing webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#securing-webhooks) para más detalles.

**¿Hay algo que invalidaría inmediatamente mi URL de webhook?**

Si ocurre una de las siguientes situaciones, marcaremos inmediatamente tu webhook como no válido:

- El servidor responde a un CRC con un token incorrecto. En este caso, nuestro sistema no [reintentará](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) enviarte la actividad.
- La URL del webhook tiene un certificado configurado incorrectamente. En este caso, nuestro sistema no [reintentará](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#retries) enviarte la actividad.
- Tu servidor devuelve un código de respuesta distinto de 2XX, 4XX o 5XX.
- Especificas el uso de gzip sin realmente enviarlo.
- No especificas el uso de gzip, pero lo envías en la respuesta.

**¿Recibiré actividades duplicadas si estoy suscrito a usuarios que interactúan entre sí?**

Sí. Si tu aplicación web tiene suscripciones activas para el Usuario A y el Usuario B, y el Usuario A menciona al Usuario B en una Publicación, se enviarán dos actividades POST al webhook registrado. Cada actividad tendrá un indicador "for\_user\_id" que mostrará a qué suscripción pertenece.

**Cuando creo una suscripción a mi webhook, ¿puedo reemplazar la parte `/all/` del siguiente endpoint con otros objetos de datos de actividad de cuenta para limitar las actividades que entrega la API?** `POST https://api.x.com/1.1/account_activity/all/:env_name/subscriptions.json`

No, esto no es posible. En el estado actual, solo tenemos disponible el producto `/all/`.

**¿Existe alguna forma de utilizar la Account Activity API sin solicitar permisos de Mensajes Directos a los usuarios?**

En este momento, se requieren permisos de Mensajes Directos porque no hay forma de filtrar las actividades de Mensajes Directos para esta API.

**¿Existe una versión gratuita de la Account Activity API?**

Sí, ofrecemos la versión sandbox como nivel gratuito. Nuestra opción de sandbox está limitada a un único webhook con un máximo de 15 suscripciones. Puedes leer más sobre la opción de sandbox en [nuestra documentación](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity).

**¿Es posible usar la Account Activity API para obtener Retuits de Publicaciones que mencionan a usuarios suscritos?**

Lamentablemente, esto no forma parte de las actividades entregadas con esta API. Para esto, sugerimos usar la Streaming API.

**¿Cuáles son los posibles tipos de actividad que están representados por un tweet\_create\_event?**

Se enviará un payload de tweet\_create\_event:

Si el usuario suscrito realiza cualquiera de las siguientes acciones:

- Crea una Publicación
- Retuitea
- Responde a una Publicación

Si otro usuario:

- @menciona\* al usuario suscrito
- Cita un Tweet creado por el usuario suscrito

_Nota: La Account Activity API solo entrega eventos cuando el usuario suscrito recibiría una notificación de X y podría ver el evento públicamente. Esto significa que, si la cuenta mencionada (@userA) sigue a la cuenta protegida (@userB), entonces UserA recibirá una notificación de que UserB lo mencionó. Si UserA no sigue a UserB (y no ha sido aprobado por UserB), UserA no recibirá una notificación y, por lo tanto, no se enviaría un tweet\_create\_event a través de AAA si @userA tuviera una suscripción._

**Si un usuario bloqueado menciona a mi usuario suscrito, ¿cómo puedo identificar esto?**

Verás un campo booleano `user_has_blocked` en el nivel superior de la respuesta JSON, establecido en “true” o “false”. Este campo solo se expondrá en menciones de Publicaciones.

Enterprise

**¿Cómo puedo agregar mi app a una allowlist o verificar si mi app ya está en la allowlist?**

Para gestionar las [X apps](/es/resources/fundamentals/developer-apps) que has añadido a una allowlist para el acceso mediante las APIs Enterprise, ponte en contacto con tu gestor de cuenta con el ID de tu app. Puedes encontrar el ID de tu app navegando a la página ["Apps"](/es/resources/fundamentals/developer-apps) en el [portal para desarrolladores](/es/resources/fundamentals/developer-portal).
 

**Si tengo acceso a tres webhooks, ¿puedo usar tres webhooks para cada una de las apps que he registrado para uso empresarial?**

El límite de webhooks se establece a nivel de cuenta, no a nivel de app. Si tienes acceso a tres webhooks y dos apps registradas para uso empresarial, puedes usar dos webhooks en una app y el tercero en la otra, pero no tres en cada app. 

**¿Puedo especificar qué tipos de eventos se volverán a entregar usando la Account Activity Replay API?**

No se pueden especificar los tipos de eventos a reproducir. Se reproducirán todos los eventos entregados durante la ventana de fecha y hora especificada. 

**¿Habrá reintentos si mi aplicación no logra procesar un evento de la Account Activity Replay API?**

No, no habrá reintentos. Si una aplicación no logra procesar un evento enviado por la Account Activity Replay API, se puede enviar otro trabajo de Replay para el mismo periodo de tiempo a fin de intentar la reentrega de cualquier evento de Replay omitido. 

**¿Qué debo hacer cuando recibo un evento de finalización con éxito parcial?**

Sugerimos tomar nota de las marcas de tiempo de los eventos que se recibieron y solicitar otro trabajo de Replay para los eventos que faltaron. 

**¿Cuántos trabajos de la Account Activity Replay API puedo tener en ejecución al mismo tiempo?**

Solo puede ejecutarse un trabajo de la Account Activity Replay API por webhook a la vez. 

**¿Cómo puedo diferenciar los eventos de la Account Activity Replay API de los eventos de producción en tiempo real a medida que se entregan a mi webhook?**

Dado que la Account Activity Replay API siempre entregará eventos del pasado, los eventos pueden diferenciarse de los eventos de producción en tiempo real en función de la marca de tiempo del evento. 

**¿Con qué rapidez puedo empezar a usar la Account Activity Replay API para volver a entregar una actividad que mi aplicación descartó o pasó por alto?**

Una actividad está disponible para reentrega aproximadamente 10 minutos después de que se crea. 

<div id="error-troubleshooting-guide">
  ### Guía de resolución de errores
</div>

<div id="code-32">
  #### Código 32
</div>

Este error generalmente significa que algo está mal formado en la solicitud, en los encabezados, la autorización o la URL que está especificando. Esto no es un error de la Account Activity API; es un error de autorización y X no está recibiendo la configuración adecuada de OAuth ni la URL.

- **Enterprise** - Asegúrese de que las consumer keys y los access tokens que está usando pertenezcan a una [app de X](/es/resources/fundamentals/developer-apps) registrada para el uso de productos Enterprise. Si no tiene sus consumer keys y access tokens, o necesita agregar su app de X a la allowlist, comuníquese con su account manager. 

- Si se autentica con contexto de usuario, asegúrese de haber [autorizado su solicitud](/es/resources/fundamentals/authentication#authorizing-a-request) correctamente con los `oauth_nonce`, `oauth_signature` y `oauth_timestamp` adecuados.

- Asegúrese de que sus access tokens tengan el nivel de permisos adecuado.
  - En la pestaña 'Keys and tokens' del [app dashboard](/es/resources/fundamentals/developer-apps), verifique que sus access tokens tengan el [nivel de permisos](/es/resources/fundamentals/developer-apps#app-permissions) 'Read, write, and direct messages'. 
  - Si el nivel de permisos de los tokens está configurado por debajo de esto, vaya a la pestaña 'Permissions', ajuste el permiso de acceso a 'Read, write, and direct messages' y luego regenere sus access tokens y secret desde la pestaña 'Keys and tokens'.

- Asegúrese de que su URL esté bien formada.
  - Tenga en cuenta que `:env_name` distingue entre mayúsculas y minúsculas.
     

<div id="code-200-forbidden">
  #### Código 200 - Prohibido
</div>

- **Premium** - Asegúrate de tener una [cuenta de desarrollador](/es/resources/fundamentals/developer-portal) aprobada antes de intentar realizar una solicitud a la API. También debes usar el :env\_name correcto en la solicitud, que puedes configurar en la página de [entornos de desarrollo](/es/resources/fundamentals/developer-portal).

- **Enterprise** - Asegúrate de que tu gerente de cuenta te haya otorgado acceso a la Account Activity API.

- Asegúrate de haber configurado correctamente tu URI. Este error puede producirse si ingresaste un URI incorrecto en tu solicitud.
   

<div id="code-214-webhook-url-does-not-meet-the-requirements">
  #### Código 214 - La URL del webhook no cumple los requisitos.
</div>

- Asegúrate de estar usando HTTPS.
- Es posible que la URL de tu webhook esté malformada.
- Obtén más información sobre cómo configurar la URL de tu webhook en la sección [Develop webhook consumer app](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#3-develop-webhook-consumer-app) de la página [Getting started with webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#getting-started-with-webhooks).
   

<div id="code-214-high-latency-on-crc-get-request-your-webhook-should-respond-in-less-than-3-seconds">
  #### Código 214 - Latencia alta en la solicitud CRC por GET. Su webhook debe responder en menos de 3 segundos.
</div>

- Esto significa que su servidor es lento. Asegúrese de responder al CRC en un máximo de 3 segundos.
   

<div id="code-214-non-200-response-code-during-crc-get-request-ie-404-500-etc">
  #### Código 214 - Código de respuesta distinto de 200 durante la solicitud CRC GET (p. ej., 404, 500, etc.).
</div>

- Su servidor no responde. Asegúrese de que esté en ejecución y funcionando correctamente.
   

<div id="code-214-too-many-resources-already-created">
  #### Código 214 - Se han creado demasiados recursos.
</div>

- **Enterprise** - Ya ha utilizado todos sus webhooks. Use el endpoint [GET webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) con cada una de sus apps registradas para identificar dónde están distribuidos sus webhooks. 

<div id="code-261-application-cannot-perform-write-actions">
  #### Código 261 - La aplicación no puede realizar acciones de escritura.
</div>

- La app que utiliza con la API no tiene configurado el [nivel de permisos](/es/resources/fundamentals/developer-apps#app-permissions) adecuado para su access token y access token secret. Vaya a la pestaña “Keys and tokens” en el panel de [X apps](/es/resources/fundamentals/developer-apps) y verifique los niveles de permisos asignados a su access token y access token secret. Si está configurado en algo distinto de “Read, write and Direct Messages”, deberá ajustar la configuración en la pestaña “Permission” y regenerar su access token y access token secret para aplicar la nueva configuración.
- Alternativamente, es posible que esté intentando registrar un webhook usando autenticación solo de app, lo cual no está admitido. Autentíquese con contexto de usuario, como se indica en las secciones de referencia de la API para registrar un webhook para [Enterprise Account Activity API](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks).

<div id="account-activity-api-reference-index">
  ## Índice de referencia de la API de Actividad de la Cuenta
</div>

|     |     |
| :--- | :--- |
| **Propósito** | Enterprise |
| Registra una URL de webhook / Genera un webhook\_id | [POST  <br />webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#enterprise-account-activity-api) |
| Devuelve todas las URL de webhook y sus estados | [GET  <br />webhooks](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks) |
| Inicia manualmente una verificación de respuesta al desafío | [PUT  <br />webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#put-account-activity-webhooks-webhook-id) |
| Suscribe una aplicación a los eventos de una cuenta | [POST  <br />webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#post-account-activity-webhooks-webhook-id-subscriptions-all) |
| Devuelve un recuento de suscripciones activas actualmente | [GET  <br />subscriptions/count](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |
| Verifica si un webhook está suscrito a una cuenta | [GET  <br />webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-webhooks-webhook-id-subscriptions-all) |
| Devuelve una lista de suscripciones activas actualmente | [GET  <br />webhooks/:webhook\_id/subscriptions/all/list](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#get-account-activity-subscriptions-count) |
| Elimina el webhook | [DELETE  <br />webhooks/:webhook\_id](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id) |
| Desactiva una suscripción con OAuth de 3 patas (OBSOLETO) | [DELETE  <br />webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) |
| Desactiva una suscripción con OAuth solo de aplicación | [DELETE  <br />webhooks/:webhook\_id/subscriptions/:user\_id/all.json](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json) |
| Reentrega actividades a un webhook | [POST  <br />replay/webhooks/:webhook\_id/subscriptions/all](/es/x-api/enterprise-gnip-2.0/fundamentals/account-activity#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated) |

<div id="enterprise-account-activity-api">
  ### API de actividad de cuentas para empresas
</div>

#### POST account\_activity/webhooks[](#post-account-activity-webhooks "Enlace permanente a este encabezado")

Registra una nueva URL de webhook para el contexto de aplicación indicado. La URL se validará mediante una solicitud CRC antes de guardarla. Si la validación falla, se devolverá un mensaje de error detallado al solicitante.

El número de webhooks permitidos lo determina el paquete de facturación.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de respuesta | JSON |
| Requiere autenticación | Sí (contexto de usuario: todos los tokens de consumidor y de acceso) |
| Con limitación de tasa | Sí |
| Solicitudes por ventana de 15 min (autenticación de usuario) | 15 |
| Compatibilidad con ediciones de Tweets | Todos los objetos de Tweet incluirán metadatos de edición que describen el historial de ediciones del Tweet. Consulta la página de ["Edición de Tweets"](/es/x-api/enterprise-gnip-2.0/fundamentals/edit-tweets) para más detalles. |

<div id="parameters">
  ### Parámetros[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| url (obligatorio) | URL codificada para el endpoint de devolución de llamada. |

<div id="example-request">
  ### Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")
</div>

$ curl --request POST
\--url 'https://api.x.com/1.1/account\_activity/webhooks.json?url=https%3A%2F%2Fyour\_domain.com%2Fwebhooks%2Ftwitter%2F0'
\--header 'authorization: OAuth oauth\_consumer\_key="CONSUMER\_KEY", oauth\_nonce="GENERATED", oauth\_signature="GENERATED", oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="GENERATED", oauth\_token="ACCESS\_TOKEN", oauth\_version="1.0"'

<div id="http-responses">
  ### Respuestas HTTP[](#http-responses "Permalink to this headline")
</div>

| Código HTTP | Mensaje |
| :--- | :--- |
| 200 | La URL del webhook está registrada para la aplicación indicada |
| 403 | Hay un error en su solicitud. Consulte la sección de mensajes de error a continuación. |

<div id="example-response-success">
  ### Respuesta de ejemplo: correcta[](#example-response-success "Permalink to this headline")
</div>

```json
_HTTP 200_

    {
      "id": "1234567890",
      "url": "https://your_domain.com/webhook/twitter/0",
      "valid": true,
      "created_at": "2016-06-02T23:54:02Z"
    }
```

<div id="error-messages">
  ### Mensajes de error[](#error-messages "Permalink to this headline")
</div>

| Code | Message |
| :--- | :--- |
| 214 | La URL del webhook no cumple los requisitos. |
| 214 | Ya se han creado demasiados recursos. |
| 214 | La URL del webhook no cumple los requisitos. Token CRC no válido o formato de respuesta JSON inválido. |
| 214 | Latencia alta en la solicitud CRC con GET. Tu webhook debe responder en menos de 3 segundos. |
| 214 | Código de respuesta distinto de 200 durante la solicitud CRC con GET (p. ej., 404, 500, etc.). |

_HTTP 403_

```json
    {
      "errors": [
        {
          "code": 214,
          "message": "Too many resources already created."
        }
      ]
    }
```

#### GET account\_activity/webhooks[](#get-account-activity-webhooks "Enlace permanente a este encabezado")

Devuelve todas las URL y sus estados para la aplicación indicada.

Marcamos una URL como inválida si falla la comprobación de validación diaria. Para volver a habilitarla, llama al endpoint de actualización.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de la respuesta | JSON |
| Requiere autenticación | Sí (solo aplicación: token portador) |
| Tiene límite de tasa | Sí |
| Solicitudes por ventana de 15 min (autenticación de aplicación) | 15  |

### Ejemplo de solicitud[](#example-request "Permalink to this headline")

```bash
    $ curl --request GET
     --url https://api.x.com/1.1/account_activity/webhooks.json
     --header 'authorization: Bearer TOKEN'
```

<div id="example-response">
  ### Respuesta de ejemplo[](#example-response "Enlace permanente a este encabezado")
</div>

_HTTP 200 OK_

```json
    [
      {
        "id": "1234567890",
        "url": "https://your_domain.com/webhook/twitter/0",
        "valid": true,
        "created_at": "2016-06-02T23:54:02Z"
      }
      {
        "id": "2468013579",
        "url": "https://your_domain2.com/webhook/twitter/0",
        "valid": true,
        "created_at": "2016-06-04T22:31:29Z"
      }
    ]
```

<div id="error-messages">
  ### Mensajes de error[](#error-messages "Permalink to this headline")
</div>

| Código | Mensaje |
| :--- | :--- |
| 99  | No tiene acceso a este recurso. |

#### PUT account\_activity/webhooks/:webhook\_id[](#put-account-activity-webhooks-webhook-id "Permalink to this headline")

Ejecuta la comprobación de respuesta al desafío (CRC) para la URL del webhook indicado. Si la comprobación es satisfactoria, devuelve 204 y vuelve a habilitar el webhook estableciendo su estado en `valid`.

### URL del recurso[](#resource-url "Permalink to this headline")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de respuesta | JSON |
| Requiere autenticación | Sí (contexto de usuario: todos los tokens de consumidor y de acceso) |
| Limitado por tasa | Sí |
| Solicitudes por ventana de 15 minutos (autenticación de usuario) | 15  |

### Parámetros[](#parameters "Enlace permanente a este encabezado")

|     |     |
| :--- | :--- |
| webhook\_id (obligatorio) | ID del webhook. Definido en la ruta del recurso. |

<div id="example-request">
  ### Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")
</div>

```json
    $ curl --request PUT
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID.json
     --header 'authorization: OAuth oauth_consumer_key="CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="ACCESS_TOKEN", oauth_version="1.0"'
```

<div id="response">
  ### Respuesta[](#response "Enlace permanente a este encabezado")
</div>

_HTTP 204 OK_

```
    { }
```

<div id="error-messages">
  ### Mensajes de error[](#error-messages "Permalink to this headline")
</div>

| Código | Mensaje |
| :--- | :--- |
| 34  | El webhook no existe o está asociado con una aplicación de X diferente. |
| 214 | La URL del webhook no cumple los requisitos. |
| 214 | La URL del webhook no cumple los requisitos. Token CRC no válido o formato de respuesta JSON no válido. |
| 214 | Latencia elevada en la solicitud CRC mediante GET. Su webhook debe responder en menos de 3 segundos. |
| 214 | Código de respuesta distinto de 200 durante la solicitud CRC mediante GET (p. ej., 404, 500, etc.). |

#### POST account\_activity/webhooks/:webhook\_id/subscriptions/all[](#post-account-activity-webhooks-webhook-id-subscriptions-all "Permalink to this headline")

Suscribe la aplicación indicada a todos los eventos del contexto de usuario proporcionado para todos los tipos de mensajes. Tras la activación, todos los eventos del usuario solicitante se enviarán al webhook de la aplicación mediante una solicitud POST.

Las suscripciones están actualmente limitadas según la configuración de su cuenta. Si necesita agregar más suscripciones, póngase en contacto con su administrador de cuenta.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de respuesta | JSON |
| Requiere autenticación | Sí (OAuth de 3 partes: clave de consumidor en lista de permitidos y token de acceso del usuario suscriptor) |
| Limitado por tasa | Sí |
| Solicitudes / ventana de 15 min (autenticación de usuario) | 500 |

<div id="parameters">
  ### Parámetros[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (obligatorio) | ID del webhook. Definido en la ruta de recursos. |

### Ejemplo de solicitud[](#example-request "Permalink to this headline")

```bash
    $ curl --request POST
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all.json
     --header 'authorization: OAuth oauth_consumer_key="WHITELISTED_CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="SUBSCRIBING_USER'S_ACCESS_TOKEN", oauth_version="1.0"'
```

<div id="example-response-success">
  ### Respuesta de ejemplo - Éxito[](#example-response-success "Permalink to this headline")
</div>

_HTTP 204 SIN CONTENIDO_

```
    {}
```

<div id="error-messages">
  ### Mensajes de error[](#error-messages "Permalink to this headline")
</div>

| Código | Mensaje |
| :--- | :--- |
| 34  | El webhook no existe o está asociado a una aplicación de X diferente. |
| 348 | La aplicación cliente no tiene permiso para acceder a las suscripciones de webhook de este usuario. |

#### GET account\_activity/subscriptions/count[](#get-account-activity-subscriptions-count "Enlace permanente a este encabezado")

Devuelve el número de suscripciones que están activas actualmente en tu cuenta. Ten en cuenta que el endpoint /count requiere OAuth de solo aplicación, por lo que debes realizar las solicitudes usando un token de portador (bearer) en lugar de un contexto de usuario.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/subscriptions/count.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de respuesta | Código de respuesta HTTP |
| Requiere autenticación | Sí (solo aplicación; token Bearer) |
| Limitado por tasa | Sí |
| Solicitudes / ventana de 15 min (autenticación de aplicación) | 15  |

<div id="http-response-codes">
  ### Códigos de respuesta HTTP[](#http-response-codes "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Código | Mensaje |
| 200 | Correcto. Se devolverá el recuento de suscripciones para el webhook solicitado. |
| 401 | Su aplicación no tiene permiso para ver las suscripciones del webhook especificado. |

<div id="example-request">
  ### Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")
</div>

```bash
    $ curl --request GET
     --url https://api.x.com/1.1/account_activity/subscriptions/count.json
     --header 'authorization: Bearer TOKEN'
```

<div id="example-response-success">
  ### Respuesta de ejemplo: correcta[](#example-response-success "Permalink to this headline")
</div>

_HTTP 200_

```bash
    {
      "account_name":"my-account",
      "subscriptions_count_all":"1",
      "subscriptions_count_direct_messages":"0",
      "provisioned_count":"50"
    }
```

<div id="error-messages">
  ### Mensajes de error[](#error-messages "Permalink to this headline")
</div>

| Código | Mensaje |
| :--- | :--- |
| 32  | No se pudo autenticar su identidad. |

_HTTP 401_

```abash
    {
      "errors": [
        {
           "code": 32,
          "message": "Could not authenticate you."
        }
      ]
    }
```

#### GET account\_activity/webhooks/:webhook\_id/subscriptions/all[](#get-account-activity-webhooks-webhook-id-subscriptions-all "Enlace permanente a este encabezado")

Permite comprobar si una configuración de webhook está suscrita a los eventos del usuario indicado. Si el contexto del usuario indicado tiene una suscripción activa con la aplicación indicada, devuelve 204 OK. Si el código de respuesta no es 204, entonces el usuario no tiene una suscripción activa. Consulta el código de respuesta HTTP y los mensajes de error a continuación para más detalles.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de respuesta | JSON |
| Requiere autenticación | Sí (OAuth de 3 partes: clave de consumidor autorizada y token de acceso del usuario suscriptor) |
| Con limitación de velocidad | Sí |
| Solicitudes por ventana de 15 min (autenticación de usuario) | 500 |

<div id="parameters">
  ### Parámetros[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (obligatorio) | ID del webhook. Definido en la ruta de recursos. |

### Ejemplo de solicitud[](#example-request "Permalink to this headline")

$ curl --request GET
\--url https://api.x.com/1.1/account\_activity/webhooks/:WEBHOOK\_ID/subscriptions/all.json
\--header "authorization: OAuth oauth\_consumer\_key="WHITELISTED\_CONSUMER\_KEY", oauth\_nonce="GENERATED", oauth\_signature="GENERATED", oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="GENERATED", oauth\_token="SUBSCRIBING\_USER'S\_ACCESS\_TOKEN", oauth\_version="1.0""

<div id="example-response-success">
  ### Respuesta de ejemplo: correcta[](#example-response-success "Permalink to this headline")
</div>

_HTTP 204 SIN CONTENIDO_

```
    { }
```

#### GET account\_activity/webhooks/:webhook\_id/subscriptions/all/list[](#get-account-activity-webhooks-webhook-id-subscriptions-all-list "Enlace permanente a este encabezado")

Devuelve una lista de las suscripciones actuales de tipo All Activity para el webhook especificado. Tenga en cuenta que el endpoint /list requiere OAuth solo de aplicación, por lo que las solicitudes deben realizarse con un token bearer en lugar de en contexto de usuario.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all/list.json`

### Información del recurso[](#resource-information "Enlace permanente a este encabezado")

|     |     |
| :--- | :--- |
| Formato de respuesta | Código de respuesta HTTP |
| Requiere autenticación | Sí (solo aplicación: token de portador) |
| Sujeto a límites de uso | Sí |
| Solicitudes por ventana de 15 min (autenticación de aplicación) | 50  |

<div id="parameters">
  ### Parámetros[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (obligatorio) | ID del webhook. Definido en la ruta del recurso. |

<div id="http-response-codes">
  ### Códigos de respuesta HTTP[](#http-response-codes "Permalink to this headline")
</div>

| Código | Mensaje |
| :--- | :--- |
| 200 | Correcto. Se devolverá una lista de suscripciones para el webhook solicitado. |
| 401 | Su aplicación no tiene permiso para ver las suscripciones del webhook especificado. |

<div id="example-request">
  ### Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")
</div>

$ curl --request GET
\--url https://api.x.com/1.1/account\_activity/webhooks/:WEBHOOK\_ID/subscriptions/all/list.json
\--header 'authorization: Bearer TOKEN'

<div id="example-response-success">
  ### Ejemplo de respuesta: correcta[](#example-response-success "Permalink to this headline")
</div>

_HTTP 200_

```bash
    {
      "webhook_id": "1234567890",
      "webhook_url": "https://your_domain.com/webhook/twitter/0",
      "application_id": "11231812",
      "subscriptions": [{
        "user_id": "20212306"
      }]
    }
```

<div id="error-messages">
  ### Mensajes de error[](#error-messages "Permalink to this headline")
</div>

| Código | Mensaje |
| :--- | :--- |
| 32  | No se pudo autenticar tu identidad. |

_HTTP 401_

```bash
    {
      "errors": [
        {
           "code": 32,
          "message": "Could not authenticate you."
        }
      ]
    }
```

#### DELETE account\_activity/webhooks/:webhook\_id[](#delete-account-activity-webhooks-webhook-id "Enlace permanente a este encabezado")

Elimina el webhook de la configuración de la aplicación indicada. Puedes obtener el ID del webhook haciendo una llamada a GET /1.1/account\_activity/webhooks.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id.json`

### Información del recurso[](#resource-information "Enlace permanente a este encabezado")

|     |     |
| :--- | :--- |
| Formato de respuesta | JSON |
| Requiere autenticación | Sí (contexto de usuario: todos los tokens de consumidor y de acceso) |
| Con límite de tasa | Sí |
| Solicitudes por ventana de 15 minutos (autenticación de usuario) | 15  |

<div id="parameters">
  ### Parámetros[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (obligatorio) | ID del webhook. Definido en la ruta de recursos. |

<div id="example-request">
  ### Ejemplo de solicitud[](#example-request "Enlace permanente a este encabezado")
</div>

```bash
    $ curl --request DELETE
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID.json
     --header 'authorization: OAuth oauth_consumer_key="CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="ACCESS_TOKEN", oauth_version="1.0"'
```

<div id="response">
  ### Respuesta[](#response "Enlace permanente a este encabezado")
</div>

_HTTP 204 OK_

```
    { }
```

#### DELETE account\_activity/webhooks/:webhook\_id/subscriptions/all (OBSOLETO)[](#delete-account-activity-webhooks-webhook-id-subscriptions-all-deprecated- "Permalink to this headline")

Desactiva las suscripciones para el contexto de usuario y la aplicación indicados. Tras la desactivación, dejarán de enviarse todos los eventos del usuario que realiza la solicitud a la URL del webhook.

<div id="resource-url">
  ### URL del recurso[](#resource-url "Enlace permanente a este encabezado")
</div>

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/all.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de respuesta | JSON |
| Requiere autenticación | Sí (OAuth de 3 etapas: clave de consumidor en lista de permitidos y token de acceso del usuario suscrito) |
| Límite de tasa | Sí |
| Solicitudes por ventana de 15 min (autenticación de usuario) | 500 |

<div id="parameters">
  ### Parámetros[](#parameters "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| webhook\_id (obligatorio) | ID del webhook. Definido en la ruta del recurso. |

### Ejemplo de solicitud[](#example-request "Permalink to this headline")

```bash
    $ curl --request DELETE
     --url https://api.x.com/1.1/account_activity/webhooks/:WEBHOOK_ID/subscriptions/all.json
     --header 'authorization: OAuth oauth_consumer_key="WHITELISTED_CONSUMER_KEY", oauth_nonce="GENERATED", oauth_signature="GENERATED", oauth_signature_method="HMAC-SHA1", oauth_timestamp="GENERATED", oauth_token="SUBSCRIBED_USER_ACCESS_TOKEN", oauth_version="1.0"'
```

Ejemplo de solicitud

```
    { }
```

#### DELETE /account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all.json[](#delete-account-activity-webhooks-webhook-id-subscriptions-user-id-all-json "Permalink to this headline")

Desactiva la suscripción para el webhook y el ID de usuario especificados. Tras la desactivación, ya no se enviarán eventos del usuario solicitante a la URL del webhook. Tenga en cuenta que este endpoint requiere OAuth solo de aplicación, por lo que las solicitudes deben realizarse con un token Bearer en lugar de contexto de usuario.

### URL del recurso[](#resource-url "Permalink to this headline")

`https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/:user_id/all.json`

<div id="resource-information">
  ### Información del recurso[](#resource-information "Permalink to this headline")
</div>

|     |     |
| :--- | :--- |
| Formato de la respuesta | JSON |
| Requiere autenticación | Sí (solo aplicación: token de portador) |
| Con límite de tasa | Sí |
| Solicitudes por ventana de 15 minutos | 500 |

### Ejemplo de solicitud[](#example-request "Permalink to this headline")

```bash
    $ curl --request DELETE
     --url https://api.x.com/1.1/account_activity/webhooks/:webhook_id/subscriptions/:user_id/all.json
     --header 'authorization: Bearer TOKEN'
```

### Respuesta[](#response "Permalink to this headline")

_HTTP 204 SIN CONTENIDO_

### Mensajes de error[](#error-messages "Enlace permanente a este encabezado")

| Código | Mensaje |
| :--- | :--- |
| 404 | Lo sentimos, esa página no existe. - Esto suele ocurrir cuando el ID de usuario especificado no está realmente suscrito. |

<div id="replay-api">
  ### API de reproducción
</div>

**POST /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json [¶](#post-1-1-account-activity-replay-webhooks-webhook-id-subscriptions-all-json- "Enlace permanente a este encabezado")**

Envía una solicitud para recuperar actividades de hasta los últimos cinco días de todas las suscripciones presentes durante las ventanas de fecha y hora especificadas en la solicitud. Si tu webhook tiene suscripciones de usuario activas, también recibirás esos eventos de forma simultánea. Nota: realizamos un CRC antes de entregar los eventos de reproducción.

|     |     |
| :--- | :--- |
| **Método de solicitud** | HTTP POST |
| **URL** | /1.1/account\_activity/replay/webhooks/:webhook\_id/subscriptions/all.json?from\_date=yyyymmddhhmm\&to\_date=yyyymmddhhmm |
| **Formato de respuesta** | JSON |
| **Requiere autenticación** | Sí (solo aplicación; token bearer) |
| **Límite de frecuencia** | 5 solicitudes por 15 minutos. Actualmente no hay un máximo para la cantidad de trabajos de reproducción que se pueden solicitar. |
| **from\_date** | La marca de tiempo UTC más antigua (inicial) desde la cual se proporcionarán los eventos; debe estar en formato 'yyyymmddhhmm'. La marca de tiempo tiene granularidad de minutos y es inclusiva (p. ej., 12:00 incluye el minuto 00). Los tiempos válidos deben estar dentro de los últimos 5 días (UTC) y no ser más recientes que 31 minutos antes del momento actual. Se recomienda que from\_date y to\_date estén separados por ~2 horas como máximo. |
| **to\_date** | La marca de tiempo UTC más reciente (final) hasta la cual se proporcionarán los eventos; debe estar en formato 'yyyymmddhhmm'. La marca de tiempo tiene granularidad de minutos y es exclusiva (p. ej., 12:30 no incluye el minuto 30 de la hora). Los tiempos válidos deben estar dentro de los últimos 5 días (UTC) y no ser más recientes que 10 minutos antes del momento actual. |

<div id="responses">
  #### Respuestas
</div>

Las siguientes respuestas pueden ser devueltas por la API. La mayoría de los códigos de error se devuelven con una cadena que incluye detalles adicionales en el cuerpo. Para respuestas distintas de 200, debe resolver el error y volver a intentarlo.

| Estado | Texto | Código de error | Descripción | Mensaje |
| :--- | :--- | :--- | :--- | :--- |
| 202 | Accepted | N/A | La solicitud se realizó correctamente y se enviarán las actividades. | N/A |
| 400 | Bad Request | 214 | El webhook se ha marcado como no válido. | El webhook está marcado como no válido y requiere una verificación CRC. |
| 400 | Bad Request | 357 | Falta un parámetro de consulta. | : queryParam es obligatorio. |
| 400 | Bad Request | 358 | La ruta o el parámetro de consulta tiene un formato incorrecto. | No se puede analizar el parámetro. |
| 400 | Bad Request | 360 | El parámetro de ruta es negativo. | webhook\_id: \[] no es mayor ni igual a 0. |
| 400 | Bad Request | 368 | from\_date o to\_date no está en el pasado. | : \[\<field\_value>] no está en el pasado. |
| 400 | Bad Request | 356 | from\_date debe ser anterior a to\_date. | from\_date debe ser anterior a to\_date. |
| 400 | Bad Request | 356 | from\_date debe estar dentro de los últimos 5 días. | from\_date debe estar dentro de los últimos 5 días. |
| 401 | Unauthorized | 32  | La autenticación HTTP falló por autenticación de 3-legged proporcionada. | Método de autenticación no válido. Use la autenticación de solo aplicación. |
| 401 | Unauthorized | 61  | El cliente no tiene permiso para solicitar este método. | El cliente no tiene permiso para solicitar este método. |
| 403 | Forbidden | 200 | El cliente no tiene una cuenta Enterprise con Replay habilitado. | Se requiere una cuenta Enterprise de la Account Activity API con Replay. Confirme que tiene una cuenta Enterprise y que Replay está habilitado. |
| 404 | Not Found | 34  | webhook\_id inexistente; discordancia entre webhook\_id y application\_id. | El webhook no existe o está asociado con una aplicación de X diferente. |
| 409 | Conflict | 355 | Hay una solicitud en curso y deberá finalizar su procesamiento antes de realizar otra. | Ya hay un trabajo de replay en curso para este webhook. |
| 429 | Too Many Requests | 88  | Limitado por tasa (se alcanzó el límite de solicitudes por período de tiempo). | Demasiadas solicitudes. Reduzca la tasa de sus solicitudes a la API. |
| 500 | Internal Server Error | 0   | Error interno del servidor. | Error interno del servidor. |
| 503 | Service Unavailable | 67  | Uno o más servicios dependientes en X no están disponibles. | Error del servidor de X. Reintente usando un patrón de reintentos exponenciales. |

<div id="job-completed-successfully-message">
  #### Mensaje "Trabajo completado correctamente"
</div>

Una vez que el trabajo se complete correctamente, la Account Activity Replay API entregará el siguiente evento de finalización. Al recibir este evento, el trabajo habrá terminado de ejecutarse y podrá enviarse otro.

```json
{
  "replay\_job\_status": {
    "webhook_id": "1234577122340233217",
    "job_state": "Complete",
    "job\_state\_description": "Job completed successfully"
    "job_id": "1095098195724558337"
  }
}
```

<div id="job-failed-to-complete-message">
  #### Mensaje "Job failed to complete"
</div>

Si su trabajo no se completa correctamente, devolveremos el siguiente mensaje para recomendarle que reintente su trabajo de Replay. Una vez que reciba este evento, el trabajo habrá terminado de ejecutarse y podrá enviar otro.

```json
{
  "replay\_job\_status": {
    "webhook_id": "123451374207332352",
    "job_state": "Incomplete",
    "job\_state\_description": "Job failed to deliver all events, please retry your replay job",
    "job_id": "1093226942650736640"
  }
}
```

<div id="example-curl-request">
  #### Ejemplo de solicitud con curl
</div>

```bash
    curl --request POST  --url 'https://api.x.com/1.1/account_activity/replay/webhooks/:webhook_id/subscriptions/all.json?from_date=yyyymmddhhmm&to_date=yyyymmddhhmm'
    --header 'authorization: Bearer TOKEN'
```

<div id="example-response">
  #### Ejemplo de respuesta
</div>

HTTP 202

```bash
{
  "job_id": "1234567890",
  "created_at": "2016-06-02T23:54:02Z"
}
```