---
title: Guía rápida
sidebarTitle: Guía rápida
---

import { Button } from '/snippets/es/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Introducción a los endpoints para gestionar Mensajes Directos
</div>

Esta guía de inicio rápido le ayudará a realizar su primera solicitud a los endpoints de Mensajes Directos con Postman, una herramienta para gestionar y realizar solicitudes HTTP. Para obtener más información sobre nuestras colecciones de Postman, visite la guía [Uso de Postman](/es/tutorials/postman-getting-started).

Visite nuestro repositorio de GitHub [código de ejemplo de la API de X v2](https://github.com/xdevplatform/Twitter-API-v2-sample-code) si desea revisar ejemplos en Python. Además, los [kits de desarrollo de software (SDK) de la Plataforma para Desarrolladores de X](/es/x-api/tools-and-libraries/sdks) oficiales se actualizarán para admitir estos endpoints de Mensajes Directos.

<Note>
  **Requisitos previos**

  Para completar esta guía, necesitará un conjunto de [claves y tokens](/es/resources/fundamentals/authentication) para autenticar su solicitud. Puede generar estas claves y tokens siguiendo estos pasos:

  - [Regístrese para obtener una cuenta de desarrollador](https://developer.x.com/en/apply-for-access) y espere la aprobación.
  - Cree un [Proyecto](/es/resources/fundamentals/projects) y una [App de desarrollador](/es/resources/fundamentals/developer-apps) asociada en el portal para desarrolladores.
  - Vaya a la página “Keys and tokens” de su App para generar las credenciales necesarias. Asegúrese de guardar todas las credenciales en un lugar seguro.
</Note>

<div id="steps-to-building-manage-direct-message-requests">
  ### Pasos para gestionar solicitudes de Mensajes Directos
</div>

En este ejemplo, en una sola solicitud, crearemos una nueva conversación grupal y añadiremos nuestro primer mensaje. Luego, añadiremos un segundo mensaje a la conversación creada.

<div id="step-one-start-with-a-tool-or-library">
  #### Primer paso: Comience con una herramienta o biblioteca
</div>

Para empezar a trabajar con los endpoints de administración de Mensajes Directos, usaremos la herramienta Postman para simplificar el proceso. Se utilizará una colección creada por XDev con solicitudes de ejemplo de la API de X v2 para explorar seis endpoints usados para crear nuevos Mensajes Directos y listar eventos de conversaciones de Mensajes Directos.

Aunque la mayor parte de la colección está preconfigurada, hay algunos detalles que deberá proporcionar según la App de X creada para alojar estas solicitudes a la API. Primero, carguemos o actualicemos la colección.

Para cargar la colección de Postman de la API de X v2 en su entorno, haga clic en el siguiente botón:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Agregar API de X v2 a Postman
</Button>

Una vez que tenga la colección de la API de X v2 cargada en Postman, navegue a la carpeta “Manage Direct Messages”. La pestaña Authorization de esta carpeta se ha preconfigurado cuando ha sido posible y puede actualizar algunos ajustes para compartir los detalles de autenticación de su App de X. Esta carpeta también contiene tres endpoints para crear nuevos Mensajes Directos. Tenga en cuenta que también hay una carpeta "Direct Message lookup" con tres endpoints disponibles para recuperar eventos de conversaciones de Mensajes Directos, incluidos el envío y la recepción de mensajes y los momentos en que los participantes se unen o salen de la conversación. 

Dado que la creación de conversaciones de grupo es una función nueva y emocionante de la API de X v2, este ejemplo se centrará en ello. Trabajaremos con el ejemplo "New group DM and conversation". Usaremos esta solicitud para crear una conversación grupal de Mensajes Directos.

El siguiente paso es autenticarse con el endpoint.

**Paso dos: Autentique su solicitud**

Para realizar correctamente una solicitud a la API de X, debe verificar que tiene permiso para hacerlo. Para realizar una solicitud exitosa a este endpoint, utilizaremos [OAuth 2.0 Authorization Code Flow with PKCE](es/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2). Puede generar un token de acceso dentro de Postman. 

Con Postman puede configurar el método de autenticación a nivel de carpeta o a nivel de solicitud. Aquí configuraremos los detalles de autenticación a nivel de carpeta.

Navegue a la carpeta "Manage Direct Messages", seleccione la pestaña "Authorization" y confirme que Type esté configurado en “OAuth 2.0” y que "Add auth data to" esté configurado en "Request Headers". En la sección "Current Token", asegúrese de que "Header Prefix" esté establecido en Bearer.  

Para configurar y generar un nuevo token:

1. Cree un nombre de token, como "Manage DMs".

2. Confirme que **Grant Type** esté configurado en Authorization Code (with PKCE).

3. Configure su **Callback URL**. Deberá actualizarla para que coincida exactamente con la Callback URL asociada con su aplicación en el [v2 Dev Portal](https://developer.x.com/en/portal/dashboard). Con la App de X usada en este ejemplo, la Callback URL está configurada en [_https://www.example.com_](https://www.example.com/). (Tenga en cuenta que, dado que debe coincidir exactamente, [_https://example.com_](https://example.com) no funcionaría). 

4. Confirme que **Auth URL** esté configurada en [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize).

5. Confirme que **Access Token URL** esté configurada en [https://api.x.com/2/oauth2/token](https://api.x.com/2/oauth2/token).\
   **Client ID**: copie y pegue el ID de cliente de OAuth 2.0 desde el Developer Portal.\
   **Client Secret**: solo lo necesitará si usa un tipo de App que sea un cliente confidencial. Si es así, copie y pegue el Client Secret de OAuth 2.0 desde el Developer Portal. 

6. Confirme que **Scope** incluya dm.read, dm.write, tweet.read y users.read.

7. Confirme que **State** esté configurado en “state”.

8. Confirme que **Client Authentication** esté configurado en Send as Basic Auth header.

9. Haga clic en **Get New Access Token** y, como parte del proceso de "Sign-in with X", haga clic en "Authorize app".

10. Haga clic en el botón "Proceed" y luego en "Use Token" para generar un token. 

11. Haga clic en el botón "Save" para guardar estos detalles de configuración.

Es posible que reciba un mensaje indicando que no ha iniciado sesión en X. Si obtiene este error, deberá iniciar sesión en la cuenta de X en cuyo nombre intenta publicar dentro de Postman.

Ahora que estos detalles de OAuth 2.0 se han establecido a nivel de carpeta, ve a cada uno de los ejemplos y a su pestaña "Authorization" y confirma que su Type esté configurado como "Inherit auth from parent".

Ten en cuenta que este token caducará pronto y tendrás que regenerarlo haciendo clic en el botón "Get New Access Token". Al hacerlo, se iniciará el proceso "Sign-in with X" y se generará un token nuevo para realizar solicitudes.

<div id="step-three-specify-the-direct-message-conversation-participants-and-message-contents">
  #### Paso tres: especifica los participantes de la conversación de Mensaje Directo y el contenido del mensaje
</div>

Ve a la pestaña “Body” y actualiza el objeto JSON de ejemplo. Establece el atributo participant\_ids con las cuentas a las que quieres enviar el Mensaje Directo.

`{
   "message": {"text": "Hola a ustedes dos, esta es una nueva conversación grupal."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}`

<div id="step-four-make-your-request-and-review-the-response">
  #### Paso cuatro: Realiza tu solicitud y revisa la respuesta
</div>

Una vez que todo esté configurado, haz clic en el botón "Send" y recibirás una respuesta similar al ejemplo que aparece a continuación. Como recordatorio, si tu token ha expirado desde que lo creaste anteriormente, puedes volver a la pestaña Authorization de la carpeta y hacer clic en "Get New Access Token" para generar un token nuevo.

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582103724607971332"
   }
}
```

Si el objeto "data" de la respuesta contiene un dm\_conversation\_id y un dm\_event\_id, has creado correctamente una nueva conversación de Mensaje Directo. Para empezar a consultar los eventos asociados con esta conversación, dirígete a la guía de inicio rápido de consulta de Mensajes Directos.

<div id="step-five-add-another-message-to-that-group-conversation">
  #### Paso cinco: Añadir otro mensaje a esa conversación de grupo
</div>

Ahora selecciona el ejemplo "Add DM to conversation" y la pestaña "Params". En "Path Variables", actualiza dm\_conversation\_id con el ID de la conversación que creaste arriba.

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| dm\_conversation\_id | 1582103724607971328 |

Con este ID de conversación, la ruta de la solicitud será: https://api.x.com/2/dm\_conversations/1582103724607971328/messages

Además, actualiza la pestaña "Body" con el JSON de la solicitud que contenga el texto del mensaje que deseas enviar:

```
{
   "text": "Adding a new message to our group conversation..."
}
```

Una vez que tengas todo configurado, haz clic en el botón "Send" y recibirás una respuesta similar al siguiente ejemplo:

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582106224379559940"
   }
}
```