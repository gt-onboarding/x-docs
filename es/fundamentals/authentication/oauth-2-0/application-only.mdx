---
title: Autenticación solo de aplicación y token portador de OAuth 2.0
sidebarTitle: OAuth 2.0 Solo aplicación (token portador)
---

<div id="app-only-authentication-and-oauth-20-bearer-token">
  ### Autenticación solo de la app y token Bearer de OAuth 2.0
</div>

X ofrece a las aplicaciones la posibilidad de emitir solicitudes autenticadas en nombre de la propia aplicación, en lugar de hacerlo en nombre de un usuario específico. La implementación de X se basa en el flujo [Client Credentials Grant](http://tools.ietf.org/html/rfc6749#section-4.4) de la [especificación OAuth 2](http://tools.ietf.org/html/rfc6749).

La autenticación solo de la aplicación no incluye ningún contexto de usuario y es una forma de autenticación en la que una aplicación realiza solicitudes a la API en su propio nombre. Este método es para desarrolladores que solo necesitan acceso de lectura a información pública.

Puede realizar la autenticación solo de la aplicación usando las claves de API de consumidor de sus apps o utilizando un token de acceso “solo app” (Bearer token). Esto significa que las únicas solicitudes que puede hacer a una API de X no deben requerir un usuario autenticado.

Con la autenticación solo de la aplicación, puede realizar acciones como:

- Obtener cronologías de usuarios
- Acceder a amigos y seguidores de cualquier cuenta
- Acceder a recursos de listas
- Buscar tuits

Tenga en cuenta que solo [OAuth 1.0a](/es/resources/fundamentals/authentication/oauth-1-0a/api-key-and-secret) o el [flujo de código de autorización de OAuth 2.0](/es/resources/fundamentals/authentication/oauth-2-0/authorization-code) con PKCE es necesario para emitir solicitudes en nombre de los usuarios. La página de [referencia de la API](/es/resources/fundamentals/authentication/api-reference) describe el método de autenticación requerido para usar una API. Necesitará autenticación y contexto de usuario, con un [token de acceso](/es/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) para realizar lo siguiente:

- Publicar tuits u otros recursos
- Buscar usuarios
- Usar cualquier endpoint de geolocalización
- Acceder a Mensajes Directos o a credenciales de cuenta
- Recuperar direcciones de correo electrónico de usuarios

<div id="auth-flow">
  #### Flujo de autenticación
</div>

Para usar este método, debes utilizar un [token de acceso solo de aplicación](/es/resources/fundamentals/authentication/oauth-2-0/application-only) (también conocido como [Bearer Token](/es/resources/fundamentals/authentication/oauth-2-0/bearer-tokens)). Puedes generar un token de acceso solo de aplicación (Bearer Token) enviando tu consumer key y secret al endpoint [POST oauth2/token](/es/resources/fundamentals/authentication/api-reference#post-oauth2-token).

El flujo de autenticación solo de aplicación sigue estos pasos:

- La aplicación codifica su consumer key y secret en un conjunto de credenciales con un formato específico.
- La aplicación realiza una solicitud al endpoint [POST oauth2/token](/es/resources/fundamentals/authentication/api-reference#post-oauth2-token) para intercambiar estas credenciales por un [token de acceso solo de aplicación](/es/resources/fundamentals/authentication/oauth-2-0/application-only).
- Al acceder a la API REST, la aplicación utiliza el token de acceso solo de aplicación para autenticarse.

Como no es necesario firmar la solicitud, este enfoque es mucho más sencillo que el modelo estándar OAuth 1.0a.

<Frame>
  <img src="/images/auth-5.png.twimg.1920.png" alt="" />
</Frame>

<div id="about-application-only-auth">
  #### Acerca de la autenticación solo de la aplicación
</div>

**Los tokens son contraseñas**

Tenga en cuenta que la consumer key y el consumer secret, así como el App-only Access Token (Bearer Token), otorgan acceso para realizar solicitudes en nombre de una aplicación. Estos valores deben considerarse tan sensibles como las contraseñas y no deben compartirse ni distribuirse a partes no confiables.

**SSL requerido**

Todas las solicitudes (tanto para obtener como para usar los tokens) _deben_ usar endpoints HTTPS. Siga las prácticas recomendadas detalladas en [Conexión a la API de X usando TLS](/es/resources/fundamentals/authentication/guides/tls): los pares **siempre** deben verificarse.

**Sin contexto de usuario**

Al realizar solicitudes con autenticación solo de la aplicación, no existe el concepto de “usuario actual”. Por lo tanto, endpoints como [POST statuses/update](/es/x-api/posts/creation-of-a-post) no funcionarán con autenticación solo de la aplicación. Consulte [uso de OAuth](/es/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) para obtener más información sobre cómo realizar solicitudes en nombre de un usuario.

**Limitación de tasa**

Las aplicaciones tienen dos tipos de grupos de limitación de tasa.

Las solicitudes realizadas en nombre de usuarios con tokens de acceso, también conocido como contexto de usuario, se descuentan de un grupo de limitación de tasa diferente al utilizado en la autenticación solo de la aplicación. En otras palabras, las solicitudes realizadas en nombre de usuarios no descontarán de los límites de tasa disponibles mediante la autenticación solo de la aplicación, y las solicitudes realizadas con autenticación solo de la aplicación no descontarán de los límites de tasa utilizados en la autenticación basada en usuario.

Lea más sobre [limitación de tasa de la API](/es/x-api/fundamentals/rate-limits) y [revise los límites](https://developer.x.com/en/portal/products).

<div id="issuing-application-only-requests">
  #### Emisión de solicitudes solo de aplicación
</div>

**Paso 1: Codificar la consumer key y el consumer secret**

Los pasos para codificar la consumer key y el consumer secret de una aplicación en un conjunto de credenciales para obtener un Bearer Token son:

1. Codifique la consumer key y el consumer secret en formato URL según [RFC 1738](http://www.ietf.org/rfc/rfc1738.txt). Tenga en cuenta que, al momento de redactar esto, esto no cambiará realmente la consumer key ni el consumer secret, pero este paso debe realizarse por si el formato de esos valores cambia en el futuro.
2. Concatene la consumer key codificada, un carácter de dos puntos ":", y el consumer secret codificado en una sola cadena.
3. [Codifique en Base64](http://en.wikipedia.org/wiki/Base64) la cadena del paso anterior.

A continuación se muestran valores de ejemplo que ilustran el resultado de este algoritmo. Tenga en cuenta que el consumer secret utilizado en esta página es para fines de prueba y no funcionará para solicitudes reales.

|     |     |
| :--- | :--- |
| Consumer key | xvz1evFS4wEEPTGEFPHBog |
| Consumer secret | L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg |
| Consumer key codificada según RFC 1738<br /><br />(no cambia) | xvz1evFS4wEEPTGEFPHBog |
| Consumer secret codificado según RFC 1738<br /><br />(no cambia) | L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg |
| Credenciales de Bearer Token | xvz1evFS4wEEPTGEFPHBog:L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg |
| Credenciales de Bearer Token codificadas en Base64 | :: eHZ6MWV2RlM0d0VFUFRHRUZQSEJvZzpMOHFxOVBaeVJnNmllS0dFS2hab2xHQzB2SldMdzhpRUo4OERSZHlPZw== |

**Paso 2: Obtener un App only Access Token (Bearer Token)**

El valor calculado en el paso 1 debe canjearse por un App only Access Token emitiendo una solicitud a [POST oauth2/token](/es/resources/fundamentals/authentication/api-reference#post-oauth2-token):

- La solicitud debe ser una solicitud HTTP POST.
- La solicitud debe incluir un encabezado `Authorization` con el valor `Basic <valor en base64 del paso 1>.`
- La solicitud debe incluir un encabezado `Content-Type` con el valor `application/x-www-form-urlencoded;charset=UTF-8.`
- El cuerpo de la solicitud debe ser `grant_type=client_credentials`.

**Ejemplo de solicitud (el encabezado Authorization ha sido envuelto):**

```json
POST /oauth2/token HTTP/1.1
Host: api.x.com
User-Agent: My X App v1.0.23
Authorization: Basic eHZ6MWV2RlM0d0VFUFRHRUZQSEJvZzpMOHFxOVBaeVJn
                     NmllS0dFS2hab2xHQzB2SldMdzhpRUo4OERSZHlPZw==
Content-Type: application/x-www-form-urlencoded;charset=UTF-8
Content-Length: 29
Accept-Encoding: gzip

grant\_type=client\_credentials
```

Si la solicitud se formateó correctamente, el servidor responderá con una carga útil codificada en JSON:

**Ejemplo de respuesta:**

```json
HTTP/1.1 200 OK
Status: 200 OK
Content-Type: application/json; charset=utf-8
...
Content-Encoding: gzip
Content-Length: 140

{"token\_type":"bearer","access\_token":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}
```

Las aplicaciones deben verificar que el valor asociado con la clave `token_type` del objeto devuelto sea `bearer`. El valor asociado con la clave `access_token` es el App only Access Token (Bearer Token).

Tenga en cuenta que solo hay un App only Access Token válido por aplicación a la vez. Emitir otra solicitud con las mismas credenciales a `/oauth2/token` devolverá el mismo token hasta que se invalide.

**Paso 3: Autenticar solicitudes a la API con el App only Access Token (Bearer Token)**

El App only Access Token (Bearer Token) puede usarse para emitir solicitudes a endpoints de la API que admiten autenticación solo de aplicación. Para usar el App Access Token, construya una solicitud HTTPS normal e incluya un encabezado `Authorization` con el valor `Bearer <valor del bearer token en base64 del paso 2>. No se requiere firma.`

**Ejemplo de solicitud (el encabezado Authorization ha sido envuelto):**

```
GET /1.1/statuses/user\_timeline.json?count=100&screen\_name=twitterapi HTTP/1.1
Host: api.x.com
User-Agent: My X App v1.0.23
Authorization: Bearer AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAA
                      AAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Accept-Encoding: gzip
```

**Invalidación de un token de acceso de solo aplicación (Bearer token)**

Si un token de acceso de solo aplicación se ve comprometido o necesita invalidarse por cualquier motivo, haga una llamada a [POST oauth2/invalidate\_token](/es/resources/fundamentals/authentication/api-reference#post-oauth2-invalidate-token).

**Ejemplo de solicitud (el encabezado Authorization está dividido en líneas):**

```bash
POST /oauth2/invalidate_token HTTP/1.1
Authorization: Basic eHZ6MWV2RlM0d0VFUFRHRUZQSEJvZzpMOHFxOVBaeVJn
                     NmllS0dFS2hab2xHQzB2SldMdzhpRUo4OERSZHlPZw==
User-Agent: My X App v1.0.23
Host: api.x.com
Accept: */*
Content-Length: 119
Content-Type: application/x-www-form-urlencoded

access_token=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
```

**Ejemplo de respuesta:**

```json
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
Content-Length: 127
...

{"access_token":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}
```

<div id="common-error-cases">
  #### Casos de error comunes
</div>

Esta sección describe algunos errores habituales en la negociación y el uso de tokens Bearer. Tenga en cuenta que no todas las posibles respuestas de error se incluyen aquí; esté atento a códigos y respuestas de error no controlados.

**Solicitudes no válidas para obtener o revocar un App only Access Token**

Intentos de:

- Obtener un App only Access Token (Bearer Token) con una solicitud inválida (por ejemplo, omitiendo `grant_type=client_credentials`).
- Obtener o revocar un App only Access Token (Bearer Token) con credenciales de la app incorrectas o caducadas.
- Invalidar un App only Access Token (Bearer Token) incorrecto o ya revocado.
- Obtener un App only Access Token (Bearer Token) con demasiada frecuencia en un breve período de tiempo.

Darán como resultado:

```json
HTTP/1.1 403 Forbidden
Content-Length: 105
Content-Type: application/json; charset=utf-8
...

{"errors":[{"code":99,"label":"authenticity_token_error","message":"Unable to verify your credentials"}]}
```

<div id="api-request-contains-invalid-app-only-access-token-bearer-token">
  #### La solicitud a la API contiene un token de acceso solo de app (Bearer token) no válido
</div>

Usar un token de acceso incorrecto o revocado para hacer solicitudes a la API dará como resultado:

```json
HTTP/1.1 401 Unauthorized
Content-Type: application/json; charset=utf-8
Content-Length: 61
...

{"errors":[{"message":"Invalid or expired token","code":89}]}
```

<div id="app-only-access-token-bearer-token-used-on-endpoint-which-doesnt-support-application-only-auth">
  #### Token de acceso solo de aplicación (Bearer Token) usado en un endpoint que no admite autenticación solo de aplicación
</div>

Solicitar un endpoint que requiere contexto de usuario (como `statuses/home_timeline`) con un token de acceso solo de aplicación (Bearer Token) producirá:

```json
HTTP/1.1 403 Forbidden
Content-Type: application/json; charset=utf-8
Content-Length: 91
...

{"errors":\[{"message":"Your credentials do not allow access to this resource","code":220}\]}
```