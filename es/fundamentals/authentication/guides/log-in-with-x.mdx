---
title: Iniciar sesión con X
---

import { Button } from "/snippets/es/button.mdx";

Usa Iniciar sesión con X, también conocido como Acceder con X, para colocar un botón en tu sitio o aplicación que permita a los usuarios de X disfrutar de las ventajas de una cuenta registrada con solo un clic. Funciona en sitios web, iOS y aplicaciones móviles y de escritorio.

![Botón de Iniciar sesión con X](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/auth-docs/sign-in-with-twitter-gray.png.twimg.1920.png)

<div id="features">
  ## Características
</div>

- Facilidad de uso: un nuevo visitante de tu sitio solo tiene que hacer clic en dos botones para iniciar sesión por primera vez.
- Integración con X: el flujo Iniciar sesión con X puede otorgar autorización para usar las API de X en nombre de tus usuarios.
- Basado en OAuth: una gran variedad de bibliotecas cliente y código de ejemplo es compatible con la API de Iniciar sesión con X.

<div id="available-for">
  ## Disponible para
</div>

- Navegadores - Si sus usuarios pueden acceder a un navegador, puede integrar Iniciar sesión con X. Conozca el flujo de inicio de sesión en el navegador.
- Dispositivos móviles - Cualquier dispositivo móvil con conexión a Internet puede aprovechar Iniciar sesión con X. Conozca el flujo de inicio de sesión en dispositivos móviles.

<div id="implementing-log-in-with-x">
  ## Implementación de Iniciar sesión con X
</div>

Las implementaciones para navegador y web móvil de Iniciar sesión con X se basan en OAuth. Esta página muestra las solicitudes necesarias para obtener un token de acceso para el flujo de inicio de sesión.

Para usar el flujo de “Iniciar sesión con X”, ve a la [configuración de tu app de X](/es/resources/fundamentals/developer-apps) y asegúrate de que la opción _«¿Permitir que esta app se use para Iniciar sesión con X?»_ esté habilitada.

Esta página asume que el lector sabe cómo firmar solicitudes con el protocolo OAuth 1.0a. Si deseas saber cómo firmar una solicitud, consulta la página [Autorizar una solicitud](/es/resources/fundamentals/authentication/oauth-1-0a/authorizing-a-request).

Si deseas verificar la firma de las solicitudes en esta página, el secreto de consumidor utilizado es: L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg. Este valor es solo para pruebas y no funcionará para solicitudes reales.

A continuación se enumeran los tres pasos para implementar Iniciar sesión con X: obtener un token de solicitud, redirigir al usuario y convertir el token de solicitud en un token de acceso.

<Tabs>
  <Tab title="Step 1">
    ### Paso 1: Obtener un token de solicitud

    Para iniciar un flujo de inicio de sesión, tu [app de X](/es/resources/fundamentals/developer-apps) debe obtener un token de solicitud enviando un mensaje firmado a [POST oauth/request\_token](/es/resources/fundamentals/authentication/api-reference#post-oauth-request-token). El único parámetro específico en esta solicitud es oauth\_callback, que debe ser la versión codificada en URL de la dirección a la que deseas que se redirija al usuario cuando complete el paso 2. El resto de los parámetros los añade el proceso de firma de OAuth.

    <Note>
      **Nota:** Cualquier [URL de callback](/es/resources/fundamentals/developer-apps#callback-urls) que utilices con el endpoint [POST oauth/request\_token](/es/resources/fundamentals/authentication/api-reference#post-oauth-request-token) deberá registrarse en la [configuración de la app de X](/es/resources/fundamentals/developer-apps) del [portal para desarrolladores](/es/resources/fundamentals/developer-portal).
    </Note>

    <Frame>
      <img src="/images/auth-4.png.twimg.1920.png" alt="" />
    </Frame>

    **Ejemplo de solicitud (se ha ajustado la cabecera Authorization):**

    ```
    POST /oauth/request_token HTTP/1.1
    User-Agent: themattharris' HTTP Client
    Host: api.x.com
    Accept: */*
    Authorization:
            OAuth oauth_callback="http%3A%2F%2Flocalhost%2Fsign-in-with-twitter%2F",
                  oauth_consumer_key="cChZNFj6T5R0TigYB9yd1w",
                  oauth_nonce="ea9ec8429b68d6b77cd5600adbbb0456",
                  oauth_signature="F1Li3tvehgcraF8DMJ7OyxO4w9Y%3D",
                  oauth_signature_method="HMAC-SHA1",
                  oauth_timestamp="1318467427",
                  oauth_version="1.0"
    ```

    Tu app debe revisar el estado HTTP de la respuesta. Cualquier valor distinto de 200 indica un error. El cuerpo de la respuesta contendrá los parámetros oauth\_token, oauth\_token\_secret y oauth\_callback\_confirmed. Tu app debe verificar que oauth\_callback\_confirmed sea true y almacenar los otros dos valores para los siguientes pasos.

    **Ejemplo de respuesta (se ha ajustado el cuerpo de la respuesta):**

    ```
    HTTP/1.1 200 OK
    Date: Thu, 13 Oct 2011 00:57:06 GMT
    Status: 200 OK
    Content-Type: text/html; charset=utf-8
    Content-Length: 146
    Pragma: no-cache
    Expires: Tue, 31 Mar 1981 05:00:00 GMT
    Cache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
    Vary: Accept-Encoding
    Server: tfe

    oauth_token=NPcudxy0yU5T3tBzho7iCotZ3cnetKwcTIRlX0iwRl0&
    oauth_token_secret=veNRnAWe6inFuo8o2u8SLLZLjolYDmDP7SzL0YfYI&
    oauth_callback_confirmed=true

    ```
  </Tab>

  <Tab title="Step 2">
    ### Paso 2: Redirigir al usuario

    El siguiente paso es dirigir al usuario a X para que complete el flujo correspondiente, como se describe en el flujo de inicio de sesión en navegador más abajo. Dirija al usuario a [GET oauth/authenticate](/es/resources/fundamentals/authentication/api-reference#get-oauth-authenticate), y el token de solicitud obtenido en el paso 1 debe pasarse como parámetro oauth\_token.

    La forma más fluida de implementarlo en un sitio web es emitir una redirección HTTP 302 como respuesta a la solicitud original de “iniciar sesión”. Las apps móviles y de escritorio deberían abrir una nueva ventana del navegador o dirigir a la URL mediante una vista web integrada.

    **URL de ejemplo a la que redirigir:**

    https://api.x.com/oauth/authenticate?oauth\_token=NPcudxy0yU5T3tBzho7iCotZ3cnetKwcTIRlX0iwRl0

    El endpoint de inicio de sesión se comportará de una de tres maneras según el estado del usuario:

    1. **Con sesión iniciada y aprobado**: Si el usuario tiene la sesión iniciada en x.com y ya ha aprobado la aplicación que realiza la llamada, se le autenticará de inmediato y se le devolverá a la URL de callback con un token de solicitud OAuth válido. La redirección a x.com no es evidente para el usuario.
    2. **Con sesión iniciada pero no aprobado**: Si el usuario tiene la sesión iniciada en x.com pero no ha aprobado la aplicación que realiza la llamada, se mostrará una solicitud para compartir acceso con dicha aplicación. Tras aceptar la solicitud de autorización, el usuario será redirigido a la URL de callback con un token de solicitud OAuth válido.
    3. **Sin sesión iniciada**: Si el usuario no tiene la sesión iniciada en x.com, se le pedirá que introduzca sus credenciales y conceda acceso a la aplicación para que esta acceda a su información en la misma pantalla. Una vez iniciada la sesión, se le devolverá a la URL de callback con un token de solicitud OAuth válido.

    Tras una autenticación correcta, su callback\_url recibirá una solicitud que contiene los parámetros oauth\_token y oauth\_verifier. Su aplicación debe verificar que el token coincide con el token de solicitud recibido en el paso 1.

    **Solicitud desde la redirección del cliente (parámetros de querystring entre paréntesis):**

    ```
    GET /sign-in-with-twitter/?
            oauth_token=NPcudxy0yU5T3tBzho7iCotZ3cnetKwcTIRlX0iwRl0&
            oauth_verifier=uw7NjWHT6OJ1MpJOXsHfNxoAhPKpgI8BlYDhxEjIBY HTTP/1.1
    Host: localhost
    User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.5 (KHTML, like Gecko) Chrome/16.0.891.1 Safari/535.5
    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    Referer: http://localhost/sign-in-with-twitter/
    Accept-Encoding: gzip,deflate,sdch
    Accept-Language: en-US,en;q=0.8
    Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
    ```
  </Tab>

  <Tab title="Step 3">
    ### Paso 3: Convertir el token de solicitud en un token de acceso

    Para convertir el token de solicitud en un token de acceso utilizable, su aplicación debe realizar una solicitud al endpoint [POST oauth/access\_token](/es/resources/fundamentals/authentication/api-reference#post-oauth-access-token), que contenga el valor oauth\_verifier obtenido en el paso 2. El token de solicitud también se incluye en la sección oauth\_token del encabezado, pero esto lo habrá agregado el proceso de firma.

    **Ejemplo de solicitud (encabezado Authorization envuelto):**

    ```
    POST /oauth/access_token HTTP/1.1
    User-Agent: themattharris' HTTP Client
    Host: api.x.com
    Accept: */*
    Authorization: OAuth oauth_consumer_key="cChZNFj6T5R0TigYB9yd1w",
                          oauth_nonce="a9900fe68e2573b27a37f10fbad6a755",
                          oauth_signature="39cipBtIOHEEnybAR4sATQTpl2I%3D",
                          oauth_signature_method="HMAC-SHA1",
                          oauth_timestamp="1318467427",
                          oauth_token="NPcudxy0yU5T3tBzho7iCotZ3cnetKwcTIRlX0iwRl0",
                          oauth_version="1.0"
    Content-Length: 57
    Content-Type: application/x-www-form-urlencoded

    oauth_verifier=uw7NjWHT6OJ1MpJOXsHfNxoAhPKpgI8BlYDhxEjIBY
    ```

    Una respuesta correcta contiene los parámetros oauth\_token y oauth\_token\_secret. El token y su secreto deben almacenarse y utilizarse para futuras solicitudes autenticadas a la API de X. Para determinar la identidad del usuario, utilice [GET account/verify\_credentials](https://dev.x.com/rest/reference/get/account/verify_credentials).

    **Ejemplo de respuesta (el cuerpo de la respuesta ha sido envuelto):**

    ```
    HTTP/1.1 200 OK
    Date: Thu, 13 Oct 2011 00:57:08 GMT
    Status: 200 OK
    Content-Type: text/html; charset=utf-8
    Content-Length: 157
    Pragma: no-cache
    Expires: Tue, 31 Mar 1981 05:00:00 GMT
    Cache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
    Vary: Accept-Encoding
    Server: tfe

    oauth_token=7588892-kagSNqWge8gB1WwE3plnFsJHAZVfxWD7Vb57p0b4&
    oauth_token_secret=PbKfYqSryyeKDWz4ebtY3o5ogNLG11WJuZBc9fQrQo
    ```
  </Tab>
</Tabs>

<Tabs>
  <Tab title="Recursos adicionales">
    ### Recursos para Iniciar sesión con X

    #### Bibliotecas cliente

    Las bibliotecas cliente listadas en [X libraries](/es/resources/tools-and-libraries) ayudarán a implementar Iniciar sesión con X. Use el endpoint /oauth/authenticate, como se describe en los pasos anteriores.

    #### Botones

    X prefiere que su aplicación utilice los siguientes botones para mantener una marca coherente. Guarde estas imágenes y hospédelas en sus propios servidores.

    Iniciar sesión con X (estilo botón):

    <Frame>
      <img src="/images/sign-in-with-twitter.png" alt="" />
    </Frame>

    Iniciar sesión con X (estilo enlace):

    <Frame>
      <img src="/images/sign-in-with-twitter-link.png" alt="" />
    </Frame>
  </Tab>

  <Tab title="Flujo de inicio de sesión en el navegador">
    El flujo de inicio de sesión en el navegador es adecuado para sitios web y aplicaciones que pueden abrir o incrustar un navegador web. A muy alto nivel:

    - La aplicación muestra un enlace o botón “Iniciar sesión con X”.
    - El usuario hace clic en el botón de inicio de sesión.
    - El navegador web actual se redirige a X (o se abre un nuevo navegador y se dirige a X).
    - El usuario completa un paso de inicio de sesión y autorización en X si es necesario.
    - X redirige a una URL bajo el control de la aplicación, pasando la información de autorización del usuario.

    X lleva un registro de las autorizaciones, por lo que, para los usuarios que ya han iniciado sesión en X.com y han autorizado la aplicación, no se muestra ninguna interfaz; en su lugar, se les redirige automáticamente de vuelta a la aplicación.

    ### Flujo en escritorio

    <Frame>
      <img src="/images/browser_111.png" alt="" />
    </Frame>

    Para demostrar los flujos, suponga que el sitio web mostrado arriba (“El mejor sitio web jamás creado”) ha implementado esta API, como lo indica el botón Iniciar sesión con X en la página de inicio.

    Cuando el usuario hace clic en el botón Iniciar sesión, la página que ve depende de si ha iniciado sesión y de si previamente ha permitido que la aplicación acceda a su cuenta.

    Cuando el usuario ha iniciado sesión en x.com pero no ha otorgado acceso, se muestra una lista de permisos solicitados, junto con los botones Iniciar sesión y Cancelar.

    Cuando el usuario no ha iniciado sesión en x.com, se mostrarán campos para nombre de usuario y contraseña. Tenga en cuenta que, incluso si el usuario ya ha otorgado acceso a la aplicación, la lista de permisos seguirá mostrándose.

    <Frame>
      <img src="/images/browser_2.png" alt="" />
    </Frame>

    <Frame>
      <img src="/images/browser_3.png" alt="" />
    </Frame>

    <Frame>
      <img src="/images/browser_4.png" alt="" />
    </Frame>

    Después de que el usuario introduzca credenciales válidas (si es necesario) y haga clic en “Iniciar sesión”, X redirigirá al usuario al sitio web que inició el flujo de inicio de sesión.

    En el caso de que el usuario ya haya iniciado sesión en x.com y haya otorgado acceso al sitio web, esta redirección se produce de inmediato.
  </Tab>

  <Tab title="Flujo de inicio de sesión móvil">
    El flujo de la interfaz en navegadores web móviles funciona exactamente igual que el flujo de inicio de sesión en el navegador, pero está optimizado para móviles.

    A continuación se muestran capturas de pantalla de las pantallas con sesión iniciada, sesión cerrada y redirección:

    <Frame>
      <img src="/images/authorize-login-screenshot.png" alt="" />
    </Frame>

    <Frame>
      <img src="/images/authorize-logged-in" alt="" />
    </Frame>

    <Frame>
      <img src="/images/redirect-application.png" alt="" />
    </Frame>
  </Tab>
</Tabs>