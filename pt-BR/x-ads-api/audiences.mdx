---
title: Audiências
---

import { Button } from '/snippets/pt-BR/button.mdx';

<div id="custom-audiences">
  ## Públicos personalizados
</div>

<div id="overview">
  ### Visão geral
</div>

Há várias maneiras de parceiros criarem [Públicos personalizados](https://business.x.com/en/targeting/tailored-audiences.html).

- [API de Público (CRM)](#crm)
- [Web](#web)
- [Mobile](#mobile)
- [Flexível](#flexible)

Observe que não é possível excluir públicos personalizados semelhantes (lookalike) do direcionamento. Além disso, você não pode direcionar simultaneamente um público personalizado e um público semelhante (lookalike) no mesmo item de linha de anúncio (grupo de anúncios).

**Gerenciamento de público**

Os públicos podem ser gerenciados por parceiros de público e parceiros da API de Anúncios. Oferecemos uma série de endpoints na API para acessar e manter públicos personalizados.

Para informações sobre públicos personalizados, oferecemos 2 endpoints:

- [GET accounts/:account\_id/custom\_audiences](/pt-BR/x-ads-api/audiences)
- [GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id](/pt-BR/x-ads-api/audiences)

Para mais detalhes sobre como enviar e gerenciar públicos, consulte o [guia da Audience API](/pt-BR/x-ads-api/audiences).

**Tempos de processamento**

De modo geral, as alterações de público são processadas em lotes executados a cada 6–8 horas. Enquanto uma alteração de público estiver em processamento, o público existente a ser atualizado não será afetado. Não recomendamos fazer mais de uma atualização de adições e uma atualização de remoções por público dentro desse período.

**Direcionamento**

Um público só pode ser direcionado se corresponder a pelo menos 100 usuários ativos nos últimos 90 dias em clientes de propriedade e operação do X. [GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id](/pt-BR/x-ads-api/audiences) indicará se um público não pode ser direcionado por corresponder a poucos usuários.

**API de Público (CRM)**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_0.png" alt="image2" />
</Frame>

Parceiros de público ou de API fornecem uma lista de identificadores com hash, o X realiza a correspondência e produz segmentos que ficam disponíveis para compra de mídia no X. Os parceiros podem criar esses públicos com a [Audience API](/pt-BR/x-ads-api/audiences).

**Como funciona?**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_1.png" alt="image3" />
</Frame>

**Web**

Oferecemos um processo padrão de correspondência de cookies ao trabalhar com parceiros de público MPP para identificar segmentos a serem direcionados para compra de mídia no X. Além disso, os anunciantes podem configurar a [X Web Event Tag](/pt-BR/x-ads-api/measurement/web-conversions#web-event-tags) para coletar dados de usuários do site e criar um público personalizado correspondente.

**Etapas de configuração**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/screen_shot_2013-11-26-cookie-usage.png" alt="image0" />
</Frame>

![]()

**Como funciona?**

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/tailored_audience_web.png" alt="image1" />
</Frame>

**Mobile**

Consulte [a postagem do blog Custom Audiences from Mobile Apps](https://blog.x.com/2014/introducing-tailored-audiences-from-mobile-apps) para mais detalhes.

**Flexível**

[Públicos flexíveis](/pt-BR/x-ads-api/audiences) dão aos anunciantes a capacidade de criar e salvar combinações de público com base em públicos personalizados existentes ou subconjuntos de públicos personalizados existentes. Subconjuntos dos membros de um público personalizado podem ser direcionados com base na recência e na frequência de interação.

**Casos de uso restritos para públicos personalizados**

[Leia mais sobre restrições](https://developer.x.com/en/developer-terms/more-on-restricted-use-cases "Read more about restrictions")

<div id="audiences-faq">
  ### Perguntas frequentes sobre Públicos[](#real-time-tailored-audiences "Permalink to this headline")
</div>

**P: Enviamos uma grande quantidade de dados; por que o tamanho do público aparece como TOO\_SMALL?**

R: No momento, os dados estão sendo adicionados ao público em tempo real, mas a tarefa que processa os dados para calcular o tamanho do público só é executada após um período. O tamanho correto do público deve ser exibido na interface após algumas horas.

**P: Terminamos de enviar os dados do público e esperamos 24 horas ou mais, mas ainda não conseguimos segmentar o público — quais devem ser os próximos passos?**

R: Confirme o seguinte:

- O ID de usuário enviado está correto e não está com formato inválido.
- Os nomes dos públicos enviados estão corretos e correspondem às atualizações de associação anteriores.
- Confirme a resposta dos comandos POST.
- Confirme que o pixel de ID Sync está implementado corretamente e, conforme descrito pelo processo de ID Sync, usuários suficientes visitaram o site em questão para permitir o mapeamento. Usuários não mapeados nas atualizações de associação não serão convertidos em usuários segmentáveis.

Se todo o restante estiver correto e funcionando, entre em contato com os responsáveis de produto do X com informações o mais detalhadas possível (consulte o [Guia para solicitações de parceiros](/pt-BR/x-ads-api/introduction) para um exemplo das informações preferidas).

**P: Quantas vezes podemos chamar o endpoint e com qual algoritmo?**

R: Recomendamos fortemente que você chame nosso sistema com deltas incrementais e nunca reenvie a associação completa do público. O sistema foi testado e possui vazão suficiente para processar atualizações incrementais de dados para alguns dos maiores sites do mundo. O upload inicial dos públicos deve ser cuidadosamente controlado, e a primeira carga deve levar um tempo significativo para ser concluída.

**P: Qual é o tamanho mínimo para um público ser usado em segmentação?**

- O tamanho mínimo para um público é de 100 usuários (após correspondência). Se um público com menos de 500 usuários for correspondido, ele não ficará disponível para segmentação na UI de Anúncios do X.

**P: Quanto tempo levará para processar os arquivos de público? E quanto tempo levará para que os arquivos de público estejam prontos na Interface do Usuário do X?**

- Normalmente, leva de 4 a 6 horas para processar os arquivos de público, mas isso depende do tamanho do arquivo. Assim que o arquivo for processado, os públicos ficam disponíveis na UI de Anúncios do X.

**P: Como a taxa de correspondência é calculada?**

- Taxa de correspondência = usuários ativos no X nos últimos 90 dias / número de usuários fornecido

**P: Como testamos se um arquivo de público está funcionando corretamente?**

- Você pode fornecer um arquivo de público de teste e usar “keltonlynn” como o identificador do anunciante. Podemos então verificar se o arquivo pode ser ingerido e carregado corretamente na UI do X.

**P: O que é um identificador de usuário de parceiro (`p_user_id`)?**

- É o identificador usado pela sua empresa para identificar de forma exclusiva cada um de seus clientes.

**P: O que é um ID padrão?**

- Pode ser um endereço de e-mail, ID de dispositivo, @handle do X ou ID.

**P: Como obtenho a Chave HMAC?**

- Ela será fornecida por e-mail criptografado. Envie sua chave PGP pública para [mpp-inquiry%x.com](mailto:mpp-inquiry%x.com) e enviaremos um e-mail de teste para verificar se tudo está funcionando. Após a verificação, enviaremos a Chave HMAC.

**P: Como verifico se o processo de hashing funcionou usando a Chave HMAC fornecida?**

- O X fornecerá um arquivo de teste (contendo endereços de e-mail de exemplo, IDs de dispositivo, etc.) e um arquivo de hash resultante com o qual você pode comparar seus resultados.

**P: Existe uma limitação de tamanho para o arquivo de correspondência completa de dados?**

- Não, não há limitação de tamanho para o arquivo de correspondência completa de dados.

**P: Quanto tempo levará para o arquivo de correspondência completa de dados ser processado?**

- Assim que o arquivo for recebido pelo X, levará aproximadamente 1 dia para processá-lo.

<div id="crm">
  ### CRM
</div>

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/crm_0.png" alt="image0" />
</Frame>

Este documento descreve os detalhes de integração para parceiros de CRM de Público personalizado, incluindo formatos de arquivo e o processo de troca de dados.

**Resumo**

A empresa fornecerá ao X, em nome de um cliente, uma lista de identificadores comuns de usuários com hash (por exemplo, endereços de e-mail) ou IDs de usuário do parceiro para que o X realize uma correspondência cega e gere uma lista de IDs de usuário do X para segmentação. Os segmentos de segmentação ficarão disponíveis para o @handle específico do anunciante, indicado pelo nome do arquivo na configuração da campanha em ads.x.com.

Todos os arquivos da empresa serão fornecidos ao X por meio de um pacote seguro no IronBox (www.golockbox.com), usando uma conta específica concedida à empresa pelo X. O X fornecerá acesso ao IronBox. A documentação das APIs do IronBox pode ser encontrada em [https://secure.goironcloud.com/Docs/Help/](https://secure.goironcloud.com/Docs/Help/).

<div id="partner-id-matching-requirements">
  #### Requisitos de correspondência de ID de parceiro
</div>

Se a empresa usa seu próprio sistema padrão de IDs para acompanhar usuários (ou seja, não identificadores de usuário comuns como endereços de e-mail, IDs de dispositivo, ID de usuário do X etc.), este é o processo recomendado.

**1. Correspondência completa de dados**

Inicialmente, a empresa fornecerá uma lista abrangente de todos os registros de usuários que inclua um identificador de usuário comum exclusivo com o X em um único arquivo, para realizar uma correspondência completa de dados e produzir um mapeamento, armazenado pelo X, de IDs de parceiro (`p_user_id`) para IDs do X (`tw_id`). Isso será feito regularmente a cada 2–3 meses para garantir a devida manutenção. Concluída a correspondência, o X compartilhará por e-mail com a empresa uma taxa de correspondência de referência desse arquivo.

O formato desse arquivo deve ser:

Convenção de nomenclatura: FullDataMatch.\[CompanyName].txt

Algoritmo de hashing: HMAC\_SHA-256

Formato:

Coluna 1: valor com hashing HMAC dos identificadores comuns

Coluna 2: ID de usuário do parceiro (exclusivo por usuário, não exclusivo no arquivo)

Delimitador de coluna (CSV): vírgulas serão usadas para delimitar o identificador de usuário comum com hashing do ID do parceiro

Valores separados por linha

- Ex.: se o registro de usuário A tiver ID de usuário do parceiro 1 e identificadores comuns 1, 2 e 3:

|     |     |
| :--- | :--- |
| identificador de usuário comum 1 | p\_user\_1 |
| identificador de usuário comum 2 | p\_user\_1 |
| identificador de usuário comum 3 | p\_user\_1 |

\*Veja a seção Diretrizes de hashing para identificadores de usuário comuns abaixo

**2. Listas de segmentos personalizados**

A empresa fornecerá listas de usuários no formato `p_user_id` para criar públicos personalizados para clientes com foco em segmentação no X.

- Valores separados por linha
- `p_user_id`
- - (Igual ao fornecido na seção 1. Correspondência completa de dados acima. Se o valor fornecido na correspondência completa de dados estiver com hashing, a empresa fornecerá o mesmo valor com hashing no arquivo de público. Se o valor fornecido não estiver com hashing, a empresa fornecerá o valor sem hashing.)

<div id="standard-matching-requirements">
  #### Requisitos padrão de correspondência
</div>

Se a empresa não usar um ID padrão para o mapeamento de todos os identificadores de usuário dos clientes, este é o processo recomendado.

**Listas de segmentos personalizados**

A empresa fornecerá listas de identificadores de usuário comuns com hash diretamente ao X, em nome dos clientes, para criar públicos personalizados.

O formato desse arquivo deve ser:

- Valores separados por linha
- Identificador de usuário comum com hash (por exemplo, endereço de e-mail)
- Siga as convenções de nomenclatura de arquivos descritas abaixo
- Siga as instruções de hashing para endereços de e-mail abaixo (em Instruções de hashing)

<div id="custom-segment-list-file-naming-operations">
  #### Nome e operações de arquivo de lista de segmento personalizado
</div>

A operação de um arquivo será determinada pelo seu nome, seguindo as operações disponíveis e a convenção geral de nomenclatura: audiencename\_partnername.handle.operation.filetype

- audiencename: O nome do Público personalizado. Este é o nome exibido ao selecionar o público na interface de configuração de campanhas em ads.x.com, por exemplo, brand\_loyalty\_card\_holders.
- partnername: Nome da empresa que fornece os dados em nome do anunciante, por exemplo, company\_name.
- handle: Conta do X (@handle) que terá acesso aos Públicos personalizados, por exemplo, @pepsi, @dietpepsi
- operation: new, add, remove, removeall, replace (detalhes abaixo)
- timestamp: Carimbo de data/hora Unix (epoch) em segundos, usado para garantir que cada arquivo de público enviado seja exclusivo
- filetype: o arquivo deve estar no formato \*.txt

<div id="creating-and-updating-audiences">
  #### Criando e Atualizando Públicos
</div>

Crie um novo público com um único arquivo, por exemplo: loyalty\_card\_holders\_partnername.pepsi.new.txt

Add - Adicione as correspondências de uma lista a um público existente, por exemplo: loyalty\_card\_holders\_partnername.pepsi.add..txt

Remove - Remova as correspondências de uma lista de um público existente. Ex.: loyalty\_card\_holders\_partnername.pepsi.remove..txt

Remove All - Remova as correspondências geradas a partir de uma lista cumulativa atualizada regularmente de todos os públicos desse cliente (ou seja, Lista de Opt-out do Cliente). Ex.: partnername.pepsi.removeall.txt

- Pode ser usada para uma lista abrangente de usuários que optaram por não receber do Anunciante.
- O X somente considerará a lista mais recente fornecida neste arquivo e aplicará isso a todos os públicos existentes e futuros para os usuários correspondentes.

Usuários do X no momento em que este arquivo foi fornecido e processado.

Replace - Remova um público existente e substitua-o por uma nova lista de público. Ex.: loyalty\_card\_holders\_partnername.pepsi.replace..txt

Opt-out Geral da Empresa - A empresa fornecerá um arquivo cumulativo de Opt-out para remover usuários que optaram por não participar, conforme a política de Opt-out da Empresa.

O X somente considerará a lista mais recente fornecida nesse arquivo de Opt-out da Empresa e aplicará isso a todos os públicos existentes e futuros para os usuários do X correspondentes no momento em que este arquivo foi fornecido e processado. O formato do arquivo de Opt-out da Empresa será o seguinte: Ex.: partnername.removeall.txt

Delete - Remova um público existente da lista atual de públicos, por exemplo: loyalty\_card\_holders\_partnername.pepsi.delete.txt

<div id="hashing-directions">
  #### Instruções de hashing
</div>

A X compartilhará com segurança uma chave de produção codificada em base64 via PGP para aplicar hashing a identificadores comuns de usuários (por exemplo, endereços de e-mail). A empresa fará a decodificação em base64 da chave para obter uma chave de 32 bytes, que será utilizada para realizar o hashing.

Exemplo de chave codificada em base64:

BrQvOg+dACBUmKjRiNxZgJLh6zydjS0ZOv80FelTNzM=

Exemplo de chave decodificada em base64:

/:� TшY

Normalização: A empresa realizará uma normalização básica nos identificadores comuns de usuários antes de aplicar o hashing (exceto em IDs de dispositivo; veja a seção Normalização de ID de dispositivo).

<div id="e-mail-normalization">
  #### Normalização de e-mail
</div>

Ou seja, remova os espaços iniciais e finais e também converta o endereço de e-mail para letras minúsculas.

Ex: Endereço de e-mail bruto: testemail\_Organisational\_baseball+884`@`It92I6Ev2B`.`Com

Após a normalização: testemail\_organisational\_baseball+884`@`it92i6ev2b`.`com

Valor com hash: 74d9584eded0ad1e5572a1c1849f3716751d371d6117a6155dad5363f4b4fbec

Observação: A quantidade de caracteres do HMAC codificado e da chave pode variar conforme a entrada e a codificação, portanto o número de caracteres não é fixo.

<div id="device-id-normalization">
  #### Normalização de IDs de dispositivo
</div>

Aplicaremos os mesmos requisitos de hashing de IDs de dispositivo usando o algoritmo SHA-256 e um sal comum que fornecemos aos parceiros de dados. Removemos espaços, como fazemos com endereços de e-mail, mas não há normalização para minúsculas para IDFAs/IDs do Android, e o formato exato do IDFA/ID do Android deve ser utilizado.

A seguir, um exemplo de formato bruto de IDs de dispositivo para iOS e Android, antes do hashing:

IDFA do iOS: DD99CFF7-6186-4602-9DF2-ED3FD0B2D431

ID do Android: b5bf2122961b3595

IDFA do iOS com hash: 134fb8cd95c7fd42e2793f469a447198ca5f990968db2dbadad70e723ed9750b

ID do Android com hash: 130dddff1939f229476f50bc8adab8fcb7e3525b0e9604fe8effc15e68cee4a4

<div id="x-user-id-normalization">
  #### Normalização de ID de usuário do X
</div>

Os IDs do X ainda serão submetidos a hash, pois o agrupamento de dados — por exemplo, listas de clientes com @handles — é privado ao anunciante, mesmo não sendo PII. Manteremos os mesmos requisitos para hashing de IDs do X usando o algoritmo SHA-256 e um salt comum que fornecemos aos parceiros de dados. Espaços devem ser removidos tanto do X ID quanto do `@username`, mas User IDs não exigem normalização. @usernames devem ser convertidos para minúsculas para normalização. Além disso, o símbolo @ não deve ser incluído como parte do username.

O formato de ID bruto será:

- User ID: 27674040
- @username: testusername

Hashed User ID: bf6b57d4e861e83bea8bbed2b800b251a64c95468ee6e8cb07c3368c9ed45e85

Hashed @username: 12201ae78ad1afa907c7112d17f498154ffb0bf9ea523f5390e072a06d7d9812

<div id="id-sync-integration">
  ### Integração de sincronização de IDs
</div>

Parceiros que enviam dados com um `p_id` devem passar por um processo de sincronização de IDs para gerar um mapeamento entre os IDs de usuário do anunciante ou do parceiro e os IDs de usuário do X. Isso permite que os anunciantes segmentem diretamente seus próprios públicos de usuários no X. Os parceiros também devem definir o parâmetro `user_identifier_type` como `TALIST_PARTNER_USER_ID` ou `TAWEB_PARTNER_USER_ID` ao enviar suas atualizações de associação.

- **Somente web**: Isso pode ser feito inserindo um pixel no site do anunciante, conforme descrito abaixo.
- **Lista**: Isso pode ser feito usando qualquer um dos métodos descritos na página [CRM](/pt-BR/x-ads-api/audiences#crm).

<div id="pixel-url">
  #### URL do pixel
</div>

|     |
| :--- |
| **URL base** |
| [https://analytics.x.com/i/adsct](https://analytics.x.com/i/adsct) |

<div id="pixel-parameters">
  #### Parâmetros do Pixel
</div>

|     |     |
| :--- | :--- |
| **Parâmetro** | **Descrição** |
| `p_id` | Seu ID de parceiro atribuído pelo X |
| `p_user_id` | O ID do usuário no sistema do parceiro |

<div id="id-sync-pixel">
  #### Pixel de sincronização de ID:
</div>

Usando um ID de parceiro de exemplo 111 e um `p_user_id` de exemplo abc, o pixel construído seria o seguinte:

```json
    <pre class="brush: xml">
    <img height="1" width="1" src="https://analytics.x.com/i/adsct?p_id=111&p_user_id=abc" style="display:none" />
    </pre>
```

**Configuração de arquivo de opt-out e envio de arquivos de opt-out**

Os parceiros devem fornecer ao X uma lista de usuários que, ao melhor conhecimento do parceiro, optaram por não receber anúncios direcionados. O arquivo deve ser enviado no seguinte formato:

|     |     |     |     |
| :--- | :--- | :--- | :--- |
| **Número da coluna** | **Nome da coluna** | **Tipo da coluna** | **Descrição** |
| 1   | ID do parceiro | string | O “partner id” é o ID que o X fornece ao parceiro para identificar de forma exclusiva cada parceiro. |
| 2   | ID do usuário no sistema do parceiro | string | O `p_user_id` é o ID exclusivo usado pelo parceiro para identificar o usuário. O arquivo contendo esses usuários de opt-out deve ser carregado usando o endpoint [TON upload](/pt-BR/x-ads-api/audiences) e o caminho dos dados carregados deve ser enviado para o endpoint de Global Opt Out aqui: [PUT accounts/:account\_id/custom\_audiences/global\_opt\_out](/pt-BR/x-ads-api/audiences). |

**Envio de atualizações de associação**

Conforme especificado na documentação do endpoint, ao enviar usuários pelo endpoint [POST custom\_audience\_memberships](/pt-BR/x-ads-api/audiences), você deve enviar um ID do cliente para habilitar uma correspondência baseada em cookies. Parceiros que enviam dados com um `p_id` **devem** definir `user_identifier_type` como `TALIST_PARTNER_USER_ID` ou `TAWEB_PARTNER_USER_ID`.

Todas as outras etapas permanecerão as mesmas das listadas no [Guia de Integração da API de Audiências em Tempo Real](/pt-BR/x-ads-api/audiences)

<div id="custom-audiences-user-data">
  ### Dados de usuário de Públicos personalizados
</div>

Este documento descreve o formato dos dados de usuário de \[Público personalizado]/x-ads-api/audiences.

**Normalização de dados**

**IDs de dispositivo**:

- IDFA — em minúsculas, com hifens; ex.: `4b61639e-47cc-4056-a16a-c8217e029462`
- AdID — é necessário o formato original do dispositivo; não usar maiúsculas nem hifens; ex.: `2f5f5391-3e45-4d02-b645-4575a08f86e`
- Android ID — é necessário o formato original do dispositivo; não usar maiúsculas, sem hifens nem espaços; ex.: `af3802a465767e36`

**Endereços de e-mail**:

- em minúsculas; remover espaços em branco no início e no fim; ex.: `support@x.com`

**Nomes de usuário do X**:

- sem @; em minúsculas; remover espaços em branco no início e no fim; ex.: `jack`

**IDs de usuário do X**:

- Inteiro padrão; ex.: `143567`

**Hash dos dados**

Os dados de cada linha devem ser transformados em hash usando `SHA256`, sem salt. Além disso, o hash final deve estar em minúsculas. Por exemplo, 49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d e **não** 49E0BE2AECCFB51A8DEE4C945C8A70A9AC500CF6F5CB08112575F74DB9B1470D

```
# gerando hash do usuário @AdsAPI usando Python
import hashlib
hashlib.sha256("adsapi".encode()).hexdigest()

# saída
49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d
```

Amostras de código adicionais para hashing podem ser encontradas em [github.com/xdevplatform/ads-platform-tools](https://github.com/xdevplatform/ads-platform-tools).

<div id="custom-audiences-web">
  ### Públicos Personalizados: Web
</div>

<Frame>
  <img src="https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/images/info.png" alt="info.png" />
</Frame>

**Informações**

Os parceiros enviarão uma lista de IDs (`p_user_ids`) para segmentar em nome de um anunciante. Isso é realizado por meio de um processo de sincronização de ID que cria um mapeamento entre os `p_user_ids` e o ID de usuário do X. Esse mapeamento é então usado para gerar listas de IDs de usuário do X que podem ser usadas para segmentação. Esses públicos personalizados ficarão disponíveis no @handle específico do anunciante, conforme indicado pelo rótulo na configuração de campanha Custom Audiences Web em ads.x.com.

O X fornecerá o pixel seguro que pode ser inserido em tags e sites do parceiro para correlacionar os IDs (`p_user_ids`) com IDs de usuário do X. Quando o processo de sincronização de ID for concluído, os arquivos de segmentação serão criados pelo parceiro e disponibilizados ao X por meio de um endpoint HTTPS. Esses arquivos de segmentação são ingeridos regularmente pelo X e, em seguida, disponibilizados na interface do X.

**Pixel seguro do X**

O pixel seguro do X terá a seguinte aparência:

https://analytics.x.com/i/adsct?p\_user\_id=xyz\&p\_id=123

**`p_user_id`** - xyz representa o ID de usuário do parceiro fornecido pelo parceiro

**`p_id`** - 123 representa o ID exclusivo do parceiro (fornecido pelo X)

**Endpoint HTTPS do parceiro e arquivo de usuários para segmentação**

O parceiro precisará fornecer ao X um endpoint HTTPS e credenciais (nome de usuário/senha) que possam ser usados para ingerir o arquivo de segmentação regularmente. Um endpoint HTTPS de exemplo terá a seguinte aparência:

```
https://<partnerdomain>/twitter/partner_targeting_%Y-%M-%D.tsv.gz
```

%Y - Código de formato para ano (YYYY)

%M - Código de formato para mês (MM)

%D - Código de formato para dia (DD)

Os dados transmitidos consistirão nos seguintes arquivos:

1. Arquivo de usuários para segmentação do parceiro
2. Arquivo de conversão para segmentação

Todos os arquivos estarão no formato TSV, em que os campos individuais de cada linha são separados entre si por um caractere de tabulação. Valores de campo válidos nunca conterão o caractere de tabulação.

**Intervalo de IPs permitidos do X:**

Segue o intervalo de IPs que podem ser autorizados a acessar o endpoint do parceiro.

- 199.16.156.0/22
- 199.59.148.0/22

**Arquivo de usuários para segmentação do parceiro:**

| **Número da coluna** | **Nome da coluna** | **Tipo da coluna** | **Descrição** |
| :--- | :--- | :--- | :--- |
| 1   | partner id | string | O “partner id” é o ID que o X fornece ao parceiro para identificar de forma exclusiva cada parceiro. |
| 2   | advertiser id | string | O “advertiser id” é o @handle do anunciante. |
| 3   | p\_user\_id | string | O “p\_user\_id” é o ID exclusivo usado pelo parceiro para identificar o usuário. |
| 3   | confidence score | integer | O “confidence score” é opcional. Recomendamos usar 0–100. Se o caso de uso for retargeting, então um confidence score de “100” indica um usuário que foi retargeted diretamente. Qualquer pontuação de 0–99 corresponderia ao nível de confiança do similar (look‑alike). |
| 4   | segment label | string | O “segment label” é opcional. Os parceiros podem usar “segment label” para especificar categorias de produto, por exemplo. Recomendamos usar esse “segment label”, pois ele é o nome legível por humanos para Públicos Personalizados na interface do ads.x.com. |

**Observações:**

Sempre que recebermos um novo arquivo de segmentação do parceiro, esperamos que ele contenha a lista completa de usuários que o parceiro recomenda segmentar, e não um incremento, salvo acordo em contrário. Definiremos com cada parceiro a frequência de entrega desse arquivo de segmentação. Se não recebermos um arquivo de segmentação do parceiro conforme esperado, usaremos a versão anterior, com um tempo de expiração predefinido.

<div id="audience-api-integration">
  ## Integração da API de Audiência
</div>

<div id="overview">
  ### Visão geral
</div>

A Audience API foi lançada como parte da [v4](/pt-BR/x-ads-api/introduction) da API de Anúncios do X e, com isso, traz diversas melhorias aos endpoints legados de Audiences. Este novo endpoint é sustentado por um novo backend de processamento de Audience e oferece várias melhorias em termos de estabilidade, robustez e confiabilidade. O objetivo deste guia é destacar as diferenças entre a Audience API e os processos legados de upload e gerenciamento de Audiences.

A documentação de referência pode ser encontrada na página de referência da [Audience API](/pt-BR/x-ads-api/audiences).

Nota: Todos os dados de usuários de Audience devem ser hashados com SHA-256 antes do upload. Mais detalhes, juntamente com os tipos de identificadores de usuário aceitos e a normalização de dados, podem ser encontrados na página de [user data](/pt-BR/x-ads-api/audiences).

Mudanças na funcionalidade de Audience

As seguintes mudanças em Públicos personalizados foram introduzidas a partir da v4, e quaisquer endpoints obsoletos deixarão de estar disponíveis assim que a v3 da API de Anúncios do X for descontinuada:

- Obsoleto: TON Upload:
  - GET accounts/:account\_id/custom\_audience\_changes
  - GET accounts/:account\_id/custom\_audience\_changes/:custom\_audience\_change\_id
  - POST accounts/:account\_id/custom\_audience\_changes
  - PUT accounts/:account\_id/custom\_audiences/global\_opt\_out
- Obsoleto: Real Time Audiences:
  - POST custom\_audience\_memberships
- Público personalizado:
  - O parâmetro `list_type` será removido da solicitação e da resposta em todos os endpoints de [Custom Audience](/pt-BR/x-ads-api/audiences). Esse parâmetro era usado anteriormente para identificar o tipo de identificador de usuário da Audience (por exemplo, e-mail, ID de usuário do X etc.); no entanto, as Audiences agora têm a capacidade de aceitar vários identificadores de usuário para a mesma Audience, tornando esse valor irrelevante.
- Geral:
  - A janela de lookback da Audience foi atualizada para considerar usuários ativos nos últimos 90 dias (antes, 30 dias)
  - O número mínimo de usuários correspondidos necessário para que uma audience seja segmentável foi reduzido para 100 usuários (antes, 500)

<Note>
  **Pré-requisitos**

  - Acesso à API de Anúncios do X
  - Para acessar o endpoint de Audience, você precisará ser adicionado a uma allowlist. Preencha este formulário e aceite o novo [X Ads Products and Services Agreement](/pt-BR/x-ads-api/introduction) se tiver sido inicialmente aceito antes de 2018-08-01
</Note>

Processo de upload de Audience

A tabela a seguir lista as principais diferenças entre os fluxos antigo e novo de criação de Audience, com mais detalhes disponíveis mais abaixo:

| Step in Process | Audience API | (Deprecated) TON Upload |
| :--- | :--- | :--- |
| Create a shell Audience | Can be created via the \[POST custom\_audience endpoint]/x-ads-api/audiences | Can be created via the \[POST custom\_audience endpoint]/x-ads-api/audiences |
| Add a new user | Use the `operation_type` `Update` with the [Audience endpoint](/pt-BR/x-ads-api/audiences) | Use the `operation` `ADD` with the [POST custom\_audience\_changes](/pt-BR/x-ads-api/audiences) endpoint |
| Remove a user | Use the `operation_type` `Delete` with the [Audience endpoint](/pt-BR/x-ads-api/audiences) | Use the `operation` `REMOVE` with the [POST custom\_audience\_changes](/pt-BR/x-ads-api/audiences) endpoint |
| Opting-Out Users | Use the `operation_type` `Delete` with the [Audience endpoint](/pt-BR/x-ads-api/audiences) and the corresponding `custom_audience_id`s that the user is a part of | Use the [Global opt-out endpoint](/pt-BR/x-ads-api/audiences) |

Nota: Qualquer audience sendo atualizada ou passando por opt-out via o caminho de TON Upload deve ter uma lista correspondente enviada pelo endpoint de [TON Upload](/pt-BR/x-ads-api/audiences) e associada a uma Audience usando o endpoint [custom\_audience\_changes](/pt-BR/x-ads-api/audiences).

Limitação de taxa

O endpoint da Audience API tem um limite de 1500/1min por conta. Não há limites para o número de usuários que podem ser enviados em um único payload. As únicas restrições para o payload são:

1. Número total de operações: 2.500 operações

2. Tamanho máximo do payload: 5.000.000 bytes

Gerenciamento de usuários da Audience

Para criar uma nova Audience, são necessárias as seguintes etapas

<div id="create-a-new-custom-audience">
  ### Criar um novo Público personalizado
</div>

Crie um novo “esqueleto” de Público personalizado usando o endpoint \[POST custom\_audience]/x-ads-api/audiences e obtenha o `id` correspondente do Público personalizado. Esta etapa é necessária ao criar um Público do zero. Se estiver atualizando um Público existente, avance para a próxima seção

<div id="add-users-to-an-audience">
  ### Adicionar usuários a um Público
</div>

Use [POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/users](/pt-BR/x-ads-api/audiences) com o `id` do Público personalizado e um payload de exemplo como este:

POST https://ads-api.x.com/11/accounts/18ce54d4x5t/custom\_audiences/1nmth/users

```
    # Todos os valores devem ser hashados; valores não hashados são usados neste exemplo apenas para fins ilustrativos
    [
      {
        "operation_type": "Update",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "abc@x.com"
              ],
              "handle": [
                "x",
                "adsapi"
              ]
            },
            {
              "email": [
                "edf@x.com"
              ],
              "twitter_id": [
                "121291606",
                "17874544"
              ]
            }
          ]
        }
      }
    ]
```

Para adicionar um usuário a um Público, use `operation_type` `Update`. A nova interface de Públicos permite enviar várias chaves de usuário para um único usuário. Cada objeto no array de objetos JSON corresponde a um único usuário. No payload de exemplo acima, a solicitação adicionará dois usuários a um Público: um com `email` e `handle` e outro com `email` e `twitter_id`. 

<div id="remove-users-from-an-audience">
  #### Remover usuários de um Público
</div>

Semelhante ao processo descrito para adicionar usuários, é possível removê-los de um público da seguinte forma:

POST https://ads-api.x.com/11/accounts/18ce54d4x5t/custom\_audiences/1nmth/users

```
    # Todos os valores devem estar com hash; valores sem hash são usados neste exemplo apenas para fins ilustrativos
    [
      {
        "operation_type": "Delete",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "abc@x.com"
              ],
              "twitter_id": [
                "783214",
                "1225933934"
              ]
            },
            {
              "email": [
                "edf@x.com"
              ],
              "twitter_id": [
                "121291606",
                "17874544"
              ]
            }
          ]
        }
      }
    ]
```

O `operation_type` deve ser definido como `Delete`, e os usuários serão correspondidos por quaisquer chaves que estavam presentes quando foram adicionados ao público. Por exemplo, se um usuário foi adicionado a um público usando `email` e `twitter_id`, então o mesmo usuário pode ser removido usando qualquer uma dessas chaves — isto é, `email`, `twitter_id` ou ambos.

Além disso, é possível adicionar e remover usuários de um público na mesma solicitação. O endpoint oferece suporte a múltiplos `operation_type` por solicitação.

<div id="opt-out-users">
  #### Usuários com opt‑out
</div>

Com a descontinuação do endpoint global de opt‑out, os parceiros devem executar `Delete` para quaisquer usuários que tenham optado por não participar de qualquer Público. Há algumas maneiras de fazer isso:

1. Acompanhar quais usuários fazem parte de quais Públicos e remover esses usuários individualmente de cada Público.
2. Remover o usuário de **todos** os Públicos associados a uma conta de Anúncios.

**Práticas recomendadas gerais**

- Recomendamos fortemente chamar este endpoint em lotes quase em tempo real para evitar filas com picos, que demoram mais para processar e, em geral, causam carga desnecessária em nosso sistema. Isso também garante que os usuários fiquem disponíveis para segmentação de campanhas mais rapidamente.
- Uma chamada bem-sucedida à API retornará `success_count` e `total_count`, correspondentes ao número de objetos `user` recebidos na solicitação.
- Este endpoint é atômico por natureza; ou seja, ou toda a solicitação é bem-sucedida ou, em caso de qualquer erro, toda a solicitação falhará. Em caso de resposta de erro, recomenda-se que os consumidores da API corrijam o problema e retomem a solicitação com todo o payload. 
- Em caso de falha, recomenda-se que os parceiros usem uma abordagem de [exponential backoff](https://en.wikipedia.org/wiki/Exponential_backoff) com novas tentativas. Por exemplo, tentar novamente imediatamente após a primeira falha, tentar novamente após 1 minuto após a segunda falha e tentar novamente após 5 minutos após a terceira falha consecutiva, e assim por diante.

<div id="api-reference">
  ## Referência da API
</div>

<div id="keyword-insights">
  ### Insights de palavras-chave
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Executar no Postman
</Button>

<div id="get-insightskeywordssearch">
  #### GET insights/keywords/search[](#get-insights-keywords-search "Permalink to this headline")
</div>

Dado um grupo de palavras-chave, obtenha o volume de Tweets associado e um conjunto de 30 palavras-chave relacionadas. O volume de Tweets corresponde apenas às palavras-chave de entrada, não às relacionadas.

É permitido um intervalo máximo de tempo (`end_time` - `start_time`) de 7 dias.

Observe que os resultados são limitados a um único país (geo).

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/insights/keywords/search`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| granularity  <br />_required_ | Especifica a granularidade dos dados retornados para o intervalo de tempo indicado por `start_time` e `end_time`. Por exemplo, quando definido como `HOUR`, será apresentado um ponto de dados para cada hora entre `start_time` e `end_time`. request.<br /><br />Type: enum<br /><br />Possible values: `DAY`, `HOUR` |
| keywords  <br />_required_ | Uma string de palavras-chave separadas por vírgula para restringir a busca. Todas as palavras-chave são combinadas com OR entre si.<br /><br />**Note**: Um máximo de 10 palavras-chave (combinação de `keywords` e `negative_keywords`) pode ser utilizado.<br /><br />Type: string<br /><br />Example: `developers` |
| start\_time  <br />_required_ | Limita os dados recuperados ao período entre `start_time` e `end_time`. Expresso em [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).<br /><br />Type: string<br /><br />Example: `2017-07-10T00:00:00Z` |
| end\_time  <br />_optional_ | Limita os dados recuperados ao período entre `start_time` e `end_time`. Expresso em [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).<br /><br />**Note**: O padrão é o horário atual.<br /><br />Type: string<br /><br />Example: `2017-07-11T00:00:00Z` |
| location  <br />_optional_ | Um valor de segmentação obtido pelo endpoint [GET targeting\_criteria/locations](/pt-BR/x-ads-api/campaign-management#get-targeting-criteria-locations) para restringir os resultados conforme a localização do usuário da conta. No momento, apenas locais em nível de país são suportados.<br /><br />Type: string<br /><br />Example: `0ce8b9a7b2742f7e` |
| negative\_keywords  <br />_optional_ | Uma string de palavras-chave separadas por vírgula para excluir. Todas as palavras-chave negativas são combinadas com OR entre si.<br /><br />**Note**: Um máximo de 10 palavras-chave (combinação de `keywords` e `negative_keywords`) pode ser utilizado.<br /><br />Type: string<br /><br />Example: `rain` |

**Example Request[](#example-request "Permalink to this headline")**

```json
GET https://ads-api.x.com/12/insights/keywords/search?end_time=2018-02-02&granularity=DAY&keywords=developers&start_time=2018-02-01
```

**Example Response[](#example-response "Permalink to this headline")**\*

```
    {
      "request": {
        "params": {
          "start_time": "2018-02-01T00:00:00Z",
          "end_time": "2018-02-02T00:00:00Z",
          "granularity": "DAY",
          "keywords": [
            "developers"
          ]
        }
      },
      "data": {
        "related_keywords": [
          "dev",
          "developer",
          "coders",
          "mysql",
          "devs",
          "#technology",
          "#developers",
          "security",
          "programmers",
          "#tech",
          "javascript",
          "#iot",
          "#bigdata",
          "cloud",
          "devops",
          "php",
          "developer",
          "programmer",
          "engineer",
          "big data",
          "agile",
          "app",
          "programming",
          "ios",
          "maker",
          "startups",
          "developer's",
          "java",
          "#devops",
          "startup"
        ],
        "tweet_volume": [
          15707
        ]
      }
    }
```

<div id="tailored-audience-permissions">
  ### Permissões de Público Personalizado
</div>

<Button href="https://app.getpostman.com/run-collection/369a02c0adc626ff6a06#?env%5BTwitter%20Ads%20API%5D=W3sia2V5IjoiYWNjb3VudF9pZCIsInZhbHVlIjoieW91cl9hZHNfYWNjb3VudF9pZCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidmVyc2lvbiIsInZhbHVlIjoiNSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfa2V5IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX2tleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfc2VjcmV0IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX3NlY3JldCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiYWNjZXNzX3Rva2VuIiwidmFsdWUiOiJ5b3VyX2FjY2Vzc190b2tlbiIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidG9rZW5fc2VjcmV0IiwidmFsdWUiOiJ5b3VyX3Rva2VuX3NlY3JldCIsImVuYWJsZWQiOnRydWV9XQ==">
  Executar no Postman
</Button>

#### GET accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions[](#get-accounts-account-id-tailored-audiences-tailored-audience-id-permissions "Permalink to this headline")

Recupere detalhes de algumas ou todas as permissões associadas ao público personalizado especificado.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios do X, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54d4x5t` |
| tailored\_audience\_id  <br />_required_ | A referência ao público personalizado com o qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `1nmth` |
| count  <br />_optional_ | Especifica quantos registros tentar recuperar por solicitação.<br /><br />Tipo: int<br /><br />Padrão: `200`  <br />Mín., máx.: `1`, `1000` |
| cursor  <br />_optional_ | Especifica um cursor para obter a próxima página de resultados. Consulte [Paginação](/pt-BR/x-ads-api/introduction) para mais informações.<br /><br />Tipo: string<br /><br />Exemplo: `8x7v00oow` |
| granted\_account\_ids  <br />_optional_ | Restrinja a resposta apenas às contas desejadas especificando uma lista de identificadores separados por vírgulas. Até 200 IDs podem ser fornecidos.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54aymz3` |
| sort\_by  <br />_optional_ | Ordena por um atributo compatível, em ordem ascendente ou descendente. Consulte [Ordenação](/pt-BR/x-ads-api/introduction) para mais informações.<br /><br />Tipo: string<br /><br />Exemplo: `created_at-asc` |
| tailored\_audience\_permission\_ids  <br />_optional_ | Restrinja a resposta apenas às permissões de público personalizado desejadas especificando uma lista de identificadores separados por vírgulas. Até 200 IDs podem ser fornecidos.<br /><br />Tipo: string<br /><br />Exemplo: `ri` |
| with\_total\_count  <br />_optional_ | Inclui o atributo de resposta `total_count`.<br /><br />**Observação**: Este parâmetro e `cursor` são mutuamente exclusivos.<br /><br />**Observação**: Solicitações que incluem `total_count` terão limites de taxa menores, atualmente definidos em 200 por 15 minutos.<br /><br />Tipo: boolean<br /><br />Padrão: `false`  <br />Valores possíveis: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/1nmth/permissions`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "tailored_audience_id": "1nmth"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "tailored_audience_id": "1nmth",
          "permission_level": "READ_ONLY",
          "id": "ri",
          "created_at": "2017-06-08T23:17:59Z",
          "granted_account_id": "18ce54aymz3",
          "updated_at": "2017-06-08T23:17:59Z",
          "deleted": false
        }
      ]
    }

```

#### POST accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions[](#post-accounts-account-id-tailored-audiences-tailored-audience-id-permissions "Permalink to this headline")

Cria um novo objeto de permissão que permite compartilhar a audiência especificada com uma determinada conta.

**Observação**: Criar ou modificar permissões de uma audiência personalizada requer que a audiência seja de propriedade da conta que está tentando modificar as permissões. Você pode verificar a propriedade de uma audiência personalizada consultando o atributo de resposta `is_owner` na resposta de uma determinada audiência.

**Observação**: Audiências só podem ser compartilhadas entre contas de anúncios pertencentes ao mesmo negócio ou se a conta de anúncios que possui a audiência tiver o recurso de conta `SHARE_AUDIENCE_OUTSIDE_BUSINESS`.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Nome | Descrição |
| :--- | :--- |
| account\_id  <br />_obrigatório_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54d4x5t` |
| granted\_account\_id  <br />_obrigatório_ | A conta à qual você deseja conceder permissões sobre a audiência personalizada.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54aymz3` |
| permission\_level  <br />_obrigatório_ | O tipo de acesso à audiência personalizada que o `granted_account_id` deve ter.<br /><br />Tipo: enum<br /><br />Valores possíveis: `READ_ONLY`, `READ_WRITE` |
| tailored\_audience\_id  <br />_obrigatório_ | Uma referência à audiência personalizada com a qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/2906h/permissions?granted_account_id=18ce54aymz3&permission_level=READ_ONLY`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "granted_account_id": "18ce54aymz3",
          "permission_level": "READ_ONLY",
          "tailored_audience_id": "2906h"
        }
      },
      "data": {
        "tailored_audience_id": "2906h",
        "permission_level": "READ_ONLY",
        "id": "14m",
        "created_at": "2017-09-12T23:49:34Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-09-12T23:49:34Z",
        "deleted": false
      }
    }
```

#### DELETE accounts/:account\_id/tailored\_audiences/:tailored\_audience\_id/permissions/:tailored\_audience\_permission\_id[](#delete-accounts-account-id-tailored-audiences-tailored-audience-id-permissions-tailored-audience-permission-id "Permalink to this headline")

Revoga a permissão de compartilhamento do Público personalizado especificado.

**Observação**: Criar ou modificar permissões para um público personalizado exige que o público seja de propriedade da conta que está tentando modificar as permissões. Você pode verificar a propriedade de um público personalizado consultando o atributo de resposta `is_owner` na resposta para um determinado público.

Quando revogada, garantimos que a conta concedida (`granted_account_id`) não poderá segmentar o público em campanhas futuras. Campanhas existentes continuarão sendo executadas com os públicos compartilhados; as campanhas não param e o público não é removido da campanha. Não é possível copiar essa campanha após a revogação da permissão de compartilhamento do público.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/5/accounts/:account_id/tailored_audiences/:tailored_audience_id/permissions/:tailored_audience_permission_id`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios do X, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| tailored\_audience\_id  <br />_required_ | Uma referência ao público personalizado com o qual você está operando na solicitação.<br /><br />Type: string<br /><br />Example: `1nmth` |
| tailored\_audience\_permission\_id  <br />_required_ | Uma referência à permissão do público personalizado com a qual você está operando na solicitação.<br /><br />Type: string<br /><br />Example: `ri` |

**Example Request[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/5/accounts/18ce54d4x5t/tailored_audiences/1nmth/permissions/ri`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "tailored_audience_permission_id": "ri",
          "tailored_audience_id": "1nmth"
        }
      },
      "data": {
        "tailored_audience_id": "1nmth",
        "permission_level": "READ_ONLY",
        "id": "ri",
        "created_at": "2017-06-08T23:17:59Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-08-30T18:29:35Z",
        "deleted": true
      }
    }
```

<div id="targeted-audiences">
  ### Públicos-alvo
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Executar no Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id/targeted[](#get-accounts-account-id-custom-audiences-custom-audience-id-targeted "Link permanente para este título")

Recupere uma lista de itens de linha e campanhas ativos, ou de todos os itens de linha e campanhas, que segmentam um determinado `custom_audience_id`

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Uma referência ao público personalizado com o qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `2906h` |
| with\_active  <br />_optional_ | Quando `false`, inclui itens de linha com `servable=false`.<br /><br />Tipo: boolean<br /><br />Padrão: `true`  <br />Valores possíveis: `true`, `false` |
| cursor  <br />_optional_ | Especifica um cursor para obter a próxima página de resultados. Consulte [Paginação](/pt-BR/x-ads-api/introduction) para mais informações.  <br />  <br />Tipo: string  <br />  <br />Exemplo: `8x7v00oow` |

**Example Request[](#example-request "Link permanente para este título")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h/targeted`

**Example Response[](#example-response "Link permanente para este título")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "2906h",
        }
      },
      "next_cursor": null,
      "data": [
        {
          "campaign_id": "59hod",
          "campaign_name": "test-campaign",
          "line_items": [
            {
              "id": "5gzog",
              "name": "test-line-item",
              "servable": true
            }
          ]
        },
        {
          "campaign_id": "arja7",
          "campaign_name": "Untitled campaign",
          "line_items": [
            {
              "id": "bjw1q",
              "name": null,
              "servable": true
            }
          ]
        }
      ]
    }
```

<div id="custom-audiences-users">
  ### Usuários de Públicos Personalizados
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Executar no Postman
</Button>

#### POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/users[](#post-accounts-account-id-custom-audiences-custom-audience-id-users "Link permanente para este título")

Este endpoint permite que parceiros adicionem, atualizem e removam usuários de um determinado `custom_audience_id`. O endpoint também aceita vários tipos de identificadores por usuário.

Todos os dados fornecidos no campo `users` da solicitação, **exceto** `partner_user_id`, devem ser convertidos em hash usando `SHA256` e [normalizados](/pt-BR/x-ads-api/audiences#twitter-user-id-normalization).

**Solicitações em lote**

- O tamanho máximo atual do lote é `2500` **neste endpoint**. O tamanho do lote é determinado pelo número de operações (`Update`/`Delete`) por solicitação. Por exemplo, mais de 2500 objetos de operação (`{"operation_type": "Update/Delete", [..] }`) em um array resultarão em erro.
- O tamanho máximo do corpo da solicitação POST que este endpoint aceita é `5,000,000` bytes.
- Os limites de taxa para este endpoint são 1500 por janela de 1 minuto.
- Todos os parâmetros são enviados no corpo da solicitação e é necessário `Content-Type: application/json`.
- Solicitações em lote falham ou são bem-sucedidas em conjunto, como um grupo, e todas as respostas da API — tanto de erro quanto de sucesso — preservam a ordem dos itens da solicitação inicial.

**Respostas em lote**

A resposta retornada pela API de Anúncios contém dois campos: `success_count` e `total_count`. Esses valores devem sempre ser iguais e representam a contagem de registros na solicitação que foram processados pelo backend. Uma situação em que o número de registros enviados no corpo da solicitação **não** seja igual a `success_count` e `total_count` deve ser tratada como uma condição de erro, exigindo nova tentativa.

**Erros em lote**

- Erros no nível da solicitação (ex.: tamanho máximo do lote excedido) são exibidos na resposta no objeto `errors`.
- Erros no nível do item (ex.: parâmetros obrigatórios ausentes) são exibidos na resposta no objeto `operation_errors`.
- O índice do erro em `operation_errors` refere-se ao índice do item de entrada, com a mensagem de erro correspondente.

<div id="resource-url">
  #### URL do recurso[](#resource-url "Link permanente para este título")
</div>

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/users`

<div id="parameters">
  #### Parâmetros[](#parameters "Permalink to this headline")
</div>

| Nome | Descrição |
| :--- | :--- |
| operation\_type  <br />_obrigatório_ | O tipo de operação por grupo de `users` que está sendo executado.<br /><br />Tipo: enum<br /><br />Valores possíveis: `Update`, `Delete` |
| params  <br />_obrigatório_ | Um objeto JSON contendo o array `users` e os timestamps `effective_at` e `expires_at`.<br /><br />Tipo: JSON |
| users  <br />_obrigatório_ | Um array de objetos JSON contendo todos os parâmetros de um usuário individual.<br /><br />Tipo: JSON |
| effective\_at  <br />_opcional_ | O horário em UTC no qual as associações do público personalizado devem entrar em vigor. Expresso em [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). O padrão é a data e a hora atuais.<br /><br />Tipo: string<br /><br />Exemplo: `2017-07-05T07:00:00Z` |
| expires\_at  <br />_opcional_ | O horário em UTC no qual as associações do público personalizado devem expirar. O horário especificado deve ser posterior ao valor de `effective_at`. Expresso em [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). O padrão é 13 meses a partir do timestamp da solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `2017-07-05T07:00:00Z` |

Dada a abordagem de múltiplas chaves para o objeto `users`, cada elemento desse objeto é documentado abaixo:

| Nome | Descrição |
| :--- | :--- |
| email  <br />_opcional_ | Endereço(s) de e-mail do usuário.<br /><br />Tipo: Array\[String] |
| device\_id  <br />_opcional_ | IDFA/AdID/Android ID<br /><br />Tipo: Array\[String] |
| handle  <br />_opcional_ | O(s) @handle do usuário<br /><br />Tipo: Array\[String] |
| twitter\_id  <br />_opcional_ | O ID do X do usuário<br /><br />Tipo: Array\[String] |
| phone\_number  <br />_opcional_ | Número(s) de telefone do usuário<br /><br />Tipo: Array\[String] |
| partner\_user\_id  <br />_opcional_ | O ID do usuário no sistema do parceiro.<br /><br />Tipo: Array\[String] |

<div id="example-request">
  #### Exemplo de requisição[](#example-request "Permalink to this headline")
</div>

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/users`

```
    [
      {
        "operation_type": "Update",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "email": [
                "4798b8bbdcf6f2a52e527f46a3d7a7c9aefb541afda03af79c74809ecc6376f3"
              ],
              "handle": [
                "7352f353c460e74c7ae226952d04f8aa307b12329c5512ec8cb6f1a0f8f9b2cb",
                "49e0be2aeccfb51a8dee4c945c8a70a9ac500cf6f5cb08112575f74db9b1470d"
              ]
            },
            {
              "email": [
                "5bf13d5ad4200407c5bc8b9bb578e425d05ef936fd488e3799a9d0806669223c"
              ],
              "twitter_id": [
                "34d56c7159a7eea941f359653029410f813f65a1d2d13ecc5ccbdd5a8cb755cf",
                "00e7b76c9739dec57f4c4a20ec021a20ffcf26bd00f519b17ea00f0ed6048f85"
              ]
            }
          ]
        }
      },
      {
        "operation_type": "Delete",
        "params": {
          "effective_at": "2018-05-15T00:00:00Z",
          "expires_at": "2019-01-01T07:00:00Z",
          "users": [
            {
              "device_id": [
                "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"
              ],
              "email": [
                "4798b8bbdcf6f2a52e527f46a3d7a7c9aefb541afda03af79c74809ecc6376f3"
              ],
              "handle": [
                "461222f5dd690a20651c3d19848015cb0369db3f8e937571ffb775de70750847"
              ],
              "twitter_id": [
                "c623c7e163984493b46c547088542e95d0aaa529bc52bbecce3ff91eb6b7843b"
              ]
            },
            {
              "email": [
                "5bf13d5ad4200407c5bc8b9bb578e425d05ef936fd488e3799a9d0806669223c"
              ],
              "twitter_id": [
                "858cdc7f313f84a3f3c48e9a6323307c1ef1bb7439b8e3623e140454b0fd8fa5",
                "bb074e154657b91d99bd1bb3757409149670e8ae7a0fe9136fae29a26a7881c8"
              ]
            }
          ]
        }
      }
    ]
```

<div id="example-response">
  #### Exemplo de resposta[](#example-response "Link permanente para este título")
</div>

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "1nmth"
        }
      },
      "data": {
        "success_count": 4,
        "total_count": 4
      }
    }
```

<div id="tailored-audience-permissions">
  ### Permissões de Público Personalizado
</div>

<Button href="https://app.getpostman.com/run-collection/369a02c0adc626ff6a06#?env%5BTwitter%20Ads%20API%5D=W3sia2V5IjoiYWNjb3VudF9pZCIsInZhbHVlIjoieW91cl9hZHNfYWNjb3VudF9pZCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidmVyc2lvbiIsInZhbHVlIjoiNSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfa2V5IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX2tleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiY29uc3VtZXJfc2VjcmV0IiwidmFsdWUiOiJ5b3VyX2NvbnN1bWVyX3NlY3JldCIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiYWNjZXNzX3Rva2VuIiwidmFsdWUiOiJ5b3VyX2FjY2Vzc190b2tlbiIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoidG9rZW5fc2VjcmV0IiwidmFsdWUiOiJ5b3VyX3Rva2VuX3NlY3JldCIsImVuYWJsZWQiOnRydWV9XQ==">
  Executar no Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions[](#get-accounts-account-id-custom-audiences-custom-audience-id-permissions "Permalink to this headline")

Recupera detalhes de algumas ou todas as permissões associadas ao público personalizado especificado.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios do X, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Uma referência ao público personalizado com o qual você está trabalhando na solicitação.<br /><br />Type: string<br /><br />Example: `1nmth` |
| count  <br />_optional_ | Especifica quantos registros tentar recuperar por solicitação.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Especifica um cursor para obter a próxima página de resultados. Consulte [Pagination](/pt-BR/x-ads-api/introduction) para mais informações.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| granted\_account\_ids  <br />_optional_ | Restrinja a resposta apenas às contas desejadas especificando uma lista de IDs separados por vírgula. Podem ser fornecidos até 200 IDs.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| sort\_by  <br />_optional_ | Ordena por um atributo compatível em ordem ascendente ou descendente. Consulte [Sorting](/pt-BR/x-ads-api/fundamentals/sorting) para mais informações.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| custom\_audience\_permission\_ids  <br />_optional_ | Restrinja a resposta apenas às permissões do público personalizado desejadas especificando uma lista de IDs separados por vírgula. Podem ser fornecidos até 200 IDs.<br /><br />Type: string<br /><br />Example: `ri` |
| with\_total\_count  <br />_optional_ | Inclui o atributo de resposta `total_count`.<br /><br />**Observação**: Este parâmetro e `cursor` são mutuamente exclusivos.<br /><br />**Observação**: Solicitações que incluem `total_count` terão limites de taxa menores, atualmente definidos em 200 por 15 minutos.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/permissions`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_id": "1nmth"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "custom_audience_id": "1nmth",
          "permission_level": "READ_ONLY",
          "id": "ri",
          "created_at": "2017-06-08T23:17:59Z",
          "granted_account_id": "18ce54aymz3",
          "updated_at": "2017-06-08T23:17:59Z",
          "deleted": false
        }
      ]
    }
```

#### POST accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions[](#post-accounts-account-id-custom-audiences-custom-audience-id-permissions "Permalink to this headline")

Cria um novo objeto de permissão que permite compartilhar o público especificado com uma determinada conta.

**Observação**: Criar ou modificar permissões para um público personalizado requer que o público seja de propriedade da conta que está tentando modificar as permissões. Você pode verificar a titularidade de um público personalizado consultando o atributo `is_owner` na resposta de um determinado público.

**Observação**: Públicos só podem ser compartilhados entre contas de anúncios do mesmo negócio ou se a conta de anúncios proprietária do público tiver o recurso de conta `SHARE_AUDIENCE_OUTSIDE_BUSINESS`.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e, em geral, é um parâmetro obrigatório para todas as solicitações da API de Anúncios, com exceção de [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| granted\_account\_id  <br />_required_ | A conta à qual você deseja conceder permissões do público personalizado.<br /><br />Type: string<br /><br />Example: `18ce54aymz3` |
| permission\_level  <br />_required_ | O tipo de acesso ao público personalizado que o `granted_account_id` deve ter.<br /><br />Type: enum<br /><br />Possible values: `READ_ONLY`, `READ_WRITE` |
| custom\_audience\_id  <br />_required_ | Referência ao público personalizado com o qual você está operando na solicitação.<br /><br />Type: string<br /><br />Example: `2906h` |

**Example Request[](#example-request "Permalink to this headline")**

```
POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h/permissions?granted_account_id=18ce54aymz3&permission_level=READ_ONLY
```

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "granted_account_id": "18ce54aymz3",
          "permission_level": "READ_ONLY",
          "custom_audience_id": "2906h"
        }
      },
      "data": {
        "custom_audience_id": "2906h",
        "permission_level": "READ_ONLY",
        "id": "14m",
        "created_at": "2017-09-12T23:49:34Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-09-12T23:49:34Z",
        "deleted": false
      }
    }
```

#### DELETE accounts/:account\_id/custom\_audiences/:custom\_audience\_id/permissions/:custom\_audience\_permission\_id[](#delete-accounts-account-id-custom-audiences-custom-audience-id-permissions-custom-audience-permission-id "Permalink to this headline")

Revoga a permissão de compartilhamento do Público personalizado especificado.

**Observação**: Criar ou modificar permissões para um público personalizado exige que o público pertença à conta que está tentando modificar as permissões. Você pode verificar a titularidade de um público personalizado consultando o atributo `is_owner` na resposta de um determinado público.

Quando revogada, garantimos que a conta contemplada (`granted_account_id`) não poderá segmentar o público em campanhas futuras. As campanhas existentes continuarão em execução com os públicos compartilhados; as campanhas não param e o público não é removido da campanha. Não é possível copiar essa campanha após a revogação da permissão de compartilhamento do público.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id/permissions/:custom_audience_permission_id`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios do X, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | Uma referência ao público personalizado com o qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `1nmth` |
| custom\_audience\_permission\_id  <br />_required_ | Uma referência à permissão do público personalizado com a qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `ri` |

**Example Request[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/1nmth/permissions/ri`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "custom_audience_permission_id": "ri",
          "custom_audience_id": "1nmth"
        }
      },
      "data": {
        "custom_audience_id": "1nmth",
        "permission_level": "READ_ONLY",
        "id": "ri",
        "created_at": "2017-06-08T23:17:59Z",
        "granted_account_id": "18ce54aymz3",
        "updated_at": "2017-08-30T18:29:35Z",
        "deleted": true
      }
    }
```

<div id="custom-audiences">
  ### Públicos personalizados
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Executar no Postman
</Button>

#### GET accounts/:account\_id/custom\_audiences[](#get-accounts-account-id-custom-audiences "Permalink to this headline")

Recupere detalhes de alguns ou de todos os Públicos personalizados associados à conta atual.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da Advertiser API, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| count  <br />_optional_ | Especifica o número de registros a recuperar por solicitação.<br /><br />Type: int<br /><br />Default: `200`  <br />Min, Max: `1`, `1000` |
| cursor  <br />_optional_ | Especifica um cursor para obter a próxima página de resultados. Consulte [Pagination](/pt-BR/x-ads-api/introduction) para mais informações.<br /><br />Type: string<br /><br />Example: `8x7v00oow` |
| permission\_scope  <br />_optional_ | Permite filtrar a resposta para listas que você possui ou que foram compartilhadas com você. Por padrão, sem especificar este parâmetro, você verá apenas os públicos que possui.<br /><br />Type: enum<br /><br />Default: `OWNER`  <br />Possible values: `OWNER`, `SHARED` |
| q  <br />_optional_ | Uma consulta opcional para limitar o recurso por `name`.<br /><br />**Note**: Faz correspondência de prefixo sem diferenciar maiúsculas de minúsculas.<br /><br />Type: string<br /><br />Min, Max length: `1`, `255` |
| sort\_by  <br />_optional_ | Ordena por um atributo compatível em ordem crescente ou decrescente. Consulte [Sorting](/pt-BR/x-ads-api/fundamentals/sorting) para mais informações.<br /><br />Type: string<br /><br />Example: `created_at-asc` |
| custom\_audience\_ids  <br />_optional_ | Limite a resposta apenas aos Públicos personalizados desejados especificando uma lista de identificadores separados por vírgula. É possível fornecer até 200 IDs.<br /><br />Type: string<br /><br />Example: `1nmth` |
| with\_deleted  <br />_optional_ | Inclui resultados excluídos na solicitação.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |
| with\_total\_count  <br />_optional_ | Inclui o atributo de resposta `total_count`.<br /><br />**Note**: Este parâmetro e `cursor` são mutuamente exclusivos.<br /><br />**Note**: Solicitações que incluem `total_count` terão limites de taxa menores, atualmente definidos em 200 por 15 minutos.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences?custom_audience_ids=1nmth`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "custom_audience_ids": [
            "1nmth"
          ],
          "account_id": "18ce54d4x5t"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "targetable": true,
          "name": "twurl-using-subshell-for-file",
          "targetable_types": [
            "CRM",
            "EXCLUDED_CRM"
          ],
          "audience_type": "CRM",
          "description": null,
          "permission_level": "READ_WRITE",
          "owner_account_id": "18ce54d4x5t",
          "id": "1nmth",
          "reasons_not_targetable": [],
          "created_at": "2017-01-08T08:19:58Z",
          "updated_at": "2017-01-08T16:21:13Z",
          "partner_source": "OTHER",
          "deleted": false,
          "audience_size": 1470
        }
      ]
    }
```

#### GET accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#get-accounts-account-id-custom-audiences-custom-audience-id "Link permanente para este título")

Recupere Públicos personalizados específicos associados à conta atual.

**Resource URL[](#resource-url "Link permanente para este título")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parameters[](#parameters "Link permanente para este título")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da Advertiser API, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| custom\_audience\_id  <br />_required_ | A referência ao Público personalizado com o qual você está operando na solicitação.<br /><br />Type: string<br /><br />Example: `2906h` |
| with\_deleted  <br />_optional_ | Inclua resultados excluídos na sua solicitação.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Link permanente para este título")**

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h`

**Example Response[](#example-response "Link permanente para este título")**

```
    {
      "request": {
        "params": {
          "custom_audience_id": "2906h",
          "account_id": "18ce54d4x5t"
        }
      },
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": 140321
      }
    }
```

#### POST accounts/:account\_id/custom\_audiences[](#post-accounts-account-id-custom-audiences "Permalink to this headline")

Crie um novo Público personalizado de placeholder associado à conta atual.

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios do X, com exceção de [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| name  <br />_required_ | O nome de exibição desse público. É necessário usar um valor de nome exclusivo; caso contrário, ocorrerá um erro.<br /><br />Type: string<br /><br />Example: `ads api users` |
| description  <br />_optional_ | Uma descrição para esse público.<br /><br />Type: string<br /><br />Example: `Collection of all users of the Ads API` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences?name=developers`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "name": "developers"
        }
      }
    }
```

#### PUT accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#put-accounts-account-id-custom-audiences-custom-audience-id "Link permanente para este título")

Atualiza o Público personalizado específico associado à conta atual.

**URL do recurso[](#resource-url "Link permanente para este título")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parâmetros[](#parameters "Link permanente para este título")**

| Nome | Descrição |
| :--- | :--- |
| account\_id  <br />_obrigatório_ | Identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anunciantes, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54d4x5t` |
| custom\_audience\_id  <br />_obrigatório_ | Referência ao Público personalizado com o qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `2906h` |
| name  <br />_opcional_ | Nome de exibição deste público. É necessário usar um valor de nome exclusivo; caso contrário, ocorrerá um erro.<br /><br />Tipo: string<br /><br />Exemplo: `ads api users` |
| description  <br />_opcional_ | Descrição deste público.<br /><br />Tipo: string<br /><br />Exemplo: `Coleção de todos os usuários da API de Anúncios` |

**Exemplo de solicitação[](#example-request "Link permanente para este título")**

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h?name=developers_changed`

**Exemplo de resposta[](#example-response "Link permanente para este título")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers_changed",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "is_owner": true,
        "id": "2906h",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-22T23:34:26Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "name": "developers_changed"
        }
      }
    }
```

#### POST batch/accounts/:account\_id/custom\_audiences[](#post-batch-accounts-account-id-custom-audiences "Link permanente para este título")

Permite a criação em lote de Públicos personalizados. Consulte a página [Visão geral de Públicos personalizados](/pt-BR/x-ads-api/audiences) para obter informações sobre públicos.

**Observação:** Este endpoint de lote está atualmente em **beta fechado** e disponível para anunciantes selecionados. Durante este período de beta, somente Públicos flexíveis baseados em Públicos personalizados para mobile podem ser criados.

**Requisições em lote**

- O tamanho máximo atual do lote é 10.
- Todos os parâmetros são enviados no corpo da requisição e é necessário um `Content-Type` de `application/json`.
- As requisições em lote falham ou têm sucesso em conjunto, como um grupo, e todas as respostas da API, tanto de erro quanto de sucesso, preservam a ordem dos itens da requisição inicial.

**Respostas em lote**

As respostas da API em lote retornam uma coleção ordenada de itens. Caso contrário, são idênticas em estrutura aos seus endpoints correspondentes de item único.

**Erros em lote**

- Erros no nível da requisição (por exemplo, tamanho máximo do lote excedido) são exibidos na resposta no objeto `errors`.
- Erros no nível do item (por exemplo, parâmetro obrigatório ausente) são exibidos na resposta no objeto `operation_errors`.

**Públicos flexíveis**

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Executar no Postman
</Button>

- Públicos flexíveis são imutáveis após a criação.
- Públicos personalizados são enviados em uma estrutura em árvore com combinações de lógica booleana para criar Públicos flexíveis.
- No máximo 10 nós folha de Públicos personalizados podem ser usados para criar um Público flexível.

**URL do recurso[](#resource-url "Link permanente para este título")**

`https://ads-api.x.com/12/batch/accounts/:account_id/custom_audiences`

**Parâmetros[](#parameters "Link permanente para este título")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| audience\_type  <br />_required_ | O tipo de público a ser criado.<br /><br />Type: enum<br /><br />Possible values: `FLEXIBLE`, `MOBILE_AUDIENCE` |
| child\_segments  <br />_required_ | Um array contendo objetos que definem o subconjunto dos membros de um Público personalizado que você deseja segmentar. Cada objeto deve conter um `custom_audience_id`, `frequency`, `frequency_comparator`, `lookback_window`, `negate` e, em alguns casos, `child_segments` adicionais.<br /><br />Type: array |
| name  <br />_required_ | O nome de exibição do público. É necessário usar um valor de nome exclusivo. Caso contrário, ocorrerá um erro.<br /><br />Type: string<br /><br />Example: `my_flexible_audience_name` |
| operation\_type  <br />_required_ | O tipo de operação aplicado por item.<br /><br />Type: enum<br /><br />Possible values: `Create`, `Update`, `Delete` |
| boolean\_operator  <br />_sometimes required_ | A relação lógica entre os segmentos filhos no objeto pai (contêiner). Obrigatório se o child\_segments do objeto pai não estiver vazio.<br /><br />Type: enum<br /><br />Possible values: `AND`, `OR` |
| lookback\_window  <br />_sometimes required_ | Um valor inteiro que especifica o intervalo, em dias, no qual o usuário realizou a ação específica e se qualificou para o público personalizado em questão.<br /><br />Type: int<br /><br />Possible values: `1`, `7`, `14`, `30` |
| segments  <br />_sometimes required_ | Um objeto contendo um `boolean_operator` e `child_segments` que definem o subconjunto dos membros de um Público personalizado que você deseja segmentar.<br /><br />Type: object |
| custom\_audience\_id  <br />_sometimes required_ | O ID do público personalizado a ser usado como segmento filho.<br /><br />Type: string<br /><br />Example: `tyfo` |
| frequency  <br />_optional_ | Um valor inteiro que especifica a frequência, dentro da janela de retrospectiva, com que o usuário realizou a ação específica e se qualificou para o público personalizado em questão.<br /><br />Type: int<br /><br />Default value: `1` |
| frequency\_comparator  <br />_optional_ | O comparador para a `frequency` enviada na solicitação.<br /><br />**Observação**: Nos valores abaixo, `GTE` significa maior ou igual, `LT` menor que, e assim por diante.<br /><br />Type: string<br /><br />Possible values: `NUM_GTE`, `NUM_GT`, `NUM_EQ`, `NUM_LTE`, `NUM_LT` Default value: `NUM_GTE` |
| negate  <br />_optional_ | Nega o segmento e, portanto, ele é excluído da combinação.<br /><br />Type: boolean<br /><br />Default value: `true`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/batch/accounts/18ce54d4x5t/custom_audiences`

```
    [
      {
        "operation_type":"Create",
        "params":{
          "name":"my_flexible_audience_name",
          "audience_type":"FLEXIBLE",
          "segments":{
            "boolean_operator":"AND",
            "child_segments":[
              {
                "custom_audience_id":"TYIF",
                "frequency":1,
                "frequency_comparator":"NUM_GT",
                "lookback_window":30,
                "negate":true,
                "child_segments":[

                ]
              },
              {
                "boolean_operator":"OR",
                "child_segments":[
                  {
                    "custom_audience_id":"TXR1",
                    "lookback_window":30,
                    "child_segments":[

                    ]
                  },
                  {
                    "custom_audience_id":"TYFO",
                    "frequency":1,
                    "frequency_comparator":"NUM_GT",
                    "lookback_window":30,
                    "negate":true,
                    "child_segments":[

                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
```

**Exemplo de resposta[](#example-response "Permalink to this headline")**

```
    {
      "data": {
        "targetable": false,
        "name": "my_flexible_audience_name",
        "targetable_types": [
          "FLEXIBLE",
          "EXCLUDED_FLEXIBLE"
        ],
        "audience_type": "FLEXIBLE",
        "id": "13ld7",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "metadata": [
          {
            "custom_audience_id": "13ld7",
            "account_id": "qsx3w2",
            "name": "my_flexible_audience_name",
            "audience_source": "FLEXIBLE_AUDIENCE",
            "upload_status": "UPLOADED",
            "segments": {
              "boolean_operator": "AND",
              "frequency": 1,
              "frequency_comparator": "NUM_GTE",
              "negate": false,
              "child_segments": [
                {
                  "custom_audience_id": "tyif",
                  "lookback_window": 30,
                  "frequency": 1,
                  "frequency_comparator": "NUM_GT",
                  "negate": true,
                  "child_segments": [

                  ]
                },
                {
                  "boolean_operator": "OR",
                  "frequency": 1,
                  "frequency_comparator": "NUM_GTE",
                  "negate": false,
                  "child_segments": [
                    {
                      "custom_audience_id": "txr1",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GTE",
                      "negate": false,
                      "child_segments": [

                      ]
                    },
                    {
                      "custom_audience_id": "tyfo",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GT",
                      "negate": true,
                      "child_segments": [

                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "created_at": "2015-11-10T21:26:43Z",
        "updated_at": "2015-11-11T01:11:47Z",
        "partner_source": "OTHER",
        "deleted": false,
        "audience_size": null
      },
      "request": [
        {
          "params": {
            "name": "my_flexible_audience_name",
            "audience_type": "FLEXIBLE",
            "segments": {
              "boolean_operator": "AND",
              "child_segments": [
                {
                  "custom_audience_id": "TYIF",
                  "lookback_window": 30,
                  "frequency": 1,
                  "frequency_comparator": "NUM_GT",
                  "negate": true,
                  "child_segments": [

                  ]
                },
                {
                  "boolean_operator": "OR",
                  "child_segments": [
                    {
                      "custom_audience_id": "TXR1",
                      "lookback_window": 30,
                      "child_segments": [

                      ]
                    },
                    {
                      "custom_audience_id": "TYFO",
                      "lookback_window": 30,
                      "frequency": 1,
                      "frequency_comparator": "NUM_GT",
                      "negate": true,
                      "child_segments": [

                      ]
                    }
                  ]
                }
              ]
            },
            "account_id": "qsx3w2"
          },
          "operation_type": "Create"
        }
      ]
    }
```

#### DELETE accounts/:account\_id/custom\_audiences/:custom\_audience\_id[](#delete-accounts-account-id-custom-audiences-custom-audience-id "Link permanente para este título")

Exclui o Público personalizado especificado pertencente à conta atual.

**URL do recurso[](#resource-url "Link permanente para este título")**

`https://ads-api.x.com/12/accounts/:account_id/custom_audiences/:custom_audience_id`

**Parâmetros[](#parameters "Link permanente para este título")**

| Nome | Descrição |
| :--- | :--- |
| account\_id  <br />_obrigatório_ | Identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Tipo: string<br /><br />Exemplo: `18ce54d4x5t` |
| custom\_audience\_id  <br />_obrigatório_ | Referência ao público personalizado com o qual você está operando na solicitação.<br /><br />Tipo: string<br /><br />Exemplo: `2906h` |

**Exemplo de solicitação[](#example-request "Link permanente para este título")**

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/custom_audiences/2906h`

**Exemplo de resposta[](#example-response "Link permanente para este título")**

```
    {
      "data": {
        "targetable": false,
        "name": "developers",
        "targetable_types": [
          "CRM",
          "EXCLUDED_CRM"
        ],
        "audience_type": "CRM",
        "description": null,
        "permission_level": "READ_WRITE",
        "owner_account_id": "18ce54d4x5t",
        "id": "2906h",
        "reasons_not_targetable": [
          "TOO_SMALL"
        ],
        "created_at": "2017-08-22T23:34:26Z",
        "updated_at": "2017-08-30T18:09:00Z",
        "partner_source": "OTHER",
        "deleted": true,
        "audience_size": null
      },
      "request": {
        "params": {
          "custom_audience_id": "2906h",
          "account_id": "18ce54d4x5t"
        }
      }
    }
```

<div id="do-not-reach-lists">
  ### Listas de Não Alcance
</div>

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Executar no Postman
</Button>

#### GET accounts/:account\_id/do\_not\_reach\_lists[](#get-accounts-account-id-do-not-reach-lists "Permalink to this headline")

Recupere detalhes de parte ou de todas as Listas de Não Alcance associadas à conta atual.

**Observação**: Um `account_id` pode ter no máximo uma Lista de Não Alcance

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios do X, com exceção de [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| with\_deleted  <br />_optional_ | Incluir resultados excluídos na solicitação.<br /><br />Type: boolean<br /><br />Default: `false`  <br />Possible values: `true`, `false` |

**Example Request[](#example-request "Permalink to this headline")**

`GET https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "account_id": "18ce54bgxky"
        }
      },
      "next_cursor": null,
      "data": [
        {
          "targetable": false,
          "name": "Do Not Reach List",
          "description": "test DNRL",
          "id": "4kzrq",
          "reasons_not_targetable": [
            "TOO_SMALL"
          ],
          "created_at": "2021-10-28T22:09:29Z",
          "list_size": null,
          "updated_at": "2021-11-04T03:33:06Z",
          "deleted": false
        }
      ]
    }
```

#### POST accounts/:account\_id/do\_not\_reach\_lists[](#post-accounts-account-id-do-not-reach-lists "Permalink to this headline")

Cria uma nova Lista de Não Alcance associada à conta atual.

**Observação**: Um `account_id` pode ter no máximo uma Lista de Não Alcance

**Resource URL[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists`

**Parameters[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e geralmente é um parâmetro obrigatório para todas as solicitações da API de Anúncios, exceto [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| description  <br />_optional_ | Uma descrição para esse público.<br /><br />Type: string<br /><br />Example: `A list of users to exclude` |

**Example Request[](#example-request "Permalink to this headline")**

`POST https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists?description=A list of users to exclude`

**Example Response[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "description": "A list of users to exclude",
          "account_id": "18ce54bgxky"
        }
      },
      "data": {
        "targetable": false,
        "name": "Do Not Reach List",
        "description": "A list of users to exclude",
        "id": "4ofrq",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2022-02-08T23:02:48Z",
        "list_size": null,
        "updated_at": "2022-02-08T23:02:48Z",
        "deleted": false
      }
    }
```

#### POST batch/accounts/:account\_id/do\_not\_reach\_lists/:do\_not\_reach\_list\_id/users[](#post-batch-accounts-account-id-do-not-reach-lists-do-not-reach-list-id-users "Permalink to this headline")

Este endpoint permite adicionar, atualizar e remover usuários de um determinado `do_not_reach_list_id`. Este endpoint aceita apenas e-mails como tipo válido de identificador de usuário.

Todos os dados fornecidos no campo `emails` da solicitação devem ser submetidos a hash usando `SHA256` e [normalizados](/pt-BR/x-ads-api/audiences#e-mail-normalization).

**Notas**

- Um `account_id` pode ter no máximo uma Lista de Não Alcance
- Usuários adicionados a essa lista **devem** ter um carimbo de data/hora `expires_at` definido para menos de 13 meses a partir do carimbo de data/hora atual
- A API de Lista de Não Alcance não aceita um carimbo de data/hora `effective_at` e, por padrão, usa o carimbo de data/hora atual
- A Lista de Não Alcance não remove usuários de nenhum público personalizado da conta, mas atua como exclusão de segmentação para todas as campanhas veiculadas para a conta

**Requisições em lote**

- O tamanho máximo atual do lote é `2500` **para este endpoint**. O tamanho do lote é determinado pelo número de operações (`Update`/`Delete`) por solicitação. Por exemplo, mais de 2500 objetos de operação (`{"operation_type": "Update/Delete", [..] }`) em um único array resultam em erro.
- O tamanho máximo do corpo da requisição POST que este endpoint pode aceitar é `5,000,000` bytes.
- Os limites de taxa para este endpoint são 1500 por janela de 1 minuto
- Todos os parâmetros são enviados no corpo da solicitação e é necessário um `Content-Type` de `application/json`.
- Requisições em lote falham ou são bem-sucedidas juntas, como um grupo, e todas as respostas da API, tanto de erro quanto de sucesso, preservam a ordem dos itens da solicitação inicial.

**Respostas em lote**

A resposta retornada pela API de Anúncios contém dois campos, `success_count` e `total_count`. Esses valores devem sempre ser iguais e representam a contagem de registros na solicitação que foram processados pelo backend. Uma situação em que o número de registros enviados no corpo da solicitação **não** seja igual a `success_count` e `total_count` deve ser tratada como condição de erro, exigindo nova tentativa.

**Erros em lote**

- Erros no nível da solicitação (por exemplo, tamanho máximo do lote excedido) são exibidos na resposta sob o objeto `errors`.
- Erros no nível do item (por exemplo, parâmetros obrigatórios ausentes) são exibidos na resposta sob o objeto `operation_errors`.
- O índice do erro em `operation_errors` corresponde ao índice no item de entrada, com a mensagem de erro correspondente

**URL do recurso[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/batch/accounts/:account_id/do_not_reach_lists/:do_not_reach_list_id/users`

**Parâmetros[](#parameters "Permalink to this headline")**

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | O identificador da conta utilizada. Aparece no caminho do recurso e, em geral, é um parâmetro obrigatório para todas as solicitações da API de Anúncios, com exceção de [GET accounts](/pt-BR/x-ads-api/campaign-management#accounts). A conta especificada deve estar associada ao usuário autenticado.<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| do\_not\_reach\_list\_id  <br />_required_ | Referência à Lista de Não Alcance com a qual você está operando na solicitação<br /><br />Type: string<br /><br />Example: `2906h` |
| operation\_type  <br />_required_ | O tipo de operação por grupo `users` sendo executado.<br /><br />Type: enum<br /><br />Possible values: `Update`, `Delete` |
| params  <br />_required_ | Objeto JSON contendo o array `emails` e o carimbo de data/hora `expires_at`.<br /><br />Type: JSON |
| users  <br />_required_ | Array de objetos JSON contendo todos os parâmetros para um usuário individual.<br /><br />Type: JSON |
| expires\_at  <br />_optional_ | A hora em UTC em que a(s) associação(ões) do usuário deve(m) expirar. A hora especificada deve ser posterior ao valor do carimbo de data/hora atual. Expressa em [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). O padrão é 13 meses a partir do carimbo de data/hora atual.<br /><br />Type: string<br /><br />Example: `2017-07-05T07:00:00Z` |

Dada a abordagem de múltiplas chaves para o objeto `users`, cada elemento desse objeto é documentado abaixo:

| Nome | Descrição |
| :--- | :--- |
| email  <br />_opcional_ | Endereço(s) de e-mail do usuário.<br /><br />Tipo: Array\[String] |
| phone\_number  <br />_opcional_ | Número(s) de telefone do usuário.<br /><br />Tipo: Array\[String] |

**Exemplo de solicitação[](#example-request "Permalink to this headline")**

```
`POST https://ads-api.x.com/12/batch/accounts/18ce54bgxky/do_not_reach_lists/4kzro/users`

    [
      {
        "operation_type": "Update",
        "params": {
          "expires_at": "2023-01-22T00:00:00Z",
          "users": [
            {
              "email": [
                "FEAD76F6ADF99FFFB997AA4E3C8AD38FF531BC4C956DBD03CD0163F744D8AABC"
              ],
              "phone_number": [
                "CCABF1B62A202E0FE28BC6C014983C89A65451DD4482BD66A0ADB65366F38A9A"
              ]
            },
            {
              "email": [
                "FEAD76F6ADF99FFFB997AA4E3C8AD38FF531BC4C956DBD03CD0163F744D8AABA"
              ],
              "phone_number": [
                "CCABF1B62A202E0FE28BC6C014983C89A65451DD4482BD66A0ADB65366F38A9E"
              ]
            }
          ]
        }
      }
    ]
```

**Exemplo de resposta[](#example-response "Permalink to this headline")**

```
    {
      "data": [
        {
          "success_count": 2,
          "total_count": 2
        }
      ],
      "request": [
        {
          "params": {
            "do_not_reach_list_id": "4ofrq",
            "expires_at": "2023-01-22T00:00:00Z",
            "account_id": "18ce54bgxky"
          },
          "operation_type": "Update"
        }
      ]
    }
```

#### DELETE accounts/:account\_id/do\_not\_reach\_lists/:do\_not\_reach\_list\_id[](#delete-accounts-account-id-do-not-reach-lists-do-not-reach-list-id "Permalink to this headline")

Exclui a Lista de Não Alcance especificada da conta atual.

**URL do recurso[](#resource-url "Permalink to this headline")**

`https://ads-api.x.com/12/accounts/:account_id/do_not_reach_lists/:do_not_reach_list_id`

**Parâmetros[](#parameters "Permalink to this headline")**

Nenhum

**Exemplo de solicitação[](#example-request "Permalink to this headline")**

`DELETE https://ads-api.x.com/12/accounts/18ce54bgxky/do_not_reach_lists/4ofrp`

**Exemplo de resposta[](#example-response "Permalink to this headline")**

```
    {
      "request": {
        "params": {
          "do_not_reach_list_id": "4ofrp",
          "account_id": "18ce54bgxky"
        }
      },
      "data": {
        "targetable": false,
        "name": "Do Not Reach List",
        "description": null,
        "id": "4ofrp",
        "reasons_not_targetable": [
          "PROCESSING",
          "TOO_SMALL"
        ],
        "created_at": "2022-02-08T23:02:07Z",
        "list_size": null,
        "updated_at": "2022-02-08T23:02:21Z",
        "deleted": true
      }
    }
```