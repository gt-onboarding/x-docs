---
title: Boas pr√°ticas
---

import { Button } from "/snippets/pt-BR/button.mdx";

Suas chaves e tokens de API devem ser protegidos com muito cuidado.¬†

Essas credenciais est√£o diretamente vinculadas ao seu [App de desenvolvedor](/pt-BR/resources/fundamentals/developer-apps) e √†s contas do X que autorizaram voc√™ a fazer solicita√ß√µes em nome delas. Se suas chaves forem comprometidas, agentes mal-intencionados poder√£o us√°-las para fazer solicita√ß√µes aos endpoints do X em nome do seu App de desenvolvedor ou de seus usu√°rios autorizados, o que pode fazer com que voc√™ atinja limites de taxa inesperados, consuma sua cota de acesso pago ou at√© resulte na suspens√£o do seu App de desenvolvedor.

As se√ß√µes a seguir apresentam pr√°ticas recomendadas a serem consideradas ao gerenciar suas chaves e tokens de API.

<div id="regenerate-api-keys-and-tokens">
  ## Regenerar chaves e tokens da API
</div>

Caso voc√™ acredite que suas chaves da API foram expostas, regenere-as seguindo estas etapas:

1. Acesse a [p√°gina "Projects and Apps" do portal do desenvolvedor](https://developer.x.com/en/portal/projects-and-apps.html).
2. Clique no √≠cone "Keys and tokens" (üóù ) ao lado do App relevante.
3. Clique no bot√£o "Regenerate" ao lado do conjunto de chaves e tokens que voc√™ deseja regenerar.¬†

Se preferir regenerar seus Access Tokens ou Bearer Tokens programaticamente, voc√™ pode faz√™-lo usando nossos endpoints de autentica√ß√£o.

- Para regenerar seus Access Tokens, primeiro invalide-os usando o endpoint [POST oauth/invalidate\_token](/pt-BR/resources/fundamentals/authentication/api-reference#post-oauth2-invalidate-token) e, em seguida, gere-os novamente usando o [fluxo OAuth de 3 etapas](/pt-BR/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens).
- Para regenerar seu Bearer Token, primeiro invalide-o usando o endpoint [POST oauth2/invalidate\_token](/pt-BR/resources/fundamentals/authentication/api-reference#post-oauth2-invalidate-token) e, em seguida, gere-o novamente usando o endpoint [POST oauth2/token](/pt-BR/resources/fundamentals/authentication/api-reference#post-oauth2-token).

<div id="having-a-central-file-for-your-secrets">
  ## Ter um arquivo central para seus segredos
</div>

Manter um arquivo, como um .env ou algum .yaml, para armazenar seus segredos pode ser √∫til, mas certifique-se de ter um .gitignore s√≥lido para evitar que eles sejam enviados por engano a um reposit√≥rio Git.¬†

<div id="environment-variables">
  ## Vari√°veis de ambiente
</div>

Escrever c√≥digo que utilize vari√°veis de ambiente pode ser √∫til.

Um exemplo disso em Python √© o seguinte:

```python
import os

consumer_key = os.environ.get("CONSUMER_KEY")

consumer_secret = os.environ.get("CONSUMER_SECRET")
```

No seu terminal, voc√™ escreveria algo como:

```bash
export CONSUMER_KEY='xxxxxxxxxxxxxxxxxxx'
export CONSUMER_SECRET='xxxxxxxxxxxxxxxxxxxxxxx'
```

<div id="source-code-and-version-control">
  ## C√≥digo-fonte e controle de vers√£o
</div>

Os erros de seguran√ßa mais comuns cometidos por desenvolvedores s√£o deixar chaves e tokens de API no c√≥digo-fonte em sistemas de controle de vers√£o acess√≠veis, como GitHub e Bitbucket. Muitos desses reposit√≥rios de c√≥digo s√£o p√∫blicos. Esse erro acontece com tanta frequ√™ncia em reposit√≥rios p√∫blicos que existem bots lucrativos que vasculham em busca de chaves de API.

- Use vari√°veis de ambiente no servidor. Ao armazenar chaves de API em vari√°veis de ambiente, voc√™ as mant√©m fora do c√≥digo e do controle de vers√£o. Isso tamb√©m permite usar chaves diferentes para ambientes diferentes com facilidade.
- Use um arquivo de configura√ß√£o exclu√≠do do controle de vers√£o. Adicione o nome do arquivo ao seu [.gitignore](https://git-scm.com/docs/gitignore) para que ele n√£o seja rastreado pelo controle de vers√£o.
- Se voc√™ remover as chaves de API do seu c√≥digo ap√≥s j√° t√™-lo versionado, √© prov√°vel que elas ainda estejam acess√≠veis em vers√µes anteriores da sua base de c√≥digo. Regenere suas chaves de API, conforme descrito na pr√≥xima se√ß√£o.

<div id="databases">
  ## Bancos de dados
</div>

Se voc√™ precisar armazenar seus tokens de acesso em um banco de dados, tenha o seguinte em mente:

- Restrinja o acesso ao banco de dados de modo que os tokens de acesso sejam leg√≠veis apenas pelo propriet√°rio do token.
- Restrinja os privil√©gios de edi√ß√£o/grava√ß√£o na tabela de tokens de acesso ‚Äî isso deve ser automatizado pelo sistema de gerenciamento de chaves.
- Criptografe os tokens de acesso antes de armazen√°-los em qualquer reposit√≥rio de dados.

<div id="password-management-tools">
  ## Ferramentas de gerenciamento de senhas
</div>

Ferramentas de gerenciamento de senhas, como 1Password ou LastPass, podem ajudar a manter suas chaves e tokens em um local seguro. No entanto, considere evitar compartilhar esses itens em uma ferramenta de gerenciamento de senhas usada por toda a equipe.

<div id="web-storage-cookies">
  ## Armazenamento na web e cookies
</div>

H√° dois tipos de armazenamento na web: LocalStorage e SessionStorage. Eles foram criados como uma evolu√ß√£o em rela√ß√£o ao uso de cookies, pois a capacidade de armazenamento do web storage √© muito maior do que a de cookies. No entanto, cada op√ß√£o tem seus pr√≥s e contras.
¬†

**Web Storage: LocalStorage**

Tudo o que √© armazenado no web storage local √© persistente. Isso significa que os dados permanecer√£o at√© serem explicitamente exclu√≠dos. Dependendo das necessidades do seu projeto, isso pode ser positivo. Contudo, √© importante ter cautela ao usar LocalStorage, j√° que quaisquer altera√ß√µes ou adi√ß√µes aos dados ficar√£o dispon√≠veis em todas as visitas futuras √† p√°gina em quest√£o. Normalmente, n√£o recomendamos o uso de LocalStorage, embora possa haver algumas exce√ß√µes. Se voc√™ decidir usar LocalStorage, vale saber que ele respeita a pol√≠tica de mesma origem (same-origin), de modo que todos os dados armazenados aqui s√≥ estar√£o dispon√≠veis a partir da mesma origem. Um benef√≠cio adicional de desempenho ao usar LocalStorage √© a redu√ß√£o do tr√°fego cliente-servidor, j√° que os dados n√£o precisam ser enviados de volta ao servidor a cada requisi√ß√£o HTTP.
¬†

**Web Storage: SessionStorage**

SessionStorage √© semelhante ao LocalStorage, mas a diferen√ßa fundamental √© que SessionStorage n√£o √© persistente. Assim que a janela (ou aba, dependendo do navegador) usada para gravar no SessionStorage √© fechada, os dados ser√£o perdidos. Isso √© √∫til para restringir o acesso de leitura ao seu token dentro de uma sess√£o do usu√°rio. Em termos de seguran√ßa, o uso de SessionStorage costuma ser mais recomend√°vel do que o de LocalStorage. Assim como no LocalStorage, os benef√≠cios do suporte √† pol√≠tica de mesma origem e da redu√ß√£o do tr√°fego cliente-servidor tamb√©m se aplicam ao SessionStorage.
¬†

**Cookies**

Cookies s√£o a forma mais tradicional de armazenar dados de sess√£o. Voc√™ pode definir um tempo de expira√ß√£o para cada cookie, o que facilita a revoga√ß√£o e a restri√ß√£o de acesso. No entanto, o tr√°fego cliente-servidor certamente aumentar√° ao usar cookies, j√° que os dados s√£o enviados de volta ao servidor a cada requisi√ß√£o HTTP. Se voc√™ decidir usar cookies, ser√° necess√°rio se proteger contra sequestro de sess√£o. Por padr√£o, os cookies s√£o enviados em texto simples via HTTP, o que torna seu conte√∫do vulner√°vel a sniffing de pacotes e/ou ataques man-in-the-middle, nos quais invasores podem modificar seu tr√°fego. Voc√™ deve sempre impor o uso de HTTPS para proteger seus dados em tr√¢nsito. Isso proporcionar√° confidencialidade, integridade (dos dados) e autentica√ß√£o. Entretanto, se sua aplica√ß√£o ou site estiver dispon√≠vel tanto por HTTP quanto por HTTPS, voc√™ tamb√©m dever√° usar a flag Secure no cookie. Isso impedir√° que invasores consigam enviar links para a vers√£o HTTP do seu site a um usu√°rio e interceptar a requisi√ß√£o HTTP resultante.

Outra defesa adicional contra sequestro de sess√£o ao usar cookies √© validar a identidade do usu√°rio novamente antes da execu√ß√£o de quaisquer a√ß√µes de alto impacto. Outra flag a considerar para melhorar a seguran√ßa dos seus cookies √© a flag HttpOnly. Essa flag informa ao navegador que o cookie em quest√£o s√≥ deve ser acess√≠vel pelo servidor especificado. Quaisquer tentativas feitas por scripts do lado do cliente ser√£o bloqueadas por essa flag, ajudando, portanto, a proteger contra a maioria dos ataques de cross-site scripting (XSS).