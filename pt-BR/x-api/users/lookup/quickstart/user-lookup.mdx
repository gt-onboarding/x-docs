---
title: Consulta de usuários
sidebarTitle: Consulta de usuários
---

import { Button } from '/snippets/pt-BR/button.mdx';

<div id="getting-started-with-the-users-lookup-endpoints">
  ## Introdução aos endpoints de busca de usuários
</div>

Este guia de início rápido ajudará você a fazer sua primeira solicitação aos endpoints de busca de usuários com um conjunto de campos especificados usando o [Postman](/pt-BR/tutorials/postman-getting-started).

Se quiser ver exemplos de código em diferentes linguagens, visite nosso repositório no GitHub com o [código de exemplo da API do X v2](https://github.com/xdevplatform/Twitter-API-v2-sample-code).

<Note>
  ### Pré-requisitos

  Para concluir este guia, você precisará de um conjunto de [chaves e tokens](/pt-BR/resources/fundamentals/authentication) para autenticar sua solicitação. Você pode gerar essas chaves e tokens seguindo estas etapas:

  - [Inscreva-se para uma conta de desenvolvedor](https://developer.x.com/en/apply-for-access) e aguarde a aprovação.
  - Crie um [Projeto](/pt-BR/resources/fundamentals/projects) e um [App de desenvolvedor](/pt-BR/resources/fundamentals/developer-apps) associado no portal de desenvolvedores.
  - Acesse a página “Keys and tokens” do seu App para gerar as credenciais necessárias. Certifique-se de salvar todas as credenciais em um local seguro.
</Note>

<div id="steps-to-build-a-users-lookup-request">
  ### Etapas para criar uma solicitação de consulta de usuários
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### Etapa 1: comece com uma ferramenta ou biblioteca
</div>

Há várias ferramentas, exemplos de código e bibliotecas que você pode usar para fazer uma requisição a este endpoint, mas aqui vamos usar o Postman para simplificar o processo.

Para carregar a coleção da API do X v2 no seu ambiente do Postman, clique no botão a seguir:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Adicionar API do X v2 ao Postman
</Button>

Depois de carregar a coleção da API do X v2 no Postman, navegue até o endpoint GET /users/by.
 

<div id="step-two-authenticate-your-request">
  #### Etapa dois: Autentique sua solicitação
</div>

Para fazer corretamente uma solicitação à API do X, você precisa confirmar que tem permissão. Para isso, este endpoint exige que você autentique sua solicitação usando um dos seguintes métodos: [App only](/pt-BR/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token), [OAuth 2.0 Authorization Code with PKCE](pt-BR/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) ou [OAuth 1.0a User Context](/pt-BR/resources/fundamentals/authentication).

Para simplificar, usaremos App only nesta solicitação, mas você precisará usar um dos outros métodos de autenticação se quiser solicitar [métricas](/pt-BR/x-api/fundamentals/metrics) ou acessar usuários privados.

Para usar App only, você deve adicionar suas chaves e tokens — especificamente o [App Access Token](/pt-BR/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) (também conhecido como App only Bearer Token) — ao Postman. Você pode fazer isso selecionando o ambiente chamado “X API v2” no canto superior direito do Postman e adicionando suas chaves e tokens nos campos “initial value” e “current value” (clicando no ícone de olho ao lado do menu suspenso de ambientes).

Essas variáveis serão preenchidas automaticamente na guia de autorização da solicitação se você tiver feito tudo corretamente.
 

<div id="step-three-identify-and-specify-which-users-you-would-like-to-retrieve">
  #### Etapa três: Identificar e especificar quais usuários você deseja recuperar
</div>

Você deve especificar um usuário ou um conjunto de usuários que deseja obter na solicitação. Dependendo do endpoint de usuário que você utilizar, é possível passar um ID de usuário ou um nome de usuário. Nesta situação, usaremos o [endpoint GET /users/by](/pt-BR/x-api/users/user-lookup-by-usernames), que permite enviar vários nomes de usuário em uma única solicitação (em vez dos endpoints [single-ID](/pt-BR/x-api/users/user-lookup-by-id), [multi-ID](/pt-BR/x-api/users/user-lookup-by-ids) e [single-username](/pt-BR/x-api/users/user-lookup-by-username)) e informar um conjunto de nomes de usuário usando o parâmetro de consulta usernames.

Nomes de usuário são simplesmente o identificador da conta que você encontra na URL do perfil. Por exemplo, o nome de usuário da conta a seguir é XDevelopers.

`https://x.com/XDevelopers`

No Postman, vá até a guia "Params" e insira esse nome de usuário, ou uma sequência de nomes de usuário separados por vírgula, na coluna "Value" do parâmetro username, certificando-se de não incluir espaços entre os nomes de usuário e as vírgulas.

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `username` | XDevelopers,API,adsapi |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### Passo quatro: identifique e especifique quais campos você deseja recuperar
</div>

Se você clicar no botão "Send" após o passo três, receberá os campos padrão do [objeto de usuário](/pt-BR/x-api/fundamentals/data-dictionary#user) na sua resposta: id, name e username.

Se quiser receber campos adicionais além de id, name e username, será necessário especificá-los na sua solicitação com os parâmetros [field](/pt-BR/x-api/fundamentals/fields) e/ou [expansion](/pt-BR/x-api/fundamentals/expansions).

Para este exercício, solicitaremos três conjuntos adicionais de campos de objetos diferentes:

1. O campo adicional user.created\_at nos objetos de usuário principais.
2. Os campos padrão do objeto dos Posts fixados associados aos usuários retornados: id e text.
3. O campo adicional tweet.created\_at nos objetos de Post associados.

No Postman, acesse a guia "Params" e adicione o seguinte par chave:valor na tabela "Query Params":

|     |     |     |
| :--- | :--- | :--- |
| **Chave** | **Valor** | **Campos retornados** |
| `user.fields` | `created_at` | `user.created_at` |
| `expansions` | `author_id` | tweet.id, tweet.text |
| `tweet.fields` | `created_at` | `includes.users.created_at` |

Agora você deve ver a seguinte URL ao lado do botão "Send":

```
      https://api.x.com/2/users/by?usernames=twitterdev,twitterapi,adsapi&user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=author_id,created_at
```

<div id="step-five-make-your-request-and-review-your-response">
  #### Etapa cinco: Faça sua requisição e revise a resposta
</div>

Depois que tudo estiver configurado, clique no botão "Send" e você receberá a seguinte resposta:

```
{
  "data": [
    {
      "created_at": "2013-12-14T04:35:55.000Z",
      "id": "2244994945",
      "name": "Twitter Dev",
      "pinned_tweet_id": "1255542774432063488",
      "username": "TwitterDev"
    },
    {
      "created_at": "2007-05-23T06:01:13.000Z",
      "id": "6253282",
      "name": "Twitter API",
      "username": "TwitterAPI"
    },
    {
      "created_at": "2013-02-27T20:01:12.000Z",
      "id": "1225933934",
      "name": "Twitter Ads API",
      "username": "AdsAPI"
    }
  ],
  "includes": {
    "tweets": [
      {
        "author_id": "2244994945",
        "created_at": "2020-04-29T17:01:38.000Z",
        "id": "1255542774432063488",
        "text": "Durante estes tempos sem precedentes, o que está acontecendo no Twitter pode ajudar o mundo a entender melhor e responder à pandemia. \n\nEstamos lançando um endpoint de fluxo gratuito de COVID-19 para que desenvolvedores e pesquisadores qualificados possam estudar a conversa pública em tempo real. https://t.co/BPqMcQzhId"
      }
    ]
  }
}
```