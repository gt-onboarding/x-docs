---
title: Melhores práticas
sidebarTitle: Melhores práticas
---

Há alguns conceitos importantes para entender ao usar o endpoint [`POST /2/media/upload`](/pt-BR/x-api/media/media-upload). Fazer upload de mídia com OAuth pode ser um pouco complexo, então destacamos alguns pontos a considerar, além de um exemplo funcional de como usar este endpoint.

<div id="keep-in-mind">
  ## Tenha em mente
</div>

- Você pode anexar até 4 fotos, 1 GIF animado ou 1 vídeo em um post.
- A imagem enviada deve ser o binário bruto da imagem ou o binário codificado em base64; não há necessidade de codificar ou escapar o conteúdo de outra forma, desde que o Content-Type esteja definido adequadamente (em caso de dúvida: `application/octet-stream`).
- Ao enviar imagens codificadas em base64, certifique-se de definir “Content-Transfer-Encoding: base64” na parte da imagem da mensagem.
- Os delimitadores de mensagens multipart devem estar em sua própria linha e terminados por CRLF.
- Para exemplos práticos de como fazer POST usando este endpoint, recomendamos testar com o [xurl](https://github.com/xdevplatform/xurl). Além disso, confira as [Bibliotecas do X](/pt-BR/resources/tools-and-libraries) disponíveis.
- Use o `media_id_string` fornecido na resposta da API para JavaScript e quaisquer outras linguagens que não conseguem representar com precisão um inteiro longo.

<div id="media-categories">
  ## Categorias de mídia
</div>

O parâmetro Media Category define o caso de uso do arquivo de mídia a ser carregado e pode afetar limites de tamanho ou outras restrições aplicadas aos uploads de mídia. É importante usar a categoria correta ao enviar mídia para evitar problemas ao tentar utilizá-la. É um valor opcional passado na solicitação INIT como parte do fluxo de upload. Se a categoria de mídia não for especificada, a mídia enviada será considerada para um Post (`tweet_image`, `tweet_video` ou `tweet_gif`), conforme o tipo de conteúdo.

As categorias de mídia mais comuns são:

- `tweet_image`
- `tweet_video`
- `tweet_gif`
- `dm_image`
- `dm_video`
- `dm_gif`
- `subtitles`

Se você é parceiro da API de Anúncios do X, consulte [esta documentação](/pt-BR/x-ads-api/creatives#promoted-video) para mais informações sobre a categoria de mídia recomendada para vídeo promovido.

<div id="image-specifications-and-recommendations">
  ## Especificações e recomendações de imagem
</div>

Os arquivos de imagem devem atender a todos os seguintes critérios:

- **Tipos de mídia de imagem compatíveis**: `JPG`, `PNG`, `GIF`, `WEBP`
- **Tamanho da imagem**: `<= 5 MB`
- **Tamanho de GIF animado**: `<= 15 MB`

O limite de tamanho de arquivo acima é imposto pelo endpoint de upload de mídia. Além disso, existe um limite de tamanho de arquivo específico da entidade de produto, aplicado ao chamar os endpoints de criação de Post (ou similares) com `media_id`. O limite de tamanho de arquivo e outras restrições podem variar conforme o parâmetro `media_category`.

<div id="animated-gif-recommendations">
  ## Recomendações para GIFs animados
</div>

Um GIF pode falhar durante a criação de um Post mesmo estando dentro do limite de tamanho do arquivo. Siga as restrições abaixo para aumentar as chances de sucesso.

- **Resolução**: `<= 1280x1080` (`width` x `height`)
- **Número de quadros**: `<= 350`
- **Número de pixels**: `<= 300 million` (`width` \* `height` \* `num_frames`)
- **Tamanho do arquivo**: `<= 15 MB`

Para processar GIFs maiores, use o endpoint de [upload em partes](/pt-BR/x-api/media/quickstart/media-upload-chunked) com o parâmetro `media_category`. Isso permite que o servidor processe o arquivo GIF de forma assíncrona, o que é necessário para lidar com arquivos maiores. Passe `media_category=tweet_gif` para habilitar o envio assíncrono para Posts com um GIF animado.

<div id="video-specifications-and-recommendations">
  ## Especificações e recomendações de vídeo
</div>

Use o caminho assíncrono para upload de mídia.

<div id="recommended">
  ### Recomendado
</div>

- **Codec de vídeo**: `H264 High Profile`
- **Taxas de quadros**: `30 FPS`, `60 FPS`
- **Resolução de vídeo**: `1280x720` (paisagem), `720x1280` (retrato), `720x720` (quadrado). Assinantes podem enviar vídeo em 1080p e terão reprodução em 1080p. Usuários não assinantes podem enviar vídeo em 720p e terão reprodução em 720p.
- **Taxa de bits mínima de vídeo**: `5.000 kbps`
- **Taxa de bits mínima de áudio**: `128 kbps`
- **Codec de áudio**: `AAC LC`
- **Proporção de aspecto**: `16:9` (paisagem ou retrato), `1:1` (quadrado)

<div id="advanced">
  ### Avançado
</div>

- **Taxa de quadros**: deve ser de `60 FPS` ou menos
- **Dimensões**: devem estar entre `32x32` e `1280x1024`
- **Tamanho do arquivo**: não deve exceder `512 MB`
- **Duração**: deve estar entre `0,5 segundos` e `140 segundos`
- **Proporção de aspecto**: deve estar entre `1:3` e `3:1`
- **[Proporção de aspecto do pixel](https://en.wikipedia.org/wiki/Pixel_aspect_ratio)**: deve ser `1:1`
- **Formato de pixel**: apenas [YUV](https://en.wikipedia.org/wiki/YUV) 4:2:0 é compatível
- O áudio deve ser [`AAC` com perfil de baixa complexidade](https://en.wikipedia.org/wiki/Advanced_Audio_Coding#Modular_encoding). (`AAC` de alta eficiência não é compatível)
- O áudio deve ser `mono` ou `stereo`, não 5.1 ou superior
- Não deve ter [`open GOP`](https://en.wikipedia.org/wiki/Group_of_pictures)
- Deve usar [`progressive scan`](https://en.wikipedia.org/wiki/Progressive_scan)

<div id="additional-information">
  ### Informações adicionais
</div>

Na tabela abaixo, cada linha representa uma recomendação de envio, não um requisito. Todos os envios são processados para otimização em várias plataformas.

| Orientação | Largura | Altura | Taxa de bits de vídeo | Taxa de bits de áudio |
| :--- | :--- | :--- | :--- | :--- |
| Paisagem | 1280 | 720 | 2048K | 128K |
| Paisagem | 640 | 360 | 768K | 64K |
| Paisagem | 320 | 180 | 256K | 64K |
| Retrato | 720 | 1280 | 2048K | 128K |
| Retrato | 360 | 640 | 768K | 64K |
| Retrato | 180 | 320 | 256K | 64K |
| Quadrado | 720 | 720 | 2048K | 128K |
| Quadrado | 480 | 480 | 768K | 64K |
| Quadrado | 240 | 240 | 256K | 32K |

Para ver um exemplo de como enviar mídia, consulte a [documentação de upload de mídia em partes](/pt-BR/x-api/media/quickstart/media-upload-chunked).

<div id="troubleshooting">
  ### Solução de problemas
</div>

Para problemas com as APIs de Mídia, consulte a [categoria Media API](https://devcommunity.x.com/c/x-api/media-apis) nos fóruns de desenvolvedores em busca de uma resposta.