---
title: API de Uso
description: "A Usage API é uma API REST gratuita que oferece acesso programático e visibilidade sobre o consumo de atividades em produtos na sua conta corporativa."
sidebarTitle: API de Uso
---

<div id="usage-api-twitter-api">
  ## API de Uso | API do X
</div>

<div id="overview">
  ### Visão geral
</div>

`Enterprise`

É a ferramenta mais importante e a melhor para ajudar a monitorar e gerenciar o uso das diferentes APIs na sua conta.

**Aviso importante:**

As contagens de uso retornadas pela Usage API podem não corresponder às de uma fatura devido a períodos de teste e outros ajustes de cobrança. Todos os números são baseados em atividades desduplicadas consumidas em um determinado dia (em UTC).

<div id="features">
  #### Funcionalidades
</div>

- Recuperar programaticamente os dados de uso disponíveis na interface do console.gnip.com
- Dados de uso em nível de stream — fornece dados de uso em nível de stream (por exemplo, dev e prod), além do nível de produto
- Dados granulares e descritivos — as “solicitações” de busca são detalhadas pelos produtos Busca em todo o arquivo e Busca de 30 dias
- “Dias” e “tarefas” do Historical PowerTrack 

<div id="supported-apis">
  ### APIs compatíveis
</div>

Abaixo está a lista de APIs atualmente compatíveis com a Usage API:

- PowerTrack API `enterprise`
- 30-Day Search API `enterprise`
- Full-Archive Search API `enterprise`
- Historical PowerTrack `enterprise`

<div id="limitations">
  ### Limitações
</div>

- A API de Uso permite acessar dados de uso desde 1º de maio de 2018. Após 1º de julho de 2019, a API de Uso permite acessar dados de uso dos **13 meses de calendário anteriores**.

- Você pode acessar dados de uso em **intervalos de três meses**, definidos com fromDate e toDate.

Veja abaixo um exemplo de solicitação e resposta:

```bash
curl -u<username>:<password> \
"https://gnip-api.x.com/metrics/usage/accounts/<account-name>.json?bucket=month"
```

```json
{
  "account": {
    "name": "accountnamehere"
  },
  "publishers": [
    {
      "type": "twitter",
      "used": [
        {
          "timePeriod": "201805010000",
          "activities": 1235,
          "searchRequests30Day": 3,
          "searchRequestsFullArchive": 19,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0
        },
        {
          "timePeriod": "201806010000",
          "activities": 23467,
          "searchRequests30Day": 0,
          "searchRequestsFullArchive": 66,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0
        },
        {
          "timePeriod": "201807010000",
          "activities": 431,
          "searchRequests30Day": 11,
          "searchRequestsFullArchive": 4,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0
        }
      ],
      "projected": {
        "timePeriod": "201807010000",
        "activities": 803,
        "searchRequests30Day": 20,
        "searchRequestsFullArchive": 7,
        "historicalPowertrackDays": 0,
        "historicalPowertrackJobs": 0
      },
      "products": [
        {
          "type": "Assinatura do PowerTrack Histórico",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            },
            {
              "timePeriod": "201806010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            },
            {
              "timePeriod": "201807010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 0,
            "days": 0,
            "jobs": 0
          }
        },
        {
          "type": "PowerTrack",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 267
            },
            {
              "timePeriod": "201806010000",
              "activities": 3
            },
            {
              "timePeriod": "201807010000",
              "activities": 32
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 59
          },
          "endpoints": [
            {
              "type": "PowerTrack 2.0",
              "label": "actformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 0
              }
            },
              {
              "type": "PowerTrack Replay 2.0",
              "label": "ogformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 0
              }
            }
          ]
        },
        {
          "type": "API de Pesquisa (30 dias) 2.0",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 10,
              "searchRequests30Day": 3
            },
            {
              "timePeriod": "201806010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201807010000",
              "activities": 23,
              "searchRequests30Day": 11
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 42,
            "searchRequests30Day": 20
          },
          "endpoints": [
            {
              "type": "API de Pesquisa (30 dias) 2.0",
              "label": "ogformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 10,
                  "searchRequests30Day": 3
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0,
                  "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 21,
                  "searchRequests30Day": 10
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 39,
                "searchRequests30Day": 18
              }
            }
          ]
        },
        {
          "type": "API de Busca (Arquivo completo)",
          "used": [
            {
              "timePeriod": "201805010000",
              "activities": 961,
              "searchRequestsFullArchive": 19
            },
            {
              "timePeriod": "201806010000",
              "activities": 23466,
              "searchRequestsFullArchive": 66
            },
            {
              "timePeriod": "201807010000",
              "activities": 379,
              "searchRequestsFullArchive": 4
            }
          ],
          "projected": {
            "timePeriod": "201807010000",
            "activities": 706,
            "searchRequestsFullArchive": 7
          },
          "endpoints": [
            {
              "type": "API de Busca (Arquivo completo)",
              "label": "actformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 1,
                  "searchRequestsFullArchive": 3
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 0,
                  "searchRequestsFullArchive": 0
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 2,
                  "searchRequestsFullArchive": 1
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 3,
                "searchRequestsFullArchive": 1
              }
            },
            {
              "type": "API de Busca (Arquivo completo)",
              "label": "ogformat",
              "used": [
                {
                  "timePeriod": "201805010000",
                  "activities": 961,
                  "searchRequestsFullArchive": 16
                },
                {
                  "timePeriod": "201806010000",
                  "activities": 23466,
                  "searchRequestsFullArchive": 66
                },
                {
                  "timePeriod": "201807010000",
                  "activities": 379,
                  "searchRequestsFullArchive": 3
                }
              ],
              "projected": {
                "timePeriod": "201807010000",
                "activities": 706,
                "searchRequestsFullArchive": 5
              }
            }
          ]
        }
      ]
    }
  ],
  "bucket": "mês"
  "fromDate": "201805010000",
  "toDate": "201808010000"
}
```

<div id="sample-payload">
  ### Exemplo de payload
</div>

Abaixo está um exemplo de payload:

```bash
{
  "account": {
    "name": "gnip-username"
  },
  "bucket": "month"
  "publishers": [
    {
      "type": "automattic"
      "used": [
        {
          "activities": 0
          "timePeriod": "201603010000"
        }
      ],
      "projected": {
        "activities": 0
        "timePeriod": "201603010000"
      },
      "products": [
        {
          "type": "PowerTrack"
          "used": [
            {
              "timePeriod": "201603010000",
              "activities": 0
            }
          ],
          "projected": {
            "timePeriod": "201603010000",
            "activities": 0
          },
          "endpoints": [
            {
              "type": "PowerTrack"
              "label": "dev"
              "used": [
                {
                  "timePeriod": "201603010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201603010000",
                "activities": 0
              }
            }
          ]
        }
      ]
    },
    {
      "type": "twitter"
      "used": [
        {
          "activities": 84,
          "searchRequests30Day": 4,
          "searchRequestsFullArchive": 0,
          "historicalPowertrackDays": 0,
          "historicalPowertrackJobs": 0,
          "timePeriod": "201603010000"
        }
      ],
      "projected": {
        "activities": 0,
        "searchRequests30Day": 0,
        "searchRequestsFullArchive": 0,
        "historicalPowertrackDays": 0,
        "historicalPowertrackJobs": 0,
        "timePeriod": "201601010000"
      },
      "products": [
        {
          "type": "Historical PowerTrack 2.0"
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 11884,
              "days": 5,
              "jobs": 5
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "days": 0,
              "jobs": 0
            }
          ]
        },
        {
          "type": "PowerTrack"
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 27456
            },
            {
              "timePeriod": "201601010000",
              "activities": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0
          },
          "endpoints": [
            {
              "type": "PowerTrack"
              "label": "devel"
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 2930
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0
              }
            },
            {
              "type": "PowerTrack 2.0"
              "label": "devel-v2"
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 24542
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0
              }
            },
            {
              "type": "PowerTrack 2.0"
              "label": "devel-v2-1"
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0
              }
            }
          ]
        },
        {
          "type": "API de Pesquisa",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "searchRequests30Day": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0,
            "searchRequests30Day": 0
          },
          "endpoints": [
            {
              "type": "API de Pesquisa",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0,
                "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0,
                "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0,
                "searchRequests30Day": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0,
              "searchRequests30Day": 0
              }
            }
          ]
        },
        {
          "type": "API de Pesquisa (30 dias)",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "searchRequests30Day": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "searchRequests30Day": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0,
            "searchRequests30Day": 0
          },
          "endpoints": [
            {
              "type": "API de Pesquisa (30 dias)",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0,
                "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0,
                "searchRequests30Day": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0,
                "searchRequests30Day": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0,
              "searchRequests30Day": 0
              }
            }
          ]
        },
        {
          "type": "API de Pesquisa (Arquivo completo)",
          "used": [
            {
              "timePeriod": "201511010000",
              "activities": 0,
              "searchRequestsFullArchive": 0
            },
            {
              "timePeriod": "201512010000",
              "activities": 0,
              "searchRequestsFullArchive": 0
            },
            {
              "timePeriod": "201601010000",
              "activities": 0,
              "searchRequestsFullArchive": 0
            }
          ],
          "projected": {
            "timePeriod": "201601010000",
            "activities": 0,
            "searchRequestsFullArchive": 0
          },
          "endpoints": [
            {
              "type": "API de Pesquisa (Arquivo completo)",
              "label": "devel",
              "used": [
                {
                  "timePeriod": "201511010000",
                  "activities": 0,
                "searchRequestsFullArchive": 0
                },
                {
                  "timePeriod": "201512010000",
                  "activities": 0,
                "searchRequestsFullArchive": 0
                },
                {
                  "timePeriod": "201601010000",
                  "activities": 0,
                "searchRequestsFullArchive": 0
                }
              ],
              "projected": {
                "timePeriod": "201601010000",
                "activities": 0,
              "searchRequestsFullArchive": 0
              }
            }
          ]
        }
      ]
    }
  ]
}
```

<div id="api-reference">
  ## Referência da API
</div>

<div id="get-usage">
  ### obter-uso
</div>

<div id="methods">
  #### **Métodos**
</div>

| Método | Descrição |
| :--- | :--- |
| [GET /metrics/usage/accounts/{ACCOUNT_NAME}.json](#GETData) | Recuperar dados de uso |

Onde:

- :account\_name é o nome (com diferenciação de maiúsculas e minúsculas) associado à sua conta, conforme exibido em console.gnip.com

<div id="authentication-and-rate-limit">
  #### **Autenticação e limite de taxa**
</div>

<div id="authentication">
  ##### **Autenticação**
</div>

Todas as solicitações para a Usage API exigem autenticação básica HTTP, utilizando quaisquer credenciais de e-mail e senha habilitadas na sua conta para entrar em console.gnip.com ou para se conectar a qualquer fluxo do Gnip.

<div id="rate-limit">
  ##### **Limite de taxa**
</div>

A API de Uso impõe um limite de duas solicitações por minuto.

<div id="best-practices-limitations">
  #### **Práticas recomendadas e limitações**
</div>

<div id="data-availability">
  ##### **Disponibilidade de dados**
</div>

Os dados de uso são baseados em atividades desduplicadas consumidas até o último período completo (UTC) em que os dados foram processados. Em geral, os dados são processados e atualizados em tempo quase real, exceto quando a Gnip está implantando sistemas.

- A Usage API permite acessar dados de uso desde 1º de maio de 2018. Após 1º de julho de 2019, a Usage API permite acessar dados de uso dos **últimos 13 meses calendário**.

- É possível acessar dados de uso em **intervalos de três meses**, definidos com fromDate e toDate

<div id="requesting-and-receiving-data">
  #### **Solicitação e recebimento de dados**
</div>

A Usage API funciona fazendo uma requisição HTTP GET com credenciais de autenticação básica (HTTP Basic Auth) para o endpoint da API da sua conta.

<div id="get-request">
  ##### Solicitação GET:
</div>

Faça uma solicitação GET para o seguinte endpoint com suas credenciais de usuário e nome da conta:

https://gnip-api.x.com/metrics/usage/accounts/:account\_name.json

**Parâmetros adicionais**

|     |     |
| :--- | :--- |
| bucket | Opcional. A unidade de tempo para a qual os dados de uso serão fornecidos. Os dados de uso podem ser retornados com granularidade diária ou mensal.  <br />  <br />Solicitações feitas sem um bucket especificado retornarão dados com granularidade mensal.  <br />  <br />Opções: 'month' ou 'day' |
| fromDate (YYYYMMDDHHMM) | Opcional. Os dados de uso estão disponíveis apenas a partir de 1º de maio de 2018. O timestamp UTC mais antigo a partir do qual os dados de uso serão fornecidos. O timestamp tem granularidade de dia e é inclusivo (ou seja, 201805010000 inclui o dia 0501). Solicitações que contiverem valores diferentes de '0000' para hora e minuto serão padronizadas para '0000'.  <br />  <br />Solicitações feitas sem fromDate ou toDate retornarão dados de uso por mês para o mês atual e incluirão uma referência histórica dos dois meses anteriores.  <br />  <br />**Observação:** A partir de 1º de junho de 2019, você pode acessar os últimos 13 meses de dados de uso do calendário. Por exemplo, se fosse 10 de outubro, você poderia acessar dados de uso até 1º de setembro do ano anterior.  <br />**Exemplo:** 201810010000 retornará dados a partir de 1º de outubro de 2018, incluindo esse dia. |
| toDate (YYYYMMDDHHMM) | Opcional. O timestamp UTC mais recente até o qual os dados de uso serão fornecidos. O timestamp tem granularidade de dia e não é inclusivo (ou seja, 201703020000 não inclui dados do dia 0302). Quando um toDate é especificado para o dia atual ou para um dia no futuro, os dados de uso serão retornados até o último dia completo (UTC). Solicitações que contiverem valores diferentes de '0000' para hora e minuto serão padronizadas para '0000'.  <br />  <br />Uma solicitação sem toDate terá como padrão o próximo bucket (amanhã para bucket=day e próximo mês para bucket=month). Uma solicitação feita sem fromDate e toDate terá como padrão bucket=month e mostrará dados para o mês atual mais os dois meses imediatamente anteriores.  <br />  <br />**Exemplo:** 201703050000 retornará dados até 5 de março de 2017, sem incluir nenhum dado de 5 de março. |

**Exemplo de solicitação GET**

Esta solicitação retornará dados com granularidade mensal de 1º de março de 2017 a 5 de março de 2017, não incluindo nenhum dado de 5 de março de 2017.

curl -u "https://gnip-api.x.com/metrics/usage/accounts/:account\_name.json?bucket=month\&fromdate=201403010000\&toDate=201403150000"

<div id="data-format">
  #### **Formato de dados**
</div>

As tabelas a seguir descrevem as estruturas de dados no nível raiz para os dados de uso retornados pela Usage API. Para campos com vários níveis de subcampos, clique nos links fornecidos para ver detalhes sobre os subcampos.

Se você quiser ver um exemplo de um payload completo da Usage API, visite [esta página](/pt-BR/x-api/usage/introduction).

|     |     |
| :--- | :--- |
| **account** | Objeto que representa a conta para a qual os dados de uso foram solicitados. |
| **bucket** | Unidade de tempo para a qual os dados de uso são fornecidos. Pode ser "day" ou "month". |
| **fromDate** | O carimbo de data/hora UTC mais antigo para o qual você deseja obter dados de uso (inclusivo). |
| **toDate** | O carimbo de data/hora UTC mais recente para o qual você deseja obter dados de uso (exclusivo). |
| **publishers** | Inclui três objetos principais: used, projected e products. |