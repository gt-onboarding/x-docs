---
title: v1 para v2
sidebarTitle: v1 para v2
---

<div id="standard-v11-compared-to-x-api-v2">
  ### Padrão v1.1 em comparação com a API do X v2
</div>

Se você tem utilizado a v1.1 [search/posts](/pt-BR/x-api/posts/search/introduction), o objetivo deste guia é ajudar você a entender as semelhanças e diferenças entre o padrão e o endpoint de busca de posts da API do X v2.

- **Semelhanças**
  - OAuth 1.0a em contexto de usuário e OAuth 2.0 somente para app
  - Suporte ao histórico de edição de posts e metadados
- **Diferenças**
  - URLs dos endpoints

  - Requisitos de app e projeto

  - Formato dos dados da resposta

  - Parâmetros da requisição

  - Novos operadores de consulta

  - Precedência dos operadores AND/OR 

<div id="similarities">
  #### Semelhanças
</div>

**OAuth 1.0a User Context e autenticação OAuth 2.0 App-Only**

Os endpoints v1.1 search/posts e o endpoint de busca recente da API do X v2 oferecem suporte tanto a [OAuth 1.0a User Context](/pt-BR/resources/fundamentals/authentication) quanto a [OAuth 2.0 App-Only](/pt-BR/resources/fundamentals/authentication#oauth-2-0).

Portanto, se você usava anteriormente o endpoint de busca padrão v1.1, pode continuar usando o mesmo método de autenticação ao migrar para a versão na API do X v2.

Dependendo da biblioteca/pacote de autenticação que você utiliza, a autenticação App-Only provavelmente é a maneira mais simples de começar e pode ser configurada com um cabeçalho de requisição. Para saber como gerar um App Access Token, consulte este [guia de OAuth 2.0 App-Only](/pt-BR/resources/fundamentals/authentication#bearer-token-also-known-as-app-only).

Se você quiser aproveitar a possibilidade de obter métricas privadas ou de publicidade com o endpoint da API do X v2, será necessário usar OAuth 1.0a User Context e passar os tokens de acesso do usuário que publicou o Post para o qual você deseja obter métricas.

**Suporte ao histórico de edições do Post e metadados**

Ambas as versões fornecem metadados que descrevem qualquer histórico de edição. Confira as [referências da search API](/pt-BR/x-api/posts/recent-search) e a [página de fundamentos sobre edições de Post](/pt-BR/x-api/fundamentals/edit-posts) para mais detalhes. 

<div id="differences">
  #### Diferenças
</div>

**URLs de endpoints**

- Endpoints padrão v1.1:
  - https://api.x.com/1.1/search/tweets

- Endpoint da API do X v2:
  - https://api.x.com/2/tweets/search/recent
     

**Requisitos de App e Projeto**

Os endpoints da API do X v2 exigem o uso de credenciais de um [App de desenvolvedor](/pt-BR/resources/fundamentals/developer-apps) associado a um [Projeto](/pt-BR/resources/fundamentals/projects) ao autenticar suas solicitações. Todos os endpoints da API do X v1.1 podem usar credenciais de Apps independentes ou de Apps associados a um Projeto. 

**Formato dos dados de resposta**

Uma das maiores diferenças entre os endpoints padrão v1.1 e os da API do X v2 é a forma de selecionar quais campos serão retornados no payload.

Nos endpoints padrão, muitos campos de resposta são retornados por padrão e você pode usar parâmetros para definir quais campos ou conjuntos de campos devem ser incluídos no payload.

Na API do X v2, por padrão são retornados apenas os campos id e text do Post. Para solicitar campos ou objetos adicionais, use os parâmetros [fields](/pt-BR/x-api/fundamentals/fields) e [expansions](/pt-BR/x-api/fundamentals/expansions). Quaisquer campos de Post solicitados nesses endpoints serão retornados no objeto principal de Post. Objetos e campos expandidos de usuário, mídia, enquete ou local serão retornados em um objeto includes dentro da resposta. Em seguida, você pode correlacionar os objetos expandidos ao Post correspondendo os IDs presentes tanto no Post quanto no objeto expandido. 

Recomendamos que você leia mais sobre esses parâmetros em seus respectivos guias ou no nosso guia sobre [como usar fields e expansions](/pt-BR/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

Também preparamos um [guia de migração de formato de dados](/pt-BR/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) que pode ajudar a mapear campos padrão v1.1 para os campos v2 mais recentes. Esse guia também fornece os parâmetros específicos de expansão e de campo que você precisará passar na solicitação v2 para retornar campos específicos. 
 

Além das mudanças em como você solicita determinados campos, a API do X v2 também está introduzindo novos designs JSON para os objetos retornados pelas APIs, incluindo objetos de [Post](/pt-BR/x-api/fundamentals/data-dictionary#tweet) e de [user](/pt-BR/x-api/fundamentals/data-dictionary#user).

- No nível raiz do JSON, os endpoints padrão retornam objetos de Post em um array statuses, enquanto a API do X v2 retorna um array data. 
- Em vez de se referir a “statuses” Retweeted e Quoted, o JSON da API do X v2 se refere a Retweeted e Quoted Tweets. Muitos campos legados e obsoletos, como contributors e user.translator\_type, estão sendo removidos. 
- Em vez de usar tanto favorites (no objeto Post) quanto favourites (no objeto user), a API do X v2 usa o termo like. 
- O X está adotando a convenção de que valores JSON sem valor (por exemplo, null) não são gravados no payload. Atributos de Post e user só são incluídos se tiverem valores não nulos. 
   

Também introduzimos um novo conjunto de campos no [objeto Post](/pt-BR/x-api/fundamentals/data-dictionary#tweet), incluindo:

- Um campo [conversation\_id](/pt-BR/x-api/fundamentals/conversation-id)
- Dois novos campos de [annotations](/pt-BR/x-api/fundamentals/post-annotations), incluindo context e entities
- Vários novos campos de [metrics](/pt-BR/x-api/fundamentals/metrics) 
- Um novo campo reply\_setting, que mostra quem pode responder a um determinado Post

<div id="request-parameters">
  #### Parâmetros da requisição
</div>

Os seguintes parâmetros padrão da v1.1 têm equivalentes na API do X v2:

| Pesquisa padrão v1.1 | Search Posts v2 |
| :--- | :--- |
| q   | query |
|     | start\_time (YYYY-MM-DDTHH:mm:ssZ) |
| until (YYYY-MM-DD) | end\_time (YYYY-MM-DDTHH:mm:ssZ) |
| since\_id | since\_id |
| max\_id | until\_id |
| count | max\_results |
| A resposta fornece search\_metadata.next\_results | next\_token |

Há também um conjunto de parâmetros padrão de requisição do Search Posts que **não** são compatíveis com a API do X v2:

| **Parâmetro padrão v1.1** | **Detalhes** |
| :--- | :--- |
| geocode | O Search Posts no nível Basic Access não oferece suporte a operadores de geolocalização. |
| locale | Na pesquisa padrão, era usado para especificar o idioma da consulta, mas nunca foi totalmente implementado. |
| lang | Os endpoints de Search Posts fornecem um operador de consulta lang para correspondência por idiomas de interesse. |
| include\_entities | As entidades de Post estão sempre incluídas. |
| result\_type | Os endpoints de Search Posts retornam todos os Posts correspondentes, independentemente do nível de engajamento. |
| extended | A API do X v2 foi construída do zero para suportar Posts com até 280 caracteres. No v2, não existe o conceito de Posts “estendidos”. |

Aqui está um exemplo de requisição que mostra a diferença entre uma requisição Standard e uma requisição de Search Posts:

|     |     |
| :--- | :--- |
| **Padrão v1.1** | **API do X v2** |
| https://api.x.com/1.1/search/tweets.json?q=snow\&count=50 | https://api.x.com/2/tweets/search/recent?query=snow\&max\_results=50 |

Essas requisições retornarão os 50 Posts mais recentes que contêm a palavra-chave snow. A requisição v2 retornará os campos padrão id e text dos Posts correspondentes. Aqui está um exemplo de como especificar campos adicionais de Posts e de usuário para incluir no payload JSON:

|     |
| :--- |
| **API do X v2** |
| https://api.x.com/2/tweets/search/recent?query=snow\&max\_results=50\&tweet.fields=id,created\_at,author\_id,text,source,entities,attachments\&user.fields=id,name,username,description |

**Novos operadores de consulta**

O Search Posts introduz novos operadores para dar suporte a dois novos recursos da API do X v2:

- **[IDs de conversa](/pt-BR/x-api/fundamentals/conversation-id)** - À medida que as conversas se desenrolam no X, um ID de conversa estará disponível para marcar os Posts que fazem parte da conversa. Todos os Posts na conversa terão seu conversation\_id definido para o ID do Post que a iniciou.
  - `conversation_id:`
- **[Anotações do X](/pt-BR/x-api/fundamentals/post-annotations)** fornecem informações contextuais sobre os Posts e incluem anotações de entidade e de contexto. As entidades são compostas por pessoas, lugares, produtos e organizações. Os contextos são domínios ou tópicos dos quais as entidades destacadas fazem parte. Por exemplo, pessoas mencionadas em um Post podem ter um contexto que indica se são atletas, atores ou políticos.
  - context: faz correspondência com Posts que foram anotados com um contexto de interesse.
  - entity: faz correspondência com Posts que foram anotados com uma entidade de interesse. 

     

#### Precedência dos operadores AND / OR 

O elemento básico para criar consultas de busca é o uso de agrupamentos lógicos OR e AND. A API de busca padrão aplica OR antes de AND, enquanto os endpoints de Search Posts (assim como as versões premium e enterprise) aplicam AND antes de OR. Essa diferença é crucial ao traduzir consultas entre as duas. 

Por exemplo, na busca padrão, se você quiser encontrar Posts com a palavra-chave ‘storm’ que mencionem a palavra ‘colorado’ ou a hashtag #COwx, poderá usar a seguinte consulta:

storm #COwx OR colorado

Com a precedência de operadores de Search Posts, AND é aplicado antes de OR. Portanto, a consulta acima é equivalente a: 

(storm #COwx) OR colorado

No entanto, essa regra corresponderia a quaisquer Posts que mencionem ‘Colorado’, independentemente de o Post mencionar ‘storm’ ou a hashtag #COwx. Além disso, ela também corresponderia a Posts que mencionassem tanto a palavra-chave ‘storm’ quanto a hashtag #COwx. 

Para que a consulta se comporte conforme o pretendido originalmente, as cláusulas OR precisam ser agrupadas. A tradução da consulta padrão original para Search Posts seria:

storm (#COwx OR colorado)

Essas duas regras têm comportamentos de correspondência muito diferentes. No mês de outubro de 2019, a regra original retorna mais de 1.175.000 Posts, enquanto a regra corretamente traduzida retorna cerca de 5.600 Posts. Certifique-se de prestar atenção aos seus AND e OR e use parênteses quando necessário. 

<div id="curl-requests">
  #### Solicitações cURL
</div>

**A seção a seguir mostra solicitações cURL para o endpoint padrão v1.1 e seu endpoint equivalente na v2.**

As solicitações são feitas usando \[OAuth 2.0 App-Only]\(https://developer.x.com(/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token). Para executar as solicitações cURL a seguir, você precisará substituir ACCESS\_TOKEN no cabeçalho Authorization pelo token de acesso do seu app. Para endpoints v2, o token de acesso do seu app deve pertencer a um [developer App](/pt-BR/resources/fundamentals/developer-apps/overview) dentro de um [Project](/pt-BR/resources/fundamentals/projects/overview).

O payload de resposta retornado pelo endpoint v1.1 será diferente do payload de resposta retornado pelo endpoint v2. Na v2, a resposta incluirá os campos padrão, além de quaisquer outros campos solicitados com os parâmetros [fields](/pt-BR/x-api/fundamentals/fields) e [expansions](/pt-BR/x-api/fundamentals/expansions). Você pode usar esses parâmetros para solicitar um conjunto diferente de campos a ser retornado.

**Endpoints padrão v1.1 [GET search/tweets](https://developer.x.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets) e v2 [GET tweets/search/recent](/pt-BR/x-api/posts/recent-search)**

```bash
      curl --request GET \
  --url 'https://api.x.com/1.1/search/tweets.json?q=from%3ATwitterDev%20-is%3Aretweet&count=100' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

```bash
      curl --request GET \
  --url 'https://api.x.com/2/tweets/search/recent?query=from%3ATwitterDev%20-is%3Aretweet&tweet.fields=created_at%2Cconversation_id%2Centities&max_results=100' \
  --header 'Authorization: Bearer $ACCESS_TOKEN'
```

**Próximas etapas**

[Confira nosso guia de início rápido para a busca recente da API do X v2](/pt-BR/x-api/posts/search/quickstart/recent-search)

[Veja a referência da API para busca recente](/pt-BR/x-api/posts/recent-search)

[Confira alguns exemplos de código para esses endpoints](https://github.com/xdevplatform/Twitter-API-v2-sample-code "Check out some sample code for these endpoints")

[Guia passo a passo para fazer sua primeira solicitação à busca recente](/pt-BR/x-api/getting-started/make-your-first-request "Step-by-step guide to making your first request to recent search")