---
title: Busca em todo o arquivo
sidebarTitle: Busca em todo o arquivo
---

import { Button } from '/snippets/pt-BR/button.mdx';

<div id="getting-started-with-the-full-archive-search-endpoint">
  ## Introdu√ß√£o ao uso do endpoint de busca em todo o arquivo
</div>

Este guia de in√≠cio r√°pido ajudar√° voc√™ a fazer sua primeira solicita√ß√£o ao endpoint de busca em todo o arquivo com um conjunto de campos especificados usando o Postman.

Se voc√™ deseja ver exemplos de c√≥digo em diferentes linguagens, visite nosso reposit√≥rio no GitHub [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code).

<Note>
  ### Pr√©-requisitos

  O endpoint de busca em todo o arquivo est√° dispon√≠vel atualmente apenas nos n√≠veis de acesso Pro e Enterprise. Para usar este endpoint, voc√™ deve atualizar para o acesso Pro ou [solicitar o n√≠vel de acesso Enterprise](https://docs.google.com/forms/d/e/1FAIpQLScO3bczKWO2jFHyVZJUSEGfdyfFaqt2MvmOfl_aJp0KxMqtDA/viewform).

  Al√©m de ter o acesso aprovado, voc√™ precisar√° de um conjunto de [chaves e tokens](/pt-BR/resources/fundamentals/authentication) para autenticar sua solicita√ß√£o. Voc√™ pode gerar essas chaves e tokens seguindo estas etapas:

  - Acesse seu [Projeto](/pt-BR/resources/fundamentals/projects) com acesso Enterprise ou Pro no portal do desenvolvedor e certifique-se de que h√° um [App de desenvolvedor](/pt-BR/resources/fundamentals/developer-apps) associado a esse Projeto.

  - V√° at√© a p√°gina ‚ÄúKeys and tokens‚Äù do seu App para gerar as credenciais necess√°rias. Certifique-se de salvar todas as credenciais em um local seguro.
</Note>

<div id="steps-to-build-a-full-archive-search-request">
  ### Etapas para criar uma solicita√ß√£o de busca em todo o arquivo
</div>

**Primeira etapa: comece com uma ferramenta ou biblioteca**

H√° v√°rias ferramentas, exemplos de c√≥digo e bibliotecas que voc√™ pode usar para fazer uma solicita√ß√£o a este endpoint, mas aqui vamos usar o Postman para simplificar o processo.

Para carregar a cole√ß√£o da API do X v2 no seu ambiente do Postman, clique no bot√£o a seguir:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Adicionar API do X v2 ao Postman
</Button>

Depois que voc√™ carregar a cole√ß√£o da API do X v2 no Postman, navegue at√© Search Posts > Full-archive search request.

**Segunda etapa: autentique sua solicita√ß√£o**

Para fazer corretamente uma solicita√ß√£o √† API do X, voc√™ precisa verificar que tem permiss√£o. Para isso, neste endpoint, voc√™ deve autenticar sua solicita√ß√£o com os m√©todos de autentica√ß√£o [OAuth 2.0 App-Only](/pt-BR/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token).

Voc√™ deve adicionar suas chaves e tokens, especificamente o [App Access Token](/pt-BR/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) (tamb√©m conhecido como App-only Bearer Token) ao Postman. Voc√™ pode fazer isso selecionando o ambiente chamado ‚ÄúX API v2‚Äù no canto superior direito do Postman e adicionando suas chaves e tokens nos campos ‚Äúinitial value‚Äù e ‚Äúcurrent value‚Äù (clicando no √≠cone de olho ao lado do menu suspenso de ambientes).

Essa vari√°vel ser√° preenchida automaticamente na aba de autoriza√ß√£o da solicita√ß√£o se voc√™ tiver feito isso corretamente.
¬†

**Terceira etapa: crie uma consulta de busca**

Cada solicita√ß√£o de busca em todo o arquivo requer uma √∫nica consulta. Para este exemplo, vamos usar uma consulta que corresponda a Posts publicados pela conta @XDevelopers. Para essa consulta, usamos o operador from e o definimos como XDevelopers (sem diferencia√ß√£o entre mai√∫sculas e min√∫sculas):

`from:XDevelopers`

No Postman, navegue at√© a aba ‚ÄúParams‚Äù e insira este ID, ou uma sequ√™ncia de IDs de Post separados por v√≠rgula, na coluna ‚ÄúValue‚Äù do par√¢metro `ids`.
¬†

| Key | Value | Description |
| :--- | :--- | :--- |
| `query` | `from:XDevelopers` | Consulta de busca a ser enviada ao endpoint de busca em todo o arquivo |

Quarta etapa: identifique e especifique quais campos voc√™ deseja recuperar

Se voc√™ clicar no bot√£o ‚ÄúSend‚Äù ap√≥s a terceira etapa, receber√° os campos padr√£o do [Post object](/pt-BR/x-api/fundamentals/data-dictionary#tweet) na sua resposta: `id`, `text` e `edit_history_tweet_ids`. Observe que, se voc√™ receber Posts de antes do suporte a edi√ß√£o, o campo `edit_history_tweet_ids` n√£o ser√° fornecido. N√£o foi realizado preenchimento retroativo (backfill) hist√≥rico para esse campo.

Se voc√™ quiser receber campos adicionais al√©m desses campos padr√£o, ser√° necess√°rio especific√°-los na sua solicita√ß√£o com os par√¢metros [field](/pt-BR/x-api/fundamentals/fields) e/ou [expansion](/pt-BR/x-api/fundamentals/expansions).

Para este exerc√≠cio, vamos solicitar quatro conjuntos diferentes de campos de objetos distintos:

1. Os campos padr√£o do objeto Post
2. O campo adicional tweet.created\_at nos objetos de Post
3. Os campos padr√£o do [user object](/pt-BR/x-api/fundamentals/data-dictionary#user) dos autores associados dos Posts retornados
4. O campo adicional user.description nos objetos de usu√°rio associados
   ¬†

No Postman, navegue at√© a aba ‚ÄúParams‚Äù e adicione o seguinte par key:value √† tabela ‚ÄúQuery Params‚Äù:

| Key | Value | Returned fields |
| :--- | :--- | :--- |
| `tweet.fields` | `created_at` | `tweets.created_at` |
| `expansions` | `author_id` | includes.users.id, includes.users.name, includes.users.username |
| user.fields | description | includes.users.description |

Agora voc√™ deve ver a seguinte URL ao lado do bot√£o ‚ÄúSend‚Äù:

`https://api.x.com/2/tweets/search/all?query=from:XDevelopers&tweet.fields=created_at&expansions=author_id&user.fields=created_at`

<Note>
  **Observe**

  Por padr√£o, apenas os 10 Posts mais recentes ser√£o retornados. Se voc√™ quiser mais de 10 Posts por solicita√ß√£o, pode usar o par√¢metro max\_results e defini-lo como, no m√°ximo, 500 Posts por solicita√ß√£o. Da mesma forma, por padr√£o ser√£o retornados Posts dos √∫ltimos 30 dias. Se voc√™ quiser obter Posts com mais de 30 dias, pode usar os par√¢metros start\_time e end\_time na sua chamada √† API.
</Note>

**Quinto passo: fa√ßa sua solicita√ß√£o e revise a resposta**

Depois que tudo estiver configurado, clique no bot√£o "Send" e voc√™ receber√° uma resposta semelhante √† seguinte:

```
{
   "data": [
       {
           "author_id": "2244994945",
           "created_at": "2020-06-11T16:05:06.000Z",
           "id": "1271111223220809728",
           "text": "Tune in tonight and watch as @jessicagarson takes us through running your favorite Python package in R. üçø\n\nLearn how to use two powerful programming languages for data science together, and see a live example that uses the recent search endpoint from Twitter‚Äôs Developer Labs. https://t.co/v178oUZNuj"
       },
       {
           "author_id": "2244994945",
           "created_at": "2020-06-10T19:25:24.000Z",
           "id": "1270799243071062016",
           "text": "As we work towards building the new Twitter API, we‚Äôve extended the deprecation timeline for several Labs v1 endpoints. Learn more üìñ https://t.co/rRWaJYJgKk"
       },
       {
           "author_id": "2244994945",
           "created_at": "2020-06-09T18:08:47.000Z",
           "id": "1270417572001976322",
           "text": "Annotations help you learn more about a Tweet ‚Äî they can even help you find topics of interest. üî¨\n\nIn this tutorial, @suhemparack shows us how find Tweets related to COVID-19 using annotations + the filtered stream endpoint.\n\nLearn how you can, too. ‚§µÔ∏è\nhttps://t.co/qwVOgw0zSV"
       }
   ],
   "includes": {
       "users": [
           {
               "description": "The voice of Twitter's #DevRel team, and your official source for updates, news, & events about Twitter's API. \n\n#BlackLivesMatter",
               "id": "2244994945",
               "name": "Twitter Dev",
               "username": "TwitterDev"
           }
       ]
   },
   "meta": {
       "newest_id": "1271111223220809728",
       "oldest_id": "1270417572001976322",
       "result_count": 3
   }
}
```

Neste exemplo, usamos uma consulta bem simples. Se quiser ver guias mais detalhados, visite os recursos abaixo.

**Pr√≥ximas etapas**

[Personalize sua solicita√ß√£o usando a Refer√™ncia da API](/pt-BR/x-api/posts/full-archive-search)

[Veja a lista completa de operadores de consulta](/pt-BR/x-api/posts/search/integrate/build-a-query "Veja a lista completa de operadores de consulta")

[Use c√≥digo de exemplo para esses endpoints](https://github.com/xdevplatform/Twitter-API-v2-sample-code "Use c√≥digo de exemplo para esses endpoints")