---
title: v1 para v2
sidebarTitle: v1 para v2
---

<div id="standard-v11-compared-to-x-api-v2">
  ### Padrão v1.1 em comparação com a API do X v2
</div>

Se você trabalha com o endpoint v1.1 [statuses/filter](https://developer.x.com/en/docs/x-api/v1/tweets/filter-realtime/api-reference/post-statuses-filter), este guia pode ajudar a entender as semelhanças e diferenças entre os endpoints de Fluxo filtrado padrão e da API do X v2.

- **Semelhanças**
  - Parâmetros de requisição e operadores
  - Suporte ao histórico de edição de posts e metadados
- **Diferenças**
  - URLs de endpoint
  - Necessidade de App e Projeto
  - Método de autenticação
  - Volume de regras e fluxo persistente
  - Formato dos dados da resposta
  - Parâmetros de requisição
  - Disponibilidade de recursos de recuperação e redundância
  - Operadores de consulta

<div id="similarities">
  #### Semelhanças
</div>

**Parâmetros de solicitação e operadores**

O endpoint padrão statuses/filter da v1.1 oferece alguns parâmetros que podem ser enviados junto com a solicitação para filtrar o fluxo. Com o Fluxo filtrado da v2, em vez disso você usa um conjunto de [operadores](/pt-BR/x-api/posts/filtered-stream#building-rules-for-filtered-stream) que podem ser combinados usando lógica booleana para filtrar os Posts desejados. Os operadores disponíveis incluem alguns que substituem diretamente os parâmetros padrão existentes da v1.1.

Os seguintes parâmetros de solicitação padrão da v1.1 têm operadores equivalentes na API do X v2:

| **Padrão** | **API do X v2** |
| :--- | :--- |
| follow - Uma lista de IDs de usuário, separada por vírgulas, indicando os usuários cujos Posts devem ser entregues no fluxo. | Vários operadores que podem ajudar você a encontrar Posts relacionados a usuários específicos:<br /><br />\* @<br />\* from:<br />\* to:<br />\* etc. |
| track - Uma lista de frases, separada por vírgulas, que será usada para determinar quais Posts serão entregues no fluxo. | Vários operadores que podem ajudar você a encontrar Posts relacionados a palavras-chave específicas:<br /><br />\* keyword<br />\* "exact phrase match"<br />\* #<br />\* etc. |

**Suporte a histórico de edição de Post e metadados**

Ambas as versões fornecem metadados que descrevem qualquer histórico de edição. Consulte as [referências da API do Fluxo filtrado](/pt-BR/x-api/posts/filtered-stream#api-reference-index) e a [página de fundamentos sobre edições de Post](/pt-BR/x-api/fundamentals/edit-posts) para mais detalhes. 

<div id="differences">
  #### Diferenças
</div>

**URLs de endpoint**

- Endpoints padrão v1.1:
  - https://stream.x.com/1.1/statuses/filter.json
- Endpoint da API do X v2:
  - https://api.x.com/2/tweets/search/stream
  - https://api.x.com/2/tweets/search/stream/rule

**Requisitos de App e Projeto**

Os endpoints da API do X v2 exigem que você use credenciais de um [App de desenvolvedor](/pt-BR/resources/fundamentals/developer-apps) associado a um [Projeto](/pt-BR/resources/fundamentals/projects) ao autenticar suas solicitações. Todos os endpoints da API do X v1.1 podem usar credenciais de Apps independentes ou de Apps associados a um Projeto.

**Método de autenticação**

O endpoint padrão oferece suporte a [OAuth 1.0a em Contexto de Usuário](/pt-BR/resources/fundamentals/authentication), enquanto os endpoints de fluxo filtrado da API do X v2 oferecem suporte a [OAuth 2.0 Somente App](/pt-BR/resources/fundamentals/authentication#oauth-2-0) (também chamado de autenticação somente de aplicativo). Para fazer solicitações à API do X v2, você deve usar um App Access Token para autenticar suas solicitações.

Se você não tiver mais o App Access Token apresentado quando criou seu Projeto e App no portal de desenvolvedor, poderá gerar um novo acessando a página “Keys and tokens” do seu App no portal de desenvolvedor. Se quiser gerar um App Access Token programaticamente, consulte este [guia de OAuth 2.0 Somente App](/pt-BR/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token).

**Volume de regras e fluxo persistente**

O endpoint padrão v1.1 oferece suporte a uma única regra para filtrar a conexão de streaming. Para alterar a regra, você deve desconectar o fluxo e enviar uma nova solicitação com as regras de filtragem revisadas como parâmetros.

O endpoint de fluxo filtrado da API do X v2 permite aplicar várias regras a um único fluxo e adicionar e remover regras no seu fluxo mantendo a conexão.

**Formato de dados de resposta**

Uma das maiores diferenças entre as versões de endpoint padrão v1.1 e API do X v2 é como você seleciona quais campos retornam no payload.

Nos endpoints padrão, muitos campos de resposta são enviados por padrão e você tem a opção de usar parâmetros para identificar quais campos ou conjuntos de campos devem retornar no payload.

A API do X v2 entrega apenas os campos id e text do Post por padrão. Para solicitar campos ou objetos adicionais, você precisará usar os parâmetros [fields](/pt-BR/x-api/fundamentals/fields) e [expansions](/pt-BR/x-api/fundamentals/expansions). Quaisquer campos de Post que você solicitar nesses endpoints retornarão no objeto principal Post. Objetos e campos expandidos de usuário, mídia, enquete ou lugar retornarão em um objeto includes na sua resposta. Você pode então correlacionar quaisquer objetos expandidos ao objeto Post correspondente, fazendo a correspondência dos IDs presentes tanto no Post quanto no objeto expandido.

Recomendamos que você leia mais sobre esses novos parâmetros em seus respectivos guias ou em nosso guia sobre [como usar fields e expansions](/pt-BR/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions).

Também preparamos um [guia de migração de formato de dados](/pt-BR/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) que pode ajudar você a mapear campos padrão v1.1 para os novos campos v2. Esse guia também fornece o parâmetro específico de expansão e de campo que você precisará passar com sua solicitação v2 para retornar campos específicos.

Além das mudanças em como você solicita certos campos, a API do X v2 também está introduzindo novos designs JSON para os objetos retornados pelas APIs, incluindo objetos de Post e de [user](/pt-BR/x-api/fundamentals/data-dictionary#user).

- No nível raiz do JSON, os endpoints padrão retornam objetos de Post em um array statuses, enquanto a API do X v2 retorna um array data.
- Em vez de se referir a “statuses” Retweeted e Quoted, o JSON da API do X v2 se refere a Retweeted e Quoted Tweets. Muitos campos legados e preteridos, como contributors e user.translator\_type, estão sendo removidos.
- Em vez de usar tanto favorites (no objeto Post) quanto favourites (no objeto user), a API do X v2 usa o termo like.
- O X está adotando a convenção de que valores JSON sem valor (por exemplo, null) não são escritos no payload. Atributos de Post e user só são incluídos se tiverem valores não nulos.

Também introduzimos um novo conjunto de campos no [objeto Post](/pt-BR/x-api/fundamentals/data-dictionary#tweet), incluindo o seguinte:

- Um campo [conversation\_id](/pt-BR/x-api/fundamentals/conversation-id)
- Dois novos campos de [annotations](/pt-BR/x-api/fundamentals/post-annotations), incluindo context e entities
- Vários novos campos de [metrics](/pt-BR/x-api/fundamentals/metrics)
- Um novo campo reply\_setting, que mostra quem pode responder a um determinado Post

**Parâmetros de solicitação**

Há também um conjunto de parâmetros padrão de solicitação do Fluxo filtrado que **não** são compatíveis na API do X v2:

| Parâmetro padrão v1.1 | Detalhes |
| :--- | :--- |
| locations - Uma lista separada por vírgulas de pares longitude,latitude que especifica um conjunto de bounding boxes para filtrar Posts. | Ainda não lançamos operadores baseados em localização para a API do X v2. |
| Delimited | No endpoint v1.1, definir isso para o comprimento da string indica que os statuses devem ser delimitados no fluxo, para que os clientes saibam quantos bytes ler antes do fim da mensagem de status.<br /><br />Essa funcionalidade não está disponível na API do X v2. |
| Stall\_warnings | No endpoint v1.1, definir este parâmetro como true fará com que mensagens periódicas sejam entregues se o cliente estiver em risco de desconexão. <br /><br />Na API do X v2, os avisos de stall são enviados por padrão, com uma nova linha enviada periodicamente. |

**Disponibilidade de recursos de recuperação e redundância**

A versão do Fluxo filtrado da API do X v2 introduz recursos de recuperação e redundância que podem ajudar você a maximizar o tempo de atividade do streaming, bem como recuperar quaisquer Posts que possam ter sido perdidos devido a uma desconexão de cinco minutos ou menos.

Conexões redundantes permitem que você se conecte a um determinado fluxo até duas vezes, o que ajuda a garantir que você mantenha a conexão com o fluxo o tempo todo, mesmo que uma de suas conexões falhe. 

O parâmetro backfill\_minutes pode ser usado para recuperar até cinco minutos de dados perdidos. 

Ambos os recursos estão disponíveis apenas por meio do [Academic Research access](/pt-BR/x-api/getting-started/about-x-api). Você pode saber mais sobre essa funcionalidade em nosso guia de integração de [recuperação e redundância](/pt-BR/x-api/posts/filtered-stream#filtered-stream-recovery-and-redundancy-features). 

**Novos operadores de consulta**

A API do X v2 introduz novos operadores em suporte a dois novos recursos: 

- **[Conversation IDs](/pt-BR/x-api/fundamentals/conversation-id)** - À medida que as conversas se desenrolam no X, um conversation ID estará disponível para marcar Posts que fazem parte da conversa. Todos os Posts na conversa terão seu conversation\_id definido para o ID do Post que a iniciou. 
  - conversation\_id:
- **[X Annotations](/pt-BR/x-api/fundamentals/post-annotations)** fornecem informações contextuais sobre Posts e incluem entity e context annotations. Entities são compostas por pessoas, lugares, produtos e organizações. Contexts são domínios ou tópicos dos quais as entidades destacadas fazem parte. Por exemplo, pessoas mencionadas em um Post podem ter um contexto que indica se são atletas, atores ou políticos.  
  - context: - corresponde a Posts que foram anotados com um contexto de interesse. 
  - entity: - corresponde a Posts que foram anotados com uma entidade de interesse. 