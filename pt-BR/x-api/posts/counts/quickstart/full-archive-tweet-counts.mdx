---
title: Buscar posts (arquivo completo)
sidebarTitle: Buscar posts (arquivo completo)
---

import { Button } from '/snippets/pt-BR/button.mdx';

### Introdução ao endpoint de contagem de Posts na busca em todo o arquivo    

Este guia de início rápido ajudará você a fazer sua primeira solicitação ao endpoint de contagem de Posts na busca em todo o arquivo usando o Postman, uma ferramenta gráfica que permite fazer requisições HTTP.

Se você quiser ver exemplos de código em diferentes linguagens de programação, visite nosso repositório no GitHub [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code). 

<Note>
  ### Pré-requisitos

  O endpoint de contagem de Posts na busca em todo o arquivo está disponível atualmente apenas para quem tem acesso Pro ou Enterprise. Para usar este endpoint, você deve solicitar acesso Pro ou [Enterprise](https://docs.google.com/forms/d/e/1FAIpQLScO3bczKWO2jFHyVZJUSEGfdyfFaqt2MvmOfl_aJp0KxMqtDA/viewform). 

  Além de ter o acesso aprovado, você precisará de um conjunto de [keys and tokens](/pt-BR/resources/fundamentals/authentication) para autenticar sua requisição. Você pode gerar essas chaves e tokens seguindo estas etapas:

  - Acesse seu [Project](/pt-BR/resources/fundamentals/projects) com acesso Enterprise no portal do desenvolvedor e certifique-se de que há um [developer App](/pt-BR/resources/fundamentals/developer-apps) associado a esse Project.

  - Acesse a página “Keys and tokens” do seu App para gerar as credenciais necessárias. Certifique-se de salvar todas as credenciais em um local seguro.
</Note>

<div id="steps-to-build-a-full-archive-post-counts-request">
  #### Etapas para criar uma solicitação de contagem de Posts com busca em todo o arquivo
</div>

**Primeira etapa: Comece com uma ferramenta ou biblioteca**

Há várias ferramentas, exemplos de código e bibliotecas que você pode usar para fazer uma solicitação a este endpoint, mas aqui usaremos o Postman para simplificar o processo.

Para carregar a coleção da API do X v2 no seu ambiente do Postman, clique no botão a seguir:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Adicionar API do X v2 ao Postman
</Button>

Depois que você carregar a coleção da API do X v2 no Postman, navegue até Post counts > Full-archive Post counts request.

**Segunda etapa: Autentique sua solicitação**

Para enviar corretamente uma solicitação à API do X, você precisa verificar se tem permissão. Para isso, neste endpoint, você deve autenticar sua solicitação com os métodos de autenticação [OAuth 2.0 App-Only](/pt-BR/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token).

Você deve adicionar suas chaves e tokens, especificamente o [App Access Token](/pt-BR/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) (também conhecido como App-only Bearer Token) ao Postman. Você pode fazer isso selecionando o ambiente chamado “API do X v2” no canto superior direito do Postman e adicionando suas chaves e tokens nos campos “initial value” e “current value” (clicando no ícone de olho ao lado do menu suspenso de ambientes).

Essa variável será automaticamente usada na guia de autorização da solicitação se você tiver feito isso corretamente.
 

**Terceira etapa: Crie uma consulta**

Cada solicitação de contagem de Posts com busca em todo o arquivo requer uma única [consulta](/pt-BR/x-api/posts/counts/integrate/build-a-query). Para este exemplo, usaremos uma consulta que corresponda a Posts publicados pela conta @XDevelopers. Para essa consulta, usamos o operador from e definimos como XDevelopers (sem distinção entre maiúsculas e minúsculas):

`from:XDevelopers`

No Postman, navegue até a guia “Params” e insira este ID, ou uma sequência de IDs de Post separados por vírgula, na coluna “Value” do parâmetro `ids`.
 

| Key | Value | Description |
| :--- | :--- | :--- |
| `query` | `from:XDevelopers` | Consulta a ser enviada para o endpoint de contagem de Posts com busca em todo o arquivo |

Quarta etapa (opcional): Especifique a granularidade e o período

Se você clicar no botão “Send” após a terceira etapa, receberá a contagem de Posts padrão da busca em todo o arquivo: por hora nos últimos 30 dias. Se quiser obter a contagem de Posts por dia, adicione o parâmetro granularity com o valor day. Se quiser a contagem de Posts para mais de 30 dias atrás, especifique os parâmetros start\_time e end\_time com os valores desejados. 

No Postman, navegue até a guia “Params” e adicione o seguinte par chave:valor à tabela “Query Params”:

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| granularity | day | A granularidade dos resultados de contagem de Posts. Os valores possíveis são day, hour ou minute |
| start\_time | 2021-05-01T00:00:00Z | O carimbo de data/hora (UTC) mais antigo a partir do qual os Posts serão fornecidos |
| end\_time | 2021-06-01T00:00:00Z | O carimbo de data/hora (UTC) mais recente até o qual os Posts serão fornecidos. |

Agora você deve ver a seguinte URL ao lado do botão “Send”:

`https://api.x.com/2/tweets/counts/all?query=from%3AXDevelopers&start_time=2021-05-01T00:00:00Z&end_time=2021-06-01T00:00:00Z&granularity=day`

**Quinta etapa: Envie sua solicitação e revise a resposta**

Quando tudo estiver configurado, clique no botão “Send” e você receberá uma resposta semelhante à seguinte:

```
{
   "data": [
       {
           "end": "2021-05-02T00:00:00.000Z",
           "start": "2021-05-01T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-03T00:00:00.000Z",
           "start": "2021-05-02T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-04T00:00:00.000Z",
           "start": "2021-05-03T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-05T00:00:00.000Z",
           "start": "2021-05-04T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-06T00:00:00.000Z",
           "start": "2021-05-05T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-07T00:00:00.000Z",
           "start": "2021-05-06T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-08T00:00:00.000Z",
           "start": "2021-05-07T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-09T00:00:00.000Z",
           "start": "2021-05-08T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-10T00:00:00.000Z",
           "start": "2021-05-09T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-11T00:00:00.000Z",
           "start": "2021-05-10T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-12T00:00:00.000Z",
           "start": "2021-05-11T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-13T00:00:00.000Z",
           "start": "2021-05-12T00:00:00.000Z",
           "tweet_count": 6
       },
       {
           "end": "2021-05-14T00:00:00.000Z",
           "start": "2021-05-13T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-05-15T00:00:00.000Z",
           "start": "2021-05-14T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-16T00:00:00.000Z",
           "start": "2021-05-15T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-17T00:00:00.000Z",
           "start": "2021-05-16T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-18T00:00:00.000Z",
           "start": "2021-05-17T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-19T00:00:00.000Z",
           "start": "2021-05-18T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-05-20T00:00:00.000Z",
           "start": "2021-05-19T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-21T00:00:00.000Z",
           "start": "2021-05-20T00:00:00.000Z",
           "tweet_count": 8
       },
       {
           "end": "2021-05-22T00:00:00.000Z",
           "start": "2021-05-21T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-05-23T00:00:00.000Z",
           "start": "2021-05-22T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-24T00:00:00.000Z",
           "start": "2021-05-23T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-25T00:00:00.000Z",
           "start": "2021-05-24T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-26T00:00:00.000Z",
           "start": "2021-05-25T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-05-27T00:00:00.000Z",
           "start": "2021-05-26T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-05-28T00:00:00.000Z",
           "start": "2021-05-27T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-05-29T00:00:00.000Z",
           "start": "2021-05-28T00:00:00.000Z",
           "tweet_count": 2
       },
       {
           "end": "2021-05-30T00:00:00.000Z",
           "start": "2021-05-29T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-05-31T00:00:00.000Z",
           "start": "2021-05-30T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-01T00:00:00.000Z",
           "start": "2021-05-31T00:00:00.000Z",
           "tweet_count": 0
       }
   ],
   "meta": {
       "total_tweet_count": 22
   }
}
```

**Passo seis: paginar seus resultados**

Se o objeto “meta” na sua resposta também contiver next\_token, você pode passar esse valor para o parâmetro de consulta next\_token.

| Key | Value | Description |
| :--- | :--- | :--- |
| next\_token | Adicione aqui o next\_token que você extrair do objeto meta da sua solicitação anterior. | Se sua solicitação mais recente não retornar o restante dos resultados, você receberá um next\_token no objeto meta. Extraia o valor desse campo e use-o como o valor do parâmetro next\_token na sua próxima solicitação, mantendo todos os demais parâmetros da solicitação inalterados. |

Depois de definir o valor correto para next\_token, clique no botão “Send” para receber a próxima página de resultados.