---
title: Introdução rápida
sidebarTitle: Introdução rápida
---

import { Button } from '/snippets/pt-BR/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Introdução aos endpoints de gerenciamento de Mensagens Diretas
</div>

Este guia de início rápido ajudará você a fazer sua primeira solicitação aos endpoints de Mensagens Diretas usando o Postman, uma ferramenta para gerenciar e enviar requisições HTTP. Para saber mais sobre nossas coleções do Postman, visite o guia [Usando o Postman](/pt-BR/tutorials/postman-getting-started).

Visite nosso repositório no GitHub [código de exemplo da API do X v2](https://github.com/xdevplatform/Twitter-API-v2-sample-code) se quiser conferir exemplos em Python. Além disso, os [kits de desenvolvimento de software (SDKs) da X Developer Platform](/pt-BR/x-api/tools-and-libraries/sdks) oficiais serão atualizados para oferecer suporte a esses endpoints de Mensagens Diretas.  

<Note>
  **Pré-requisitos**

  Para concluir este guia, você precisará de um conjunto de [chaves e tokens](/pt-BR/resources/fundamentals/authentication) para autenticar sua solicitação. Você pode gerar essas chaves e tokens seguindo estas etapas:

  - [Inscreva-se para uma conta de desenvolvedor](https://developer.x.com/en/apply-for-access) e aguarde a aprovação.
  - Crie um [Projeto](/pt-BR/resources/fundamentals/projects) e um [App de desenvolvedor](/pt-BR/resources/fundamentals/developer-apps) associado no portal do desenvolvedor.
  - Acesse a página “Keys and tokens” do seu App para gerar as credenciais necessárias. Certifique-se de salvar todas as credenciais em um local seguro.
</Note>

<div id="steps-to-building-manage-direct-message-requests">
  ### Etapas para gerenciar solicitações de Mensagens Diretas
</div>

Neste exemplo, em uma única solicitação, criaremos uma nova conversa em grupo e adicionaremos a primeira mensagem. Em seguida, adicionaremos uma segunda mensagem à conversa criada.

<div id="step-one-start-with-a-tool-or-library">
  #### Etapa um: comece com uma ferramenta ou biblioteca
</div>

Para começar a trabalhar com os endpoints de gerenciamento de Mensagens Diretas, usaremos a ferramenta Postman para simplificar o processo. Será usada uma coleção, criada pela XDev, com exemplos de solicitações da API do X v2 para explorar seis endpoints usados para criar novas Mensagens Diretas e listar eventos de conversas de Mensagens Diretas.

Embora a maior parte da coleção esteja pré-preenchida, há alguns detalhes que você precisará fornecer, com base no App do X criado para hospedar essas solicitações de API. Primeiro, vamos carregar/atualizar a coleção.

Para carregar a coleção da API do X v2 no seu ambiente do Postman, clique no botão a seguir:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Adicionar API do X v2 ao Postman
</Button>

Depois de carregar a coleção da API do X v2 no Postman, navegue até a pasta “Manage Direct Messages”. A guia Authorization dessa pasta foi pré-preenchida quando possível, e você pode atualizar algumas configurações para compartilhar os detalhes de autenticação do seu App do X. Essa pasta também contém três endpoints para criar novas Mensagens Diretas. Observe que há também uma pasta "Direct Message lookup" com três endpoints disponíveis para recuperar eventos de conversas de Mensagens Diretas, incluindo o envio e recebimento de mensagens e quando participantes da conversa entram e saem. 

Como a criação de conversas em grupo é um novo recurso interessante da API do X v2, este exemplo se concentrará nisso. Trabalharemos com o exemplo "New group DM and conversation". Usaremos essa solicitação para criar uma conversa em grupo de Mensagens Diretas.

A próxima etapa é autenticar com o endpoint.

**Etapa dois: autentique sua solicitação**

Para fazer corretamente uma solicitação à API do X, você precisa confirmar que tem permissão para isso. Para fazer uma solicitação bem-sucedida a este endpoint, usaremos o [OAuth 2.0 Authorization Code Flow with PKCE](pt-BR/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2). Você pode gerar um token de acesso no Postman. 

Com o Postman, você pode definir o método de autenticação no nível da pasta ou da solicitação. Aqui, configuraremos os detalhes de autenticação no nível da pasta.

Navegue até a pasta "Manage Direct Messages", selecione a guia "Authorization" e confirme que o Type está definido como “OAuth 2.0” e que "Add auth data to" está definido como "Request Headers". Na seção "Current Token", certifique-se de que o "header Prefix" esteja definido como Bearer.  

Para configurar e gerar um novo token:

1. Crie um Token Name, como "Manage DMs".

2. Confirme que o **Grant Type** está definido como Authorization Code (with PKCE).

3. Defina sua **Callback URL**. Você deve atualizar sua Callback URL para corresponder exatamente à Callback URL associada ao seu aplicativo no [v2 Dev Portal](https://developer.x.com/en/portal/dashboard). Com o App do X usado neste exemplo, a Callback URL está definida como - [_https://www.example.com_.](https://www.example.com/) (Observe que, como isso deve corresponder exatamente, [_https://example.com_](https://example.com) não funcionaria.) 

4. Confirme que o **Auth URL** está definido como [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize).

5. Confirme que o **Access Token URL** está definido como [https://api.x.com/2/oauth2/token.](https://api.x.com/2/oauth2/token)**Client ID** - Copie e cole o OAuth 2.0 client ID do Developer Portal
   **Client Secret** - Você só precisará disso se estiver usando um tipo de App que seja um cliente confidencial. Nesse caso, copie e cole o OAuth 2.0 Client Secret do Developer Portal. 

6. Confirme que o **Scope** está definido como dm.read, dm.write, tweet.read e users.read.

7. Confirme que o **State** está definido como “state”.

8. Confirme que o **Client Authentication** está definido como Send as Basic Auth header.

9. Clique em **Get New Access Token** e clique em "Authorize app" como parte do processo "Sign-in with X".

10. Clique no botão "Proceed" e depois em "Use Token" para gerar um token. 

11. Clique no botão "Save" para salvar esses detalhes de configuração.

Você pode receber uma mensagem informando que não está conectado ao X. Se receber esse erro, será necessário fazer login na conta do X em nome da qual você está tentando publicar, dentro do Postman.

Agora que os detalhes do OAuth 2.0 foram definidos no nível da pasta, navegue até cada um dos exemplos, acesse a guia "Authorization" e confirme que o Type está definido como "Inherit auth from parent".

Observe que esse token expirará em breve, e você precisará gerá-lo novamente clicando no botão "Get New Access Token". Ao clicar, será iniciado o processo "Sign-in with X" e um novo token será gerado para realizar as requisições.

<div id="step-three-specify-the-direct-message-conversation-participants-and-message-contents">
  #### Etapa três: Especifique os participantes da conversa de Mensagem Direta e o conteúdo da mensagem
</div>

Acesse a guia "Body" e atualize o objeto JSON de exemplo. Defina o atributo participant\_ids para as contas para as quais você deseja enviar a Mensagem Direta.

`{
   "message": {"text": "Olá, vocês dois. Esta é uma nova conversa em grupo."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}`

<div id="step-four-make-your-request-and-review-the-response">
  #### Etapa quatro: faça sua solicitação e revise a resposta
</div>

Depois que tudo estiver configurado, clique no botão "Send" e você receberá uma resposta semelhante ao exemplo abaixo. Lembrete: se o seu token tiver expirado desde que você o criou acima, você pode voltar à guia Authorization da pasta e clicar em "Get New Access Token" para gerar um novo token.

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582103724607971332"
   }
}
```

Se o objeto "data" da resposta contiver um dm\_conversation\_id e um dm\_event\_id, você criou com sucesso uma nova conversa de Mensagens Diretas. Para começar a consultar eventos associados a essa conversa, acesse o guia de início rápido de consulta de Mensagens Diretas.

<div id="step-five-add-another-message-to-that-group-conversation">
  #### Etapa cinco: Adicionar outra mensagem àquela conversa em grupo
</div>

Agora selecione o exemplo "Add DM to conversation" e a aba "Params". Em "Path Variables", atualize o dm\_conversation\_id para o ID da conversa que você criou acima.

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| dm\_conversation\_id | 1582103724607971328 |

Usando esse ID de conversa, o caminho da requisição será: https://api.x.com/2/dm\_conversations/1582103724607971328/messages

Além disso, atualize a aba "Body" com o JSON da requisição contendo o texto da mensagem que você quer enviar:

```
{
   "text": "Adding a new message to our group conversation..."
}
```

Depois que tudo estiver configurado, clique no botão "Send" e você receberá uma resposta semelhante ao exemplo a seguir:

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582106224379559940"
   }
}
```