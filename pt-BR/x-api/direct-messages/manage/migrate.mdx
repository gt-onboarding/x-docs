---
title: Guia de Migração
sidebarTitle: Guia de Migração
---

import { Button } from '/snippets/pt-BR/button.mdx';

<div id="comparing-v11-and-v2-manage-direct-message-endpoints">
  ## Comparando os endpoints de gerenciamento de Mensagens Diretas nas versões v1.1 e v2
</div>

As versões v1.1 e v2 dos endpoints de Mensagens Diretas oferecem métodos para criar mensagens de MD. Este guia ajuda a entender as diferenças e fornece informações para migrar para a v2. 

Uma diferença importante entre as duas versões é que a v1.1 oferece suporte apenas a conversas um a um, enquanto a v2 introduz suporte a conversas em grupo. Um efeito disso é que a v1.1 oferece suporte apenas a eventos de “message created”, enquanto a v2 também oferece suporte a eventos associados à entrada e saída de participantes das conversas. Na verdade, uma atualização fundamental da v2 é estabelecer dm\_conversations como um objeto central da API.   

Com a v1.1, há dois endpoints para gerenciar Mensagens Diretas:

- POST direct\_messages/events/new - Cria uma Mensagem Direta um a um. Este endpoint da v1.1 só pode criar mensagens um a um e não oferece suporte a mensagens em grupo.  

- DELETE direct\_messages/events/destroy - Exclui uma mensagem um a um da visualização do usuário autenticado. 

Com esta versão v2, há três métodos POST para criar Mensagens Diretas: 

- **POST /2/dm\_conversations/with/:participant\_id/messages** - Cria uma Mensagem Direta um a um. Este método adiciona a mensagem a uma conversa um a um existente ou cria uma nova. O parâmetro de caminho :participant\_id é o ID do usuário da conta que receberá a mensagem. 

- **POST /2/dm\_conversations** - Cria uma nova conversa em grupo e adiciona uma Mensagem Direta a ela. Essas solicitações exigem uma lista de participantes da conversa. Observe que é possível criar várias conversas com a mesma lista de participantes. Essas solicitações sempre retornarão um novo ID de conversa. 

- **POST /2/dm\_conversations/:dm\_conversation\_id/messages** - Cria uma Mensagem Direta e a adiciona a uma conversa existente. O parâmetro de caminho :dm\_conversation\_id é o ID da conversa à qual a mensagem será adicionada. 

Um detalhe importante é que os IDs de conversas e eventos são compartilhados entre as versões v1.1 e v2 da Plataforma X. Isso significa que ambas as versões podem ser usadas em conjunto. Por exemplo, os endpoints de Mensagens Diretas v1.1 oferecem métodos para retornar um único evento e para excluir eventos, métodos ainda não disponíveis na v2. Como os IDs são comuns entre v1.1 e v2, você pode fazer solicitações v1.1 com base em IDs fornecidos pela v2 ou referenciando IDs de conversa exibidos nas URLs de conversa no aplicativo X.

A tabela a seguir compara aspectos fundamentais dos endpoints de gerenciamento de Mensagens Diretas nas versões v1.1 e v2. As características da API do X v2 compartilhadas aqui são comuns a todos os endpoints de consulta de Mensagens Diretas.

|     |     |     |
| :--- | :--- | :--- |
| **Descrição** | **Padrão v1.1** | **API do X v2** |
| Domínio do host | https://api.x.com | https://api.x.com |
| Caminho raiz do endpoint | [/1.1/direct\_messages](https://api.x.com/1.1/direct_messages) | [/2/dm\_conversations](https://api.x.com/2/users/:id/dm_conversations)<br /><br />Conversas de Mensagens Diretas são introduzidas como um objeto fundamental da API.   <br /><br />Esses endpoints recuperam eventos MessageCreate, ParticipantsJoin e ParticipantsLeave. |
| Métodos HTTP compatíveis | POST | POST |
| Suporta Mensagens Diretas em grupo |     | ✔   |
| Tipos de evento compatíveis | message\_create | MessageCreate, ParticipantsJoin, ParticipantsLeave |
| [Autenticação](/pt-BR/resources/fundamentals/authentication) | OAuth 1.0a User Context | OAuth 1.0a User Context<br /><br />OAuth 2 User Context (escopos: dm.read, dm.write) |
| Exige o uso de credenciais de um [App de desenvolvedor](/pt-BR/resources/fundamentals/authentication) associado a um [Projeto](/pt-BR/resources/fundamentals/projects) da API do X v2 |     | ✔   |
| [Limites de taxa](/pt-BR/x-api/fundamentals/rate-limits) padrão da solicitação\*  <br />\*Todas as solicitações exigem tokens de usuário | 1000 solicitações por usuário a cada 24 horas  <br />15000 solicitações por app a cada 24 horas | 200 solicitações por 15 minutos por usuário<br /><br />1000 solicitações por usuário a cada 24 horas<br /><br />15000 solicitações por app a cada 24 horas<br /><br />Esses limites de taxa são compartilhados entre todos os endpoints POST de dm\_conversations. |

As tabelas a seguir comparam os métodos POST da v2 com a versão v1.1. Observe que essas opções da v2 ampliam as capacidades disponíveis ao oferecer suporte a conversas em grupo. 

**Criar uma nova Mensagem Direta um a um**

Caminho: POST /2/dm\_conversations/with/:participant\_id/messages

|     |     |     |
| :--- | :--- | :--- |
| **Descrição** | **Standard v1.1** | **API do X v2** |
| Caminho do endpoint | POST direct\_messages/events/new (message\_create) | POST /2/dm\_conversations/with/:participant\_id/messages |
| [Limites de taxa](/pt-BR/x-api/fundamentals/rate-limits) padrão de solicitação | 1000 solicitações por usuário a cada 24 horas  <br />15000 solicitações por app a cada 24 horas | 200 solicitações por usuário a cada 15 minutos<br /><br />1000 solicitações por usuário a cada 24 horas<br /><br />15000 solicitações por app a cada 24 horas<br /><br />Esses limites de taxa são compartilhados entre todos os endpoints POST de dm\_conversations. |
| Suporta Mensagens Diretas em grupo |     | ✔   |

**Crie uma nova conversa em grupo de Mensagens Diretas e adicione uma mensagem a ela**

Path: POST /2/dm\_conversations

|     |     |     |
| :--- | :--- | :--- |
| **Descrição** | **Standard v1.1** | **API do X v2** |
| Caminho do endpoint | Não compatível | POST /2/dm\_conversations |
| [Limites de taxa](/pt-BR/x-api/fundamentals/rate-limits) padrão de solicitação |     | 200 solicitações por usuário a cada 15 minutos<br /><br />1000 solicitações por usuário a cada 24 horas<br /><br />15000 solicitações por app a cada 24 horas<br /><br />Esses limites de taxa são compartilhados entre todos os endpoints POST de dm\_conversations. |
| Suporta Mensagens Diretas em grupo |     | ✔   |

**Adicione uma Mensagem Direta a uma conversa existente por ID**

Path: POST /2/dm\_conversations/:dm\_conversation\_id/messages

|     |     |     |
| :--- | :--- | :--- |
| **Descrição** | **Standard v1.1** | **API do X v2** |
| Caminho do endpoint | Não compatível | POST /2/dm\_conversations/:dm\_conversation\_id/messages |
| [Limites de taxa](/pt-BR/x-api/fundamentals/rate-limits) padrão de solicitação |     | 200 solicitações por usuário a cada 15 minutos<br /><br />1000 solicitações por usuário a cada 24 horas<br /><br />15000 solicitações por app a cada 24 horas<br /><br />Esses limites de taxa são compartilhados entre todos os endpoints POST de dm\_conversations. |
| Suporta Mensagens Diretas em grupo |     | ✔   |