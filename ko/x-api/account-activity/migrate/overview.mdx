<div id="v2-account-activity-api-migration-guide">
  # v2 Account Activity API 마이그레이션 가이드
</div>

이 가이드는 기존 Enterprise Account Activity API에서 v2 Account Activity API로 마이그레이션하는 방법을 안내합니다. 핵심 기능은 동일하지만, X API v2와의 일관성을 위해 엔드포인트 구조와 인증 방식이 업데이트되었습니다.

<div id="summary-of-changes">
  ### 변경 사항 요약
</div>

* **API 형식**: 엔드포인트가 /1.1/account\_activity/ 대신 /2/account\_activity/ 기본 경로를 사용합니다.  
* **Webhook 관리**: Webhook 생성, 조회, 검증(CRC), 삭제는 [V2 Webhooks API](https://github.com/m-rosinsky/XWebhookTest/blob/main/app.py)가 처리합니다.  
* **인증**: V2 엔드포인트에는 다음 중 하나가 필요합니다.  
  * 사용자별 작업(예: 사용자 구독)에는 **OAuthUser**(3-legged OAuth).  
  * 앱 수준 작업(예: 구독 조회/삭제)에는 **OAuth2 App Only**(Bearer Token).  
  * V1.1은 경우에 따라 OAuth 1.0a 등 상이한 요구사항을 사용했습니다.  
* **엔드포인트 매핑**:

| V1.1 Endpoint | V2 해당/작업 | 비고 |
| ----- | ----- | ----- |
| POST /1.1/account\_activity/webhooks.json?url=\<URL\> | POST /2/webhooks | [Docs](https://docs.x.com/x-api/webhooks/introduction). OAuth2AppOnly 필요. |
| GET /1.1/account\_activity/webhooks.json | GET /2/webhooks | [Docs](https://docs.x.com/x-api/webhooks/introduction). OAuth2AppOnly 필요. |
| PUT /1.1/account\_activity/webhooks/:webhook\_id.json | PUT /2/webhooks/:webhook\_id | CRC 트리거. [Docs](https://docs.x.com/x-api/webhooks/introduction). OAuth2AppOnly 필요. |
| DELETE /1.1/account\_activity/webhooks/:webhook\_id.json | DELETE /2/webhooks/:webhook\_id | [Docs](https://docs.x.com/x-api/webhooks/introduction). OAuth2AppOnly 필요. |
| POST /1.1/account\_activity/webhooks/:webhook\_id/subscriptions/all.json | POST /2/account\_activity/webhooks/:webhook\_id/subscriptions/all | OAuthUser 필요. |
| GET /1.1/account\_activity/subscriptions/count.json | GET /2/account\_activity/subscriptions/count | OAuth2AppOnly 필요. |
| GET /1.1/account\_activity/webhooks/:webhook\_id/subscriptions/all.json | GET /2/account\_activity/webhooks/:webhook\_id/subscriptions/all | OAuthUser 필요. |
| GET /1.1/account\_activity/webhooks/:webhook\_id/subscriptions/all/list.json | GET /2/account\_activity/webhooks/:webhook\_id/subscriptions/all/list | OAuth2AppOnly 필요. |
| DELETE /1.1/account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all | DELETE /2/account\_activity/webhooks/:webhook\_id/subscriptions/:user\_id/all | OAuth2AppOnly 필요. |
| DELETE /1.1/account\_activity/webhooks/:webhook\_id/subscriptions/all | 사용 중단됨 / 직접 해당 없음 | 개별 삭제를 사용하거나 DELETE /2/webhooks/:webhook\_id로 webhook을 제거하세요. |

* **응답 형식**: AAAPI 문서의 성공 및 오류 응답 구조를 검토하세요.

마이그레이션 시 새 기본 경로로 코드를 업데이트하고, 인증 플로우를 조정하며, [V2 Webhooks API](https://docs.x.com/x-api/webhooks/introduction)를 사용해 webhook을 관리하세요.

<div id="how-to-migrate">
  ### 마이그레이션 방법
</div>

* **패키지 선택**:  
  * Account Activity API 액세스를 위해 Enterprise 또는 Pro 패키지 중에서 선택하세요. 다음을 고려하세요:  
    * 필요한 웹훅 수  
    * 현재/예상 구독 또는 권한이 부여된 사용자 수  
    * X 클라이언트 애플리케이션 수  
    * 원하는 지원 수준(포럼 vs. 관리형 엔터프라이즈 1:1 지원)  
    * 가격 세부 정보(Enterprise는 영업팀 문의)  
* **인증을 OAuth 2.0으로 업데이트**:  
  * X 앱에 “읽기, 쓰기, 다이렉트 메시지 액세스” 권한이 있는지 확인하세요.  
  * V2 엔드포인트에서 OAuth 2.0을 사용하도록 업데이트하세요. 스코프가 변경된 경우 사용자를 다시 인증하세요.  
  * Developer Portal에서 다음을 관리하세요:  
    * OAuth 2.0 액세스 토큰  
    * 클라이언트 ID와 클라이언트 시크릿  
* **웹훅 확인 또는 재구성**:  
  * 기존 웹훅 URL을 사용하거나 새 웹훅을 설정하세요(예: https://your_domain.com/webhook/twitter).  
  * 웹훅을 등록하고 관리하려면 [V2 Webhooks API 문서](https://docs.x.com/x-api/webhooks/introduction)를 따르세요.  
* **샘플 앱:**  
  * [간단한 웹훅 서버](https://github.com/m-rosinsky/XWebhookTest/blob/main/app.py)  
    * CRC 체크에 응답하고 POST 이벤트를 처리하는 방법을 보여주는 단일 파이썬 스크립트입니다.  
  * [Account Activity API 샘플 대시보드](https://github.com/xdevplatform/account-activity-dashboard-enterprise/tree/master)  
    * [bun.sh](http://bun.sh)로 작성된 웹 앱으로, 앱에서 웹훅과 구독을 관리하고 실시간 이벤트를 직접 수신할 수 있습니다.