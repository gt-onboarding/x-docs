---
title: "데이터 인리치먼트: 엔터프라이즈"
---

<div id="introduction">
  ## 소개
</div>

`Enterprise`

Enterprise 보강 정보는 일부 데이터 API의 응답 페이로드에 포함되는 추가 메타데이터입니다. 유료 구독 플랜에서만 제공됩니다.

아래 표는 각 보강 정보에 대한 간략한 설명입니다:

| 보강 정보: | 설명: |
| :--- | :--- |
| 확장 및 향상된 URL | 게시물 본문에 포함된 단축 URL(예: bitly)을 자동으로 확장하고, 대상 페이지의 HTML 제목과 설명 메타데이터를 제공합니다. |
| 일치 규칙 객체 | 수신된 게시물과 일치한 규칙을 나타냅니다. 응답 객체에 규칙 태그와 규칙 ID를 반환합니다. |
| 투표 메타데이터 | 게시물에 투표가 포함되어 있음을 표시하고, 투표 선택지 목록과 투표 기간 및 만료 시간을 포함합니다. |
| 프로필 위치 정보 | 사용자 프로필 위치 데이터에서 도출된 정보로, 가능한 경우 \[경도, 위도] 좌표와 관련 장소 메타데이터를 포함합니다. |

<div id="expanded-and-enhanced-urls">
  ### 확장 및 향상된 URL
</div>

확장 및 향상된 URL 보강 기능은 게시물 본문에 포함된 단축 URL을 자동으로 확장하고, 결과 URL을 페이로드 내 메타데이터로 포함합니다. 또한 이 보강 기능은 대상 페이지의 `title`과 `description`에서 가져온 HTML 페이지 메타데이터도 제공합니다.

**중요한 세부사항:**

- 단축 링크를 해제하기 위해 시스템은 제공된 URL에 HTTP HEAD 요청을 보내고 최종 URL에 도달할 때까지 모든 리디렉트를 따릅니다. 이 최종 URL(페이지의 콘텐츠 자체가 아님)만 응답 페이로드에 포함됩니다.

- URL 보강 기능은 실시간 스트림에 5~10초의 지연을 추가합니다.

- 전체 아카이브 검색 API에 대한 요청의 경우, 확장된 URL 보강 데이터는 13개월 이내의 게시물에만 제공됩니다.

- URL 보강 기능은 게시물 링크(인용 트윗 포함), Moments 링크, 그리고 게시물에 포함된 프로필 링크에는 제공되지 않습니다. 
   

<div id="post-payload">
  #### 게시물 페이로드
</div>

Expanded 및 Enhanced URL 보강 정보는 게시물 페이로드의 `entities` 객체, 특히 `entities.urls.unwound` 객체에서 확인할 수 있습니다. 여기에는 다음 메타데이터 필드가 포함됩니다:

- 확장 URL - `unwound.url`
- 확장 HTTP 상태 코드 - `unwound.status`
- 확장 URL의 HTML 제목 - 최대 300자 - `unwound.title`
- 확장 URL의 HTML 설명 - 최대 1000자 - `unwound.description`

**다음은 URL 보강이 포함된 [entities 객체](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary#x-entities)의 예시입니다:**

```
"entities": {
    "hashtags": [

    ],
    "urls": [
      {
        "url": "https:\/\/t.co\/HkTkwFq8UT",
        "expanded_url": "http:\/\/bit.ly\/2wYTb9y",
        "display_url": "bit.ly\/2wYTb9y",
        "unwound": {
          "url": "https:\/\/www.forbes.com\/sites\/laurencebradford\/2016\/12\/08\/11-websites-to-learn-to-code-for-free-in-2017\/",
          "status": 200,
          "title": "11 Websites To Learn To Code For Free In 2017",
          "description": "It\u2019s totally possible to learn to code for free...but what are the best resources to achieve that? Here are 11 websites where you can get started."
        },
        "indices": [
          10,
          33
        ]
      }
    ],
    "user_mentions": [

    ],
    "symbols": [

    ]
  },
```

**다음은 보강되지 않은 게시물 링크가 포함된 entities 객체의 예시입니다:**

```
"entities": {
  "urls": [{
    "url": "https://t.co/SywNbZdDmb",
    "expanded_url": "https://x.com/XDevelopers/status/1050118621198921728",
    "display_url": "x.com/XDevelopers/s…",
     "indices": [
        142,
        165
     ]
   }
  ]
}
```

<div id="filtering-operators">
  #### 필터링 연산자
</div>

다음 연산자는 URL 메타데이터의 관련 필드를 필터링하고 토큰화된 일치를 제공합니다:

**url:**

- 예시: “url:tennis”
- 단어 ‘tennis’를 포함하는 모든 Expanded URL에 대해 토큰화된 일치
- “url:npr.org”처럼 특정 웹사이트의 링크를 포함하거나 제외하는 필터로도 사용할 수 있습니다

**url\_title:**

- 예시: “url\_title:tennis”
- 단어 ‘tennis’를 포함하는 모든 Expanded URL의 HTML 제목에 대해 토큰화된 일치
- 페이로드에 포함된 HTML 제목 데이터와 일치하며, 최대 300자로 제한됩니다.

**url\_description:**

- 예시: “url\_description:tennis”
- 단어 ‘tennis’를 포함하는 모든 Expanded URL의 HTML 설명에 대해 토큰화된 일치
- 페이로드에 포함된 HTML 설명과 일치하며, 최대 1000자로 제한됩니다.
   

<div id="http-status-codes">
  #### HTTP 상태 코드
</div>

확장된 URL 보강 기능은 풀어내려는 최종 URL의 HTTP 상태 코드도 제공합니다. 일반적으로 200이 반환됩니다. 400대 코드는 URL 해석에 문제가 있음을 나타냅니다.

URL을 풀어내는 과정에서 다양한 상태 코드가 반환될 수 있습니다. URL을 풀어내는 도중 리디렉션을 받으면 다음 중 하나가 발생할 때까지 무기한 따라갑니다.

- 200대 코드에 도달(성공)
- 리디렉션이 아닌 코드에 도달(실패)
- 합리적인 시간 내에 최종 URL을 해석하지 못해 타임아웃 발생(408 - timeout 반환)
- 예외 발생
   

예외가 발생하면 다음과 같이 원인과 반환 상태 코드를 매핑합니다.

| 원인 | 반환 상태 코드 |
| :--- | :--- |
| SSL 예외 | 403 (Forbidden) |
| URL에서 풀어내기 불가로 표시됨 | 405 |
| 소켓 타임아웃 | 408 (Timeout) |
| Unknown Host 예외 | 404 (Not Found) |
| 지원되지 않는 작업 | 404 (Not Found) |
| 연결 예외 | 404 (Not Found) |
| 잘못된 인수 | 400 (Bad Request) |
| 기타 모든 경우 | 400 (Bad Request) |

<div id="matching-rules">
  ### 일치 규칙
</div>

일치 규칙 보강 정보는 수신된 게시물과 어떤 규칙(들)이 일치했는지를 나타내는 메타데이터 객체입니다. 이는 주로 PowerTrack 스트림에서 사용됩니다.

일치는 규칙에 포함된 용어의 정확한 일치로 수행되며, 구두점이 있는 경우와 없는 경우 모두 활동 콘텐츠를 스캔합니다. 대소문자는 구분하지 않습니다. 콘텐츠에 규칙에 정의된 모든 용어가 포함되어 있으면, 일치를 발생시킨 규칙을 나타내는 최상위 수준의 matching\_rules 객체가 포함됩니다.

**PowerTrack**

PowerTrack(실시간, Replay, Historical)을 통해 전달되는 게시물에는 다음과 같이 matching\_rules 객체가 포함됩니다:

```
"matching_rules": [{
        "tag": null,
        "id": 907728589029646336,
        "id_str": "907728589029646336"
    }]
```

PowerTrack에서 `matching_rules` 객체는 해당 결과와 일치한 모든 규칙을 반영합니다. 즉, 특정 게시물과 일치하는 규칙이 둘 이상이더라도 게시물은 한 번만 전달되며, `matching_rules` 요소에는 일치한 모든 규칙이 포함됩니다.

<div id="poll-metadata">
  ### 설문조사 메타데이터
</div>

설문조사 메타데이터는 강화된 네이티브 형식의 페이로드에 포함되며, 모든 제품(실시간 및 히스토리컬 API)에서 무료 보강 정보로 제공됩니다. 이 메타데이터에는 게시물에 설문조사가 포함되어 있는지 여부, 설문조사 선택지 목록, 설문조사 기간과 만료 시간이 담겨 있습니다. 이 보강 정보는 설문조사의 존재를 쉽게 식별할 수 있게 하며, 표시용 설문조사 게시물을 올바르게 렌더링할 수 있도록 합니다.

<div id="important-details">
  ##### 중요 사항:
</div>

- 모든 엔터프라이즈 API(PowerTrack, Replay, Search, Historical PowerTrack)에서 제공
  - _참고:_ Replay 및 Historical PowerTrack의 경우 이 메타데이터는 2017-02-22에 처음 제공되었습니다.
- 투표 정보나 설문 결과는 포함되지 않음
- 현재 필터/연산자 지원 없음
- **보강된 기본 형식**으로만 제공
  - 보강된 기본 형식은 사용자가 제어하는 설정으로, Console에서 언제든지 변경할 수 있습니다: _제품 선택(PowerTrack, Replay, Search) > Settings 탭 > Output Format(데이터를 원래 형식으로 유지)_

<div id="post-payload">
  #### 게시 페이로드
</div>

설문조사 게시물의 페이로드에는 "entities.polls" 객체에 다음 메타데이터가 포함됩니다:

- 위치(1-4)와 옵션 텍스트를 포함하는 최대 4개의 옵션으로 구성된 "options" 배열
- 설문조사 만료 일시
- 설문조사 지속 시간

자세한 내용은 아래 샘플 페이로드를 참조하세요.

<div id="sample-payload">
  #### 샘플 페이로드
</div>

아래는 추가된 투표 메타데이터가 포함된 보강된 네이티브 형식 페이로드의 일부입니다:

```json
"entities":{
          "hashtags":[],
          "urls":[],
          "user_mentions":[],
          "symbols":[],
          "polls":[
             {
                "options":[
                   {
                      "position":1,
                      "text":"The better answer"
                   },
                   {
                      "position":2,
                      "text":"The best answer"
                   }
                ],
                "end_datetime":"Sat Feb 04 15:33:11 +0000 2017",
                "duration_minutes":1440
             }
          ]
       },
```

<div id="profile-geo">
  ### 프로필 지오
</div>

<div id="introduction">
  #### 소개
</div>

많은 X 사용자 프로필에는 사용자가 제공한 공개 위치 정보가 포함되어 있습니다. 이 데이터는 user.location에서 일반 문자열로 반환됩니다([User object data dictionary](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary#native-enriched-user-object) 참조). Profile Geo Enrichment는 가능한 경우 위치 문자열을 지오코딩하고 정규화하여 user.location 값과 관련된 구조화된 지리 데이터를 추가합니다. 위도/경도 좌표와 관련 장소 메타데이터는 엔터프라이즈 API 제품에서 게시 페이로드의 일부로 포함된 경우에만 user.derived.locations에 추가됩니다. 이 데이터는 [enriched native format](/ko/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary)을 사용할 때 제공되며, [PowerTrack rules](/ko/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#enterprise-operators)를 조합해 필터링할 수 있습니다.

<Note>
  **참고:** Profile Geo Enrichment를 생성하는 데 사용되는 일부 지원 지리 데이터는 GeoNames.org에서 제공되며, X는 이를 [Creative Commons Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/us/legalcode) 하에 사용합니다.
</Note>

Profile Geo 데이터는 X의 PowerTrack, Replay, Volume Stream, Search, Historical PowerTrack API에 포함됩니다.

<div id="profile-geo-data">
  #### 프로필 지리 데이터
</div>

| 보강된 네이티브 필드 이름 | 예시 값 | 설명 |
| :--- | :--- | :--- |
| user.derived.locations.country | United States | 게시물을 작성한 사용자의 국가입니다. |
| user.derived.locations.country\_code | US  | 게시물을 작성한 사용자의 국가에 해당하는 두 글자 ISO-3166 국가 코드입니다. |
| user.derived.locations.locality | Birmingham | 게시물을 작성한 사용자의 지역(일반적으로 도시)입니다. |
| user.derived.locations.region | Alabama | 게시물을 작성한 사용자의 지역(일반적으로 주/도)입니다. |
| user.derived.locations.sub\_region | Jefferson County | 게시물을 작성한 사용자의 하위 지역(일반적으로 카운티)입니다. |
| user.derived.locations.full\_name | Birmingham, Alabama, United States | 게시물을 작성한 사용자의 전체 지명(하위 지역 제외)입니다. |
| User.derived.locations.geo | See Below | 게시물을 작성한 사용자의 가장 낮은 세분화 수준의 위치에 해당하는 좌표의 위도/경도 값을 포함한 배열입니다. |

Historical PowerTrack, Search 및 PowerTrack API는 프로필 지리 데이터 기반 필터링을 지원합니다. 프로필 지리 데이터에 사용할 수 있는 연산자에 대한 자세한 내용은 해당 제품 문서를 참조하세요.

<div id="sample-payload">
  #### 샘플 페이로드
</div>

```
{
    "user": {
        "derived": {
            "locations": \[
                {
                    "country": "United States",
                    "country_code": "US",
                    "locality": "Birmingham",
                    "region": "Alabama",
                    "sub_region": "Jefferson County",
                    "full_name": "Birmingham, Alabama, United States",
                    "geo": {
                        "coordinates": \[
                            -86.80249,
                            33.52066
                        \],
                        "type": "point"
                    }
                }
            \]
        }
    }
}
```

<div id="limitations">
  #### 제약 사항
</div>

- Profile Geo 보강은 프로필 위치 문자열에 설명된 지리적 장소 중 최적의 후보를 식별하려고 시도합니다. 유사하거나 모호한 지명 등으로 인해 결과가 항상 정확하지는 않을 수 있습니다.
- 사용자 프로필의 위치 필드(actor.location)에 값이 없는 경우 분류를 시도하지 않습니다.
- 정밀도 수준: Profile Geo 보강이 국가 또는 지역 수준에서만 신뢰할 수 있는 경우, subRegion 및 locality와 같은 더 낮은 수준의 지리 정보는 페이로드에서 제외됩니다.
- Profile Geo 보강은 보강 결과의 정밀도 수준에 대응하는 위도/경도 좌표(단일 지점)를 제공합니다. 이 좌표는 보강된 위치 결과의 지리적 중심을 나타냅니다. 예를 들어 정밀도 수준이 국가인 경우, 해당 좌표는 그 국가의 지리적 중심으로 설정됩니다.
- 주소 속성(locality/region/country/country code)에 제공되는 PowerTrack 연산자는 다양한 규칙 조합을 만들 수 있도록 의도적으로 세분화되어 있습니다. 이름이 같은 위치들 중 특정 위치를 타깃팅해야 할 때는 주소 규칙을 조합하는 것을 고려하십시오. 예를 들어 다음 조합은 “San Francisco, Philippines”와의 일치를 피합니다: profile\_locality:”San Francisco” profile\_region:California 개별 Profile Geo 필드를 타깃팅하는 규칙을 작성할 때는, 세분화 수준을 높일수록 조회되는 결과가 제한된다는 점을 유의하십시오. 경우에 따라 도시 단위 데이터를 보려면, 그 지역이 해당 도시와 상당 부분 겹치는 경우 지역 규칙만 사용하는 편이 나을 수 있습니다. 예: 스위스 취리히는 profile\_region:”Zurich”로 주변 지역까지 효과적으로 타깃팅할 수 있습니다.
- 네이티브 지오 게시물과 함께 사용: Profile Geo 보강은 페이로드의 네이티브 지오 값과는 다른, 게시물용 대체 지리 정보를 제공합니다. 두 지리 정보는 특정 지역과 관련된 가능한 모든 게시물(가용 지오데이터 기준)을 포괄하기 위해 함께 사용할 수 있지만, 개념적으로 동등한 것은 아닙니다.