---
title: 참여도 API
---

<div id="overview">
  ## 개요
</div>

[`Enterprise`](https://developer.x.com/en/products/x-api/enterprise)

_이는 당사의 관리형 액세스 레벨에서만 제공되는 엔터프라이즈 API입니다. 이 API를 사용하려면 먼저 엔터프라이즈 영업팀을 통해 계정을 설정해야 합니다. [자세히 알아보기](/ko/x-api/enterprise-gnip-2.0/enterprise-gnip)_

Engagement API는 게시물 노출 및 참여 지표에 대한 액세스를 제공합니다. 대부분의 지표와 엔드포인트는 [OAuth 1.0a User Context](/ko/resources/fundamentals/authentication)로 인증해야 하지만, 공개 Favorite, Retweet, Reply, Video Views 지표는 [OAuth 2.0 Bearer Token](/ko/resources/fundamentals/authentication#oauth-2-0)과 /totals 엔드포인트로 액세스할 수 있습니다.  

**참고:** 일부 X 웹 대시보드에 보고된 데이터와 Engagement API에 보고된 데이터 간에는 차이가 있을 수 있습니다. 이는 웹 대시보드가 일반적으로 선택한 기간 내에 발생한 참여 및/또는 노출만 표시하기 때문입니다. 예를 들어, 웹 대시보드는 달력상 한 달 동안의 게시물 참여만 보여줄 수 있지만, Engagement API는 요청한 기간 내에서 해당 월을 넘어 발생한 참여도 포함해 표시할 수 있습니다. 이러한 경우에는 Engagement API의 데이터를 신뢰 가능한 기준으로 보아야 합니다.
 

<div id="request-endpoints">
  ### 요청 엔드포인트
</div>

Engagement API에는 세 가지 엔드포인트가 있습니다.

#### 현재 합계: \[/totals]

- 요청은 지정한 게시물에 대해 노출수 합계 지표와 참여수 합계 지표를 반환합니다
- 다음 지표로 제한됩니다: Impressions, Engagements, Favorites, Replies, Retweets, Quote Tweets, Video Views
- OAuth 1.0a User Context를 사용하여 **최근 90일 이내**에 생성된 게시물의 **Impressions** 및 **Engagements** 지표 조회를 지원합니다
- OAuth 2.0 Bearer 토큰을 사용하여 **모든 게시물**의 **Favorites, Retweets, Quote Tweets, Replies,** 및 **Video Views** 지표 조회를 지원합니다
- 결과는 요청 시점의 최신 노출수 및 참여수 합계를 기준으로 산출됩니다
- 다양한 @handle 전반에서 대시보드 보고를 구동하고 참여율을 계산하는 데 적합합니다
- 요청당 최대 250개 게시물의 지표 요청을 지원합니다
   

#### 지난 28시간: \[/28hr]

- 요청은 노출의 총합 지표, 참여의 총합 지표, 그리고 지난 28시간 동안 발생한 개별 참여 지표의 분해 결과를 반환할 수 있습니다
- 데이터는 게시물 ID별로, 그리고 시계열 집계로서 일 또는 시간 단위로 그룹화할 수 있습니다
- 최근에 생성된 콘텐츠의 성과를 추적하는 데 적합합니다
- 사용 가능한 모든 지표를 지원합니다
- 요청당 최대 25개 게시물에 대한 지표 요청을 지원합니다
   

#### 이력: \[/historical]

- 요청은 노출 수, 참여 수, 그리고 개별 참여 지표의 분해 데이터를 최근 1년 범위에서 반환하며, 기준은 참여 시점입니다(게시 생성 시점이 아님).
- 시작 날짜와 종료 날짜 매개변수를 지원하여 최대 4주 기간 내에서 특정 기간으로 범위를 좁힐 수 있습니다.
- 게시 참여 데이터는 과거 365일로 제한됩니다.
- 데이터는 게시 ID별로, 그리고 집계된 시계열에서는 일 단위 또는 시간 단위로 그룹화할 수 있습니다.
- 최근 성과를 과거 기준과 비교 평가하거나 @handle의 성과에 대한 이력적 관점을 구축하는 데 적합합니다.
- 사용 가능한 모든 지표를 지원합니다.
- 요청당 최대 25개의 게시에 대한 지표 요청을 지원합니다.

<div id="available-metrics">
  ### 사용 가능한 지표
</div>

아래 표는 Engagement API를 통해 조회할 수 있는 지표 유형을 설명합니다.

아래 지표에 대해 더 알아보려면 [지표 해석 페이지](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#interpreting-the-metrics)를 참조하세요.

| 지표 | 엔드포인트 가용성 | 사용자 컨텍스트 필요 여부 | 설명 |
| :--- | :--- | :--- | :--- |
| impressions | All | Yes | 게시물이 조회된 횟수입니다. 이 지표는 지난 90일 이내에 게시된 게시물에만 제공됩니다. |
| engagements | All | Yes | 사용자가 게시물과 상호작용한 횟수입니다. 이 지표는 지난 90일 이내에 게시된 게시물에만 제공됩니다. |
| favorites | All | Yes - /28hrs & /Historical<br /><br />No - /totals | 게시물이 즐겨찾기에 추가된 횟수입니다. |
| retweets | All | Yes - /28hrs & /Historical<br /><br />No - /totals | 게시물이 리트윗된 횟수입니다. |
| quote\_tweets | /totals | No - /totals | 댓글을 덧붙여 리트윗된(인용) 횟수입니다. |
| replies | All | Yes - /28hrs & /Historical<br /><br />No - /totals | 게시물에 답글이 달린 횟수입니다. |
| video\_views | All | Yes - /28hrs & /Historical<br /><br />No - /totals | 해당 게시물의 동영상이 최소 2초 동안 화면의 50% 이상 표시된 횟수입니다.<br /><br />동영상 조회수는 게시된 지 1,800일 이하인 게시물에만 제공됩니다. 1,800일을 초과한 게시물에 대해 동영상 조회수를 요청하면, 응답에는 요청한 다른 지표가 담긴 별도 객체와 함께 다음 객체가 포함됩니다:<br /><br />"unsupported\_for\_video\_views\_tweet\_ids": \["TWEET\_ID"]<br /><br />주의: X 소유 및 운영 플랫폼(모바일 앱과 웹사이트)에 표시되는 동영상 조회수와 /28hr 및 /historical 엔드포인트를 통해 받는 수치 간에는 차이가 있을 수 있습니다.  <br /><br />\* X 사용자 인터페이스와 /totals 엔드포인트에 표시되는 동영상 조회수는 해당 동영상이 게시된 모든 게시물을 합산한 값입니다. 즉, 동영상이 리트윗되거나 별도의 게시물로 재게시된 경우를 포함해 모든 인스턴스의 조회수를 합친 수치가 UI에 표시됩니다. 이 지표에는 GIF의 동영상 조회수는 포함되지 않습니다.<br />\* /28hr 및 /historical 엔드포인트에서 제공되는 동영상 조회수는 지표를 확인 중인 해당 특정 게시물에서 발생한 조회수만 포함합니다. 이 지표에는 GIF의 동영상 조회수는 포함되지 않습니다. |
| media\_views | /28hr /historical | Yes | 동영상, GIF, 이미지 전반에서 자동재생 및 클릭을 포함한 모든 미디어 조회수입니다. |
| media\_engagements<br /><br />([formerly Media Clicks](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#recent-changes-to-the-engagement-api)) | /28hr /historical | Yes | 게시물의 이미지나 동영상 등 미디어가 클릭된 횟수입니다. |
| url\_clicks | /28hr /historical | Yes | 게시물 내 URL이 클릭된 횟수입니다. |
| hashtag\_clicks | /28hr /historical | Yes | 게시물 내 해시태그가 클릭된 횟수입니다. |
| detail\_expands | /28hr /historical | Yes | 더 많은 세부정보를 보기 위해 게시물을 클릭한 횟수입니다. |
| permalink\_clicks | /28hr /historical | Yes | 게시물의 퍼머링크(해당 게시물 전용 웹페이지)가 클릭된 횟수입니다. |
| app\_install\_attempts | /28hr /historical | Yes | 게시물에서 앱 설치 이벤트가 발생한 횟수입니다. |
| app\_opens | /28hr /historical | Yes | 게시물에서 앱 열기 이벤트가 발생한 횟수입니다. |
| email\_tweet | /28hr /historical | Yes | 게시물이 이메일로 공유된 횟수입니다. |
| user\_follows | /28hr /historical | Yes | 이 게시물에서 작성자(사용자)를 팔로우한 횟수입니다. || user\_profile\_clicks | /28hr /historical | 예 | 이 포스트에서 사용자(포스트 작성자)의 프로필이 클릭된 횟수입니다. |

<div id="engagement-groupings">
  ### 참여 그룹화
</div>

그룹화는 반환된 참여 지표를 원하는 방식으로 구성할 수 있게 해줍니다. 요청당 최대 3개의 그룹화를 포함할 수 있습니다. 지표는 다음 값 중 하나 이상으로 그룹화할 수 있습니다:

_세 엔드포인트 모두에서 지원:_

- tweet.id
- engagement.type
   

_`/28hr` 및 `/historical`은 시계열 지표를 제공하므로 다음도 지원합니다:_

- engagement.day
- engagement.hour

그룹화에 대해 자세히 알아보려면 가이드 섹션의 [Engagement API Grouping](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) 페이지를 방문하세요.

<div id="guides">
  ## 가이드
</div>

<div id="developer-getting-started-guide">
  ### 개발자 시작 안내서
</div>

<div id="introduction">
  #### 소개
</div>

이 문서는 개발자가 Engagement API를 통합하는 방법을 소개하기 위한 것입니다. 먼저 왜 통합해야 하는지부터 살펴보고, 이어서 기술적인 구현 방법을 자세히 다루겠습니다.

<div id="what-does-the-engagement-api-provide">
  ##### **Engagement API는 무엇을 제공하나요?**
</div>

- Engagement API는 [3-legged OAuth](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)를 통해 해당 계정이 귀하의 앱이 자신의 대신 지표를 요청하도록 권한을 부여했을 경우, 지난 90일 동안 해당 X 계정이 소유한 게시물에 대한 노출 수와 참여 데이터를 제공합니다. 이 강력하면서도 구현이 쉬운 솔루션은 노출 수와 URL 클릭, #해시태그 클릭 등과 같은 심층 참여 지표에 즉시 접근할 수 있게 해줍니다.
- Engagement API는 모든 게시물에 대해 즐겨찾기, 리트윗, 인용 트윗, 답글, 동영상 조회수의 총합 지표를 제공합니다. 이는 개별 게시물 또는 게시물 묶음에 대한 기본 참여 데이터를 얻는 강력한 방법으로 활용할 수 있습니다.
- Engagement API는 고객이 15개 이상의 성과 지표로 콘텐츠 성과를 효과적으로 측정해 X에서의 ROI를 산출할 수 있도록 함으로써, 소셜 리스닝, 마케팅, 퍼블리싱 플랫폼에 새로운 가치를 제공합니다.
- Engagement API는 요청/응답 방식의 API로, 앱 개발자가 게시물 ID, 요청 지표, 기간을 포함한 요청을 보내면 API가 해당 데이터를 즉시 반환합니다.
   

<div id="why-integrate-example-use-cases">
  ##### **왜 통합해야 할까요? 사용 사례 예시**
</div>

- 내 콘텐츠의 전체 도달 범위를 파악해 조회한 사람이 얼마나 되는지 확인합니다. 동영상 시청 수, 링크 클릭 수, 해시태그 클릭 수, 앱 설치 수를 확인합니다.
- 총합 및 시계열 참여 지표를 생성합니다.
- 모든 공개 게시물에 대한 기본 참여 지표(좋아요, 리트윗, 인용 트윗, 답글)를 파악합니다.
- 이러한 지표를 활용해 어떤 유형의 게시물이 효과적인지 판단하고, 더 자주 게시하여 노출 수와 참여 수를 늘립니다.
- 내 게시물 중 하나가 좋아요 100회를 달성하거나 다른 임계값에 도달할 때마다(예: 다른 보유 계정의 콘텐츠를 리트윗) 마케팅 작업을 자동화합니다.
- A/B 테스트 도구로 활용하기 위해 캠페인 간 벤치마킹 및 비교를 수행합니다.
- 고객 지원 부서에 어떤 유형의 콘텐츠가 반응이 좋은지 분석하여 언제, 어떻게 응답할지 결정합니다.
- 내 플랫폼에서 게시된 콘텐츠의 분석을 표시합니다.
   

[Engagement API는 2016년에 출시](https://blog.x.com/official/en_us/a/2016/gnip-s-engagement-api-is-now-generally-available.html)되었으며, 심층 참여 지표를 대규모로 제공한 최초의 X API였습니다. Engagement API는 사용이 쉽고 프로세스 자동화를 지원합니다. 다음은 예시 통합을 설명하는 사례 연구입니다:

- [적십자와 함께 캠페인 성과 측정하기](https://blog.x.com/developer/en_us/topics/spotlight/2016/measuring-campaign-success-with-the-red-cross.html)[](https://simplymeasured.com/blog/true-twitter-impressions-and-url-clicks-new-from-simply-measured/#sm.0007werel134td8zqf02m2mduumr6)

이제 Engagement API가 필요한 이유를 살펴보았으니, 기술적 세부 사항을 자세히 알아보겠습니다.

<div id="integrating-the-engagement-api">
  #### Engagement API 통합하기
</div>

<div id="introduction-to-api">
  ##### **API 소개**
</div>

Engagement API는 JSON으로 인코딩된 요청을 받아 JSON으로 인코딩된 참여 지표로 응답하는 간단한 RESTful API입니다. 요청은 세 가지 주요 부분으로 구성됩니다(자세한 내용은 링크 참조).

- **_Post ID_** 배열
- 관심 있는 [지표 유형](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes)을 지정하는 배열. 유형에는 ‘impressions’, ‘retweets’, ‘hashtag\_clicks’, ‘user\_follows’ 등이 포함됩니다.
- [Engagement 그룹화](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings). API 응답에서 참여 데이터를 어떻게 배열할지 나타내는 JSON 구조입니다.

많은 경우, Engagement 유형과 그룹화는 요청마다 비교적 일정하고 Post ID만 변경됩니다.

Engagement API는 [세 가지 엔드포인트](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#RequestEndpoints)를 제공합니다.

- **Totals** - 게시물에 대한 참여 총합을 제공합니다. 일부 지표는 모든 게시물에 대해 제공되지만, 일부는 지난 90일에 대해서만 제공됩니다.
- **28 hour** - 최근 28시간의 시계열 참여 지표를 제공합니다.
- **Historical** - 2014년 9월 1일 이후 게시된 게시물에 대해 최대 연속 4주의 시계열 참여 지표를 제공합니다.

**/totals** 엔드포인트는 **요청당 최대 250개의 게시물**에 대한 지표 요청을 지원합니다. **/28hour** 및 **/historical** 엔드포인트는 **요청당 25개**를 지원합니다.

Engagement API에 대한 액세스에 대해 살펴본 후, API 요청 만들기, OAuth 개요, 기타 기술 자료 링크를 안내합니다.

<div id="getting-api-access">
  ##### **API 액세스 받기**
</div>

이 문서를 읽고 계시다면 이미 Engagement API 액세스를 보유하고 있을 가능성이 큽니다. 그렇지 않다면 Enterprise 계정 관리자에게 문의하거나 [여기](/ko/x-api/enterprise-gnip-2.0/enterprise-gnip)에서 Enterprise 액세스를 신청하세요.

첫 단계는 [developer portal](/ko/resources/fundamentals/developer-portal)에 접속해 승인된 개발자 계정으로 [X 앱](/ko/resources/fundamentals/developer-apps)을 생성하는 것입니다. 액세스 제공을 위해 계정 관리자는 이 애플리케이션에 연결된 숫자형 App ID가 필요합니다. 개발자 계정을 신청해야 하는 경우 [여기](/ko/resources/fundamentals/developer-apps)에서 신청할 수 있습니다.

<div id="making-a-request">
  ##### **요청 보내기**
</div>

Engagement API에 요청을 보내는 일은 간단합니다. 이번 예시에서는 다음 두 개의 [@XDevelopers](https://x.com/XDevelopers) 게시물에 대해 전체 리트윗, 인용 트윗, 즐겨찾기, 답글 수를 요청합니다:

> 1/ 오늘 저희는 X API 플랫폼의 미래에 대한 비전을 공유합니다![https://t.co/XweGngmxlP](https://t.co/XweGngmxlP)
>
> — Twitter Dev (@TwitterDev) [2017년 4월 6일](https://x.com/TwitterDev/status/850006245121695744)

> 당신의 게시물에 대한 게시물을 놓치지 마세요.
>
> 이제 iOS에서 댓글이 포함된 리트윗을 한곳에서 모두 볼 수 있습니다. [pic.x.com/oanjZfzC6y](https://t.co/oanjZfzC6y)
>
> — X (@X) [2020년 5월 12일](https://x.com/status/1260294888811347969?ref_src=twsrc%5Etfw)

첫 단계는 JSON으로 API 요청을 구성하는 것입니다. 두 개의 게시물 ID를 배열에 넣고, 관심 있는 참여 유형 배열을 추가하며, 응답에서 지표를 어떻게 배열할지 지정하는 사용자 지정 이름의 “groupings” JSON 객체를 포함합니다. 요청은 다음과 같습니다:

```json
{
  "tweet_ids": [
    1260294888811347969, 850006245121695744
  ],
  "engagement_types": [
    "retweets", "quote_tweets", "favorites", "replies"
  ],
  "groupings": {
    "engagement-types-by-id": {
      "group_by": [
        "Tweet.id", "engagement.type"
      ]
    }
  }
}
```

이 총합 지표를 가져오기 위해 이 JSON 요청을 https://data-api.x.com/insights/engagement/totals 엔드포인트에 POST합니다.

요청 본문이 JSON으로 인코딩되었고 Gzip이 적용되었음을 나타내기 위해 다음 헤더를 포함합니다(요청 본문이 커질 수 있음).

- Content-Type: application/json
- Accept-Encoding: gzip
   

요청을 보낼 때는 OAuth로 인증하며, 자세한 내용은 다음 섹션에서 설명합니다.

API는 다음과 같은 페이로드를 반환합니다:

```json
{
  "grouping name": {
    "1260294888811347969": {
      "favorites": "17111",
      "quote_tweets": "3254",
      "replies": "1828",
      "retweets": "5218"
    },
    "850006245121695744": {
      "favorites": "492",
      "quote_tweets": "66",
      "replies": "42",
      "retweets": "324"
    }
  }
}
```

응답에는 “groupings” 정의에 따라 요청한 지표가 구조화되어 있으며, 먼저 게시물 ID별로, 다음 레벨에서 참여 유형별로 지표가 나열됩니다.

간단하죠. OAuth 인증이 처음이라면 다음 섹션을 확인하세요.

<div id="authenticating-with-oauth">
  #### OAuth로 인증하기
</div>

OAuth는 기술 업계에서 널리 사용되는 인증 표준입니다. 이미 OAuth를 사용 중이라면(다른 X API와 함께 사용하고 있을 수도 있습니다) 아마도 복잡한 세부 사항을 추상화해 주는 언어별 OAuth 패키지를 사용하고 있을 것입니다. OAuth가 처음이라면 [X API와 함께하는 OAuth](/ko/resources/fundamentals/authentication) 페이지를 방문하거나 [https://oauth.net](https://oauth.net/)에서 자세히 알아보세요. 그런 다음 사용하는 통합 언어에 맞는 OAuth 패키지를 찾아 시작할 것을 권장합니다. 이러한 패키지를 사용하면 보통 키와 토큰을 설정하고, HTTP 객체를 생성한 뒤 그 객체로 요청을 보내는 흐름으로 인증이 이루어집니다.

예를 들어, Ruby 환경에서는 다음 의사 코드가 Ruby gem ‘oauth’를 사용해 OAuth가 활성화된 앱을 만들고 POST 요청을 보내는 방법을 보여줍니다:  

```js
require 'oauth'

#위와 같이 JSON 요청을 구성합니다.
request = make_json_request()

#앱의 consumer key와 secret으로 앱 consumer 객체를 생성합니다.
consumer = OAuth::Consumer.new(keys['consumer_key'], keys['consumer_secret'], {:site => 'https://data-api.x.com'})
#권한을 부여한 계정이 제공한 토큰으로 사용자 토큰을 생성합니다. 앱 전용 요청(권한이 필요 없는 게시물을 /totals 엔드포인트로 조회하는 경우)을 하는 때에는 이 단계를 건너뛸 수 있습니다.
token = {:oauth_token => keys['access_token'], :oauth_token_secret => keys['access_token_secret']}

#OAuth가 활성화된 앱 객체를 생성합니다.
app = OAuth::AccessToken.from_hash(consumer, token)
#POST 요청을 보냅니다.
result = app.post("/insights/engagement/totals", request, {"content-type" => "application/json", "Accept-Encoding" => "gzip"})
```

Engagement API는 앱 전용과 사용자 컨텍스트 인증을 모두 지원합니다. /totals 엔드포인트로 소유하지 않은 공개 게시물의 참여 지표를 수집하는 경우 사용자 권한이 필요하지 않으며 앱 전용 인증을 사용할 수 있습니다. 이때는 앱 키와 시크릿만으로 인증합니다.

OAuth는 또한 사용자와 연관된 토큰을 사용해 앱이 “다른 사용자를 대신하여” API 요청을 수행할 수 있게 합니다. 소유한 게시물, 즉 사용자 토큰을 보유한 사용자가 게시한 게시물에 대한 Engagement 지표를 생성하는 경우에는 사용자 컨텍스트로 요청하게 되며, 이는 앱 키와 사용자별 액세스 토큰을 모두 사용해 인증한다는 뜻입니다. 이러한 사용자 액세스 토큰은 일반적으로 '[X로 로그인](/ko/resources/fundamentals/authentication#log-in-with-x)' 프로세스를 통해 제공되거나 사용자로부터 직접 제공받을 수 있습니다(사용자로부터 토큰을 직접 받는 경우 [xurl](https://github.com/xdevplatform/xurl)을 사용해야 합니다). 사용자가 토큰을 제공하면, 사용자가 토큰을 재설정하거나 비밀번호를 변경하지 않는 한 토큰은 만료되지 않으며, 사용자를 대신해 Engagement API로 요청하는 데 계속 사용할 수 있습니다. 해당 경우에는 새 토큰을 제공받아야 합니다.

어떤 지표에 어떤 인증이 필요한지는 [이 표](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings)에서 확인할 수 있습니다.
 

<div id="selecting-an-engagement-api-endpoint">
  ### Engagement API 엔드포인트 선택
</div>

Engagement API는 세 가지 엔드포인트를 제공합니다:

- **[Totals](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)** - ‘owned’ 또는 ‘unowned’ 게시물에 대해 선택된 지표의 총계를 제공합니다. 일부 지표는 모든 게시물에 대해 제공되며, 일부 지표는 최근 90일 내 게시물에만 제공됩니다. 요청당 게시물 250개까지 지원합니다.
- **[28 hour](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement)** - 최근 28시간 동안의 ‘owned’ 게시물에 대한 시계열 참여(Engagement) 지표를 제공합니다. 요청당 게시물 25개까지 지원합니다.
- **[Historical](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)** - 2014년 9월 1일 이후 게시된 ‘owned’ 게시물에 대해 최대 4주 연속 구간의 시계열 참여(Engagement) 지표를 제공합니다. 요청당 게시물 25개까지 지원합니다.
   

각 엔드포인트는 고유한 특성이 있습니다. 세 가지를 모두 사용할 계획이든, 사용 사례에 가장 적합한 하나를 선택하려는 것이든, 이들 간의 차이를 이해하는 것이 중요합니다.

아래에서는 핵심 개념을 소개하고 세 엔드포인트를 더 자세히 살펴본 후, 일반적으로 특정 엔드포인트에 매핑되는 예시 사용 사례를 제시합니다. 이 정보가 세 가지를 보다 효율적으로 통합하거나 단일 엔드포인트 중 목적에 가장 적합한 것을 결정하는 데 도움이 되길 바랍니다.
 

<div id="key-concepts">
  #### 주요 개념
</div>

세 가지 Engagement API 엔드포인트가 제공하는 기능과 데이터의 차이를 보여 주는 데 유용한 핵심 개념이 몇 가지 있습니다.
 

<div id="impressions-and-engagement-metrics">
  ##### 노출 및 참여 지표
</div>

노출은 유기적 맥락에서 X 플랫폼 내 특정 게시물이 조회된 횟수를 의미합니다. 프로모션 또는 유료 맥락에서 노출된 게시물로 발생한 노출은 포함되지 않습니다. Engagement API 도입 이전에는 게시물 노출이 잠재적 조회 수의 지표에 불과했습니다. 작성자 계정과 해당 콘텐츠를 리트윗한 계정의 팔로워 수를 합산하는 방식이었으며, 사용자가 실제로 게시물을 보지 못하는 일반적인 상황은 반영하지 못했습니다.

Engagement API가 산출하는 노출 지표는 게시물이 화면에 실제로 렌더링되어 표시된 횟수를 측정합니다. 팔로워가 게시물을 놓친 경우에는 노출로 집계되지 않습니다.

Engagement API는 게시물이 노출되었을 때 사용자가 수행할 수 있는 개별 행동을 나타내는 14가지 고유한 참여 [지표 유형](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#available-metrics)에 대한 지표를 제공합니다. 여기에는 리트윗, 좋아요, 답글, #해시태그·링크·미디어 등의 엔터티 클릭, 작성자 팔로우, 작성자 프로필 조회가 포함됩니다. 이러한 개별 행동은 모두 단일 참여(Engagements) 지표로 집계됩니다.

<div id="owned-and-unowned-x-content">
  ##### 소유 콘텐츠와 비소유 콘텐츠
</div>

Engagement는 소유 게시물과 비소유 게시물을 명확히 구분합니다. 소유 게시물은 본인 계정에서 게시된 게시물이거나, 해당 게시물의 Engagement 데이터를 요청할 수 있도록 권한을 받은 게시물입니다. 다른 X API와 마찬가지로, 다른 X 사용자/계정이 귀하를 대신해 API 요청을 보낼 수 있도록 액세스 토큰을 공유하면 권한을 얻게 됩니다. 이러한 토큰을 얻는 일반적인 방법은 [Sign in with X 프로세스](/ko/resources/fundamentals/authentication#log-in-with-x)를 사용하는 것입니다.

/totals 엔드포인트는 소유 및 비소유 게시물 모두에 대한 참여 데이터를 제공합니다. 비소유 게시물의 경우 게시물 화면에 공개적으로 표시되는 Favorite, Retweet, Reply와 같은 참여 지표를 요청할 수 있습니다. Engagement API가 이러한 지표와 관련해 제공하는 가치는 이 지표들을 대규모로 자동화하여 수집할 수 있다는 점입니다. 소유 게시물의 경우 /totals 엔드포인트는 Impression과 (총) Engagement 지표도 제공합니다.

/28hr 및 /historical 엔드포인트는 소유 게시물에 대해서만 지표를 제공하므로, 이 엔드포인트에 요청할 때는 사용자 컨텍스트를 함께 전달해야 합니다.

<div id="total-and-time-series-engagement-data">
  ##### 총계 및 시계열 참여 데이터
</div>

이름에서 알 수 있듯 /totals 엔드포인트는 각 참여 유형에 대해 총계만 제공합니다. 이 수치는 게시물이 게시된 이후 현재까지의 누적 총계를 나타냅니다. 게시 직후 해당 지표를 반복해서 요청하면, 요청할 때마다 이 총계가 달라지는 경우가 흔합니다.

/28hr 및 /historical 엔드포인트는 총계와 시계열 데이터를 모두 제공합니다. 시계열 데이터를 요청하면 참여 지표를 일 단위 또는 시간 단위로 집계할 수 있습니다.   

/28hr 및 /historical 엔드포인트로 시계열 데이터를 요청하는 방법은 [engagement groupings](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) 문서를 참조하세요.

<div id="endpoints-and-example-use-cases">
  #### 엔드포인트와 예시 사용 사례
</div>

위에서 살펴본 특성과 차이점을 고려하면, 각 엔드포인트는 일반적으로 서로 다른 유형의 사용 사례에 대응합니다. 특정 사용 사례에 가장 적합한 엔드포인트를 선택할 수 있도록 아래에 예시 사용자 요청과 이를 가장 잘 충족하는 엔드포인트를 제시합니다.

<div id="totals">
  ##### **/totals**
</div>

- 특정 지표 유형(노출수, 참여수, 좋아요, 리포스트, 인용 리포스트, 답글, 동영상 조회수)만 필요합니다.
- 소유한 게시물뿐 아니라 모든 게시물에 대한 기본 참여 데이터를 조회할 수 있어야 합니다.
- 경쟁사 대비 성과를 비교하고 싶습니다.
- 내가 소유하지 않은 게시물을 포함하는 해시태그나 캠페인의 기본 참여 통계를 추적하고 싶습니다.
- 데이터를 일별 또는 시간별로 나눌 필요는 없으며, 요청 시점의 현재 합계만 필요합니다.
- 보고서나 대시보드에 표시할 단일 지표가 필요하며, 데이터를 저장할 계획은 없습니다.
- 페이지 로드 시 데이터를 표시해야 하며, 요청 한 번으로 응답만 받으면 됩니다.
- 하루에 수십만에서 수백만 건의 게시물에 대한 데이터를 조회할 수 있어야 합니다.
   

<div id="28hr">
  ##### **/28hr**
</div>

- 17개 모든 지표 유형에 대한 접근이 필요합니다.
- 최근 28시간 내에 게시된 최신 게시물의 데이터를 표시하고 싶습니다.
- 중요한 데이터를 가져오기 위해 하루에 한 번 실행되는 작업이 있으며, 전일 데이터만 수집하면 됩니다.
- 지표를 일별 또는 시간별로 분리해 확인할 수 있어야 합니다.
- 대시보드에서 시간대별 활동의 시계열 분포를 보여주고 싶습니다.
- 하루 수십만 건의 게시물에 대해 높은 수준의 접근 한도가 필요합니다.
- 저장소 역량이 있어 하루에 한 번 데이터를 새로고침하고 누적 합계를 유지할 수 있습니다.
   

<div id="historical">
  ##### **/historical**
</div>

- 17가지 모든 지표 유형에 접근할 수 있어야 합니다.
- 2014년 9월까지 거슬러 올라가는 게시물의 과거 데이터를 가져와야 합니다.
- 캠페인을 비교하는 상세한 과거 분석을 제공하고 싶습니다.
- 지표를 일 또는 시간 단위로 분리해야 합니다.
- Engagement API에 대한 높은 수준의 액세스는 필요 없으며, 하루에 수백 개 또는 수천 개의 게시물 데이터만 조회하면 됩니다.

<div id="engagement-api-key-characteristics">
  ### Engagement API 주요 특성
</div>

- JSON 데이터를 제공하고, JSON 본문을 포함한 POST 요청을 지원하는 **RESTful API**입니다.
- **요청 유형:** 클라이언트 앱은 다음 유형의 요청을 보낼 수 있습니다.
  - **전체 참여 수** -- /totals 엔드포인트로의 HTTP POST 요청
  - **최근 28시간 참여 수** -- /28hr 엔드포인트로의 HTTP POST 요청
  - **과거 참여 수** -- /historical 엔드포인트로의 HTTP POST 요청
- **OAuth 인증:**
  - [OAuth 1.0 사용자 컨텍스트](/ko/resources/fundamentals/authentication): [3-legged OAuth](https://developer.x.com/resources/fundamentals/authentication/obtaining-user-access-tokens)를 사용해 귀하의 앱을 승인한 사용자가 소유한 게시물에 대해 모든 이용 가능한 지표에 접근할 수 있습니다. 요청 시 해당 사용자의 액세스 토큰을 사용해야 합니다.[](/ko/resources/fundamentals/authentication)
  - [OAuth 2.0 Bearer Token](/ko/resources/fundamentals/authentication#oauth-2-0): 선택된 지표(Retweet, Quote Tweet, Reply, Favorite, Video View)는 모든 공개 게시물에 대해 사용할 수 있습니다.
- **요청 메타데이터 및 구조**: 요청 데이터는 게시물 ID 배열, 참여 유형 배열, 참여 그룹화 구조로 구성된 JSON 객체입니다.
- **요청당 게시물 수:**
  - /totals 엔드포인트: 게시물 ID 250개
  - /28hr 엔드포인트: 게시물 ID 25개
  - /historical 엔드포인트: 게시물 ID 25개
- **참여 지표 가용성:**
  - **/totals** -- 게시물이 게시된 시점부터의 지표 합계. Impression과 Engagement는 최근 90일 내에 게시된 게시물에 대해 제공되며, Retweet, Quote Tweet, Reply, Favorite, Video View는 모든 게시물에 대해 제공됩니다.
  - **/28hr** -- 요청 시점 기준 최근 28시간.
  - **/historical** -- 2014년 9월 1일부터 시작하는 임의의 28일 기간.
- **지표 유형**: 각 요청에는 [Metric Types](http://support.gnip.com/apis/engagement_api/overview.html#EngagementTypes) 배열이 포함됩니다. 가용성은 엔드포인트에 따라 다르며, /totals 엔드포인트의 경우 게시물이 사용자 권한을 받았는지 여부에 따라 달라집니다.
  - /totals 엔드포인트:
    - 모든 게시물: Favorite, Retweet, Quote Tweet, Reply, Video View
    - OAuth 1.0a 사용자 컨텍스트 필요: Impression, Engagement, Favorite, Reply, Retweet
  - /28hr 및 /historical 엔드포인트(OAuth 1.0a 사용자 컨텍스트 및 게시물 소유자의 액세스 토큰 필요): Impression, Engagement, Favorite, Reply, Retweet, URL Click, Hashtag Click, Detail Click, Permalink Click, Media Click, App Install Attempt, App Open, Post Email, Video View, Media View
- **참여 그룹화:** 각 요청에는 [Engagement Groupings](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#engagement-api-groupings) 배열이 포함됩니다. 이러한 그룹화를 통해 반환되는 지표의 구성 방식을 사용자 지정할 수 있습니다. 각 요청에는 최대 세 가지 그룹화를 포함할 수 있습니다. 지표는 다음 값으로 구성할 수 있습니다.
  - 모든 엔드포인트: 게시물 ID, Engagement Type
  - /28hr 및 /historical 엔드포인트: 다음 추가 그룹화를 지정하면 시계열 데이터를 제공합니다: Engagement Day, Engagement Hour
- **통합 관련 기대 사항:** 귀하의 팀은 다음에 대한 책임이 있습니다.
  - 요청에 포함된 게시물 ID의 참여 지표를 반환하도록 Engagement API로 HTTP 요청을 전송할 수 있는 클라이언트 앱을 생성하고 유지 관리합니다.
- **제한 사항**
- Video View는 게시된 지 1,800일 이하인 게시물에만 제공됩니다.

<div id="authenticating-with-the-engagement-api">
  ### Engagement API 인증
</div>

> **참고**:
>
> API를 사용하기 전에 X가 귀하의 개발자 앱에 대해 Engagement API 접근 권한을 활성화해야 합니다. 이를 위해 인증에 사용할 앱 ID를 계정 매니저 또는 기술 지원팀에 공유했는지 확인하세요.

Engagement API에서는 두 가지 인증 방법을 제공합니다: [OAuth 1.0a](/ko/resources/fundamentals/authentication#oauth-1-0a-2) 및 [OAuth 2.0 Bearer Token](/ko/resources/fundamentals/authentication#bearer-token-also-known-as-app-only).

**OAuth 2.0 Bearer Token**(“application-only”라고도 함)은 공개적으로 제공되는 참여 지표에 접근할 수 있게 해줍니다. 이 인증 방법은 [/totals endpoint](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-totals)에 요청할 때 공개 게시물에 대해 즐겨찾기(좋아요), 리포스트, 인용 게시물, 답글 및 동영상 조회수의 총합을 조회하는 데 사용할 수 있습니다.

**OAuth 1.0a**(“user context”라고도 함)는 사용자를 대신해 요청을 보내고 해당 사용자의 비공개 참여 지표에 접근할 수 있게 해줍니다.

다음의 경우 이 인증 방법이 필요합니다:

- [/28hr endpoint](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-28hr) 및 [/historical endpoint](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement-historical)로 전송되는 모든 요청
- 다음 비공개 지표에 대한 접근: 노출 수, 참여 수, 미디어 조회 수, 미디어 참여 수, URL 클릭 수, 해시태그 클릭 수, 상세 보기, 퍼머링크 클릭 수, 앱 설치 시도, 앱 열기, 이메일 게시, 사용자 팔로우, 사용자 프로필 클릭 수

OAuth 1.0a로 요청을 보낼 때는 관심 있는 게시물 또는 보호된 리소스의 소유자인 사용자의 액세스 토큰(Access Token 및 Secret)을 포함해야 합니다. 보호된 사용자 데이터를 요청하면서 올바른 사용자 액세스 토큰을 제공하지 않으면 Engagement API는 `403 Forbidden` 오류를 반환합니다.

Engagement API는 [보호된 게시물](https://help.x.com/en/safety-and-security/public-and-protected-tweets)의 참여 데이터를 가져올 수 없습니다. 해당 게시물의 소유자를 대신해 인증하더라도 동일합니다. 이를 시도하면 `"Tweet ID(s) are unavailable"` 메시지와 함께 `400 Bad Request` 오류가 반환됩니다.

자신의 X 계정(즉, 개발자 앱을 소유한 계정)을 대신해 요청하는 경우, [developer portal](https://developer.x.com/en/portal/projects-and-apps)의 개발자 앱 “Keys and tokens” 탭에서 필요한 액세스 토큰을 직접 생성할 수 있습니다.

다른 사용자를 대신해 요청하는 경우, 필요한 액세스 토큰을 얻기 위해 3-legged OAuth 플로우를 사용해야 합니다. 방법에 대한 자세한 내용은 다음 문서를 참조하세요: [OAuth 1.0a: how to obtain a user’s access tokens](/ko/resources/fundamentals/authentication#oauth-1-0a-2).

추가 예시(예: OAuth 1.0a를 사용한 인증 방법 포함)는 [X Developers의 Engagement API용 샘플 Python 코드](https://github.com/xdevplatform/enterprise-scripts-python/tree/master/Engagement-API)를 확인하세요.

<div id="recent-changes-to-the-engagement-api">
  ### Engagement API의 최근 변경 사항
</div>

Engagement API는 X에서의 활동 성과를 모니터링할 수 있도록 매우 유용한 노출수와 참여 지표를 제공합니다. 당사 데이터에 기반한 마케팅 의사결정을 지속적으로 지원하기 위한 노력의 일환으로, X 전반의 지표 일관성을 높여 주는 Engagement API의 최근 변경 사항을 공유하게 되어 기쁘게 생각합니다.  

최근 우리는 Engagement API를 현대화하여 X 분석 대시보드(analytics.x.com)에서 사용하는 것과 동일한 지표 집계 방법론을 사용하도록 변경을 배포했습니다. 새로운 지표를 도입하면서 API 변경으로 인한 호환성 깨짐을 최소화하기 위해 신중하게 접근했으며, 첫 번째 변경 사항 세트를 2017년 10월 9일에 배포했습니다. 이러한 변경은 여러분 또는 여러분의 고객이 X에서 성과를 모니터링하는 모든 경로 간의 일관성을 개선합니다. 아래에서 변경 사항의 자세한 개요를 확인해 주세요:

|     |     |
| :--- | :--- |
| **Metric** | **Change** |
| engagements | 전체 참여수에 포함되는 지표를 Post 분석 대시보드와의 일관성에 맞추어 업데이트했습니다. Engagements는 “사람들이 이 Post와 상호작용한 횟수”를 의미합니다.<br /><br />동영상이나 GIF와 같은 미디어가 포함된 Post의 경우, engagements 지표에는 더 이상 미디어 조회수가 포함되지 않습니다. 미디어 조회수는 이제 새로운 지표인 \_media\_views\_에서 확인할 수 있습니다. |
| media\_clicks\* | 이 지표는 “_media\_engagements_”라는 새로운 지표로 대체되었습니다. |
| video\_views | 2018년 7월 6일부터 이 지표는 [/totals](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) 엔드포인트를 통해 ‘소유하지 않은’ Post에도 제공됩니다. 이는 앱 전용 인증을 사용하여 **모든** Post의 동영상 조회수에 접근할 수 있음을 의미합니다. <br /><br />1800일 미만의 동영상 조회수만 요청할 수 있습니다. 1800일을 초과한 Post의 동영상 조회수를 요청하면 다음과 같은 응답을 받게 됩니다:<br /><br />"unsupported\_for\_video\_views\_tweet\_ids": \["TWEET\_ID"]<br /><br />**참고**: video\_views는 동영상의 50% 이상이 최소 2초 동안 화면에 표시되어야 한다는 MRC 표준에 기반하므로 media\_views와는 다릅니다.  <br /><br />**또한** X의 자체 플랫폼(모바일 앱 및 웹사이트)에 표시되는 동영상 조회수와 /28hr 및 /historical 엔드포인트를 통해 수신하는 수치 간에는 차이가 있을 수 있습니다.<br /><br />\* X 사용자 인터페이스와 /totals 엔드포인트를 통해 제공되는 동영상 조회수는 해당 동영상이 게시된 모든 Post 전반의 조회수를 집계하여 표시합니다. 즉, UI에 표시되는 지표에는 해당 동영상이 리트윗되거나 별도의 Post로 재게시된 모든 경우의 조회수가 합산됩니다.<br />\* /28hr 및 /historical 엔드포인트에서 제공되는 동영상 조회수는 여러분이 지표를 조회하는 특정 Post에서 발생한 조회수만 포함합니다. |
| media\_views | 동영상, vine, gif, 이미지 전반에서 집계된 미디어의 모든 조회수(자동 재생 및 클릭)를 포함합니다.<br /><br />**참고**: 이미지가 있는 Post는 분석 대시보드에 media\_views 지표가 표시되지 않지만, Engagement API에서는 반환됩니다. |
| media\_engagements\* | 동영상, vine, gif, 이미지 전반에서 미디어에 대한 클릭 수를 포함합니다. 이 지표는 \_media\_clicks\_를 대체합니다. |
| quote\_tweets | 2020년 7월 7일부터 이 지표는 /totals 엔드포인트를 통해 ‘소유하지 않은’ Post에도 제공됩니다. 이는 앱 전용 인증을 사용하여 모든 Post의 인용 Post 수에 접근할 수 있음을 의미합니다. |

<div id="interpreting-the-metrics">
  ### 지표 해석
</div>

**참고:** 일부 X 웹 대시보드에 표시된 데이터와 Engagement API에서 보고되는 데이터 사이에 차이가 있을 수 있습니다. 이러한 차이는 웹 대시보드가 일반적으로 선택한 기간 내에 발생한 참여 및/또는 노출만 표시하기 때문에 발생합니다. 예를 들어, 웹 대시보드는 달력상 한 달 동안의 게시물 참여만 보여줄 수 있지만, Engagement API는 요청한 기간에 해당하는 경우 해당 월의 범위를 넘어서는 참여까지 포함해 보여줄 수 있습니다. 이러한 경우에는 Engagement API를 신뢰 가능한 기준(source)으로 간주해야 합니다.
 

<div id="impressions-and-engagement-data">
  #### 노출수 및 참여 데이터
</div>

Engagement API는 **오가닉** 노출수와 참여 데이터를 제공합니다.

노출수는 특정 게시물이 X 플랫폼에서 오가닉 맥락으로 조회된 횟수를 의미합니다. 프로모션 또는 유료 맥락에서 노출된 게시물로부터 발생한 노출수는 포함되지 **않습니다**.

참여는 특정 게시물이 **오가닉** 및 **프로모션** 맥락 모두에서 시청자에 의해 상호작용된 횟수를 의미합니다. 참여에는 리포스트, 마음에 들어요, 답글, URL 클릭, 해시태그 클릭, 멘션 클릭, 미디어 재생 등이 포함되지만 이에 국한되지는 않습니다. 포함되는 전체 참여 액션 목록은 Engagement Data 섩션을 참조하세요. 

기본 참여율을 계산하려면 분석 기간 동안 특정 게시물의 총 참여수를 총 노출수로 나누어 주세요.

노출수 및 참여 데이터는 소유한 @handle의 게시물 또는 귀하의 애플리케이션이 해당 게시물의 세부 정보를 볼 수 있도록 권한을 부여한 @handle의 게시물에 대해서만 조회할 수 있습니다. 내부적으로 Engagement API는 계약된 @handle 한도에 대해 요청된 고유 @handle 수를 추적합니다. 또한 월간 동안 클라이언트 측에서 @handle 요청 사용량을 함께 추적할 것을 권장합니다.  

<div id="video-metrics">
  #### 동영상 지표
</div>

X 내 미디어 노출을 나타내는 지표에는 여러 종류가 있습니다. 첫 번째는 MRC 표준(동영상의 50% 이상이 최소 2초 동안 화면에 노출)을 기반으로 하는 동영상 조회수 지표입니다. 두 번째는 Media Views로, 동영상, Vine, GIF, 이미지 전반에 걸쳐 집계된 미디어의 모든 조회수(자동 재생 및 클릭)를 포함합니다.

동영상 조회수 지표는 /28hour 및 /historical 엔드포인트를 통해 소유한 Posts에 제공되며, /totals 엔드포인트를 통해 소유하지 않은 모든 Posts에도 제공됩니다. 

X 사용자 인터페이스의 동영상 조회수 지표 역시 동일한 MRC 표준을 사용하지만, X가 소유·운영하는 플랫폼(모바일 앱과 웹사이트)에 표시되는 동영상 조회수 지표와 다양한 Engagement API 엔드포인트를 통해 받는 수치 간에는 차이가 있을 수 있습니다.

- /totals 엔드포인트와 X 사용자 인터페이스에서 제공되는 동영상 조회수는 해당 동영상이 게시된 모든 Posts 전반에 걸쳐 집계된 값을 표시합니다. 즉, /totals로 제공되고 X UI에 표시되는 지표에는 해당 동영상이 별도의 Posts에서 리포스트되거나 리트윗된 모든 경우의 조회수가 합산됩니다.
- /28hour 및 /historical Engagement API 엔드포인트에서 제공되는 동영상 조회수는 지표를 조회하는 특정 Post에서 발생한 조회수만 포함합니다. 
   

1800일이 지난 Posts에 대해서는 동영상 조회수를 제공하지 않습니다. 대신, 1800일 초과 Posts 목록이 포함된 객체를 제공합니다. 요청한 Posts에 대한 다른 모든 지표는 별도의 객체로 계속 제공됩니다. 다음은 예시 응답입니다:

```json
{
  "unsupported_for_video_views_tweet_ids": [
    "479311209565413376",
    "477139122520219648"
  ],
  "grouping name": {
    "479311209565413376": {
      "favorites": "69",
      "impressions": "1692",
      "retweets": "142",
      "video_views": "0"
    },
    "477139122520219648": {
      "favorites": "10",
      "impressions": "1023",
      "retweets": "6",
      "video_views": "0"
    },
    "1397568983931392004": {
      "favorites": "268",
      "impressions": "26803",
      "retweets": "56",
      "video_views": "17902"
    }
  }
}
```

Media Views 지표는 /28hour 및 /historical 엔드포인트를 사용하는 소유한 Posts에만 제공됩니다.

<div id="engagement-api-groupings">
  ### 참여도 API 그룹화
</div>

그룹화는 반환된 참여도 지표를 맞춤 구성할 수 있게 합니다. 요청당 최대 3개의 그룹화를 포함할 수 있습니다. 다음 값 중 하나 이상으로 지표를 그룹화할 수 있습니다:

_세 엔드포인트 모두 지원:_

- tweet.id
- engagement.type
   

_`/28hr` 및 `/historical`은 시계열 지표를 제공할 수 있으므로 다음도 지원합니다:_

- engagement.day
- engagement.hour

그룹화는 순차적으로 적용되므로 `group_by` 값의 순서를 바꿔 원하는 결과 형식을 변경할 수 있습니다. 네 개의 `group_by` 값을 포함하는 그룹화는 다음 두 가지 형식 중 하나로만 지원됩니다:
 

```bash
"group_by": [
    "tweet.id",
    "engagement.type",
    "engagement.day",
    "engagement.hour"
  ]
```

또는

```bash
"group_by": [
    "engagement.type",
    "tweet.id",
    "engagement.day",
    "engagement.hour"
]
```

예를 들어 지표 유형의 총합을 생성하려면 다음 “groupings” 사양을 요청에 포함하세요(요청 구성 방법은 [API Reference](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#post-insights-engagement) 페이지를 참조):

```json
{
  "engagement_types": [
    "favorites",
    "replies",
    "retweets"
  ],
  "groupings": {
    "Grand Totals": {
      "group_by": [
        "engagement.type"
      ]
    }
  }
}
```

이 그룹화를 사용하면 참여도 API의 JSON 응답에는 지표 유형별 총합을 포함하는 루트 수준의 `"Grand Totals"` 속성이 포함됩니다:

```json
{
  "Grand Totals": {
    "favorites": "12",
    "replies": "2",
    "retweets": "2"
  }
}
```

단일 게시물에 대해 게시물 ID로 그룹화된 4시간 분량의 시계열 지표를 생성하려면 다음 그룹화 사양을 요청에 포함합니다:

```json
{
  "start": "2016-02-10T17:00:00Z",
  "end": "2016-02-10T21:00:00Z",
  "tweet_ids": [
    "697506383516729344"
  ],
  "engagement_types": [
    "impressions",
    "engagements"
  ],
  "groupings": {
    "Tweets_MetricType_TimeSeries": {
      "group_by": [
        "tweet.id",
        "engagement.type",
        "engagement.hour"
      ]
    }
  }
}
```

이 그룹화를 사용하면 참여도 API의 JSON 응답에는 게시물 ID, 그다음 지표 유형, 그리고 해당 시간대 시계열 순으로 세분화된 지표를 포함하는 루트 수준의 `"Tweets_MetricType_TimeSeries"` 속성이 포함됩니다:

```json
{
  "Tweets_MetricType_TimeSeries": {
    "697506383516729344": {
      "impressions": {
        "2016-02-10": {
          "17": "551",
          "18": "412",
          "19": "371",
          "20": "280"
        }
      },
      "engagements": {
        "2016-02-10": {
          "17": "8",
          "18": "6",
          "19": "3",
          "20": "0"
        }
      }
    }
  }
}
```

<div id="frequently-asked-questions">
  ## 자주 묻는 질문
</div>

`Enterprise`

<div id="engagement-api">
  ### Engagement API
</div>

<AccordionGroup>
  <Accordion title="Engagement API에 어떻게 액세스할 수 있나요?">
    Engagement API 액세스는 엔터프라이즈 구독을 통해 제공됩니다. 영업팀과 연락하려면 [이 양식](/ko/x-api/enterprise-gnip-2.0/enterprise-gnip)을 작성해 주세요.
  </Accordion>

  <Accordion title="내 사용량은 '@handle' 기준으로 어떻게 추적되나요?">
    계약에 Engagement API와 함께 사용할 수 있는 고유 핸들 수에 대한 한도가 포함되어 있을 수 있습니다. 내부 X 시스템은 Engagement API로 쿼리된 게시물의 소유자인 인증된 사용자의 수를 추적합니다. 고객도 클라이언트 측에서 이 고유 수치를 관리해야 합니다. 현재 Engagement API의 @handle 사용량을 확인할 수 있는 사용량 API나 UI는 없습니다. 계약된 것보다 더 많은 @handle이 요청되어도 시스템은 초과 사용을 차단하지 않습니다. 청구 월 말에 쿼리된 고유 @handle 수가 계약된 수와 비교되며, 계약 조건에 따라 초과 요금이 청구됩니다.
  </Accordion>

  <Accordion title="Engagement API의 @handle 사용량을 확인할 수 있나요?">
    현재 Engagement API의 @handle 사용량을 확인할 수 있는 사용량 API나 UI는 없습니다. 계약된 것보다 더 많은 @handle이 요청되어도 시스템은 초과 사용을 차단하지 않습니다. 청구 월 말에 쿼리된 고유 @handle 수가 계약된 수와 비교되며, 계약 조건에 따라 초과 요금이 청구됩니다.

    **페이로드에 반환되는 `engagements` 메타데이터 필드가 다양한 참여 지표 합계와 일치하지 않습니다. 왜 그런가요?**

    이는 정상 동작입니다. `engagements` 메타데이터 필드는 API가 반환하는 개별 참여 지표의 합과 항상 일치하지 않을 수 있습니다. 페이로드에서 개별 지표로 분리되지 않은 추가 참여가 `engagements` 메타데이터 필드에 포함될 수 있기 때문입니다. 달리 말하면, 다양한 참여 지표 합계를 모두 더해도 페이로드에 반환되는 `engagements` 메트릭 필드의 값과 같지 않을 수 있습니다.

    `engagements` 메타데이터 필드는 게시물에서 발생한 모든 클릭 또는 상호작용으로 이해하면 됩니다.
     

    **페이로드 응답의 `url_clicks` 필드가 숫자를 반환하는데, 해당 게시물에는 URL이 없습니다. 어떻게 가능한가요?**

    해시태그처럼 다른 페이지로 연결되는 링크를 생성하는 요소가 포함된 게시물의 경우, 사용자가 그것을 클릭하면 URL 클릭으로 집계될 수 있습니다.
     
  </Accordion>

  <Accordion title="특정 게시물에 대한 참여 데이터를 받지 못하는 이유는 무엇인가요?">
    특정 게시물에 대한 참여 데이터를 가져오지 못할 수 있는 다양한 이유가 있습니다. 예를 들면 다음과 같습니다:

    - 요청한 게시물 ID가, 제3자를 대신해 데이터를 검색하기 위해 사용 중인 인증 토큰 기준으로 사용 불가능한 경우
    - /totals 엔드포인트에 대해 요청한 게시물 ID가 90일 이내가 아니어서 노출수 또는 참여 지표를 반환할 수 없는 경우
    - 요청한 게시물 ID가 더 이상 사용 불가능한 경우(대개 삭제되었거나 다른 이유로 더 이상 공개적으로 제공되지 않음을 의미)

    위의 경우 수신하게 될 수 있는 다양한 [오류 메시지](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#error-messages)를 확인하세요.
  </Accordion>

  <Accordion title="Engagement API의 레이트 리밋은 어떻게 처리하나요?">
    Engagement API에 요청을 보낼 때 응답 헤더로 반환되는 `x-per-minute-limit` 및 `x-per-minute-remaining` 정보를 사용해 소비량을 모니터링할 수 있습니다.

    `x-per-minute-limit`는 허용량을, `x-per-minute-remaining`은 남은 호출 수를 나타냅니다.
  </Accordion>
</AccordionGroup>

<div id="error-troubleshooting-guide">
  ### 오류 문제 해결 가이드
</div>

<AccordionGroup>
  <Accordion title="인증에 문제가 발생합니다">
    Engagement API [인증 가이드라인](/ko/x-api/enterprise-gnip-2.0/fundamentals/engagement-api#authentication)을 반드시 확인하세요.
  </Accordion>

  <Accordion title="올바른 consumer key와 secret, 그리고 access token과 access token secret을 전달했지만 다음 오류가 반환됩니다. 어떻게 해야 하나요?">
    ```bash
    [
        Your account could not be authenticated. Reason: Unknown Authorization Type;
    ]
    ```

    /totals 엔드포인트로 인증을 시도할 때는 access token이나 secret을 사용하지 마세요. 해당 토큰을 포함한 상태에서, 그 토큰과 연관되지 않은 게시물의 콘텐츠를 가져오려고 하면 다음과 같은 오류가 발생할 수 있습니다:

    ```bash
    [
        Forbidden to access tweets: 1054424731825229824;
    ]
    ```
  </Accordion>
</AccordionGroup>

<div id="still-cant-find-what-youre-looking-for">
  ### 여전히 찾는 정보를 못 찾으셨나요?
</div>

<AccordionGroup>
  <Accordion title="아직 답변되지 않은 질문이 있습니다">
    기술 지원팀으로 문의해 주시면 신속히 답변드리겠습니다.
  </Accordion>
</AccordionGroup>

<div id="api-reference">
  ## API 참고 문서
</div>

<div id="post-insightsengagement">
  ### **POST insights/engagement**
</div>

<div id="methods">
  #### **메서드**
</div>

| 메서드 | 설명 |
| :--- | :--- |
| [POST /insights/engagement/totals](#Totals) | 트윗 모음에 대한 총 노출수와 참여수를 조회합니다. |
| [POST /insights/engagement/historical](#Historical) | 2014년 9월 1일까지 소급하여 최대 4주 기간 동안 트윗 모음의 노출수와 참여수를 조회합니다. |
| [POST /insights/engagement/28hr](#api-28hr) | 지난 28시간 동안 트윗 모음의 노출수와 참여수를 조회합니다. |

<div id="authentication">
  #### **인증**
</div>

Engagement API는 HTTPS 사용을 요구하며 User Context와 Application-Only OAuth를 모두 지원합니다. Engagement API에 대한 대부분의 요청은 3-Legged OAuth(사용자 컨텍스트의 한 형태)가 필요합니다. 이는 트위터 계정 담당자가 Engagement API 액세스로 등록·승인한 앱의 consumer key와 secret, 그리고 트윗 소유자의 access token과 access token secret을 사용해 엔드포인트를 호출해야 함을 의미합니다. 다음 요청에는 이 유형의 OAuth가 필요합니다:

- 소유한 트윗으로 한정되는 Impressions 및 Engagements 지표 유형을 조회하기 위한 /totals에 대한 모든 요청
- /28hr에 대한 모든 요청
- /historical에 대한 모든 요청

일부 Engagement API 요청은 Application-Only OAuth로 수행할 수 있습니다. 이 경우 consumer key와 secret 또는 bearer token만 제공하면 됩니다. 다음 요청은 이 유형의 OAuth로 수행할 수 있습니다:

- 모든 트윗에 대해 조회 가능한 Favorites, Replies, Retweets, 또는 Video Views 지표 유형을 얻기 위한 /totals에 대한 모든 요청

모든 요청에 앞서, [developer.x.com](https://developer.x.com/en/portal/dashboard)의 앱 관리 콘솔에서 트위터 앱과 해당 API 키를 설정해야 합니다.

참고 - developer.x.com에서 트위터 계정으로 로그인한 상태라면, 기존 [Twitter apps](/ko/resources/fundamentals/developer-apps)를 [Twitter app dashboard](https://developer.x.com/en/apps)에서 조회 및 편집할 수 있습니다.

앱 설정을 완료한 후에는, 앱이 Engagement API에 요청을 보낼 수 있도록 앱 ID가 담당자 승인을 받아야 합니다. Access token은 “현재 사용자”를 나타내야 하며, 다른 사용자를 대신해 요청하는 경우 해당 요청은 유효한 토큰으로 서명되어야 합니다. OAuth 서명 베이스 문자열을 준비하기 전에 URL과 POST 본문 내 [예약 문자](https://tools.ietf.org/html/rfc3986)가 적절히 인코딩되어 있는지 확인하세요.

OAuth 시작 방법에 대한 자세한 내용은 다음 링크를 참조하세요:

- [OAuth 개요](/ko/resources/fundamentals/authentication)
- [User Context(3-Legged OAuth) 사용](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)
- [Application-Only OAuth 사용](/ko/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)

<div id="post-insightsengagementtotals">
  #### **POST /insights/engagement/totals**
</div>

totals 엔드포인트는 한 번에 최대 250개의 트윗 집합에 대해 현재 총 노출 수와 참여 수를 조회할 수 있도록 합니다.

|     |     |
| :--- | :--- |
| **요청 메서드** | HTTP POST |
| **URL** | `https://data-api.x.com/insights/engagement/totals` |
| **콘텐츠 유형** | `application/json` |
| **압축** | Gzip. Gzip 압축으로 요청하려면 연결 요청에 Accept-Encoding 헤더를 포함하세요.  <br />헤더 예시는 다음과 같습니다:  <br />  <br />`Accept-Encoding: gzip` |
| **POST 형식** | 본문이 Tweet ID 모음과 원하는 그룹화를 포함하는 JSON 객체인 POST 요청으로 보낼 수 있습니다. POST 본문은 `tweets`, `engagements`, `groupings` 객체를 포함하는 배열로 구성됩니다. 각 요청에는 최대 250개의 Tweet ID를 포함할 수 있습니다.  <br />  <br />예시 POST 본문은 다음과 같습니다:  <br />  <br /><br />  \{<br />    "tweet\_ids": \[<br />        "Tweet ID 1",<br />        "Tweet ID 2",<br />        "Tweet ID 3"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "favorites",<br />        "quote\_tweets"<br />    ],<br />    "groupings": \{<br />      "grouping name": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type"<br />        ]<br />      }<br />    }<br />  } |
| **Tweet IDs** | 조회할 참여 데이터의 대상이 되는 Tweet의 Tweet ID를 포함하는 배열입니다. 인증된 @handle이 생성한 Tweet에 대해서만 데이터를 요청할 수 있습니다. 요청당 최대 250개의 Tweet을 포함할 수 있으며, Tweet ID는 문자열로 표현해야 합니다. |
| **참여 유형** | 조회할 참여 지표 유형을 포함하는 배열입니다. Totals 엔드포인트는 다음 참여 유형만 지원합니다: `impressions`, `engagements`, `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`.  <br />`/totals` 엔드포인트는 최근 90일 이내에 생성된 Tweet에 대해서는 `impressions`와 `engagements`를, 그리고 모든 Tweet에 대해서는 `favorites`, `retweets`, `quote_tweets`, `replies`, `video_views`를 조회할 수 있습니다. |
| **그룹화** | Engagement API의 결과는 필요에 맞게 서로 다른 그룹으로 반환할 수 있습니다. 요청당 최대 3개의 그룹화를 포함할 수 있습니다.  <br />  <br />각 그룹화마다 이 유형을 애플리케이션에서 참조하기 쉽도록 사용자 지정 그룹화 이름을 정의할 수 있습니다.  <br />  <br />그룹화 이름을 정의한 후에는 `tweet.id` 및/또는 `engagement.type`으로 그룹화할 수 있습니다.  <br />  <br />그룹화는 순차적으로 적용되므로 group\_by 값의 순서를 변경하여 원하는 결과 형식을 바꿀 수 있습니다. Tweet ID와 지표 유형별로 분리된 지표를 보여주는 그룹화 예시는 다음과 같습니다:  <br />  <br /><br />  "groupings": \{<br />      "my grouping name": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type"<br />        ]<br />      }<br />    } |
| **POST 크기 제한** | 한 번에 최대 250개의 Tweet ID에 대해 요청할 수 있습니다. |
| **응답 형식** | JSON. 요청 헤더에서 응답 형식으로 JSON을 지정해야 합니다. |
| **요율 제한** | 액세스 수준에 따른 계약에 명시된 대로, 분당 기준으로 요율 제한이 적용됩니다. |
| **요청 예시(공개 지표)** | curl --request POST <br />  --url https://data-api.x.com/insights/engagement/totals <br />  --header 'accept-encoding: gzip' <br />  --header 'authorization: Bearer ' <br />  --header 'content-type: application/json' <br />  --data '\{<br />                "tweet\_ids": \[<br />                    "1070059276213702656","1021817816134156288","1067094924124872705"<br />                ],<br />                "engagement\_types": \[<br />                    "favorites","retweets","replies","quote\_tweets","video\_views"<br />                ],<br />                "groupings": \{<br />                    "perTweetMetricsUnowned": \{<br />                        "group\_by": \[<br />                            "tweet.id",<br />                            "engagement.type"<br />                        ]<br />                    }<br />                }<br />            } <br />  --verbose <br />  --compressed |
| **요청 예시** | curl --request POST <br />  --url https://data-api.x.com/insights/engagement/totals <br />  --header 'accept-encoding: gzip' <br />  --header 'authorization: OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br />  --header 'content-type: application/json' <br />  --data '\{<br />                "tweet\_ids": \[<br />                    "1060976163948904448","1045709644067471360"<br />                ],<br />                "engagement\_types": \[<br />                    "favorites","replies","retweets","video\_views","impressions","engagements"<br />                ],<br />                "groupings": \{<br />                    "perTweetMetricsOwned": \{<br />                        "group\_by": \[<br />                            "tweet.id",<br />                            "engagement.type"<br />                        ]<br />                    }<br />                }<br />            }' <br />  --verbose <br />  --compressed |
| **응답 예시(공개 지표)** | \{<br />  "perTweetMetricsUnowned": \{<br />    "1021817816134156288": \{<br />      "favorites": "530",<br />      "quote\_tweets": "79",<br />      "replies": "147",<br />      "retweets": "323",<br />      "video\_views": "0"<br />    },<br />    "1067094924124872705": \{<br />      "favorites": "1360",<br />      "quote\_tweets": "29",<br />      "replies": "56",<br />      "retweets": "178",<br />      "video\_views": "5754512"<br />    },<br />    "1070059276213702656": \{<br />      "favorites": "69",<br />      "quote\_tweets": "5",<br />      "replies": "7",<br />      "retweets": "26",<br />      "video\_views": "0"<br />    }<br />  }<br />} |
| **예시 응답** | \{<br />  "perTweetMetricsOwned": \{<br />    "1045709644067471360": \{<br />      "engagements": "2",<br />      "favorites": "0",<br />      "impressions": "47",<br />      "replies": "0",<br />      "retweets": "8",<br />      "quote\_tweets": "5",<br />      "video\_views": "0"<br />    },<br />    "1060976163948904448": \{<br />      "engagements": "4",<br />      "favorites": "0",<br />      "impressions": "148",<br />      "replies": "1",<br />      "retweets": "9",<br />      "quote\_tweets": "2",<br />      "video\_views": "0"<br />    }<br />  }<br />} |
| **사용 불가 트윗 ID** | 삭제 등으로 더 이상 사용할 수 없는 트윗 ID가 포함된 쿼리의 경우, 사용 가능한 트윗 ID에 대해서는 해당 데이터가 반환되며, 사용 불가 트윗 ID는 `unavailable_tweet_ids`라는 배열에 나열됩니다. 예:  <br /><br />  \{<br />    "start": "2015-11-17T22:00:00Z",<br />    "end": "2015-11-19T02:00:00Z",<br />    "unavailable\_tweet\_ids": \[<br />        "323456789"<br />    ],<br />    "group1": \{<br />     "423456789": \{<br />      "favorites": "67",<br />      "replies": "8",<br />      "retweets": "26",<br />      "quote\_tweets": "2"<br />     }<br />    }<br />  } |

<div id="post-insightsengagement28hr">
  #### **POST /insights/engagement/28hr**
</div>

28시간 엔드포인트는 지난 28시간 동안 최대 25개의 트윗에 대한 노출 수와 참여 수를 조회할 수 있게 해줍니다. 또한 28시간 엔드포인트는 지원되는 모든 개별 지표에 대해 값을 요청할 수 있습니다. 지원되는 지표의 전체 목록은 [지표 가용성](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes)을 참조하세요.

|     |     |
| :--- | :--- |
| **요청 메서드** | HTTP POST |
| **URL** | `https://data-api.x.com/insights/engagement/28hr` |
| **콘텐츠 유형** | `application/json` |
| **압축** | Gzip. Gzip 압축으로 요청하려면 연결 요청에 Accept-Encoding 헤더를 포함하세요.  <br />헤더 예시는 다음과 같습니다:  <br />  <br />`Accept-Encoding: gzip` |
| **POST 형식** | 본문에 트윗 ID 배열과 원하는 그룹핑을 포함한 JSON 객체를 담아 POST 요청으로 전송할 수 있습니다. POST 본문은 `tweets`, `engagements`, `groupings` 객체를 포함하는 배열 형식입니다. 각 요청에는 최대 25개의 트윗 ID를 포함할 수 있습니다.  <br />  <br />예시 POST 본문은 다음과 같습니다:  <br />  <br /><br />  \{<br />    "tweet\_ids": \[<br />       "트윗 ID 1",<br />       "트윗 ID 2",<br />       "트윗 ID 3"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "url\_clicks",<br />        "detail\_expands"<br />    ],<br />    "groupings": \{<br />      "grouping name": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type",<br />          "engagement.hour"<br />        ]<br />      }<br />    }<br />  } |
| **트윗 ID** | 참여 데이터 조회 대상 트윗의 트윗 ID를 포함한 배열입니다. 인증된 @handle이 생성한 트윗에 대해서만 데이터를 요청할 수 있습니다. 28시간 엔드포인트는 요청당 최대 25개의 트윗을 지원하며, 트윗 ID는 문자열로 제공해야 합니다. |
| **참여 유형** | 조회할 참여 지표 유형의 배열입니다.  <br />  <br />28시간 엔드포인트의 경우 `impressions`, `engagements` 및 모든 개별 참여 유형이 지원됩니다. 지원되는 참여 지표의 전체 목록은 [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData)를 참조하세요. |
| **그룹핑** | Engagement API 결과는 필요에 맞게 다양한 방식으로 그룹화하여 반환할 수 있습니다. 요청당 최대 3개의 그룹핑을 포함할 수 있습니다.  <br />  <br />각 그룹핑에 대해 애플리케이션에서 참조하기 쉬운 사용자 지정 그룹핑 이름을 정의할 수 있습니다. 그룹핑 이름을 정의한 후에는 다음 값 중 하나 이상으로 그룹화할 수 있습니다:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />그룹핑은 순차적으로 적용되므로 group\_by 값의 순서를 바꾸면 결과 형식도 달라집니다. 트윗 ID와 지표 유형별로 분리된 지표를 보여주는 예시 그룹핑은 다음과 같습니다:<br /><br />  "groupings": \{<br />    "my grouping name": \{<br />      "group\_by": \[<br />        "tweet.id",<br />        "engagement.type",<br />        "engagement.day"<br />      ]<br />    }<br />  }<br /><br />  <br />4개의 `group_by` 항목을 가진 그룹핑은 아래 두 가지 순서 중 하나일 때만 유효합니다. 이에 해당하지 않는 단일 그룹핑 내 4개의 `group_by` 항목이 있는 요청은 오류가 반환됩니다. 또한, 요청당 4개의 `group_by` 항목을 가진 그룹핑은 하나만 허용됩니다.  <br /><br />"group\_by": \[<br />    "tweet.id",<br />    "engagement.type",<br />    "engagement.day",<br />    "engagement.hour"<br />  ]<br /><br />"group\_by": \[<br />    "engagement.type",<br />    "tweet.id",<br />    "engagement.day",<br />    "engagement.hour"<br />  ] |
| **POST 크기 제한** | 한 번에 최대 25개의 트윗 ID에 대해 요청할 수 있습니다. |
| **응답 형식** | JSON. 요청 헤더에서 응답이 JSON 형식임을 지정해야 합니다. |
| **요청 한도** | 액세스 수준에 따라 계약서에 명시된 대로 분 단위로 요청 한도가 적용됩니다. |
| **요청 예시** | curl -X POST "https://data-api.x.com/insights/engagement/28hr" <br />  -H 'Accept-Encoding: gzip' <br />  -H 'Authorization OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br />  -d '\{<br />    "tweet\_ids": \[<br />       "123456789"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements"<br />    ],<br />    "groupings": \{<br />      "hourly-time-series": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type",<br />          "engagement.day",<br />          "engagement.hour"<br />        ]<br />      }<br />    }<br />  }' |
| **예시 응답** | \{<br />    "start": "2015-09-14T17:00:00Z",<br />    "end": "2015-09-15T22:00:00Z",<br />    "hourly-time-series": \{<br />      "123456789": \{<br />        "impressions": \{<br />          "2015-09-14": \{<br />            "17": "551",<br />            "18": "412",<br />            "19": "371",<br />            "20": "280",<br />            "21": "100",<br />            "22": "19",<br />            "23": "6"<br />          },<br />          "2015-09-15": \{<br />            "00": "5",<br />            "01": "2",<br />            "02": "7",<br />            "03": "3",<br />            "04": "1",<br />            "05": "0",<br />            "06": "0",<br />            "07": "0",<br />            "08": "0",<br />            "09": "0",<br />            "10": "0",<br />            "11": "0",<br />            "12": "0",<br />            "13": "0",<br />            "14": "0",<br />            "15": "0",<br />            "16": "0",<br />            "17": "0",<br />            "18": "0",<br />            "19": "0",<br />            "20": "0",<br />            "21": "0"<br />          }<br />        },<br />        "engagements": \{<br />          "2015-09-14": \{<br />            "17": "0",<br />            "18": "0",<br />            "19": "0",<br />            "20": "0",<br />            "21": "0",<br />            "22": "0",<br />            "23": "0"<br />          },<br />          "2015-09-15": \{<br />            "00": "0",<br />            "01": "0",<br />            "02": "0",<br />            "03": "0",<br />            "04": "0",<br />            "05": "0",<br />            "06": "0",<br />            "07": "0",<br />            "08": "0",<br />            "09": "0",<br />            "10": "0",<br />            "11": "0",<br />            "12": "0",<br />            "13": "0",<br />            "14": "0",<br />            "15": "0",<br />            "16": "0",<br />            "17": "0",<br />            "18": "0",<br />            "19": "0",<br />            "20": "0",<br />            "21": "0"<br />          }<br />        }<br />      }<br />    }<br />  } |
| **사용할 수 없는 트윗 ID** | 사용할 수 없게 된 트윗 ID(예: 삭제됨)가 포함된 쿼리의 경우, 사용 가능한 트윗 ID에 대해서는 적절한 데이터가 반환되며 사용할 수 없는 트윗 ID는 `unavailable_tweet_ids`라는 배열에 표시됩니다. 예를 들어:  <br /><br />  \{<br />    "start": "2015-11-17T22:00:00Z",<br />    "end": "2015-11-19T02:00:00Z",<br />    "unavailable\_tweet\_ids": \[<br />        "323456789"<br />    ],<br />    "group1": \{<br />     "423456789": \{<br />      "favorites": "67",<br />      "replies": "8",<br />      "retweets": 26<br />     }<br />    }<br />  } |

<div id="post-insightsengagementhistorical">
  #### **POST /insights/engagement/historical**
</div>

이 히스토리컬 엔드포인트는 최대 25개의 트윗 묶음에 대해, 최대 4주 기간 동안의 노출 수와 참여 수를 조회할 수 있습니다. 현재 API에서는 2014년 9월 1일 이전 데이터는 요청할 수 없습니다. 또한 이 히스토리컬 엔드포인트는 지원되는 모든 개별 지표에 대한 조회도 지원합니다. 지원되는 지표의 전체 목록은 [Metric Availability](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#EngagementTypes)를 참조하세요.

|     |     |
| :--- | :--- |
| **요청 메서드** | HTTP POST |
| **URL** | `https://data-api.x.com/insights/engagement/historical` |
| **콘텐츠 유형** | `application/json` |
| **압축** | Gzip. Gzip 압축을 사용해 요청하려면 연결 요청에 Accept-Encoding 헤더를 포함하세요.  <br />헤더는 다음과 같습니다:  <br />  <br />`Accept-Encoding: gzip` |
| **POST 형식** | 본문에 트윗 ID 모음과 원하는 그룹화를 포함하는 JSON 객체로 POST 요청을 보낼 수 있습니다. POST는 `tweets`, `engagements`, `groupings` 객체를 포함한 배열로 구성됩니다. 각 요청에는 최대 25개의 트윗 ID를 포함할 수 있습니다. 각 요청에는 최대 4주 기간까지 사용자 지정 시작일과 종료일을 지정할 수 있습니다.  <br />  <br /><br />  \{<br />    "tweet\_ids": \[<br />       "Tweet ID 1",<br />       "Tweet ID 2",<br />       "Tweet ID 3"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "url\_clicks",<br />        "detail\_expands"<br />    ],<br />    "groupings": \{<br />      "grouping name": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type",<br />          "engagement.hour"<br />        ]<br />      }<br />    }<br />  } |
| **시작일과 종료일** | 요청의 일부로 `start` 및 `end` 값을 사용해 사용자 지정 시작일과 종료일을 지정할 수 있습니다. 기간이 4주를 넘지 않도록 시작일과 종료일을 지정해야 합니다. 현재 가능한 가장 이른 시작일은 2014년 9월 1일입니다. 미래의 종료일은 지원되지 않습니다. 시작일과 종료일을 제공하지 않으면 API는 직전 4주로 기본값을 사용합니다.  <br />  <br />Engagement API에서 데이터를 반환할 수 있는 최소 세분화 수준은 시간(hour)입니다. 시작 또는 종료 값이 정확히 정시 경계에 맞지 않는 경우, 가장 가까운 포함되는 정시로 보정됩니다. 예를 들어 "start":"2015-07-01T12:24:00Z", "end":"2015-07-10T08:37:00Z"로 요청하면 "start":"2015-07-01T12:00:00Z", "end":"2015-07-10T09:00:00Z"로 기본 처리됩니다. |
| **트윗 ID** | 조회할 트윗의 트윗 ID를 포함하는 배열입니다. 인증에 사용된 @handle이 생성한 트윗에 대해서만 데이터를 요청할 수 있습니다. 4주 히스토리 엔드포인트는 요청당 최대 25개의 트윗을 지원하며, 트윗 ID는 문자열로 표현해야 합니다. |
| **참여 유형** | 조회할 참여 지표 유형을 포함하는 배열입니다.  <br />  <br />4주 히스토리 엔드포인트의 경우 `impressions`, `engagements` 및 모든 개별 참여 유형이 지원됩니다. 지원되는 참여 지표의 전체 목록은 [Engagement Data](https://developer.x.com/en/docs/x-api/v1/metrics/get-tweet-engagement/overview#AvailableData)를 참조하세요.  <br />  <br />\*\*참고:\*\* 현재 2015년 9월 15일 이전의 쿼리에서는 `favorites`, `replies`, `retweets` 세 가지 지표가 0으로 표시됩니다. |
| **그룹화** | Engagement API의 결과는 필요에 가장 적합하도록 서로 다른 그룹으로 반환될 수 있습니다. 요청당 최대 3개의 그룹화를 포함할 수 있습니다.  <br />  <br />각 그룹화마다 애플리케이션에서 이 그룹화 유형을 더 쉽게 참조할 수 있도록 사용자 지정 그룹화 이름을 지정할 수 있습니다. 그룹화 이름을 지정한 후에는 다음 값 중 하나 이상으로 그룹화할 수 있습니다:  <br />`tweet.id`  <br />`engagement.type`  <br />`engagement.day`  <br />`engagement.hour`  <br />그룹화는 순차적으로 적용되므로 group\_by 값의 순서를 바꾸면 원하는 결과 형식도 달라집니다. 트윗 ID, 지표 유형, 일자별로 분리된 지표를 보여주는 예시 그룹화는 다음과 같습니다:<br /><br />  "groupings": \{<br />    "my grouping name": \{<br />      "group\_by": \[<br />        "tweet.id",<br />        "engagement.type",<br />        "engagement.day"<br />      ]<br />    }<br />  }<br /><br />  <br />4개의 `group_by` 항목을 가진 그룹화는 아래 두 가지 순서 중 하나를 사용할 때에만 유효합니다. 아래 순서가 아닌 단일 그룹화에서 4개의 `group_by` 항목을 사용하는 요청은 오류가 반환됩니다. 또한, 요청당 4개의 `group_by` 항목을 가진 그룹화는 하나만 허용됩니다.  <br /><br />"group\_by": \[<br />    "tweet.id",<br />    "engagement.type",<br />    "engagement.day",<br />    "engagement.hour"<br />  ]<br /><br />"group\_by": \[<br />    "engagement.type",<br />    "tweet.id",<br />    "engagement.day",<br />    "engagement.hour"<br />  ] |
| **POST 크기 제한** | 한 번에 최대 25개의 트윗 ID를 요청할 수 있습니다. |
| **응답 형식** | JSON. 요청 헤더에서 응답 형식으로 JSON을 지정해야 합니다. |
| **요율 제한** | 액세스 수준에 따라 계약서에 명시된 대로 분당 기준으로 요율 제한이 적용됩니다. |
| **요청 예시** | curl -XPOST "https://data-api.x.com/insights/engagement/historical" <br />  -H 'Accept-Encoding: gzip' <br />  -H 'Authorization OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br />  -d '\{<br />    "start": "2015-08-01",<br />    "end": "2015-08-15",<br />    "tweet\_ids": \[<br />       "123456789",<br />       "223456789",<br />       "323456789"<br />    ],<br />      "engagement\_types": \[<br />        "impressions",<br />        "engagements",<br />        "url\_clicks",<br />        "detail\_expands"<br />    ],<br />    "groupings": \{<br />      "types-by-tweet-id": \{<br />        "group\_by": \[<br />          "tweet.id",<br />          "engagement.type"<br />        ]<br />      }<br />    }<br />  }' |
| **응답 예시** | \{<br />    "start": "2015-08-01T00:00:00Z",<br />    "end": "2015-08-15T00:00:00Z",<br />    "types-by-tweet-id": \{<br />      "123456789": \{<br />        "impressions": "0",<br />        "engagements": "0",<br />        "url\_clicks": "0",<br />        "detail\_expands": "0"<br />      },<br />      "223456789": \{<br />        "impressions": "788",<br />        "engagements": "134",<br />        "url\_clicks": "30",<br />        "detail\_expands": "1323"<br />      },<br />      "323456789": \{<br />        "impressions": "4",<br />        "engagements": "0",<br />        "url\_clicks": "2",<br />        "detail\_expands": "0"<br />      }<br />    }<br />  } |
| **사용 불가 트윗 ID** | 사용할 수 없게 된 트윗 ID(예: 삭제됨)가 포함된 쿼리의 경우, 사용 가능한 모든 트윗 ID에 대해서는 적절한 데이터가 반환되고, 사용할 수 없는 트윗 ID는 `unavailable_tweet_ids`라는 배열에서 참조됩니다. 예를 들어:<br /><br />\{<br />    "start": "2015-11-17T22:00:00Z",<br />    "end": "2015-11-19T02:27:50Z",<br />    "unavailable\_tweet\_ids": \[<br />        "323456789"<br />    ],<br />    "group1": \{<br />     "423456789": \{<br />      "favorites": "67",<br />      "replies": "8",<br />      "retweets": 26<br />     }<br />    }<br />  } |

<div id="response-codes">
  #### **응답 코드**
</div>

| 상태 | 텍스트 | 설명 |
| :--- | :--- | :--- |
| 200 | OK  | 요청이 성공했습니다. |
| 400 | Bad Request | 일반적으로 요청에 잘못된 JSON이 포함되었거나 JSON 페이로드가 전송되지 않아 발생합니다. |
| 401 | Unauthorized | 잘못된 자격 증명으로 인해 HTTP 인증에 실패했습니다. OAuth 키와 토큰을 확인하세요. |
| 404 | Not Found | 요청이 전송된 URL에서 리소스를 찾을 수 없습니다. 잘못된 URL을 사용했을 가능성이 큽니다. |
| 429 | Too Many Requests | 앱이 API 요청 한도를 초과했습니다. |
| 500 | Internal Server Error | Gnip 측 오류가 발생했습니다. 지수 백오프 방식으로 요청을 재시도하세요. |
| 502 | Proxy Error | Gnip 측 오류가 발생했습니다. 지수 백오프 방식으로 요청을 재시도하세요. |
| 503 | Service Unavailable | Gnip 측 오류가 발생했습니다. 지수 백오프 방식으로 요청을 재시도하세요. |

<div id="error-messages">
  #### **오류 메시지**
</div>

여러 상황에서 Engagement API는 상황에 따라 다른 오류 메시지를 반환하며, 애플리케이션은 이를 처리할 수 있어야 합니다. 아래 표에는 이러한 오류 메시지의 일반적인 예와 해석 방법이 포함되어 있습니다. 많은 경우 Engagement API는 추가 정보를 담은 200 OK 응답의 일부로 특정 오류 메시지와 함께 이용 가능한 데이터에 대한 부분 결과를 반환할 수 있다는 점에 유의하세요.

| 오류 메시지 | 설명 |
| :--- | :--- |
| `"errors":["Your account could not be authenticated. Reason: Access token not found"]` | 요청의 인증 구성 요소에서 발생한 오류입니다. “Reason”에는 문제 해결에 도움이 되는 정보가 제공됩니다. 해결이 어려운 경우 “Reason”을 포함한 전체 오류 내용을 지원팀에 보내주시기 바랍니다. |
| `"errors":["1 Tweet ID(s) are unavailable"],"unavailable_tweet_ids": ["TWEET_IDS"]` | 요청한 Tweet ID가 더 이상 사용 불가능합니다. 이는 보통 삭제되었거나 다른 이유로 더 이상 공개적으로 조회할 수 없음을 의미합니다. |
| `"errors":["Impressions & engagements for tweets older than 90 days (*TIME_PERIOD*) are not supported"],"unsupported_for_impressions_engagements_tweet_ids":[*TWEET_IDS*]` | /totals 엔드포인트에 대해 요청한 Tweet ID가 90일 이내가 아니므로 노출수 또는 참여수 지표를 반환할 수 없습니다. |
| `"errors":["Forbidden to access tweets: *TWEET_IDS*"]` | 제3자를 대신해 데이터를 조회하기 위해 사용 중인 인증 토큰 기준으로, 요청한 Tweet ID에 접근할 수 없습니다. |