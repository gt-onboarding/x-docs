---
title: 빠른 시작
sidebarTitle: 빠른 시작
---

import { Button } from '/snippets/ko/button.mdx';

<div id="getting-started-with-the-manage-direct-message-endpoints">
  ## Direct Message 관리 엔드포인트 시작하기
</div>

이 빠른 시작 가이드는 HTTP 요청을 관리하고 실행하는 도구인 Postman을 사용해 Direct Message 엔드포인트에 첫 요청을 보내는 방법을 안내합니다. Postman 컬렉션에 대해 자세히 알아보려면 [Postman 사용하기](/ko/tutorials/postman-getting-started) 가이드를 참조하세요.

Python 기반 예제를 확인하려면 [X API v2 샘플 코드](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 리포지토리를 방문하세요. 또한 공식 [X Developer Platform 소프트웨어 개발 키트(SDK)](/ko/x-api/tools-and-libraries/sdks)도 해당 Direct Message 엔드포인트를 지원하도록 업데이트될 예정입니다.  

<Note>
  **사전 준비 사항**

  이 가이드를 완료하려면 요청을 인증하기 위한 [키와 토큰](/ko/resources/fundamentals/authentication) 세트가 필요합니다. 다음 단계를 따라 이러한 키와 토큰을 생성할 수 있습니다:

  - [개발자 계정에 신청](https://developer.x.com/en/apply-for-access)하고 승인을 받습니다.
  - 개발자 포털에서 [프로젝트](/ko/resources/fundamentals/projects)와 연관된 [개발자 앱](/ko/resources/fundamentals/developer-apps)을 생성합니다.
  - 앱의 “Keys and tokens” 페이지로 이동해 필요한 자격 증명을 생성합니다. 모든 자격 증명은 안전한 위치에 보관하세요.
</Note>

<div id="steps-to-building-manage-direct-message-requests">
  ### 다이렉트 메시지 관리 요청 구성 단계
</div>

이 예제에서는 단일 요청으로 새 그룹 대화를 생성하고 첫 번째 메시지를 추가합니다. 그런 다음 생성된 대화에 두 번째 메시지를 추가합니다.

<div id="step-one-start-with-a-tool-or-library">
  #### 1단계: 도구 또는 라이브러리로 시작하기
</div>

Direct Message 관리 엔드포인트 작업을 시작하기 위해 프로세스를 단순화하는 Postman 도구를 사용하겠습니다. XDev가 작성한 X API v2 예제 요청 컬렉션을 통해 새 Direct Message를 생성하고 Direct Message 대화 이벤트를 나열하는 데 쓰이는 6개의 엔드포인트를 살펴봅니다.

컬렉션 대부분은 미리 채워져 있지만, 이 API 요청을 구동할 X App 기준으로 몇 가지 세부 정보를 직접 입력해야 합니다. 먼저 컬렉션을 로드/업데이트하겠습니다.

X API v2 Postman 컬렉션을 환경에 로드하려면 다음 버튼을 클릭하세요:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X API v2를 Postman에 추가
</Button>

Postman에 X API v2 컬렉션을 로드한 뒤 “Manage Direct Messages” 폴더로 이동하세요. 이 폴더의 Authorization 탭은 가능한 범위에서 미리 채워져 있으며, X App의 인증 정보를 공유할 수 있도록 몇 가지 설정을 업데이트할 수 있습니다. 이 폴더에는 새로운 Direct Message를 생성하는 세 가지 엔드포인트도 포함되어 있습니다. 또한 메시지 송수신, 대화 참여자 입장/퇴장 등 Direct Message 대화 이벤트를 조회하는 세 가지 엔드포인트가 포함된 "Direct Message lookup" 폴더도 있습니다. 

그룹 대화 생성은 X API v2의 유용한 신규 기능이므로, 이번 예제에서는 여기에 집중하겠습니다. "New group DM and conversation" 예제를 사용하여 Direct Message 그룹 대화를 생성하겠습니다.

다음 단계는 엔드포인트와의 인증입니다.

**2단계: 요청 인증**

X API에 올바르게 요청하려면 해당 권한이 있어야 합니다. 이 엔드포인트에 성공적으로 요청하기 위해 [OAuth 2.0 Authorization Code Flow with PKCE](ko/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)를 사용하겠습니다. Postman에서 액세스 토큰을 생성할 수 있습니다. 

Postman에서는 폴더 수준 또는 요청 수준에서 인증 방법을 설정할 수 있습니다. 여기서는 폴더 수준에서 인증 정보를 구성합니다.

"Manage Direct Messages" 폴더로 이동해 "Authorization" 탭을 선택하고, Type이 “OAuth 2.0”으로, "Add auth data to"가 "Request Headers"로 설정되어 있는지 확인하세요. "Current Token" 섟션에서 "Header Prefix"가 Bearer로 설정되어 있는지 확인하세요.  

새 토큰을 구성하고 생성하려면:

1. "Manage DMs"와 같은 토큰 이름을 만듭니다.

2. **Grant Type**이 Authorization Code (with PKCE)로 설정되어 있는지 확인합니다.

3. **Callback URL**을 설정합니다. [v2 Dev Portal](https://developer.x.com/en/portal/dashboard)에서 애플리케이션에 설정된 Callback URL과 정확히 일치하도록 업데이트해야 합니다. 이 예제에서 사용하는 X App의 Callback URL은 [_https://www.example.com_](https://www.example.com/) 입니다. (정확히 일치해야 하므로 [_https://example.com_](https://example.com)은 작동하지 않습니다.) 

4. **Auth URL**이 [https://x.com/i/oauth2/authorize](https://x.com/i/oauth2/authorize)로 설정되어 있는지 확인합니다.

5. **Access Token URL**이 [https://api.x.com/2/oauth2/token](https://api.x.com/2/oauth2/token)으로 설정되어 있는지 확인합니다.\
   **Client ID** - Developer Portal에서 OAuth 2.0 Client ID를 복사해 붙여넣습니다\
   **Client Secret** - 비공개 클라이언트 유형의 App을 사용하는 경우에만 필요합니다. 해당되는 경우 Developer Portal에서 OAuth 2.0 Client Secret을 복사해 붙여넣습니다. 

6. **Scope**가 dm.read, dm.write, tweet.read, users.read로 설정되어 있는지 확인합니다.

7. **State**가 “state”로 설정되어 있는지 확인합니다.

8. **Client Authentication**이 Send as Basic Auth header로 설정되어 있는지 확인합니다.

9. **Get New Access Token**을 클릭한 다음, "Sign in with X" 흐름에서 "Authorize app"을 클릭합니다.

10. "Proceed"를 클릭한 뒤 "Use Token"을 클릭해 토큰을 적용합니다. 

11. "Save" 버튼을 클릭해 이 구성 정보를 저장합니다.

X에 로그인되어 있지 않다는 메시지가 표시될 수 있습니다. 이 오류가 발생하면 Postman 내에서 게시하려는 X 계정으로 로그인해야 합니다.

이제 OAuth 2.0 세부정보가 폴더 수준에서 설정되었으므로 각 예제의 "Authorization" 탭으로 이동해 Type이 "Inherit auth from parent"로 설정되어 있는지 확인하세요. 

이 토큰은 곧 만료되므로 "Get New Access Token" 버튼을 클릭해 다시 생성해야 합니다. 클릭하면 "Sign in with X" 절차가 시작되며, 요청에 사용할 새 토큰이 발급됩니다.

<div id="step-three-specify-the-direct-message-conversation-participants-and-message-contents">
  #### 3단계: 다이렉트 메시지 대화 참가자와 메시지 내용을 지정하기
</div>

“Body” 탭으로 이동하여 예제 JSON 객체를 수정합니다. 다이렉트 메시지를 보낼 계정의 ID로 participant\_ids 속성을 설정합니다.

`{
   "message": {"text": "너희 두 사람에게 인사해요. 새로운 그룹 대화입니다."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}`

<div id="step-four-make-your-request-and-review-the-response">
  #### 4단계: 요청 보내고 응답 검토하기
</div>

모든 설정을 마쳤다면 "Send" 버튼을 클릭하세요. 아래 예시와 유사한 응답을 받게 됩니다. 참고로, 위에서 생성한 토큰이 만료되었다면 해당 폴더의 Authorization 탭으로 돌아가 "Get New Access Token"을 클릭해 새 토큰을 발급받을 수 있습니다.

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582103724607971332"
   }
}
```

반환된 응답의 "data" 객체에 dm\_conversation\_id와 dm\_event\_id가 포함되어 있다면 새 다이렉트 메시지 대화를 성공적으로 생성한 것입니다. 이 대화와 관련된 이벤트 조회를 시작하려면 Direct Message 조회 빠른 시작 가이드를 확인하세요.

<div id="step-five-add-another-message-to-that-group-conversation">
  #### 5단계: 해당 그룹 대화에 메시지 하나 더 추가하기
</div>

이제 "Add DM to conversation" 예제를 선택한 뒤 "Params" 탭을 선택하세요. "Path Variables"에서 위에서 만든 대화의 ID로 dm\_conversation\_id 값을 업데이트하세요.

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| dm\_conversation\_id | 1582103724607971328 |

이 대화 ID를 사용하면 요청 경로는 다음과 같이 해석됩니다: https://api.x.com/2/dm\_conversations/1582103724607971328/messages

또한, 보내려는 메시지 텍스트를 포함한 요청 JSON으로 "Body" 탭을 업데이트하세요:

```
{
   "text": "그룹 대화에 새 메시지를 추가합니다..."
}
```

모든 설정을 마쳤다면 "Send" 버튼을 클릭하세요. 그러면 아래 예시와 유사한 응답을 받게 됩니다:

```
{
   "data": {
       "dm_conversation_id": "1582103724607971328",
       "dm_event_id": "1582106224379559940"
   }
}
```