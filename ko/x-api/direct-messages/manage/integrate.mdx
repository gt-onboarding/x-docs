---
title: 통합 안내서
sidebarTitle: 통합 안내서
---

import { Button } from '/snippets/ko/button.mdx';

Direct Messages 엔드포인트 v2는 대화 및 대화 이벤트를 핵심 X API 객체로 도입하고, 일대일 대화와 그룹 대화를 구분합니다. 일대일 대화에는 항상 두 명, 정확히 두 명의 참여자만 있으며, 그룹 대화는 두 명 이상이 참여할 수 있고 멤버 구성원이 변경될 수 있습니다.   

이 페이지에는 Manage Direct Messages 엔드포인트를 시스템에 통합할 때 알아두어야 할 여러 도구와 핵심 개념에 대한 정보가 포함되어 있습니다. 이 페이지는 두 섹션으로 구성됩니다:

- 핵심 개념
  - [Direct Message 대화](#direct-message-conversations)

  - [v1.1과 v2 간 공유되는 대화 및 이벤트 ID](#shared-conversation-and-event-ids)

  - [미디어 첨부 포함 및 게시물 참조](#including-media-attachments-and-referencing-tweets)

  - [인증](#authentication)

  - [개발자 포털, 프로젝트와 앱, 개발자 앱](#developer-portal-projects-and-developer-apps)

  - [Rate limits](#rate-limits)

- [유용한 도구](#helpful-tools)

**핵심 개념**

<div id="direct-message-conversations">
  ### 다이렉트 메시지 대화
</div>

모든 다이렉트 메시지는 다이렉트 메시지 대화에 속합니다. 이러한 대화는 1:1 대화 또는 그룹 대화일 수 있습니다. 이번 출시에서는 다이렉트 메시지를 생성하고 다이렉트 메시지 대화와 관련된 이벤트를 조회하는 데 필요한 기본 엔드포인트를 제공합니다. 모든 대화에는 고유한 dm\_conversation\_id가 있으며, 해당 대화를 구성하는 모든 이벤트에도 고유한 dm\_event\_id가 있습니다.  

Manage Direct Message 엔드포인트는 새 메시지를 생성해 대화에 추가하는 세 가지 POST 메서드를 제공합니다:

- **POST /2/dm\_conversations/with/:participant\_id/messages** - 1:1 다이렉트 메시지를 생성합니다. 이 메서드는 기존 1:1 대화에 메시지를 추가하거나 새 대화를 생성합니다. :participant\_id 경로 매개변수는 메시지를 받는 계정의 사용자 ID입니다. 
  다음은 1:1 다이렉트 메시지를 보내기 위한 JSON 요청 본문 예시입니다:

```
{
   "text": "Hello just you. This will appear as a new conversation if we have never messaged, or will be added to our existing thread. "
}
```

- **POST /2/dm\_conversations** - 새 그룹 대화를 생성하고 여기에 다이렉트 메시지를 추가합니다. 이 요청에는 대화 참가자 목록이 필요합니다. 동일한 참가자 목록으로 여러 대화를 생성할 수 있습니다. 이 요청은 항상 새로운 대화 ID를 반환합니다. 아래는 새 그룹 대화를 생성하고 다이렉트 메시지를 추가하기 위한 JSON 요청 본문 예시입니다. "conversation\_type" 필드가 필요하며, 대소문자를 구분해 "Group"으로 설정해야 합니다.

```
{
   "message": {"text": "Hello to just you two, this is a new group conversation."},
   "participant_ids": ["944480690","906948460078698496"],
   "conversation_type": "Group"
}
```

- **POST /2/dm\_conversations/:dm\_conversation\_id/messages** - 다이렉트 메시지를 생성해 기존 대화에 추가합니다. :dm\_conversation\_id 경로 매개변수는 메시지가 추가될 대화의 ID입니다. 이 메서드는 1:1 및 그룹 대화 모두에 메시지를 추가하는 데 사용할 수 있습니다.
  다음은 1:1 및 그룹 대화 모두에 다이렉트 메시지를 보내기 위한 JSON 요청 본문 예시입니다:

```
{
   "text": "Here is a new message."
}
```

이들 POST 메서드는 단일 미디어 첨부를 지원합니다. POST 요청 본문에는 "text"와 "attachments" 필드 중 하나 또는 둘 다가 포함되어야 합니다. "attachments" 필드가 없는 경우 "text" 속성이 필요하고, "text" 필드가 없는 경우 "attachments" 필드가 필요합니다. 자세한 내용은 다음 섹션을 참조하세요.

자세한 내용은 [Manage Direct Messages API References](/ko/x-api/direct-messages/create-a-new-dm-conversation)를 참조하세요. 

<div id="shared-conversation-and-event-ids-across-v11-and-v2">
  ### v1.1과 v2에서 공유되는 대화 및 이벤트 ID
</div>

중요한 개념으로, 대화 ID와 이벤트 ID는 X 플랫폼의 v1.1과 v2에서 공통으로 사용됩니다. 즉, 두 버전을 함께 활용할 수 있습니다.

예를 들어, Direct Messages v1.1 엔드포인트에는 단일 이벤트를 반환하거나 이벤트를 삭제하는 메서드가 있습니다. 이러한 메서드는 아직 v2에는 없습니다. ID가 v1.1과 v2에서 동일하게 쓰이므로, v2에서 받은 ID를 사용해 v1.1 요청을 보내거나 X 애플리케이션의 대화 URL에 표시되는 대화 ID를 참조할 수 있습니다.  

<div id="including-media-attachments-and-referencing-posts">
  ### 미디어 첨부 및 게시물 참조
</div>

Manage Direct Message 엔드포인트는 모두 하나의 미디어(사진, 동영상 또는 GIF) 첨부를 지원합니다. 미디어를 첨부하려면 v1.1 [Upload media](https://developer.x.com/en/docs/x-api/v1/media/upload-media/overview) 엔드포인트에서 생성된 미디어 ID가 필요합니다. 다이렉트 메시지를 전송하는 인증된 사용자가 해당 미디어를 업로드했어야 합니다. 업로드가 완료되면 미디어는 메시지에 포함하기 위해 24시간 동안 사용 가능합니다.

미디어를 포함하는 방법을 보여주기 위한 예시 JSON 요청 본문은 다음과 같습니다:

```
{
 "text": "Here's a photo...",
 "attachments": [{"media_id": "1583157113245011970}]
}
```

생성되는 MessageCreate 이벤트에는 다음 메타데이터가 포함됩니다:

```
{
    "attachments": {
        "media_keys": [
            "5_1583157113245011970"
        ]
    }
}
```

게시물은 메시지 텍스트에 게시물 URL을 포함하여 첨부할 수도 있습니다. 메시지에 게시물을 포함하는 방법을 보여주기 위한 예시 JSON 요청 본문은 다음과 같습니다:

```
{
 "text": "Here's the Tweet I was talking about: https://x.com/SnowBotDev/status/1580559079470145536"
}
```

생성되는 MessageCreate 이벤트에는 다음 메타데이터가 포함됩니다:

```
{
    "referenced_tweets": [
        {
            "id": "1580559079470145536"
        }
    ]
}
```

<div id="authentication">
  ### 인증
</div>

모든 X API v2 엔드포인트는 키와 토큰으로도 불리는 자격 증명 세트로 요청을 인증해야 합니다. 모든 다이렉트 메시지는 비공개이며, 액세스하려면 사용자 권한 부여가 필요합니다.

이 다이렉트 메시지 엔드포인트는 [OAuth 2.0 Authorization Flow with PKCE](/ko/x-api/posts/manage-tweets) 또는 [1.0a 사용자 컨텍스트](/ko/resources/fundamentals/authentication)를 사용해야 합니다. 이는 요청을 성공적으로 수행하려면 API 키와 사용자 액세스 토큰을 사용해야 함을 의미합니다. 액세스 토큰은 귀하가 대리하여 요청하는 해당 사용자와 연결되어 있어야 합니다. 다른 사용자의 액세스 토큰을 생성하려면, 해당 사용자가 [3-legged OAuth 흐름](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)을 통해 귀하의 앱을 승인(또는 인증)해야 합니다.

OAuth 사용자 컨텍스트는 다소 까다로울 수 있습니다. 이 인증 방식에 익숙하지 않다면, [라이브러리](/ko/x-api/tools-and-libraries/overview)나 Postman 같은 도구를 사용해 요청을 올바르게 인증할 것을 권장합니다.

[OAuth 2.0 Authorization Code with PKCE](ko/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)는 애플리케이션의 스코프와 여러 기기에 걸친 권한 부여 흐름을 더 세밀하게 제어할 수 있게 해줍니다. OAuth 2.0에서는 세분화된 스코프를 선택해 사용자 대리로 특정 권한을 부여할 수 있습니다. 다이렉트 메시지 조회 엔드포인트에는 다음 스코프가 필요합니다: dm.write, dm.read, tweet.read, user.read.

앱에서 OAuth 2.0을 사용하려면, 개발자 포털의 앱 설정 섹션에 있는 앱 인증 설정에서 이를 활성화해야 합니다.

<div id="developer-portal-projects-and-developer-apps">
  ### 개발자 포털, 프로젝트와 앱
</div>

X API v2 엔드포인트에서 사용할 인증 자격 증명 세트를 얻으려면 승인된 개발자 계정이 있어야 하며, 해당 계정 내에 프로젝트를 설정하고 그 프로젝트 내에 개발자 앱을 생성해야 합니다. 그런 다음 개발자 앱에서 키와 토큰을 확인할 수 있습니다. 

<div id="rate-limits">
  ### 요청 한도
</div>

매일 수천 명의 개발자가 X API에 요청을 보냅니다. 이러한 요청의 방대한 양을 관리하기 위해 각 엔드포인트에는 앱 또는 인증된 사용자를 대신해 보낼 수 있는 요청 수를 제한하는 요청 한도가 설정되어 있습니다. 

Manage Direct Message 엔드포인트에는 사용자 단위와 X App 단위의 요청 한도가 적용됩니다. 이는 요청을 수행하는 인증된 사용자가 해당 X App을 통해 보낼 수 있는 메시지 수에 제한이 있음을 의미합니다. 또한 X App이 하루에 보낼 수 있는 Direct Message 수에도 일일 한도가 있습니다. 

POST 메서드의 경우 15분당 200건의 요청/메시지로 사용자 요청 한도가 적용됩니다. 사용자에게는 24시간당 1,000건의 Direct Message 한도도 적용됩니다. 추가로 X App에는 24시간당 15,000건의 메시지 한도가 있습니다. 이러한 요청 한도는 POST 엔드포인트 전반에 걸쳐 공유됩니다. 

**유용한 도구**

Direct Messages 조회 엔드포인트를 사용할 때 참고하실 만한 유용한 도구는 다음과 같습니다: 

****Postman****

Postman은 엔드포인트를 테스트하는 데 유용한 도구입니다. 각 Postman 요청에는 사용 가능한 항목을 빠르게 파악할 수 있도록 모든 경로 및 본문 매개변수가 포함되어 있습니다. Postman 컬렉션에 대해 더 알아보려면 [Using Postman](/ko/tutorials/postman-getting-started) 페이지를 방문하세요. 

****코드 샘플****

v2 Direct Messages 엔드포인트용 Python 샘플 코드는 [X API v2 sample code GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code) 리포지토리에서 확인할 수 있습니다. "Manage-Direct-Messages" 폴더에는 POST 메서드 예제가, "Direct-Messages-lookup" 폴더에는 GET 메서드 예제가 포함되어 있습니다. (https://github.com/xdevplatform/Twitter-API-v2-sample-code)[](https://github.com/xdevplatform/Twitter-API-v2-sample-code)

**XDev 소프트웨어 개발 키트(SDK)**

다음 [라이브러리](/ko/x-api/tools-and-libraries/overview)는 v2 Direct Messages 엔드포인트를 위해 업데이트 중이며 곧 제공될 예정입니다:

- [X API Java SDK](https://github.com/xdevplatform/twitter-api-java-sdk) - X API v2 공식 Java SDK
- [X API TypeScript/JavaScript SDK](https://github.com/xdevplatform/twitter-api-typescript-sdk) - X API v2 공식 TS/JS SDK

**서드파티 라이브러리**

커뮤니티에서 개발한 [서드파티 라이브러리](/ko/x-api/tools-and-libraries/overview#community-tools-and-libraries-for-v2)가 지속적으로 늘어나고 있습니다. 이러한 라이브러리는 시작을 돕기 위해 설계되었으며, 일부는 곧 v2 Direct Messages 엔드포인트를 지원할 예정입니다. 적절한 버전 태그를 확인해 v2 엔드포인트와 호환되는 라이브러리를 찾을 수 있습니다.