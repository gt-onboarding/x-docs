---
title: 통합 가이드
sidebarTitle: 통합 가이드
---

import { Button } from '/snippets/ko/button.mdx';

Direct Messages 엔드포인트 v2는 대화와 대화 이벤트를 핵심 X API 객체로 도입하고, 1:1 대화와 그룹 대화를 구분합니다. 1:1 대화에는 항상 정확히 두 명의 참여자만 존재하며, 그룹 대화에는 두 명 이상이 참여할 수 있고 참여자 구성이 변경될 수 있습니다.   

이 페이지에는 Direct Messages 조회 엔드포인트를 시스템에 통합할 때 알아두어야 할 여러 도구와 핵심 개념이 포함되어 있습니다. 이 페이지는 두 섹션으로 구성됩니다:

- 핵심 개념
  - [Direct Message 대화](#direct-message-conversations)
  - [v1.1과 v2 전반에 걸쳐 공유되는 대화 및 이벤트 ID](#shared-conversation-and-event-ids)
  - [Direct Message 이벤트 필드와 확장](#direct-message-event-fields-and-expansions)
  - [대화 이벤트 유형](#conversation-event-types)
  - [인증](#authentication)
  - [개발자 포털, 프로젝트와 앱](#developer-portal-projects-and-apps)
  - [요율 제한](#rate-limits)
  - [페이지네이션](#pagination)
- [유용한 도구](#helpful-tools)

<div id="key-concepts">
  ### 핵심 개념
</div>

<div id="direct-message-conversations">
  ### 다이렉트 메시지 대화
</div>

모든 다이렉트 메시지는 다이렉트 메시지 대화의 일부입니다. 이러한 대화는 1:1 대화일 수도 있고 그룹 대화일 수도 있습니다. 이번 출시에서는 다이렉트 메시지를 생성하고 다이렉트 메시지 대화와 관련된 이벤트를 검색하는 데 필요한 기본 엔드포인트를 제공합니다. 모든 대화에는 고유한 dm\_conversation\_id가 있으며, 해당 대화를 구성하는 이벤트에는 각각 고유한 dm\_event\_id가 있습니다.  

다이렉트 메시지 조회 엔드포인트는 대화와 관련된 이벤트를 검색하는 메서드를 제공합니다. 이러한 GET 엔드포인트는 대화를 구성하는 메시지를 검색하는 데 사용되며, 그룹 대화의 경우 누가 그룹 대화에 참여하거나 나갔는지 파악하는 데 사용할 수 있습니다.

다이렉트 메시지 조회의 초기 릴리스에는 세 가지 GET 메서드가 포함됩니다:

- **GET /2/dm\_conversations/with/:participant\_id/dm\_events** - 1:1 대화와 관련된 다이렉트 메시지 이벤트를 검색합니다. :participant\_id 경로 매개변수는 이 요청을 수행하는 인증된 사용자와 대화를 나누는 계정의 숫자형 사용자 ID입니다.  

- **GET /2/dm\_conversations/:dm\_conversation\_id/dm\_events** - :dm\_conversation\_id 경로 매개변수로 지정된 특정 대화 ID와 관련된 다이렉트 메시지 이벤트를 검색합니다. 1:1 및 그룹 대화 ID를 모두 지원합니다.  

- **GET /2/dm\_events** - 1:1 및 그룹 대화를 포함하여 인증된 사용자와 관련된 다이렉트 메시지 이벤트를 검색합니다. 최대 30일 전의 이벤트까지 제공됩니다.  

이들 GET 엔드포인트는 모두 event\_types 요청 쿼리 매개변수를 사용해 이벤트 유형별로 dm\_events를 검색하는 기능을 지원합니다. 현재 지원되는 대화 이벤트 유형은 다음의 세 가지입니다:

- **MessageCreate** - 새로운 다이렉트 메시지가 생성될 때 생성됩니다. 이 이벤트 객체에는 메시지의 시간과 텍스트, 발신자의 계정 ID, 대화 및 이벤트 ID가 포함될 수 있습니다. 

- **ParticipantsJoin** - 새로운 참가자가 그룹 대화에 참여할 때 생성됩니다. 이 dm\_event 객체에는 참여하는 참가자의 ID와 함께 created\_at 시간 및 'invite' 이벤트의 sender\_id가 포함됩니다. 

- **ParticipantsLeave** - 참가자가 대화를 나갈 때 생성됩니다. 이 이벤트 객체에는 나가는 참가자의 ID와 이벤트 시간이 포함됩니다. 

자세한 내용은 [다이렉트 메시지 조회 API 참조](/ko/x-api/direct-messages/get-dm-events-for-a-dm-conversation)를 참조하세요.

<div id="shared-conversation-and-event-ids-across-v11-and-v2">
  ### v1.1 및 v2 전반에서 공유되는 대화 및 이벤트 ID
</div>

중요한 개념으로, 대화 및 이벤트 ID는 X 플랫폼의 v1.1과 v2에서 공통으로 사용됩니다. 이는 두 버전을 함께 활용할 수 있음을 의미합니다. 예를 들어, Direct Messages v1.1 엔드포인트에는 단일 이벤트 조회와 이벤트 삭제 메서드가 있는데, 이는 아직 v2에는 없습니다. ID가 v1.1과 v2에서 동일하므로, v2에서 제공된 ID로 v1.1 요청을 보내거나 X 애플리케이션의 대화 URL에 표시되는 대화 ID를 참조할 수 있습니다.  

<div id="direct-message-event-fields-and-expansions">
  ### 다이렉트 메시지 이벤트 필드와 확장
</div>

X API v2는 필드와 확장이라는 도구 세트를 통해, 사용자가 API에서 반환할 데이터를 정확하게 선택할 수 있도록 합니다. 예를 들어, 다이렉트 메시지 조회 엔드포인트는 다음 dm\_events 필드를 지원합니다:

- MessageCreate 이벤트의 기본값은 id, event\_type, text입니다.

- ParticipantsJoin 및 ParticipantsLeave 이벤트의 기본값은 id, event\_type, participant\_ids입니다.

- 모든 이벤트에서 dm\_conversation\_id 및 created\_at을 사용할 수 있습니다.

- MessageCreate 이벤트에서 attachments 및 referenced\_tweets를 사용할 수 있습니다.

- MessageCreate 및 ParticipantsJoin 이벤트에서 sender\_id를 사용할 수 있습니다.

- ParticipantsJoin 및 ParticipantsLeave 이벤트에서 participant\_ids를 사용할 수 있습니다.

또한 다이렉트 메시지 조회 엔드포인트는 다음 [확장](/ko/x-api/fundamentals/expansions)을 지원합니다:

- sender\_id - 메시지를 보낸 사용자 또는 대화에 누군가를 초대한 사용자에 해당하는 User 객체를 확장합니다.

- referenced\_tweets.id - 다이렉트 메시지 텍스트에 게시물 링크가 포함된 경우 Post 객체를 확장합니다.

- attachments.media\_keys - 다이렉트 메시지에 미디어 첨부가 포함된 경우 Media 객체를 확장합니다.

- participant\_ids - 그룹 대화에 참여했거나 떠난 사용자에 해당하는 User 객체를 확장합니다.

확장에는 Post, User, Media 객체가 포함되므로 tweet.fields, user.fields, media.fields 요청 쿼리 매개변수도 함께 사용할 수 있습니다. 자세한 내용은 [필드와 확장 사용 방법](/ko/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions) 가이드를 참조하세요.

<div id="conversation-event-types">
  ### 대화 이벤트 유형
</div>

아래는 다이렉트 메시지의 MessageCreate, ParticipantsJoin, ParticipantsLeave 이벤트 유형에 대한 JSON 객체 예시입니다.

사용 가능한 dm\_event 객체 필드: id, text, event\_type, dm\_conversation\_id, created\_at, sender\_id, attachments, referenced\_tweets, participant\_ids. 요청에서 이러한 필드를 선택하는 방법에 대한 자세한 내용은 Fields and Expansion 섹션을 참조하세요.

MessageCreate 이벤트 예시:

모든 dm\_event 필드를 지정했을 때, 간단한 텍스트 다이렉트 메시지에 대한 응답은 다음과 같습니다:

`{
    "text": "Hi everyone.",
    "sender_id": "944480690",
    "dm_conversation_id": "1578398451921985538",
    "id": "1582838499983564806",
    "event_type": "MessageCreate",
    "created_at": "2022-10-19T20:58:00.000Z"
}`

ParticipantsJoin 이벤트 예시:

모든 dm\_event 필드를 지정했을 때, 대화에 참가자가 합류하는 경우의 응답은 다음과 같습니다:

`{
    "participant_ids": [
        "944480690"
    ],
    "sender_id": "17200003",
    "dm_conversation_id": "1578398451921985538",
    "id": "1582835469712138240",
    "event_type": "ParticipantsJoin",
    "created_at": "2022-10-19T20:45:58.000Z"
}`

ParticipantsLeave 이벤트 예시:

모든 dm\_event 필드를 지정했을 때, 대화에서 참가자가 떠나는 경우의 응답은 다음과 같습니다:

`{
    "participant_ids": [
        "944480690"
    ],
    "dm_conversation_id": "1578398451921985538",
    "id": "1582838535115067392",
    "event_type": "ParticipantsLeave",
    "created_at": "2022-10-19T20:58:09.000Z"
    }`

<div id="authentication">
  ### 인증
</div>

모든 X API v2 엔드포인트는 키와 토큰으로도 불리는 자격 증명 세트로 요청을 인증해야 합니다. 모든 다이렉트 메시지는 비공개이며 액세스하려면 사용자 권한 부여가 필요합니다. 

이 다이렉트 메시지 엔드포인트는 [OAuth 2.0 Authorization Flow with PKCE](/ko/x-api/posts/manage-tweets) 또는 [1.0a 사용자 컨텍스트](/ko/resources/fundamentals/authentication)를 사용해야 합니다. 이는 요청을 성공적으로 수행하려면 API 키와 사용자 액세스 토큰을 함께 사용해야 함을 의미합니다. 액세스 토큰은 대리 요청 대상 사용자와 연결되어 있어야 합니다. 다른 사용자의 액세스 토큰을 생성하려면, 해당 사용자가 [3-legged OAuth 흐름](/ko/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)을 통해 귀하의 앱을 승인(또는 인증)해야 합니다.

OAuth 사용자 컨텍스트는 사용이 까다로울 수 있습니다. 이 인증 방식에 익숙하지 않다면, 요청을 올바르게 인증하기 위해 [라이브러리](/ko/x-api/tools-and-libraries/overview)나 Postman과 같은 도구 사용을 권장합니다. 

[OAuth 2.0 Authorization Code with PKCE](ko/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)는 애플리케이션 범위(scope)에 대한 더 정교한 제어와 여러 기기에 걸친 권한 부여 흐름을 제공합니다. OAuth 2.0을 사용하면 사용자 대리로 세밀한 스코프를 지정해 필요한 권한만 부여할 수 있습니다. 다이렉트 메시지 조회 엔드포인트에는 다음 스코프가 필요합니다: dm.read, post.read, user.read

앱에서 OAuth 2.0을 사용하려면, 개발자 포털의 앱 설정 섹션에 있는 인증 설정에서 이를 활성화해야 합니다.

<div id="developer-portal-projects-and-developer-apps">
  ### 개발자 포털, 프로젝트와 앱
</div>

X API v2 엔드포인트에서 사용할 인증 자격 증명 세트를 받으려면 승인된 개발자 계정을 보유하고, 해당 계정 내에 프로젝트를 설정한 뒤 그 프로젝트 안에 개발자 앱을 생성해야 합니다. 이후 개발자 앱에서 키와 토큰을 확인할 수 있습니다. 

<div id="rate-limits">
  ### 할당량 제한
</div>

매일 수천 명의 개발자가 X API에 요청을 보냅니다. 이러한 대량의 요청을 관리하기 위해 각 엔드포인트에는 앱 또는 인증된 사용자를 대신해 보낼 수 있는 요청 수를 제한하는 할당량이 설정되어 있습니다.

Direct Message 조회 엔드포인트는 사용자 단위로 할당량이 적용됩니다. 즉, 요청을 보내는 인증된 사용자는 귀하의 X 앱을 통해 제한된 횟수만 요청할 수 있습니다. GET 메서드의 경우 15분당 300건의 사용자 할당량이 적용됩니다. 이 할당량은 모든 GET 엔드포인트에서 공유됩니다. 

<div id="pagination">
  ### 페이지네이션
</div>

이 엔드포인트들은 응답을 빠르게 반환하기 위해 페이지네이션을 사용합니다. 단일 응답으로 보낼 수 있는 결과 수(최대 100개 이벤트)를 초과하는 경우 페이지네이션이 필요합니다. 페이지당 반환할 결과 수를 지정하려면 max\_results 매개변수를, 다음 페이지의 결과를 받으려면 pagination\_token 매개변수를 사용하세요. 자세한 내용은 [페이지네이션 가이드](/ko/x-api/fundamentals/pagination)를 확인하세요.

**유용한 도구**

Direct Messages 조회 엔드포인트를 사용할 때 살펴보시길 권장하는 유용한 도구는 다음과 같습니다:

****Postman****

Postman은 엔드포인트를 테스트하는 데 유용한 도구입니다. 각 Postman 요청에는 사용 가능한 항목을 빠르게 파악할 수 있도록 모든 경로 및 본문 매개변수가 포함되어 있습니다. Postman 컬렉션에 대해 더 알아보려면 [Using Postman](/ko/tutorials/postman-getting-started) 페이지를 방문하세요.

****코드 샘플****

v2 Direct Messages 엔드포인트용 Python 샘플 코드는 [X API v2 샘플 코드 GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code) 리포지토리에서 확인할 수 있습니다. "Manage-Direct-Messages" 폴더에는 POST 메서드 예제가, "Direct-Messages-lookup" 폴더에는 GET 메서드 예제가 포함되어 있습니다.

****XDev Software Development Kits (SDKs)****

이 [라이브러리](/ko/x-api/tools-and-libraries/overview)는 v2 Direct Messages 엔드포인트에 맞춰 업데이트 중이며 곧 제공될 예정입니다:

- [X API Java SDK](https://github.com/xdevplatform/twitter-api-java-sdk) - X API v2용 공식 Java SDK
- [X API TypeScript/JavaScript SDK](https://github.com/xdevplatform/twitter-api-typescript-sdk) - X API v2용 공식 TS/JS SDK

**서드파티 라이브러리**

커뮤니티에서 개발한 [서드파티 라이브러리](/ko/x-api/tools-and-libraries/overview#community-tools-and-libraries-for-v2)가 계속 늘고 있습니다. 이러한 라이브러리는 시작을 돕기 위해 설계되었으며, 여러 라이브러리가 곧 v2 Direct Messages 엔드포인트를 지원할 예정입니다. 적절한 버전 태그를 확인해 v2 엔드포인트와 호환되는 라이브러리를 찾을 수 있습니다.