---
title: 빠른 시작
sidebarTitle: 빠른 시작
---

import { Button } from '/snippets/ko/button.mdx';

<div id="getting-started-with-the-filtered-stream-endpoints">
  ## 필터드 스트림 엔드포인트 시작하기
</div>

이 빠른 시작 가이드는 cURL 요청으로 필터드 스트림 엔드포인트 그룹에 첫 요청을 보내는 방법을 안내합니다. cURL은 최소한의 설정만으로 요청을 보낼 수 있는 커맨드라인 도구입니다.

다른 언어의 샘플 코드를 보려면 [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 리포지토리를 방문하세요.

<Note>
  **사전 준비 사항**

  이 가이드를 완료하려면 요청 인증에 사용할 [keys and tokens](/ko/resources/fundamentals/authentication) 세트가 필요합니다. 다음 단계를 통해 해당 keys and tokens을 생성할 수 있습니다:

  - [개발자 계정 신청](https://developer.x.com/en/apply-for-access) 후 승인을 받습니다.
  - 개발자 포털에서 [프로젝트](/ko/resources/fundamentals/projects)와 연결된 [개발자 앱](/ko/resources/fundamentals/developer-apps)을 생성합니다.
  - 앱의 "Keys and tokens" 페이지로 이동해 필요한 자격 증명을 생성합니다. 모든 자격 증명은 안전한 위치에 보관하세요.
</Note>

<div id="steps-to-build-a-filtered-stream-request-using-curl">
  ### cURL을 사용해 필터드 스트림 요청을 구성하는 단계
</div>

**1단계: 규칙 생성**

규칙은 불리언 논리와 괄호로 결합되는 하나 이상의 [연산자](/ko/x-api/posts/filtered-stream#building-rules-for-filtered-stream)로 구성되며, 어떤 게시물이 스트림으로 전달될지를 정의하는 데 도움이 됩니다. 이 가이드에서는 키워드 “cat”과 이미지가 모두 포함된 게시물을 찾도록 스트림을 필터링합니다. 규칙은 다음과 같습니다:

```cat has:images
```

**2단계: 규칙에 태그 추가**

스트림에 여러 개의 규칙을 동시에 추가할 수 있습니다. 스트리밍 연결을 열면 이 규칙들 중 어느 하나와 일치하는 게시물은 동일한 스트리밍 연결을 통해 전달됩니다. 어떤 게시물이 어떤 규칙과 일치했는지 파악할 수 있도록, 규칙 생성 요청에 태그를 함께 전달할 수 있습니다. 해당 규칙과 일치하는 각 게시물에는 어떤 규칙과 일치했는지를 나타내는 tag 필드가 게시물 페이로드에 포함됩니다. 이 규칙에는 다음 태그를 지정하겠습니다:

```cats with images
```

**3단계: 규칙을 스트림에 추가**

이 엔드포인트는 규칙과 태그를 포함하는 application/json 본문을 함께 전달해야 합니다. 또한 이 규칙을 스트림에 추가하려고 하므로 규칙 값과 태그가 add 오브젝트 내에 포함되어 있음을 확인할 수 있습니다. JSON 본문은 다음과 같습니다:

```json
{
  "add": [
    {
      "value": "cat has:images",
      "tag": "cats with images"
    }
  ]
}
```

이 JSON 본문 구성을 마쳤으므로 이를 cURL 요청에 포함할 수 있으며, 다음과 같은 형태가 됩니다. 이 요청은 아직 준비되지 않았으니, 이후 단계까지 제출은 보류하세요.

```json
curl -X POST 'https://api.x.com/2/tweets/search/stream/rules' \
-H "Content-type: application/json" \
-H "Authorization: Bearer $APP_ACCESS_TOKEN" -d \
'{
  "add": [
    {"value": "cat has:images", "tag": "cats with images"}
  ]
}'`
```

**4단계: 요청 인증**

필터드 스트림 규칙 엔드포인트에는 [OAuth 2.0 App-Only 인증](/ko/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)이 필요하므로, 3단계의 cURL 명령에서 $APP\_ACCESS\_TOKEN을 사전 준비 단계에서 생성한 [App Access Token](/ko/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)으로 대체해야 합니다.

**5단계: 규칙을 스트림에 추가**

다음으로 cURL 요청을 실행하여 규칙을 스트림에 추가합니다. cURL 명령을 명령줄 인터페이스에 복사해 붙여넣고 Enter 키를 누르세요.

cURL 요청이 성공하면 value, tag, id(규칙의 고유 식별자)가 포함된 응답을 받습니다. 응답은 다음과 유사합니다:

```json
{
  "data": [
    {
      "value": "cat has:images",
      "tag": "cats with images",
      "id": "1273026480692322304"
    }
  ],
  "meta": {
    "sent": "2020-06-16T22:55:39.356Z",
    "summary": {
      "created": 1,
      "not_created": 0,
      "valid": 1,
      "invalid": 0
    }
  }
}
```

규칙이 성공적으로 추가되었는지 확인하려면, $APP\_ACCESS\_TOKEN을 토큰으로 바꾼 뒤 다음 GET 요청을 규칙 엔드포인트로 보내세요. 이 요청은 스트림에 추가된 모든 규칙의 전체 목록을 반환합니다.

```bash
curl -X GET 'https://api.x.com/2/tweets/search/stream/rules' \
-H "Authorization: Bearer $APP_ACCESS_TOKEN"
```

cURL 요청이 성공했다면 다음과 같은 응답을 받게 됩니다:
 

```json
{
	"data": [{
		"id": "1273028376882589696",
		"value": "cat has:images",
		"tag": "cats with images"
	}],
	"meta": {
		"sent": "2020-06-16T23:14:06.498Z"
	}
}
```

**6단계: 가져올 필드 식별 및 지정**

5단계 이후 스트림에 연결하면 응답에 기본 [Post object](/ko/x-api/fundamentals/data-dictionary#tweet) 필드인 id, text, edit\_history\_tweet\_ids가 포함됩니다. 이 외의 추가 필드를 받으려면 요청에서 [field](/ko/x-api/fundamentals/fields) 및/또는 [expansion](/ko/x-api/fundamentals/expansions) 매개변수로 해당 필드를 지정해야 합니다.

이 연습에서는 서로 다른 객체에서 다음의 세 가지 필드 집합을 요청합니다:

1. 기본 Post 객체의 추가 tweet.created\_at 필드
2. 반환된 Post의 작성자에 대한 [user object](/ko/x-api/fundamentals/data-dictionary#user) 기본 필드: id, name, username
3. 연관 사용자 객체의 추가 user.created\_at 필드
    

이 필드를 요청하려면 요청에 다음 값을 포함해야 합니다:

|     |     |     |
| :--- | :--- | :--- |
| Key | Value | Returned fields |
| tweet.fields | created\_at | tweets.created\_at |
| expansions | author\_id | includes.users.id, includes.users.name, includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

이제 이를 바탕으로 스트림에 연결하기 위한 요청 URL을 다음과 같이 구성할 수 있습니다:

```bash
https://api.x.com/2/tweets/search/stream?tweet.fields=created_at&expansions=author_id&user.fields=created_at
```

**7단계: 스트림에 연결하고 응답 확인**

규칙을 설정하고 반환받을 필드를 지정했으므로, 제출한 규칙과 일치하는 Post 객체를 전달하는 스트림에 연결할 준비가 되었습니다. 6단계에서 만든 URL을 요청에 추가하면 cURL 명령은 다음과 같습니다:
 

```bash
curl -X GET -H "Authorization: Bearer $APP_ACCESS_TOKEN" "https://api.x.com/2/tweets/search/stream?tweet.fields=created_at&expansions=author_id&user.fields=created_at"
```

이 요청은 OAuth 2.0 App-Only로 인증해야 하므로, 명령줄 도구에 복사해 붙여넣기 전에 $APP\_ACCESS\_TOKEN을 자격 증명으로 교체하세요.

필터드 스트림에 연결되면 다음 JSON 형식으로 규칙과 일치하는 Post를 수신하기 시작합니다:
 

```json
{
  "data": [
    {
      "author_id": "2244994945",
      "created_at": "2022-09-14T19:00:55.000Z",
      "id": "1228393702244134912",
      "edit_history_tweet_ids": ["1228393702244134912"],
      "text": "What did the developer write in their Valentine’s card?\n  \nwhile(true) {\n    I = Love(You);  \n}"
    },
    {
      "author_id": "2244994945",
      "created_at": "2022-09-12T17:09:56.000Z",
      "id": "1227640996038684673",
       "edit_history_tweet_ids": ["1227640996038684673"],
      "text": "Doctors: Googling stuff online does not make you a doctor\n\nDevelopers: https://t.co/mrju5ypPkb"
    },
    {
      "author_id": "2244994945",
      "created_at": "2022-09-27T20:26:41.000Z",
      "id": "1199786642791452673",
      "edit_history_tweet_ids": ["1199786642791452673"],
      "text": "C#"
    }
  ],
  "includes": {
    "users": [
      {
        "created_at": "2013-12-14T04:35:55.000Z",
        "id": "2244994945",
        "name": "Twitter Dev",
        "username": "TwitterDev"
      }
    ]
  }
}
```

연결을 종료하려면 Mac 또는 Windows의 명령줄 도구에서 Control-C를 눌러 연결을 끊거나 창을 닫으면 됩니다. 