---
title: v2 전체 아카이브 검색 엔드포인트로 과거 게시물 가져오기
mode: wide
---

<div id="introduction">
  ## 소개
</div>

v2 환경의 [Search Posts 엔드포인트](/ko/x-api/posts/search/introduction)는
사용자가 작성한 검색 쿼리를 기반으로 관심 있는 주제와 관련된 게시글(Posts)을
받을 수 있도록 합니다. v2 Search Posts에는 두 가지 엔드포인트가 제공됩니다. 모든 승인이 완료된 개발자가 이용할 수 있으며 최대 7일
이내의 게시글을 검색하는 최근 검색과, 승인된 연구자만 이용할 수 있는
[Academic Research product track](https://developer.x.com/en/products/x-api/early-access/guide#na_2)에
해당하며 2006년 3월까지 거슬러 올라가는 전체 게시글 아카이브를 검색할 수 있는
전체 아카이브 검색이 있습니다.

전체 검색 기능은
[검색 개요 페이지](/ko/x-api/posts/search/introduction)에서 확인할 수 있습니다.

이 Search Posts 엔드포인트는 종단 연구나 과거 주제 또는 이벤트 분석 등,
학술 연구자에게 가장 흔한 사용 사례 중 하나를 지원합니다.

이 튜토리얼은 공개 X 데이터의 전체 이력을 검색하기 위해
전체 아카이브 검색 엔드포인트를 사용하려는 연구자를 위한 단계별 가이드를
제공합니다. 또한 지오태그된 게시글을 수집하는 등 데이터 세트를 구축하는 다양한
방법과 쿼리에 대해 사용 가능한 게시글을 페이지네이션으로 탐색하는 방법을 보여줍니다.

<div id="prerequisites">
  ### 필수 조건
</div>

현재 이 엔드포인트는
[Academic Research 제품 트랙](https://developer.x.com/en/solutions/academic-research/products-for-researchers)에서만 제공됩니다.
이 엔드포인트를 사용하려면
[액세스 신청](https://developer.x.com/en/portal/petition/academic/is-it-right-for-you)이 필요합니다.
자세한 내용은
[해당 트랙의 신청 절차와 요건](https://developer.x.com/en/solutions/academic-research/application-info)을 확인하세요.

<div id="connect-an-app-to-the-academic-project">
  ### 학술 프로젝트에 앱 연결하기
</div>

Academic Research 제품 트랙 사용 승인을 받으면
[developer portal](https://developer.x.com/en/portal/dashboard)에서 학술 [Project](/ko/resources/fundamentals/projects)를
볼 수 있습니다. "Projects and Apps" 섹션에서 "Add App"을 클릭하여
[X App](/ko/resources/fundamentals/developer-apps)을 프로젝트에 연결합니다.

[](https://res.cloudinary.com/practicaldev/image/fetch/s--gHFOyuDc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/gb7aevhqyfvfjznd0pnd.png)

![이 이미지는 developer portal에서 아직 App이 추가되지 않은 Academic Project를 보여줍니다](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-1.png.twimg.1920.png)

그런 다음 기존 App을 선택하여 프로젝트에 연결할 수 있습니다(아래 참조).

![이 이미지는 Academic Project에 App을 추가하려고 할 때 표시되는 페이지를 보여줍니다](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-2.png.twimg.1920.png)

또는 새 App을 만들고 이름을 지정한 뒤 완료를 클릭하여
Academic Project에 새 App을 연결할 수 있습니다.

![이 이미지는 새 App의 이름을 입력하거나 기존 App을 선택할 수 있는 페이지를 보여줍니다](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-3.png.twimg.1920.png)

이렇게 하면 API 키와
[Bearer Token](/ko/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)을 발급받게 되며,
이를 사용해 전체 아카이브 검색 엔드포인트에 연결할 수 있습니다.

![이 이미지는 새 App을 생성한 후 키와 토큰이 표시되는 페이지를 보여줍니다](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-4.png.twimg.1920.png)

**유의 사항**

위 스크린샷의 키는 숨김 처리되어 있지만, 본인의 developer portal에서는
API Key, API Secret Key, 그리고 Bearer Token의 실제 값을 확인할 수 있습니다.
이 키들과 Bearer Token은 전체 아카이브 검색 엔드포인트 호출에 필요하므로 저장해 두세요.

<div id="connecting-to-the-full-archive-search-endpoint">
  ### 전체 아카이브 검색 엔드포인트에 연결하기
</div>

아래 cURL 명령은 @XDevelopers 핸들의 과거 게시물을 가져오는 방법을 보여줍니다.
$BEARER\_TOKEN을 본인의 Bearer Token으로 바꾸고 전체 요청을 터미널에 붙여넣은 뒤,
Enter 키를 누르세요.

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers' --header 'Authorization: Bearer $BEARER_TOKEN'
```

응답 JSON이 표시됩니다.

기본적으로 가장 최근 게시물 10개만 반환됩니다. 한 번의 요청에서 10개보다 더 많은
게시물을 원한다면 아래와 같이 max\_results 매개변수를 사용하여 요청당 최대
500개의 게시물로 설정할 수 있습니다:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

쿼리 빌드

위의 예시 호출에서 보듯이 query 매개변수를 사용해 검색할 데이터를 지정할 수 있습니다. 예를 들어 _covid_ 또는 \_coronavirus\_라는 단어를 포함하는 모든 게시물을 가져오려면 괄호 안에 OR 연산자를 사용해 쿼리를 `(covid OR coronavirus)`처럼 작성할 수 있으며, API 호출은 다음과 같습니다:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=(covid%20OR%20coronavirus)&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

마찬가지로 리포스트가 아닌 \_covid19\_라는 단어를 포함하는 모든 게시물을 원한다면 논리적 NOT(기호는 -)과 함께 is:retweet 연산자를 사용할 수 있으며, 이 경우 쿼리는 covid19 -is:retweet가 되고 API 호출은 다음과 같습니다:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=covid19%20-is:retweet&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

전체 아카이브 검색 엔드포인트에서 지원되는 [연산자 전체 목록 가이드](/ko/x-api/posts/search/integrate/build-a-query)를 확인하세요.

### start\_time 및 end\_time 매개변수를 사용해 과거 게시물 가져오기

전체 아카이브 검색 엔드포인트를 사용할 때 기본적으로 최근 30일간의
게시물이 반환됩니다. 30일보다 이전의 게시물을 가져오려면
API 호출에서 start\_time 및 end\_time 매개변수를 사용하면 됩니다. 이
매개변수는 RFC3339 유효 날짜-시간 형식이어야 하며, 예를 들어
2020-12-21T13:00:00.00Z와 같습니다. 따라서 2020년 12월 한 달 동안 XDevelopers
계정의 모든 게시물을 가져오려면 API 호출은 다음과 같습니다:

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:XDevelopers&start_time=2020-12-01T00:00:00.00Z&end_time=2021-01-01T00:00:00.00Z' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

지오태그된 과거 게시물 가져오기

지오태그된 게시물은 도시, 주, 국가 등과 같은 지리 정보가 연결된 게시물을 말합니다.

<div id="using-hasgeo-operator">
  #### has:geo 연산자 사용
</div>

지오 데이터가 포함된 게시물을 가져오려면 has:geo 연산자를 사용할 수 있습니다.
예를 들어, 다음 cURL 요청은 지오 데이터가 있는
@XDevelopers 계정의 게시물만 가져옵니다:

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20has:geo' --header
'Authorization: Bearer $BEARER_TOKEN'
```

#### place\_country 연산자 사용

마찬가지로 `place_country` 연산자를 사용하면 지리 데이터가 있는 게시물을 특정 국가로 제한할 수 있습니다. 아래 cURL 명령은 미국에 해당하는 @XDevelopers 계정의 모든 게시물을 가져옵니다:

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20place_country:US'
--hbasheader 'Authorization: Bearer XXXXX'
```

국가는 위에서 ISO 알파-2 문자 코드를 사용해 지정합니다. 사용 가능한 ISO 코드는 [여기](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)에서 확인할 수 있습니다.

### next\_token을 사용해 500개 초과의 과거 게시물을 가져오기

앞서 언급했듯이, 기본적으로 전체 아카이브 검색 엔드포인트에 대한 쿼리는 요청당 최대 500개의 게시물만 반환합니다. 쿼리 결과가 500개를 초과하면 JSON 응답에 next\_token이 포함되며, 이를 API 호출에 추가해 해당 쿼리의 다음 게시물을 가져올 수 있습니다. 이 next\_token은 JSON 응답의 meta 객체에 있으며, 예시는 다음과 같습니다:

```
{ "newest_id": "12345678...", "oldest_id": "12345678...", "result_count": 500,
"nebashxt_token": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" }
```

따라서 다음 게시물을 가져오려면 이 meta 객체의 next\_token 값을 사용하고, 아래와 같이 전체 아카이브 검색 엔드포인트에 대한 API 호출에서 next\_token 파라미터 값으로 설정하면 됩니다(본인의 Bearer Token과 직전 API 호출에서 받은 Next Token 값을 사용합니다).

```
curl --request GET
'https://api.x.com/2/tweets/search/all?max_results=500&query=covid&next_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
--header 'Authorization: Bearer $BEARER_TOKEN'
```

이처럼 next\_token의 존재 여부를 확인하면서, 수집 목표 수에 도달하지 않았다면 각 요청마다 새로운 next\_token으로 전체 아카이브 엔드포인트를 계속 호출할 수 있습니다. 전체 아카이브 검색 엔드포인트 호출은
[트윗 한도(게시 한도)](/ko/x-api/fundamentals/post-cap)에 포함됩니다. 즉,
\[X API]의 [프로젝트](/ko/resources/fundamentals/projects)별 월간 수집 가능 게시물 수에 산정되므로, 결과를 페이지네이션할 때 코드 로직을 신중히 구성해 한도를 의도치 않게 소진하지 않도록 하세요.

아래는 전체 아카이브 검색 엔드포인트 사용 시 도움이 될 수 있는 리소스입니다. 피드백을 환영합니다. 이 엔드포인트에 대한 질문은
[@XDevelopers](https://x.com/XDevelopers) 또는
[community forums](https://devcommunity.x.com/)에서 문의해 주세요.

<div id="additional-resources">
  ### 추가 리소스
</div>

- [전체 아카이브 검색 엔드포인트 API 참조](/ko/x-api/posts/full-archive-search)
- [검색 쿼리 작성 기초 배우기](/ko/x-api/posts/search/integrate/build-a-query)