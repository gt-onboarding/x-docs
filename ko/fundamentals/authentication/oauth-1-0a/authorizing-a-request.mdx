---
title: 요청 인증
sidebarTitle: 요청 인증
---

import { Button } from "/snippets/ko/button.mdx";

<div id="authorizing-a-request">
  ### 요청 승인하기
</div>

이 문서의 목적은 X API에 승인된 요청을 보내기 위해 HTTP 요청을 수정하는 방법을 설명하는 것입니다.

X의 모든 API는 HTTP 프로토콜을 기반으로 합니다. 즉, X의 API를 사용하는 여러분이 작성한 소프트웨어는 X 서버로 일련의 구조화된 메시지를 전송합니다. 예를 들어, “**Hello Ladies + Gentlemen, a signed OAuth request!**”라는 텍스트를 트윗으로 게시하는 요청은 다음과 비슷합니다:

```
POST /1.1/statuses/update.json?include_entities=true HTTP/1.1
Accept: */*
Connection: close
User-Agent: OAuth gem v0.4.4
Content-Type: application/x-www-form-urlencoded
Content-Length: 76
Host: api.x.com

status=Hello%20Ladies%20%2b%20Gentlemen%2c%20a%20signed%20OAuth%20request%21
```

어떤 HTTP 라이브러리든 위 요청을 비교적 쉽게 생성하고 전송할 수 있어야 합니다. 그러나 위 요청은 다음을 알 수 없기 때문에 유효하지 않은 것으로 간주됩니다:

1. 요청을 보내는 애플리케이션이 무엇인지
2. 요청이 누구를 대신하여 게시되는지
3. 사용자가 애플리케이션에 사용자 대신 게시할 권한을 부여했는지
4. 전송 중 제3자에 의해 요청이 변조되지 않았는지

애플리케이션이 이 정보를 제공할 수 있도록 X의 API는 [OAuth 1.0a protocol](http://tools.ietf.org/html/rfc5849)을 사용합니다. 매우 단순화해서 말하면, X의 구현은 승인이 필요한 요청에 위의 질문들에 답할 수 있을 만큼의 정보를 담은 추가 HTTP Authorization 헤더를 포함하도록 요구합니다. 위에서 보인 HTTP 요청에 이 헤더를 포함하도록 수정한 버전은 다음과 같습니다(일반적으로 Authorization 헤더는 한 줄이어야 하지만, 가독성을 위해 여기서는 줄바꿈했습니다):

```
POST /1.1/statuses/update.json?include_entities=true HTTP/1.1
Accept: */*
Connection: close
User-Agent: OAuth gem v0.4.4
Content-Type: application/x-www-form-urlencoded
Authorization:
OAuth oauth\_consumer\_key="xvz1evFS4wEEPTGEFPHBog",
oauth_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg",
oauth_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D",
oauth\_signature\_method="HMAC-SHA1",
oauth_timestamp="1318622958",
oauth_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb",
oauth_version="1.0"
Content-Length: 76
Host: api.x.com

status=Hello%20Ladies%20%2b%20Gentlemen%2c%20a%20signed%20OAuth%20request%21
```

이 요청이 생성되었을 당시에는 X API에서 유효한 것으로 허용되었습니다.

이 서명 과정이 통합 범위를 벗어난다고 느껴진다면, X API와 상호작용하기 위해 OAuth가 필요 없는 [Web Intents](https://dev.x.com/web/intents) 사용을 고려하십시오.
 

**매개변수 수집**

헤더에는 “oauth\_”로 시작하는 키 7개와 해당 값이 포함되어 있습니다. 특정 X API 요청에 대해 이 7가지 값을 수집하고 유사한 헤더를 생성하면 해당 요청에 대한 승인을 지정할 수 있습니다. 각 값이 어떻게 생성되는지는 아래에 설명되어 있습니다:

**Consumer key**

oauth\_consumer\_key는 어떤 애플리케이션이 요청을 보내는지 식별합니다. 이 값은 [developer portal](/ko/resources/fundamentals/developer-portal)의 [X app](/ko/resources/fundamentals/developer-apps) 설정 페이지에서 가져오십시오.

|     |     |
| :--- | :--- |
| oauth\_consumer\_key | xvz1evFS4wEEPTGEFPHBog |

**Nonce**

oauth\_nonce 매개변수는 애플리케이션이 각 고유한 요청마다 생성해야 하는 고유 토큰입니다. X는 이 값을 사용해 요청이 여러 번 제출되었는지 여부를 판단합니다. 이 요청의 값은 32바이트의 임의 데이터를 base64로 인코딩한 뒤 단어 문자가 아닌 모든 문자를 제거해 생성되었지만, 비교적 무작위인 영숫자 문자열을 생성하는 어떤 방식이든 무방합니다.

|     |     |
| :--- | :--- |
| oauth\_nonce | kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg |

**Signature**

oauth\_signature 매개변수에는 다른 모든 요청 매개변수와 두 개의 비밀 값을 서명 알고리즘으로 처리해 생성한 값이 포함됩니다. 서명의 목적은 전송 중 요청이 변경되지 않았는지 확인하고, 요청을 보내는 애플리케이션을 검증하며, 해당 애플리케이션이 사용자의 계정과 상호작용할 권한을 갖고 있음을 검증하기 위함입니다.

이 요청의 oauth\_signature 계산 절차는 [서명 생성](/ko/resources/fundamentals/authentication/oauth-1-0a/creating-a-signature)에 설명되어 있습니다.

|     |     |
| :--- | :--- |
| oauth\_signature | tnnArxj06cWHq44gCs1OSKk/jLY= |

**서명 방식**

X에서 사용하는 oauth\_signature\_method는 HMAC-SHA1입니다. 이 값은 X API로 전송되는 모든 인증된 요청에 사용해야 합니다.

|     |     |
| :--- | :--- |
| oauth\_signature\_method | HMAC-SHA1 |

**타임스탬프**

oauth\_timestamp 매개변수는 요청이 생성된 시점을 나타냅니다. 이 값은 요청이 생성되는 시점 기준 Unix epoch 이후 경과한 초 단위의 숫자여야 하며, 대부분의 프로그래밍 언어에서 쉽게 생성할 수 있습니다. X는 너무 오래전에 생성된 요청을 거부하므로, 요청을 생성하는 컴퓨터의 시계를 NTP와 동기화하는 것이 중요합니다.

|     |     |
| :--- | :--- |
| oauth\_timestamp | 1318622958 |

**토큰**

oauth\_token 매개변수는 일반적으로 사용자가 애플리케이션에 자신의 계정 접근을 공유하도록 허용했다는 권한을 나타냅니다. 이 값이 전달되지 않거나 다른 형태의 토큰이 사용되는 인증 흐름도 일부 있으며, 이에 대해서는 [액세스 토큰 받기](/ko/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens)에서 자세히 다룹니다. 대부분의 일반적인 요청에서는 이를 **액세스 토큰**이라고 합니다.

[developer portal](/ko/resources/fundamentals/developer-portal)의 [X 앱](/ko/resources/fundamentals/developer-apps) 설정 페이지에서 계정에 대한 유효한 [access token](/ko/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens)을 생성할 수 있습니다.

|     |     |
| :--- | :--- |
| oauth\_token | 370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb |

**버전**

oauth\_version 매개변수는 X API로 전송되는 모든 요청에서 항상 1.0이어야 합니다.

|     |     |
| :--- | :--- |
| oauth\_version | 1.0 |

<div id="building-the-header-string">
  #### 헤더 문자열 빌드
</div>

헤더 문자열을 빌드하기 위해 DST라는 문자열에 쓴다고 가정합니다.

1. 문자열 “OAuth ”(끝의 공백 포함)을 DST에 추가합니다.
2. 위에 나열된 7개 매개변수의 각 키/값 쌍에 대해:
   1. 키를 [퍼센트 인코딩](/ko/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens)하여 DST에 추가합니다.
   2. 등호 문자 ‘=’를 DST에 추가합니다.
   3. 큰따옴표 ‘”’를 DST에 추가합니다.
   4. 값을 [퍼센트 인코딩](/ko/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens)하여 DST에 추가합니다.
   5. 큰따옴표 ‘”’를 DST에 추가합니다.
   6. 남은 키/값 쌍이 있으면 쉼표 ‘,’와 공백 ‘ ’을 DST에 추가합니다.

이 문자열을 빌드할 때 값의 퍼센트 인코딩에 특히 유의하세요. 예를 들어, oauth\_signature 값 tnnArxj06cWHq44gCs1OSKk/jLY= 는 tnnArxj06cWHq44gCs1OSKk%2FjLY%3D 로 인코딩해야 합니다.

위에서 수집한 매개변수에 대해 이 단계를 수행하면 다음과 같은 문자열이 생성됩니다:

```
OAuth oauth\_consumer\_key="xvz1evFS4wEEPTGEFPHBog", oauth\_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg", oauth\_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D", oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="1318622958", oauth\_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb", oauth_version="1.0"
```

이 값은 요청의 Authorization 헤더로 설정해야 합니다.