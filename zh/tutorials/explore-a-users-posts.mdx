---
title: 使用 X API v2 探索用户的帖子与提及
description: "“用户帖子时间线”和“用户提及时间线”端点允许开发者检索某用户发布的公共帖子，或提及该用户的公共帖子。"
sidebarTitle: 探索用户的帖子
mode: wide
---

<div id="introduction">
  ## 介绍
</div>

[最近搜索端点](/zh/x-api/posts/search/introduction)仅支持获取过去 7 天内发布的帖子；而用户帖子时间线和用户提及时间线端点则允许你针对已授权用户（通过用户 ID）检索早于 7 天的帖子和提及。开发者可以使用这些端点研究某个用户时间线或提及中的话题、实体和情感。在本教程中，我们将演示如何使用用户帖子时间线和用户提及时间线端点来探索某个用户的帖子与提及。
 

<div id="prerequisites">
  ## 先决条件
</div>

- 要使用用户推文时间线和用户提及时间线端点，您需要拥有有效的开发者账户。
- 您还需要创建一个[项目](/zh/resources/fundamentals/projects)。
- 您必须已[注册](https://developer.x.com/en/portal/petition/essential/basic-info)开发者账户，并已启用[新的开发者门户体验](https://developer.x.com/en/portal/opt-in.html)。
- 需要在[开发者门户](/zh/resources/fundamentals/developer-portal)中创建的开发者应用已关联到[项目](/zh/resources/fundamentals/projects)，并具备有效的密钥与令牌，方可访问。
- 您的应用在 [X 开发者门户](/zh/resources/fundamentals/developer-portal)中的 Bearer Token。
- 如果您尚未获得批准的开发者账户，您可以[申请访问权限](https://developer.x.com/en/apply-for-access)。

<div id="approved-developer-account">
  ## 已获批准的开发者账号
</div>

如果你尚未拥有，可以[申请访问权限](https://developer.x.com/en/apply-for-access)。

<div id="create-a-project-and-connect-an-app">
  ## 创建项目并连接应用
</div>

在[开发者门户](https://developer.x.com/en/portal/dashboard)中，点击创建新项目。

<Frame>
  <img src="/images/projects.png.twimg.1920.png" />
</Frame>

为其命名，选择合适的使用场景，并提供项目描述。接下来，你可以创建新应用，或连接现有[应用](/zh/resources/fundamentals/developer-apps)（应用是用于存放 API 密钥的容器，你需要它来向 X API 发起 HTTP 请求）。

<Frame>
  <img src="/images/add-your-app.png.twimg.1920.png" />
</Frame>

点击“改为创建新应用”，并为应用命名以创建一个新应用。

<Frame>
  <img src="/images/last-step-name-your-app.png.twimg.1920.png" />
</Frame>

点击完成后，你将获得 API key 和 Bearer token，随后即可使用它们连接到 X API v2 的新端点。

<Frame>
  <img src="/images/here-are-your-keys.png.twimg.1920.png" />
</Frame>

点击 API key、API secret key 和 Bearer token 旁的 (+)，并将这些值复制到本地设备的安全位置。你将在下一步进行 API 调用时用到它们。

注意：上方截图中的密钥已隐藏，但在你的开发者门户中，你将能够看到 API key、API secret key 和 Bearer token 的实际值。
 

<div id="how-to-get-the-user-id-for-a-user-to-use-in-the-user-tweet-timeline-and-user-mention-timeline-endpoints">
  ## 如何获取用户 ID，以用于用户推文时间线与用户提及时间线端点
</div>

用户推文时间线与用户提及时间线端点支持使用用户 ID 获取帖子。要通过用户名获取用户 ID，你可以使用新的 [用户查询端点 v2](/zh/x-api/users/lookup/quickstart/user-lookup)。将 USER\_NAME 替换为目标用户名，将 XXXXXX 替换为你在上文获取的 bearer token。

```bash
  curl --request GET 'https://api.x.com/2/users/by/username/USER_NAME --header 'Authorization: Bearer XXXXXX'
```

你会在如下响应中看到用户 ID：

```json
{
   "data": {
       "id": "2244994945",
       "name": "Developers",
       "username": "XDevelopers"
   }
}
```

<div id="connecting-to-the-user-tweet-timeline-and-user-mention-timeline-endpoints">
  ## 连接用户推文时间线和用户提及时间线端点
</div>

要获取某个用户的推文时间线，请在终端中运行以下 curl 命令（请将 USER\_ID 替换为目标用户的用户 ID，将 XXXXXX 替换为你在上文获取的 Bearer 令牌）：

```bash
curl --request GET 'https://api.x.com/2/users/USER_ID/tweets' --header 'Authorization: Bearer XXXXXX'
```

这些请求的 JSON 响应默认包含帖子的 ID 和文本（示例如下）。

```yaml
{
   "id": "1334200897081987072",
   "text": "👀 If you are new to the X API v2, check out this step-by-step guide to making your first request https://t.co/4rZqThpSbp"
}
```

如果希望在响应中返回更多字段（例如用户信息、额外的推文字段，如上下文注释等），需要在请求中显式指定这些字段。参阅[关于使用字段与扩展的指南](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)了解如何操作。

你也可以使用任意编程语言获取这些帖子。查看我们在 GitHub 仓库中的 Python、Node（JavaScript）、Java 和 Ruby 示例代码，涵盖用户推文时间线和用户提及时间线端点：[GitHub repository](https://github.com/xdevplatform/Twitter-API-v2-sample-code)。
 

<div id="exploring-the-users-posts">
  ## 探索用户的帖子
</div>

在掌握如何通过用户推文时间线端点和用户提及时间线端点获取帖子之后，你就可以开始探索他们的帖子了。比如，如果你想识别用户提及中出现的常见命名实体，可以按以下步骤操作：

在 API 请求中，指定在推文响应里返回 `context_annotations` 对象：

```bash
curl --request GET 'https://api.x.com/2/users/USER_ID/mentions?tweet.fields=context_annotations' --header 'Authorization: Bearer XXXXXX'
```

在响应中，你可以查看提及里是否存在命名实体。例如：

```json
{
   "domain": {
       "id": "47",
       "name": "Brand",
       "description": "Brands and Companies"
   },
   "entity": {
       "id": "783214",
       "name": "X"
   }
}
```

如果你想了解你的提及中出现了哪些热门实体，可以在解析每条提及中的推文时对热门实体进行计数。

如果你想获取时间线中所有包含媒体的帖子的预览图片 URL，可以按以下步骤操作：

在 API 请求中，指定在 `media.fields` 中返回 `preview_image_url`，并添加 `expansions=attachments.media_keys` 扩展：

```bash
curl --request GET 'https://api.x.com/2/users/2244994945/mentions?max_results=100&media.fields=preview_image_url&expansions=attachments.media_keys' --header 'Authorization: Bearer XXXXXX'
```

在响应中，你会在 `includes` 对象中看到 `preview_image_url`，如下所示：

```json
{
   "includes": {
       "media": [
           {
               "media_key": "16_1334657439640121344",
               "preview_image_url": "https://pbs.twimg.com/tweet_video_thumb/EoWn3rqU8AAtFWL.jpg",
               "type": "animated_gif"
           }
       ]
   }
}
```

在了解如何浏览用户的帖子之后，你还可以结合其他 API 和服务对这些帖子做更多处理。以下是在使用用户推文时间线端点和用户提及时间线端点时可随手参考的一些资源。

<div id="resources">
  ## 资源
</div>

- 进一步了解[用户帖子时间线与用户提及时间线端点](/zh/x-api/posts/timelines/introduction)。
- 查看[用户帖子时间线端点的 API 参考](/zh/x-api/posts/user-posts-timeline-by-user-id)，了解可用功能。
- 查看[用户提及时间线端点的 API 参考](/zh/x-api/posts/user-mention-timeline-by-user-id)，了解可用功能。
- 浏览我们的其他[教程](/zh/tutorials)以获取灵感。