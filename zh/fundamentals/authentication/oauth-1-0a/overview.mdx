---
title: OAuth 1.0a
sidebarTitle: 概述
---

import { Button } from "/snippets/zh/button.mdx";

<div id="oauth-10a">
  ## OAuth 1.0a
</div>

X 开发者平台上的许多端点使用 OAuth 1.0a 方法，代表某个 X 账户执行操作或发起 API 请求。举例来说，如果你拥有一个 X 开发者应用，只要该用户完成对你应用的认证，你就可以代表任何 X 账户发起 API 请求。

请注意：如果你不熟悉 HMAC-SHA1 和百分号编码等概念，建议查看下方的“实用工具”部分，其中列出了一些能够大幅简化认证流程的 API 客户端。

<div id="key-concepts">
  ### 核心概念
</div>

<div id="signing-a-request-with-keys-and-tokens">
  #### 使用密钥和令牌为请求签名
</div>

你需要在授权标头中传递多组生成的密钥和令牌，以为每个 API 请求进行签名。首先，你可以在 [X 开发者应用](/zh/resources/fundamentals/developer-apps) 的详情页生成多组密钥和令牌，包括以下内容：

|     |     |
| :--- | :--- |
| API 密钥与密钥（secret）：<br /><br />`oauth_consumer_key`<br /><br />`oauth_consumer_secret` | 可将它们视为在发起 API 请求时代表你的 X 开发者应用的用户名和密码。 |
| 访问令牌与令牌密钥（secret）：<br /><br />`oauth_token`<br /><br />`oauth_token_secret` | 访问令牌和访问令牌密钥是与用户关联的凭证，用于对 OAuth 1.0a API 请求进行身份验证。它们指明该请求代表哪个 X 账户发起。<br /><br />你可以生成你自己的访问令牌和令牌密钥（如果你希望应用代表与你的开发者账户关联的同一 X 账户发起请求）。<br /><br />如果你想为其他用户生成访问令牌，请参阅下文“代表用户发起请求”。 |

<div id="making-requests-on-behalf-of-users">
  #### 代表用户发起请求
</div>

创建签名时，您需要一组访问令牌，用于标识您将代表其发起请求的用户。

您可以在[应用详情页](https://developer.x.com/content/developer-twitter/en/apps)生成一组代表拥有该 X 开发者应用的 X 账号的访问令牌。但如果您希望代表其他 X 账号发起请求，则该账号的所有者必须在[三方 OAuth 流程](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)中登录其账号以授予您访问权限。该流程的输出是一组访问令牌（oauth\_token 和 oauth\_token\_secret），可用于发起 OAuth 1.0a 请求。

拿到这些密钥和令牌后，您可以从头[创建签名](/zh/resources/fundamentals/authentication#creating-a-signature)。除非您非常熟悉相关流程，否则我们不建议这样做；或者，您也可以使用下文提到的工具之一，向需要 OAuth 1.0a 的端点发起请求。

供参考，下面是一个带签名的 cURL 请求示例，所有生成的令牌都通过 Authorization 头传入：

```bash
curl --request POST \
  --url 'https://api.x.com/1.1/statuses/update.json?status=Hello%20world' \
  --header 'authorization: OAuth oauth_consumer_key="CONSUMER_API_KEY", oauth_nonce="OAUTH_NONCE", oauth_signature="OAUTH_SIGNATURE", oauth_signature_method="HMAC-SHA1", oauth_timestamp="OAUTH_TIMESTAMP", oauth_token="ACCESS_TOKEN", oauth_version="1.0"' \
```

<Note>
  \*\*注意：\*\*用户访问令牌十分敏感，应当妥善保护。生成访问令牌时，其所代表的用户是在信任您的应用能确保其安全。如果 API 密钥和用户访问令牌同时遭到泄露，您的应用可能会暴露私人信息和账户功能。建议您进一步了解[如何保护密钥和访问令牌](/zh/resources/fundamentals/developer-apps)。
</Note>

<div id="useful-tools">
  ### 实用工具
</div>

[签名请求](/zh/resources/fundamentals/authentication#creating-a-signature) 的过程较为复杂。我们建议使用可以自动生成大部分身份验证令牌的 API 客户端库：

|     |     |
| :--- | :--- |
| [Postman](https://www.getpostman.com/) | 一款用于构建并发送 REST API 请求的 API 客户端。阅读我们的“[Postman 入门](/zh/tutorials/postman-getting-started)”教程以进一步了解此工具。 |
| [Insomnia](https://insomnia.rest/) | 一款提供 Cookie 管理、环境变量、代码生成和身份验证功能的 REST API 客户端，适用于 macOS、Windows 和 Linux。 |