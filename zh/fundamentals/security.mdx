---
title: 安全
icon: lock
---

我们相信隐私是一项权利，而非特权，并且已融入公司之根本。通过使用 X 开发者平台并遵守我们的开发者政策，您在确保平台服务于 X 上的公共对话并捍卫我们对隐私的承诺方面发挥着关键作用。

我们在此提醒您，安全地进行构建对于保护您自身及应用用户的数据至关重要。防范安全漏洞是您的职责，而保护使用 X 的人群是我们共同的责任。本文介绍了有关构建安全应用，以及尽可能确保数据与访问安全的相关期望。

<Note>请了解 X 开发者平台提供的安全技术，包括[身份验证](/zh/resources/fundamentals/authentication)、TLS 和[应用权限](/zh/resources/fundamentals/developer-apps#app-permissions)；同时，从 X 用户视角了解[使用第三方应用和会话](https://help.x.com/en/managing-your-account/connect-or-revoke-access-to-third-party-apps)。</Note>

<div id="reporting-security-issues">
  ## 报告安全问题
</div>

X Developer Platform 用户在首次怀疑发生安全事件后的 48 小时内，必须通过 [X 的漏洞报告计划](https://hackerone.com/twitter) 通知 X。

<div id="security-best-practices">
  ## 安全最佳实践
</div>

在使用 X 开发者平台以及互联网上的其他场景进行开发时，请牢记这些要点。

<div id="security-by-design">
  ### 内建安全
</div>

考虑聘请安全专家进行威胁建模审计和/或渗透测试。优秀的安全公司会深入挖掘并发现潜在问题。要了解 X 如何践行这一理念，请阅读[我们的博文](https://blog.x.com/en_us/topics/company/2019/privacy_data_protection.html)。

此外，X 要求所有合作伙伴对以下事项负责：

- 在安全的代码仓库中维护代码。
- 在系统开发生命周期（SDLC）各阶段开展风险分析。
- 确保在整个 SDLC 中识别并缓解安全问题。
- 确保在整个 SDLC 过程中实现环境隔离。
- 确保所有测试缺陷均已修复、复测并关闭。

<div id="monitor-and-get-alerted">
  ### 监控并接收告警
</div>

如果你怀疑你的 Web 应用存在问题，如何确认？务必做好日志记录，并确保在发生关键异常和错误时收到通知。你可能还需要搭建一个关键指标的仪表板，便于一眼看出是否出现异常。

<div id="create-a-reporting-channel">
  ### 创建报告渠道
</div>

便于你的用户就使用你的应用时遇到的潜在安全问题与你联系。如果发现的问题影响到 X 的用户和数据，你也有责任[向 X 报告此问题](#report)。同时，应预先制定并准备在发生安全事件时用于通知受影响用户的行动计划/流程。

<div id="adequate-testing">
  ### 充分测试
</div>

确保端到端测试全面且及时更新，并包含针对安全场景（如未获授权访问）的预期失败用例。换位思考从攻击者视角设计系统测试，验证系统能够阻止攻击者对 X 数据或受权功能进行未授权访问。

<div id="securing-api-keys-and-tokens">
  ### 保护 API 密钥和令牌
</div>

作为 X 平台的开发者，在用户已授权你的开发者应用的前提下，你可以通过编程方式访问由 X 存储的你的数据和用户的数据。所有 API 请求都必须使用 OAuth，并通过你的开发者应用的密钥与密钥密文进行[身份验证](/zh/resources/fundamentals/authentication)，在某些情况下还需使用授权用户的[访问令牌](/zh/resources/fundamentals/authentication)。你有责任确保凭据安全。

建议的最佳实践包括：

- 制定密码/令牌的轮换与刷新策略。
- 按需加密敏感数据，避免在过早的上游环节解密。
- 将用户的访问令牌存放于加密存储中。
- 如果你认为密钥或令牌已遭泄露，请[重新生成](/zh/resources/fundamentals/authentication#regenerate-api-keys-and-tokens)或[使其失效](/zh/resources/fundamentals/authentication#post-oauth2-invalidate-token)。

如需更多关于在 X 上使用 OAuth 进行调试与开发的讨论，请访问社区论坛的[安全板块](https://devcommunity.x.com/c/oauth/12)。

<div id="input-validation">
  ### 输入验证
</div>

不要假设用户会提供有效、可信的数据。对所有来自用户、可能最终用于 X API 请求的数据进行净化。使用允许列表限定应用可接受的输入类型，丢弃所有不在允许列表中的内容。

<div id="encrypted-communication">
  ### 加密通信
</div>

X 要求所有 API 请求必须通过 TLS 进行。与您自有服务器之间的通信也应尽可能加密。

<div id="exposed-debugging-information">
  ### 暴露的调试信息
</div>

请确保不要通过调试界面或日志泄露敏感的 X 数据或凭据。某些 Web 框架在应用未正确配置时，可能会让调试信息被轻易访问。对于桌面和移动端开发者，也很容易在启用调试标志或符号的情况下误将包含它们的构建版本发布。请将这类配置的检查纳入部署/构建流程。此外，如果为报告而共享堆栈跟踪或崩溃转储，请确保对私密的 X 用户数据进行脱敏处理。

<div id="unfiltered-input-unescaped-output">
  ### 未过滤的输入，未转义的输出
</div>

一种便于记忆的输入验证方法是 FIEO：过滤输入（Filter Input）、转义输出（Escape Output）

过滤一切来自应用程序外部的内容，包括 X API 数据、Cookie 数据、用户提交的表单输入、URL 参数、数据库中的数据等。对应用程序发出的所有输出进行转义，包括发送给数据库服务器的 SQL、发送到用户浏览器的 HTML、发送给其他系统的 JSON 输出，以及发送给 shell 程序的命令。

<div id="cross-site-scripting-xss">
  ### 跨站脚本（XSS）
</div>

按多数衡量标准，[XSS](https://owasp.org/) 攻击是 Web 上最常见的安全问题形式。如果攻击者能将自己的 JavaScript 代码注入你的应用，他们就可能执行恶意操作。凡是存储并展示不受信任的用户提交数据的地方，都需要进行检查、清理并进行 HTML 转义。做到这一点并不容易，因为黑客有[许多方式实施 XSS 攻击](https://www.owasp.org/index.php/Types_of_Cross-Site_Scripting)。你的编程语言或 Web 开发框架很可能提供了流行且经过充分验证的跨站脚本防护机制；请务必使用它。

<div id="sql-injection">
  ### SQL 注入
</div>

如果你的应用程序使用数据库，你需要了解[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。凡是接收输入的地方，都可能成为攻击者的目标，他们可能借机突破输入边界并侵入你的数据库。请使用能系统防护 SQL 注入的数据库库/框架。如果你绕开这种方式而手写自定义 SQL，请编写高强度测试，确保不会暴露于此类攻击。防御 SQL 注入的两种主要方法是：在构造 SQL 语句前进行适当转义，以及使用参数化输入来生成语句。推荐采用后者，因为更不易出现程序员失误。

<div id="cross-site-request-forgery-csrf">
  ### 跨站请求伪造（CSRF）
</div>

你能确定发往你的应用的请求确实来自你的应用吗？[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery) 攻击利用这种不确定性，诱使已登录的站点用户在不知情的情况下打开会执行操作的 URL。对于开发者应用而言，这可能意味着攻击者借助你的应用强迫用户发布不想要的推文或关注垃圾账号。

应对 CSRF 的最彻底方法是在每个表单中包含一个随机令牌，并将其安全存储在可信位置；如果表单缺少或携带错误令牌，则返回错误。现代 Web 框架通常提供系统化的处理方式，幸运的话甚至默认已启用。一个简单的预防措施（但绝不是唯一应采取的措施）是要求所有创建、修改或删除数据的操作必须使用 POST 请求。

<div id="lack-of-rate-limiting">
  ### 缺乏速率限制
</div>

在合适的场景下使用 CAPTCHA，以降低潜在垃圾发送者和攻击者的速度。

---

<Info>
  如果你发现了直接影响 X 本身的安全问题，我们提供了[漏洞悬赏计划](https://hackerone.com/twitter)。
</Info>