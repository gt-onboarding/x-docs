---
title: 管理转推
sidebarTitle: 管理转推
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-manage-retweets-endpoints">
  ### 管理转推端点入门
</div>

本快速入门指南将帮助您使用 Postman 向管理转推端点发送首个请求。

如果您想查看不同语言的示例代码，请访问我们的 [X API v2 示例代码](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。 

<div id="prerequisites">
  #### 先决条件
</div>

要完成本指南，您需要一组用于对请求进行身份验证的[keys and tokens](/zh/resources/fundamentals/authentication)。您可以按以下步骤生成这些 keys 和 tokens：

- [注册开发者账户](https://developer.x.com/en/apply-for-access)并获得批准。
- 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)以及关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
- 前往您的应用的“Keys and tokens”页面以生成所需的凭据。请务必将所有凭据保存在安全位置。

<div id="steps-to-build-a-manage-retweets-request">
  #### 构建管理转发请求的步骤
</div>

**步骤一：从工具或库开始**

有多种工具、代码示例和库可用于向此端点发起请求，但为简化流程，我们将在此使用 Postman。

要将 X API v2 的 Postman 集合加载到您的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在将 X API v2 集合加载到 Postman 后，前往“Retweets”文件夹并选择“Retweet a Post”。
 

步骤二：为请求进行身份验证

要正确地向 X API 发起请求，您需要验证访问权限。对于此端点，您必须使用 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0 Authorization Code with PKCE](zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 对请求进行身份验证。

在此示例中，我们将使用 OAuth 1.0a User Context。

您必须将密钥和令牌（具体为 API Key、API Secret Key、OAuth 1.0a 用户 Access Token 和 OAuth 1.0a 用户 Access Token Secret）添加到 Postman。您可以在 Postman 右上角选择名为“X API v2”的环境，并将密钥和令牌添加到“initial value”和“current value”字段（点击环境下拉菜单旁的眼睛图标）。

若设置正确，这些变量会自动带入请求的 authorization 选项卡。

**步骤三：指定要转发的 Post**

管理转发端点需要两个 ID：一个是希望转发或撤销转发的用户 ID，另一个是该 Post 的 ID。

用户 ID 必须与进行身份验证的用户 ID 一致，这意味着在验证请求时，必须传递与该用户 ID 关联的[访问令牌](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)。在本例中，您可以填写自己的用户 ID。您可以通过两种方式找到您的 ID：

1. 使用 [user lookup by username](/zh/x-api/users/user-lookup-by-username) 端点，传入用户名以获取返回结果中的 id 字段。 
2. 查看您的 Access Token，其中的数字部分即为您的用户 ID。
    

您还必须指定要转发的 Post。您可以访问 X.com，打开某条 Post，然后在其 URL 中找到该 Post 的 ID。例如，以下 URL 的 Post ID 为 1228393702244134912。

https://x.com/TwitterDev/status/1228393702244134912

在 Postman 中，前往 “Params” 选项卡，将您的用户 ID 输入到路径变量 id 的 “Value” 列中，并将要转发的 Post 的 ID 作为 thetweet\_id 参数的值输入。请务必不要在任何 ID 前后包含空格。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `id` | (your user ID) |
| tweet\_id | (the ID of the Tweet you want to Retweet) |

点击 “Send” 按钮后，您将收到包含关系状态的响应对象：

- 如果返回 "retweeted": true，则表示 id 已成功转发 tweet\_id。
   

**步骤四：发起请求并查看响应**

完成所有设置后，点击 “Send” 按钮，您将收到如下响应：

```
{
    "data": {
        "retweeted": true
    }
}
```

如果返回 `"retweeted": true`，则表示已成功转发 `tweet_id`。

如果您希望由同一用户撤销一次转发，可以使用名为“Undo a Retweet”的请求，它同样位于加载到 Postman 的 X API v2 集合中的“Retweets”文件夹内。`id` 应为您的用户 ID，`source_tweet_id` 应为要撤销转发的 Post 的 ID。您无需添加 JSON 正文，请务必在查询参数中添加 id 和 `source_tweet_id`。 

成功撤销转发后，您将收到与下例类似的响应：

```
{
  "data": {
    "retweeted": false
  }
}
```