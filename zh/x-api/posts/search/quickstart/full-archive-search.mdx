---
title: å…¨æ¡£æ¡ˆæœç´¢
sidebarTitle: å…¨æ¡£æ¡ˆæœç´¢
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-full-archive-search-endpoint">
  ## å…¨æ¡£æ¡ˆæœç´¢ç«¯ç‚¹å…¥é—¨
</div>

æœ¬å¿«é€Ÿå…¥é—¨æŒ‡å—å°†å¸®åŠ©ä½ ä½¿ç”¨ Postmanï¼Œå‘å…¨æ¡£æ¡ˆæœç´¢ç«¯ç‚¹å‘é€ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶æŒ‡å®šä¸€ç»„å­—æ®µã€‚

å¦‚æœä½ å¸Œæœ›æŸ¥çœ‹ä¸åŒè¯­è¨€çš„ç¤ºä¾‹ä»£ç ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ [X API v2 ç¤ºä¾‹ä»£ç ](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub ä»£ç åº“ã€‚

<Note>
  ### å…ˆå†³æ¡ä»¶

  å…¨æ¡£æ¡ˆæœç´¢ç«¯ç‚¹ç›®å‰ä»…å¯¹ Pro å’Œ Enterprise è®¿é—®å¼€æ”¾ã€‚è¦ä½¿ç”¨æ­¤ç«¯ç‚¹ï¼Œä½ å¿…é¡»å‡çº§è‡³ Pro è®¿é—®ï¼Œæˆ– [ç”³è¯· Enterprise è®¿é—®çº§åˆ«](https://docs.google.com/forms/d/e/1FAIpQLScO3bczKWO2jFHyVZJUSEGfdyfFaqt2MvmOfl_aJp0KxMqtDA/viewform)ã€‚

  é™¤è·å¾—è®¿é—®æ‰¹å‡†å¤–ï¼Œä½ è¿˜éœ€è¦ä¸€ç»„ç”¨äºå¯¹è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯çš„ [å¯†é’¥å’Œä»¤ç‰Œ](/zh/resources/fundamentals/authentication)ã€‚ä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ç”Ÿæˆè¿™äº›å¯†é’¥å’Œä»¤ç‰Œï¼š

  - åœ¨å¼€å‘è€…é—¨æˆ·ä¸­ï¼Œè¿›å…¥å…·æœ‰ Enterprise æˆ– Pro è®¿é—®çš„ [é¡¹ç›®](/zh/resources/fundamentals/projects)ï¼Œå¹¶ç¡®ä¿è¯¥é¡¹ç›®ä¸‹å…³è”äº†ä¸€ä¸ª [å¼€å‘è€…åº”ç”¨](/zh/resources/fundamentals/developer-apps)ã€‚

  - å‰å¾€åº”ç”¨çš„â€œKeys and tokensâ€é¡µé¢ä»¥ç”Ÿæˆæ‰€éœ€çš„å‡­æ®ã€‚è¯·ç¡®ä¿å°†æ‰€æœ‰å‡­æ®ä¿å­˜åœ¨å®‰å…¨ä½ç½®ã€‚
</Note>

<div id="steps-to-build-a-full-archive-search-request">
  ### æ„å»ºå…¨æ¡£æ¡ˆæœç´¢è¯·æ±‚çš„æ­¥éª¤
</div>

**æ­¥éª¤ä¸€ï¼šé€‰æ‹©å·¥å…·æˆ–åº“**

ä½ å¯ä»¥ä½¿ç”¨å¤šç§å·¥å…·ã€ä»£ç ç¤ºä¾‹å’Œåº“æ¥å‘æ­¤ç«¯ç‚¹å‘èµ·è¯·æ±‚ã€‚ä¸ºç®€åŒ–æµç¨‹ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ Postmanã€‚

è¦å°† X API v2 çš„ Postman é›†åˆåŠ è½½åˆ°ä½ çš„ç¯å¢ƒä¸­ï¼Œè¯·ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®ï¼š

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  å°† X API v2 æ·»åŠ åˆ° Postman
</Button>

åœ¨ Postman ä¸­åŠ è½½ X API v2 é›†åˆåï¼Œå‰å¾€ Search Posts > Full-archive search requestã€‚

**æ­¥éª¤äºŒï¼šä¸ºè¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯**

è¦æ­£ç¡®è°ƒç”¨ X APIï¼Œä½ éœ€è¦ç¡®è®¤è‡ªå·±å…·å¤‡ç›¸åº”æƒé™ã€‚å¯¹äºæ­¤ç«¯ç‚¹ï¼Œå¿…é¡»ä½¿ç”¨ [OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) æ–¹å¼ä¸ºè¯·æ±‚è¿›è¡Œè®¤è¯ã€‚

ä½ éœ€è¦åœ¨ Postman ä¸­æ·»åŠ å¯†é’¥å’Œä»¤ç‰Œï¼Œå°¤å…¶æ˜¯ [App Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)ï¼ˆäº¦ç§° App-only Bearer Tokenï¼‰ã€‚åœ¨ Postman å³ä¸Šè§’é€‰æ‹©åä¸ºâ€œX API v2â€çš„ç¯å¢ƒï¼Œå¹¶å°†å¯†é’¥ä¸ä»¤ç‰Œåˆ†åˆ«å¡«å†™åˆ°â€œinitial valueâ€å’Œâ€œcurrent valueâ€å­—æ®µï¼ˆç‚¹å‡»ç¯å¢ƒä¸‹æ‹‰èœå•æ—çš„çœ¼ç›å›¾æ ‡ï¼‰ã€‚

å¦‚æœé…ç½®æ­£ç¡®ï¼Œè¯¥å˜é‡ä¼šè‡ªåŠ¨æ³¨å…¥åˆ°è¯·æ±‚çš„ Authorization é€‰é¡¹å¡ä¸­ã€‚
Â 

**æ­¥éª¤ä¸‰ï¼šåˆ›å»ºæœç´¢æŸ¥è¯¢**

æ¯ä¸ªå…¨æ¡£æ¡ˆæœç´¢è¯·æ±‚éœ€è¦åŒ…å«ä¸€ä¸ªæœç´¢æŸ¥è¯¢ã€‚æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒ¹é… @XDevelopers è´¦å·å‘å¸ƒçš„å¸–å­ï¼ˆPostsï¼‰çš„æŸ¥è¯¢ã€‚è¯¥æŸ¥è¯¢ä½¿ç”¨ from è¿ç®—ç¬¦å¹¶è®¾ç½®ä¸º XDevelopersï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š

`from:XDevelopers`

åœ¨ Postman ä¸­ï¼Œå‰å¾€ â€œParamsâ€ é€‰é¡¹å¡ï¼Œå°†æ­¤ IDï¼Œæˆ–ç”¨é€—å·åˆ†éš”çš„ä¸€ä¸²å¸–å­ IDï¼Œè¾“å…¥åˆ° `ids` å‚æ•°çš„ â€œValueâ€ åˆ—ä¸­ã€‚
Â 

| Key | Value | Description |
| :--- | :--- | :--- |
| `query` | `from:XDevelopers` | æäº¤ç»™å…¨æ¡£æ¡ˆæœç´¢ç«¯ç‚¹çš„æœç´¢æŸ¥è¯¢ |

æ­¥éª¤å››ï¼šç¡®å®šå¹¶æŒ‡å®šè¦æ£€ç´¢çš„å­—æ®µ

è‹¥åœ¨æ­¥éª¤ä¸‰åç‚¹å‡» â€œSendâ€ æŒ‰é’®ï¼Œä½ å°†åœ¨å“åº”ä¸­æ”¶åˆ°é»˜è®¤çš„ [Post object](/zh/x-api/fundamentals/data-dictionary#tweet) å­—æ®µï¼š`id`ã€`text` å’Œ `edit_history_tweet_ids`ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœè¿”å›çš„æ˜¯ç¼–è¾‘åŠŸèƒ½æ¨å‡ºå‰çš„å¸–å­ï¼Œåˆ™ä¸ä¼šæä¾› `edit_history_tweet_ids` å­—æ®µï¼›è¯¥å­—æ®µæœªè¿›è¡Œå†å²å›å¡«ã€‚Â 

å¦‚éœ€é»˜è®¤å­—æ®µä¹‹å¤–çš„å…¶ä»–å­—æ®µï¼Œéœ€åœ¨è¯·æ±‚ä¸­é€šè¿‡ [field](/zh/x-api/fundamentals/fields) å’Œ/æˆ– [expansion](/zh/x-api/fundamentals/expansions) å‚æ•°è¿›è¡ŒæŒ‡å®šã€‚

åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†ä»ä¸åŒå¯¹è±¡è¯·æ±‚å››ç»„å­—æ®µï¼š

1. é»˜è®¤çš„ Post å¯¹è±¡å­—æ®µ
2. ä¸»ä½“å¸–å­å¯¹è±¡ä¸­çš„é™„åŠ å­—æ®µ tweet.created\_at
3. è¿”å›å¸–å­æ‰€å…³è”ä½œè€…çš„ [user å¯¹è±¡](/zh/x-api/fundamentals/data-dictionary#user) é»˜è®¤å­—æ®µ
4. å…³è”ç”¨æˆ·å¯¹è±¡ä¸­çš„é™„åŠ å­—æ®µ user.description
   Â 

åœ¨ Postman ä¸­ï¼Œå‰å¾€ â€œParamsâ€ é€‰é¡¹å¡ï¼Œå¹¶å°†ä»¥ä¸‹é”®å€¼å¯¹æ·»åŠ åˆ° â€œQuery Paramsâ€ è¡¨æ ¼ä¸­ï¼š

| Key | Value | Returned fields |
| :--- | :--- | :--- |
| `tweet.fields` | `created_at` | `tweets.created_at` |
| `expansions` | `author_id` | includes.users.id, includes.users.name, includes.users.username |
| user.fields | description | includes.users.description |

ä½ ç°åœ¨åº”å½“èƒ½åœ¨ â€œSendâ€ æŒ‰é’®æ—çœ‹åˆ°ä»¥ä¸‹ URLï¼š

`https://api.x.com/2/tweets/search/all?query=from:XDevelopers&tweet.fields=created_at&expansions=author_id&user.fields=created_at`

<Note>
  **è¯·æ³¨æ„**

  é»˜è®¤æƒ…å†µä¸‹ï¼Œåªè¿”å›æœ€æ–°çš„ 10 æ¡å¸–å­ã€‚è‹¥å¸Œæœ›æ¯æ¬¡è¯·æ±‚è¿”å›è¶…è¿‡ 10 æ¡ï¼Œå¯ä½¿ç”¨ max\_results å‚æ•°ï¼Œæœ€å¤šå¯è®¾ç½®ä¸º 500 æ¡ã€‚åŒæ ·ï¼Œé»˜è®¤åªè¿”å›è¿‡å» 30 å¤©å†…çš„å¸–å­ã€‚è‹¥éœ€è·å–æ—©äº 30 å¤©çš„å¸–å­ï¼Œè¯·åœ¨ API è°ƒç”¨ä¸­ä½¿ç”¨ start\_time å’Œ end\_time å‚æ•°ã€‚
</Note>

**æ­¥éª¤äº”ï¼šå‘èµ·è¯·æ±‚å¹¶æŸ¥çœ‹å“åº”**

å®Œæˆæ‰€æœ‰è®¾ç½®åï¼Œç‚¹å‡»â€œSendâ€æŒ‰é’®ï¼Œæ‚¨å°†æ”¶åˆ°ç±»ä¼¼å¦‚ä¸‹çš„å“åº”ï¼š

```
{
   "data": [
       {
           "author_id": "2244994945",
           "created_at": "2020-06-11T16:05:06.000Z",
           "id": "1271111223220809728",
           "text": "Tune in tonight and watch as @jessicagarson takes us through running your favorite Python package in R. ğŸ¿\n\nLearn how to use two powerful programming languages for data science together, and see a live example that uses the recent search endpoint from Twitterâ€™s Developer Labs. https://t.co/v178oUZNuj"
       },
       {
           "author_id": "2244994945",
           "created_at": "2020-06-10T19:25:24.000Z",
           "id": "1270799243071062016",
           "text": "As we work towards building the new Twitter API, weâ€™ve extended the deprecation timeline for several Labs v1 endpoints. Learn more ğŸ“– https://t.co/rRWaJYJgKk"
       },
       {
           "author_id": "2244994945",
           "created_at": "2020-06-09T18:08:47.000Z",
           "id": "1270417572001976322",
           "text": "Annotations help you learn more about a Tweet â€” they can even help you find topics of interest. ğŸ”¬\n\nIn this tutorial, @suhemparack shows us how find Tweets related to COVID-19 using annotations + the filtered stream endpoint.\n\nLearn how you can, too. â¤µï¸\nhttps://t.co/qwVOgw0zSV"
       }
   ],
   "includes": {
       "users": [
           {
               "description": "The voice of Twitter's #DevRel team, and your official source for updates, news, & events about Twitter's API. \n\n#BlackLivesMatter",
               "id": "2244994945",
               "name": "Twitter Dev",
               "username": "TwitterDev"
           }
       ]
   },
   "meta": {
       "newest_id": "1271111223220809728",
       "oldest_id": "1270417572001976322",
       "result_count": 3
   }
}
```

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªéå¸¸ç®€å•çš„æŸ¥è¯¢ã€‚è‹¥æ‚¨éœ€è¦æ›´è¯¦ç»†çš„æŒ‡å—ï¼Œè¯·è®¿é—®ä¸‹æ–¹åˆ—å‡ºçš„èµ„æºã€‚

**åç»­æ­¥éª¤**

[ä½¿ç”¨ API å‚è€ƒè‡ªå®šä¹‰æ‚¨çš„è¯·æ±‚](/zh/x-api/posts/full-archive-search)

[æŸ¥çœ‹æŸ¥è¯¢è¿ç®—ç¬¦çš„å®Œæ•´åˆ—è¡¨](/zh/x-api/posts/search/integrate/build-a-query "æŸ¥çœ‹æŸ¥è¯¢è¿ç®—ç¬¦çš„å®Œæ•´åˆ—è¡¨")

[ä½¿ç”¨è¿™äº›ç«¯ç‚¹çš„ç¤ºä¾‹ä»£ç ](https://github.com/xdevplatform/Twitter-API-v2-sample-code "ä½¿ç”¨è¿™äº›ç«¯ç‚¹çš„ç¤ºä¾‹ä»£ç ")