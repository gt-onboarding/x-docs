---
title: 搜索帖子（最近）
sidebarTitle: 搜索帖子（最近）
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-recent-post-counts-endpoint">
  ### 开始使用“近期帖子计数”端点
</div>

本快速入门指南将帮助你使用 Postman（一款用于发送 HTTP 请求的图形化工具）向“近期帖子计数”端点发出你的第一个请求。

如果你希望查看不同编程语言的示例代码，请访问我们的 [X API v2 示例代码](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 代码库。

<Note>
  ### 先决条件

  要完成本指南，你需要一组用于请求身份验证的[密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  - [注册开发者账号](https://developer.x.com/en/apply-for-access)并通过审批。
  - 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)以及关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  - 前往应用的“Keys and tokens”页面生成所需的凭据。请确保将所有凭据妥善保存在安全位置。
</Note>

<div id="steps-to-build-a-recent-post-counts-request">
  #### 构建“近期帖子计数”请求的步骤
</div>

**步骤一：选择工具或库**

有多种工具、代码示例和库可用于向此端点发起请求。为简化流程，这里使用 Postman。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在 Postman 中加载 X API v2 集合后，前往 Post counts > Recent Post counts 请求。

**步骤二：为请求进行身份验证**

要正确向 X API 发起请求，需要验证访问权限。对于该端点，必须使用 [OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) 身份验证方式对请求进行认证。

你需要将密钥和令牌（尤其是 [App Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)，亦称 App-only Bearer Token）添加到 Postman。方法：在 Postman 右上角选择名为“X API v2”的环境，并将密钥和令牌分别填入“initial value”和“current value”字段（点击环境下拉菜单旁的眼睛图标）。

如设置正确，该变量会自动注入到请求的 authorization 选项卡中。
 

**步骤三：创建查询**

每个“近期帖子计数”请求都需要一个[query](/zh/x-api/posts/counts/integrate/build-a-query)。本示例将使用一个匹配 @XDevelopers 账号所发帖的查询。对此，我们使用 from: 运算符，并将其设置为 XDevelopers（不区分大小写）：

`from:XDevelopers`

在 Postman 中，前往 “Params” 选项卡，将该查询（或用逗号分隔的一串帖子 ID）输入到 `ids` 参数的 “Value” 列中。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| `query` | from:XDevelopers | 提交到“近期帖子计数”端点的查询 |

**步骤四（可选）：指定请求粒度**

在完成步骤三后点击“Send”，你将获得默认的“近期帖子计数”：过去 7 天按小时聚合。若希望按天返回结果，需要添加 granularity 参数并将其值设为 day。

在 Postman 中，前往 “Params” 选项卡，在 granularity 参数的 “Value” 列输入 day。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| granularity | day | 帖子计数结果的粒度。可选值：day、hour、minute |

此时你应在 “Send” 按钮旁看到以下 URL：

`https://api.x.com/2/tweets/counts/recent?query=from%3AXDevelopers&granularity=day`

**步骤五：发起请求并查看响应**

完成所有设置后，点击 “Send” 按钮，你将收到如下响应：

```
{
   "data": [
       {
           "end": "2021-06-16T00:00:00.000Z",
           "start": "2021-06-15T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-17T00:00:00.000Z",
           "start": "2021-06-16T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-06-18T00:00:00.000Z",
           "start": "2021-06-17T00:00:00.000Z",
           "tweet_count": 2
       },
       {
           "end": "2021-06-19T00:00:00.000Z",
           "start": "2021-06-18T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-20T00:00:00.000Z",
           "start": "2021-06-19T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-21T00:00:00.000Z",
           "start": "2021-06-20T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-22T00:00:00.000Z",
           "start": "2021-06-21T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-06-23T00:00:00.000Z",
           "start": "2021-06-22T00:00:00.000Z",
           "tweet_count": 2
       }
   ],
   "meta": {
       "total_tweet_count": 6
   }
}
```