---
title: 逆序时间
sidebarTitle: 逆序时间
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-reverse-chronological-home-timeline">
  ## 开始使用按时间倒序的主页时间线
</div>

本快速入门指南将帮助你使用一组指定字段，通过其中一个时间线端点发出第一个请求，使用 [Postman](/zh/tutorials/postman-getting-started)。

如果你希望查看不同语言的示例代码，请访问我们的 [X API v2 示例代码](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。

<Note>
  **先决条件**

  要完成本指南，你需要一组用于对请求进行身份验证的 [密钥与令牌](/zh/resources/fundamentals/authentication)。你可以按以下步骤生成这些密钥与令牌：

  - [注册开发者账户](https://developer.x.com/en/apply-for-access) 并获得批准。
  - 在开发者门户中创建一个 [项目](/zh/resources/fundamentals/projects) 以及关联的 [开发者应用](/zh/resources/fundamentals/developer-apps)。
  - 前往你的 App 的“Keys and tokens”页面生成所需凭据。请务必将所有凭据保存在安全位置。
</Note>

**构建按时间倒序主页时间线请求的步骤**

_在本示例中，我们将调用按用户 ID 的用户帖子时间线端点，但你也可以将本快速入门中的做法应用于用户提及时间线的请求。_

**第一步：选择一个工具或库**

有多种工具、代码示例和库可用于向该端点发起请求，但这里我们将使用 Postman 来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

将 X API v2 集合加载到 Postman 后，导航到“Timelines”文件夹并找到“Reverse chronological home timeline”请求。

**第二步：对请求进行身份验证**

要正确调用 X API，你需要验证访问权限。对于此端点，你必须使用 [OAuth 2.0（含 PKCE）授权码](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-3) 或 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication) 的方式进行认证。

你需要将密钥与令牌添加到 Postman。可在 Postman 右上角选择名为“X API v2”的环境，并将密钥与令牌填入“initial value”和“current value”字段（点击环境下拉菜单旁的“眼睛”图标）。

如果配置正确，这些变量会自动带入请求的 Authorization 选项卡。

**第三步：确定并指定你希望获取其主页时间线的用户**

你必须在请求中指定要获取其最新帖子的用户。本示例中，我们将传入单个用户 ID。

用户 ID 是表示账户用户名的数值，可在该账户的个人资料 URL 中找到。例如，以下账户的用户名为 `XDevelopers`。

`https://x.com/XDevelopers`

要将此用户名转换为用户 ID，你需要使用带用户名的 [users lookup endpoint](/zh/x-api/users/lookup/introduction)，并在响应负载中找到数值型用户 ID。对于 @XDevelopers，用户 ID 为 2244994945。

在 Postman 中，导航到“Params”选项卡，并将该用户 ID 输入到 id 参数的“Value”列中。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `id` | 2244994945 |

**第四步：确定并指定你希望获取的字段**

如果在第三步后点击“Send”按钮，你将会在响应中收到默认的 [Post 对象](/zh/x-api/fundamentals/data-dictionary#tweet)字段：id、text 和 edit\_history\_tweet\_ids。

如果你希望接收更多字段，需要在请求中通过 [field](/zh/x-api/fundamentals/fields) 和/或 [expansion](/zh/x-api/fundamentals/expansions) 参数进行指定。

在本练习中，我们将从不同对象请求三组额外字段：

1. 主用户对象中的附加 tweet.created\_at 字段。

2. 返回帖子所关联作者的用户对象默认字段：id、name 和 username

3. 关联用户对象中的附加 user.created\_at 字段。
    

在 Postman 中，进入“Params”选项卡，在“Query Params”表中添加以下键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| `tweet.fields` | `created_at` | `tweets.created_at` |
| `expansions` | `author_id` | `includes.users.id`、`includes.users.name`、`includes.users.username` |
| `user.fields` | `created_at` | `includes.users.created_at` |
| max\_results | 5   |     |

现在你应该会在“Send”按钮旁看到以下 URL：

`https://api.x.com/2/users/:id/timelines/reverse_chronological?tweet.fields=created_at&expansions=author_id&user.fields=created_at&max_results=5`

<Info>
  **请注意：**

  在 Postman 中，URL 字段中的路径参数 :id **不会**自动更新为你在 `id` 参数字段中输入的值，这也是为什么上面的 URL 显示的是 `:id` 而不是 2244994945。
</Info>

**步骤五：发送请求并查看响应**

完成所有设置后，点击“Send”按钮，你将会收到如下响应：

```{
	"data": [
		{
			"created_at": "2022-05-12T17:00:00.000Z",
			"text": "Today marks the launch of Devs in the Details, a technical video series made for developers by developers building with the Twitter API.  🚀\n\nIn this premiere episode, @jessicagarson walks us through how she built @FactualCat #WelcomeToOurTechTalk\n⬇️\n\nhttps://t.co/nGa8JTQVBJ",
			"author_id": "2244994945",
			"id": "1524796546306478083"
		},
		{
			"created_at": "2022-05-11T19:16:40.000Z",
			"text": "📢 Join @jessicagarson @alanbenlee and @i_am_daniele tomorrow, May 12  | 5:30 ET / 2:30pm PT as they discuss the future of bots https://t.co/sQ2bIO1fz6",
			"author_id": "2244994945",
			"id": "1524468552404668416"
		},
		{
			"created_at": "2022-05-09T20:12:01.000Z",
			"text": "Do you make bots with the Twitter API? 🤖\n\nJoin @jessicagarson @alanbenlee and @iamdaniele on Thursday, May 12  | 5:30 ET / 2:30pm PT as they discuss the future of bots and answer any questions you might have. 🎙📆⬇️\n\nhttps://t.co/2uVt7hCcdG",
			"author_id": "2244994945",
			"id": "1523757705436958720"
		},
		{
			"created_at": "2022-05-06T18:19:54.000Z",
			"text": "If you’d like to apply, or would like to nominate someone else for the program, please feel free to fill out the following form:\n\nhttps://t.co/LUuWj24HLu",
			"author_id": "2244994945",
			"id": "1522642324781633536"
		},
		{
			"created_at": "2022-05-06T18:19:53.000Z",
			"text": "We’ve gone into more detail on each Insider in our forum post. \n\nJoin us in congratulating the new additions! 🥳\n\nhttps://t.co/0r5maYEjPJ",
			"author_id": "2244994945",
			"id": "1522642323535847424"
		}
	],
	"includes": {
		"users": [
			{
				"created_at": "2013-12-14T04:35:55.000Z",
				"name": "Twitter Dev",
				"username": "TwitterDev",
				"id": "2244994945"
			}
		]
	},
	"meta": {
		"result_count": 5,
		"newest_id": "1524796546306478083",
		"oldest_id": "1522642323535847424",
		"next_token": "7140dibdnow9c7btw421dyz6jism75z99gyxd8egarsc4"
	}
}
```

**第六步：对结果进行分页**

在上一个响应的底部，你会看到一个 meta 数据对象，其中包含以下字段：

- oldest\_id
- newest\_id
- results\_count
- next\_token
- previous\_token

在第四步中，我们将 max\_results 设为 5，这意味着每个页面最多包含五条结果。要访问后续数据页，请从上一页结果中获取 next\_token 的值，并在 Postman 的 params 页面将该字符串填入 pagination\_token 参数，其他设置保持不变。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `pagination_token` | t3buvdr5pujq9g7bggsnf3ep2ha28 |

完成以上设置后，点击“Send”，即可获取下一页结果。

我们整理了关于[分页](/zh/x-api/fundamentals/pagination)的指南，以进一步解释这一概念。 

**后续步骤**
[使用 API 参考自定义您的请求](/zh/x-api/posts/timelines#api-reference-index)

[向社区寻求帮助](https://devcommunity.x.com "向社区寻求帮助")