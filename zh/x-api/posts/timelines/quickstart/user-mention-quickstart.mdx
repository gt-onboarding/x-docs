---
title: 用户提及
sidebarTitle: 用户提及
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-user-post-and-mention-timeline-endpoints">
  ## 开始使用用户帖子与提及时间线端点
</div>

本快速入门指南将帮助你使用一组指定字段，通过[Postman](/zh/tutorials/postman-getting-started)向用户帖子时间线端点发出你的第一个请求。

如果你想查看不同语言的示例代码，请访问我们的[X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 代码库。

<Note>
  **先决条件**

  要完成本指南，你需要一组用于验证请求的[密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  - [注册开发者账户](https://developer.x.com/en/apply-for-access)并获得批准。
  - 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)以及关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  - 前往你的应用的“Keys and tokens”页面生成所需凭据。请务必将所有凭据保存在安全位置。
</Note>

**构建时间线请求的步骤**

_在此示例中，我们将调用“按 ID 的用户帖子时间线”端点，但你也可以将本快速入门中的方法应用于用户提及时间线请求。_

**第一步：选择工具或库**

有多种工具、代码示例和库可用于向此端点发出请求，这里我们将使用 Postman 来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

将 X API v2 集合加载到 Postman 后，前往 timeline 文件夹并找到“User Post timeline by ID”请求。
 

**第二步：为请求进行身份验证**

要正确地向 X API 发出请求，你需要验证访问权限。对于此端点，你必须使用以下任一身份验证方法：[OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)、[OAuth 2.0 Authorization Code with PKCE](zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 或 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication)。

为简化起见，我们在此请求中使用 OAuth 2.0 App-Only，但如果你希望请求私有[指标](/zh/x-api/fundamentals/metrics)或私密帖子，则需要使用其他身份验证方法之一。

你必须将密钥和令牌（具体为 [App Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)，也称为 App-only Bearer Token）添加到 Postman。操作方法：在 Postman 右上角选择名为“X API v2”的环境，并将密钥和令牌添加到“initial value”和“current value”字段（点击环境下拉菜单旁的“眼睛”图标）。

如果设置正确，请求的 authorization 选项卡会自动引用该变量。
 

**第三步：确定并指定要检索其帖子的用户**

你必须在请求中指定希望检索其近期帖子的用户。在此示例中，我们将传入单个用户 ID。

用户 ID 是表示账户唯一标识的数值，你可以在该账户的个人资料 URL 中找到用户名。例如，以下账户的用户名是 `XDevelopers`。

`https://x.com/XDevelopers`

要将此用户名转换为用户 ID，你需要使用[用户查询端点](/zh/x-api/users/lookup/introduction)，并在响应负载中找到数值型用户 ID。对于 @XDevelopers，用户 ID 为 2244994945。

在 Postman 中，前往“Params”选项卡，将该用户 ID 填入 id 参数的“Value”列。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `id` | 2244994945 |

**第四步：确定并指定你希望检索的字段**

如果你在第三步后点击“Send”按钮，你将在响应中收到[Post 对象](/zh/x-api/fundamentals/data-dictionary#tweet)的默认字段：id 和 text。

如果你希望获取除 id 和 text 之外的更多字段，需要在请求中通过 [field](/zh/x-api/fundamentals/fields) 和/或 [expansion](/zh/x-api/fundamentals/expansions) 参数明确指定这些字段。

本练习中，我们将从不同对象请求三组额外字段：

1. 主体帖子对象中的额外字段 tweet.created\_at。
2. 返回帖子所关联作者的用户对象默认字段：id、name 和 username
3. 关联用户对象中的额外字段 user.created\_at。
    

在 Postman 中，转到“Params”选项卡，并在“Query Params”表中添加以下键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| `tweet.fields` | `created_at` | `tweets.created_at` |
| `expansions` | `author_id` | `includes.users.id`, `includes.users.name`, `includes.users.username` |
| `user.fields` | `created_at` | `includes.users.created_at` |
| max\_results | 5   |     |

现在你应该会在“Send”按钮旁边看到以下 URL：

`https://api.x.com/2/users/:id/tweets?tweet.fields=created_at&expansions=author_id&user.fields=created_at&max_results=5`

<Info>
  **请注意：**

  在 Postman 中，URL 字段中的路径参数 :id 不会自动更新为你在 `id` 参数字段中输入的值，这就是为什么上述 URL 包含 `:id` 而不是 2244994945。
</Info>

**第五步：发起请求并查看响应**

当一切设置完成后，点击“Send”按钮，你将会收到如下响应：

```{
    "data": [
        {
            "author_id": "2244994945",
            "created_at": "2020-09-03T17:31:39.000Z",
            "id": "1301573587187331074",
            "text": "从今天起，您可以在开发者门户中查看自己在 v2 API 的每月推文用量。✨📊\n\n这会统计您通过 过滤流 和 最近搜索 获取的推文数量。了解更多：https://t.co/nfJHkFRQcZ https://t.co/vFXmoj3qaA"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-09-03T15:43:00.000Z",
            "id": "1301546240887398401",
            "text": "RT @snowman: 我们使用 X API、Python、Flask、Postgres 和 Heroku 构建了一个实时高尔夫排行榜。\n\n发送一条“leaderboard”私信…"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-09-01T20:07:50.000Z",
            "id": "1300888112948752389",
            "text": "⛳ 为什么高尔夫球手会多带一件衬衫？以防打出一杆进洞。\n\n既然引起了您的注意，来看看 @snowman 和 @johnd 如何使用 #TwitterAPI 构建实时高尔夫排行榜。📖\n\nhttps://t.co/rRKeKmaRrN"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-08-28T23:14:22.000Z",
            "id": "1299485505478963200",
            "text": "RT @jessicagarson: 我在 @ThePracticalDev 上发布了第一篇关于使用 Twitter API v2 的教程！您将学会如何探索某位用户的推文…"
        },
        {
            "author_id": "2244994945",
            "created_at": "2020-08-21T19:10:05.000Z",
            "id": "1296887316556980230",
            "text": "看看 @PennMedCDH 如何使用 Twitter 数据来理解新冠肺炎（COVID-19）健康危机 📊\n\nhttps://t.co/1tdA8uDWes"
        }
    ],
    "includes": {
        "users": [
            {
                "created_at": "2013-12-14T04:35:55.000Z",
                "id": "2244994945",
                "name": "Twitter Dev",
                "username": "TwitterDev"
            }
        ]
    },
    "meta": {
        "newest_id": "1301573587187331074",
        "next_token": "t3buvdr5pujq9g7bggsnf3ep2ha28",
        "oldest_id": "1296887316556980230",
        "previous_token": "t3equkmcd2zffvags2nkj0nhlrn78",
        "result_count": 5
    }
}
```

**第六步：分页浏览结果**

在上一个响应的底部，您会看到一个元数据对象，其中包含以下字段：

- oldest\_id
- newest\_id
- results\_count
- next\_token
- previous\_token

在第四步中，我们将 max\_results 设为 5，这意味着每页最多包含五条结果。要访问后续页面，请从上一页结果中取出 next\_token 的值，在 Postman 的 params 页面将其填入 pagination\_token 参数，其他参数保持不变。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| `pagination_token` | t3buvdr5pujq9g7bggsnf3ep2ha28 |

完成设置后，单击“Send”，即可获取下一页结果。

我们编写了关于[分页](/zh/x-api/fundamentals/pagination)的指南，以进一步解释这一概念。

**后续步骤**
[使用 API 参考自定义请求](/zh/x-api/posts/timelines#api-reference-index)

[联系社区寻求帮助](https://devcommunity.x.com "联系社区寻求帮助")