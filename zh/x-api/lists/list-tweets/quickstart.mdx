---
title: 快速入门
sidebarTitle: 快速入门
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-list-posts-lookup-endpoint">
  ## 开始使用“列表帖子查找”端点
</div>

本快速入门指南将帮助你使用 Postman 向“列表帖子查找”端点发起第一个请求。

如果你想查看不同语言的示例代码，请访问我们的 [X API v2 示例代码](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。

<Note>
  ### 先决条件

  要完成本指南，你需要一组用于请求认证的[密钥与令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥与令牌：

  - [注册开发者账号](https://developer.x.com/en/apply-for-access)并通过审批。
  - 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)以及关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  - 前往你的应用的“Keys and tokens”页面生成所需凭据。请务必将所有凭据保存在安全位置。
</Note>

<div id="steps-to-build-a-list-posts-lookup-request">
  ### 构建列表帖子查找请求的步骤
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### 第一步：从工具或库入手
</div>

有多种工具、代码示例和库可用于向该端点发起请求。为简化流程，我们将在此使用 Postman。

要将 X API v2 的 Postman 集合加载到您的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在您将 X API v2 集合加载到 Postman 后，依次前往“List”文件夹，选择“List Posts”，然后选择“List Posts lookup”。
 

<div id="step-two-authenticate-your-request">
  #### 第二步：为请求进行身份验证
</div>

要正确向 X API 发起请求，您需要确认自己具有相应权限。对于此端点，必须使用 [App only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)、[OAuth 2.0（含 PKCE）](zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 或 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication) 这三种身份验证方式之一来对请求进行认证。

为简化说明，我们将在本次请求中使用 App only。但如果您希望访问私有[指标](/zh/x-api/fundamentals/metrics)或帖子，则需要改用上述其他身份验证方式之一。

使用 App only 时，您需要在 Postman 中添加密钥和令牌（尤其是 [App only Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)，亦称 App only Bearer Token）。具体做法：选择名为“X API v2”的环境（位于 Postman 右上角），并将您的密钥和令牌填写到 “initial value” 和 “current value” 字段中（点击环境下拉菜单旁的“眼睛”图标）。

如果上述设置正确，这些变量会自动带入请求的 Authorization 选项卡。
 

<div id="step-three-identify-and-specify-which-list-you-would-like-to-retrieve-posts-from">
  #### 第三步：确定并指定要从哪个列表检索帖子
</div>

你必须在请求中指定要获取的列表。你可以在 x.com 上打开某个列表，并在其 URL 中找到列表 ID。例如，以下 URL 的列表 ID 是 84839422。

https://x.com/i/lists/84839422

目标 ID 可以是任何有效的列表 ID。在 Postman 中，进入 “Params” 选项卡，将你的 ID 填入路径变量 id 的 “Value” 列。请确保任何 ID 前后均不包含空格。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| id  | 84839422（列表 ID） |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### 步骤四：确定并指定你要检索的字段
</div>

如果在步骤三之后点击“Send”按钮，响应中将返回默认的[Post 对象](/zh/x-api/fundamentals/data-dictionary#tweet)字段：id 和 text。

若需返回更多字段，需要在请求中通过 tweet.fields 和/或 [expansions](/zh/x-api/fundamentals/expansions) 参数进行指定。

在本练习中，我们将从不同对象请求三组附加字段：

- 主 Lists 对象中的附加 created\_at 字段。

- 使用 expansions 参数获取完整的 [user 对象](/zh/x-api/fundamentals/data-dictionary#user)

- 关联的 user 对象中的附加 user.created\_at 字段。

在 Postman 中，转到“Params”选项卡，在“Query Params”表中添加以下键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| tweet.fields | created\_at | created\_at |
| expansions | author\_id | includes.users.id,  <br />includes.users.name,  <br />includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

现在你应当会在“Send”按钮旁看到类似的 URL：

`https://api.x.com/2/lists/84839422/tweets?expansions=author_id&user.fields=created_at&max_results=1`

<div id="step-five-make-your-request-and-review-your-response">
  #### 第五步：发起请求并检查响应
</div>

完成所有设置后，点击“Send”按钮，您将收到与以下示例相似的响应：

```
{
  "data": [
    {
      "author_id": "4172587277",
      "id": "1458172421115101189",
      "text": "A Alemanha registrou nesta semana um recorde de novos casos de Covid-19. Segundo o governo e especialistas em Saúde, pessoas não vacinadas são responsáveis pela situação \nhttps://t.co/4POyaPwMLu"
    }
  ],
  "includes": {
    "users": [
      {
        "username": "MomentsBrasil",
        "name": "Twitter Moments Brasil",
        "created_at": "2015-11-12T16:46:02.000Z",
        "id": "4172587277"
      }
    ]
  },
  "meta": {
    "result_count": 1,
    "next_token": "7140dibdnow9c7btw3z2vwioavpvutgzrzm9icis4ndix"
  }
}
```

**请注意：** 此端点的响应支持查询指定列表（List）中最新的 800 条帖子（Posts）