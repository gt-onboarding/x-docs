---
title: 快速开始
sidebarTitle: 快速开始
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-list-lookup-endpoint">
  ## 开始使用 List 查询端点
</div>

本快速入门指南将帮助你使用 Postman 向 List 查询端点发出第一个请求。

如果你想查看不同语言的示例代码，请访问我们的 [X API v2 示例代码](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 仓库。

\*\*注意：\*\*在本示例中，我们将调用“按 ID 查询 List”端点，但你也可以将本快速入门中的做法应用于其他查询请求。

<Note>
  ### 先决条件

  要完成本指南，你需要一组用于请求身份验证的[密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  - [注册开发者账号](https://developer.x.com/en/apply-for-access)并通过审批。
  - 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)以及关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  - 前往应用的“Keys and tokens”页面生成所需凭据。请务必将所有凭据妥善保管。
</Note>

<div id="steps-to-build-a-list-lookup-request">
  ### 构建列表查询请求的步骤
</div>

**第一步：选用工具或库**

有多种工具、代码示例和库可用于向此端点发起请求，这里我们使用 Postman 来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在将 X API v2 集合加载到 Postman 后，依次进入“List”文件夹、“List lookup”文件夹，然后选择“List by ID”。

**第二步：为请求进行身份验证**

要正确地向 X API 发起请求，你需要验证访问权限。针对该端点，你必须使用 [App only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token)、[OAuth 2.0（含 PKCE）](zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 或 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication) 进行身份验证。

为简化演示，我们将对本次请求使用 App only。但如果你需要访问私有[指标](/zh/x-api/fundamentals/metrics)或私有列表，则必须使用上述其他身份验证方式之一。

使用 App only 时，你需要将密钥和令牌（具体为 [App only Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)）添加到 Postman：在 Postman 右上角选择名为“X API v2”的环境，并在“initial value”和“current value”字段中填入你的密钥和令牌（点击环境下拉菜单旁的“眼睛”图标）。

如果配置正确，这些变量会自动填充到请求的 Authorization 选项卡中。

**第三步：确定并指定要检索的列表**

你必须在请求中指定要获取的列表。可通过访问 x.com，点击某个列表并查看其 URL 来找到列表 ID。例如，以下 URL 的列表 ID 为 84839422。

https://x.com/i/lists/84839422

目标 ID 可以是任意有效的列表 ID。在 Postman 中，进入“Params”选项卡，将你的 ID 填入路径变量 id 的“Value”列。确保 ID 前后没有空格。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| id  | 84839422（列表 ID） |

**第四步：确定并指定要检索的字段**

如果在第三步后点击“Send”按钮，你会在响应中获得默认的[List 对象](/zh/x-api/fundamentals/data-dictionary#list)字段：id、name。

若需更多字段，需要在请求中通过 list.fields 和/或[扩展](/zh/x-api/fundamentals/expansions)参数进行指定。

在本练习中，我们将从不同对象请求三组额外字段：

- 在主 Lists 对象中添加 created\_at 字段。
- 使用扩展参数请求完整的[用户对象](/zh/x-api/fundamentals/data-dictionary#user)。
- 在关联的用户对象中添加 user.created\_at 字段。

在 Postman 中，进入“Params”选项卡，在“Query Params”表中添加以下键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| list.fields | created\_at | created\_at |
| expansions | owner\_id | includes.users.id,  <br />includes.users.name,  <br />includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

现在你应该能在“Send”按钮旁看到类似的 URL：

`https://api.x.com/2/lists/84839422?list.fields=owner_id&expansions=owner_id&user.fields=created_at`

**第五步：发起请求并查看响应**

完成所有设置后，点击“Send”按钮，即可获得与以下示例相似的响应：

```
{
  "data": {
    "id": "84839422",
    "name": "Official Twitter Accounts",
    "owner_id": "783214"
  },
  "includes": {
    "users": [
      {
        "name": "Twitter",
        "created_at": "2007-02-20T14:35:54.000Z",
        "username": "Twitter",
        "id": "783214"
      }
    ]
  }
}
```