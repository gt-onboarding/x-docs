---
title: 集成指南
sidebarTitle: 集成指南
---

import { Button } from '/snippets/zh/button.mdx';

<div id="integration-guide">
  ## 集成指南
</div>

本页介绍在将列表成员端点集成到你的系统时需要了解的若干工具和关键概念。我们将内容划分为以下几个部分：

- [实用工具](#helpful)
- 关键概念
- [身份验证](#authentication)
- [开发者门户、项目与应用](#portal)
- [速率限制](#limits)
- [字段与扩展](#fields)
- [分页](#pagination)

<div id="helpful-tools">
  ### 实用工具
</div>

在深入介绍有助于你集成此端点的一些关键概念之前，建议先熟悉以下内容：

<div id="postman">
  #### Postman
</div>

Postman 是一款非常适合用于测试端点的工具。每个 Postman 请求都包含所有路径和请求体参数，帮助您快速了解可用项。要了解更多关于我们 Postman 集合的内容，请访问“[使用 Postman](/zh/tutorials/postman-getting-started)”页面。 

<div id="code-samples">
  #### 代码示例
</div>

想使用你偏好的编程语言，配合一些示例代码来快速对接此端点吗？我们在 [GitHub 页面](https://github.com/xdevplatform/Twitter-API-v2-sample-code)提供了多种代码示例，可作为你的起点。

<div id="third-party-libraries">
  #### 第三方库
</div>

利用我们社区提供的[第三方库](/zh/x-api/tools-and-libraries/overview)来快速入门。通过查找相应的版本标签，您可以找到与 v2 端点兼容的库。

<div id="key-concepts">
  ### 核心概念
</div>

<div id="authentication">
  #### 身份验证
</div>

所有 X API v2 端点都要求你使用一组凭据（也称为密钥和令牌）对请求进行身份验证。对于 Lists 的 **lookup** 端点，你可以使用 OAuth 1.0a 用户上下文、OAuth 2.0（含 PKCE）的授权码流程，或仅应用 来进行身份验证。然而，对于 Lists 的 **manage** 端点，你必须使用 OAuth 1.0a 用户上下文或 OAuth 2.0 进行身份验证。

[OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication)意味着你必须使用一组 API Key 和用户访问令牌才能成功发起请求。访问令牌必须与你所代表的用户关联。如果你希望为另一位用户生成一组访问令牌，他们必须通过[三方（3-legged）OAuth 流程](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)授权你的 App。

请注意，OAuth 1.0a 的使用可能较为复杂。如果你不熟悉此身份验证方法，建议使用[库](/zh/x-api/tools-and-libraries/overview)、Postman 等工具，或改用 OAuth 2.0 或 仅应用 来对请求进行身份验证。

[OAuth 2.0（含 PKCE）的授权码流程](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)可对应用的作用域和跨设备的授权流程提供更精细的控制。OAuth 2.0 允许你选择细粒度的特定作用域，从而代表用户获取特定权限。

要在你的 App 中启用 OAuth 2.0，需在开发者门户的 App 设置中的身份验证设置里将其开启。

[仅应用](/zh/resources/fundamentals/authentication#oauth-2-0)只要求你在请求中携带[仅应用访问令牌](/zh/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)。你可以直接在开发者 App 中生成仅应用访问令牌，或使用 [POST oauth2/token](/zh/resources/fundamentals/authentication#post-oauth2-token) 端点生成。

[仅应用](/zh/resources/fundamentals/authentication#oauth-2-0)只要求你在请求中携带[仅应用访问令牌](/zh/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)。你可以直接在开发者 App 中生成仅应用访问令牌，或使用 [POST oauth2/token](/zh/resources/fundamentals/authentication#post-oauth2-token) 端点生成。

<div id="developer-portal-projects-and-developer-apps">
  #### 开发者门户、项目与开发者应用
</div>

要获取可用于 X API v2 端点的一组身份验证凭据，您需要先[注册开发者账户](https://developer.x.com/en/portal/petition/essential/basic-info)，在该账户下设置一个[项目](/zh/resources/fundamentals/projects)，并在该项目中创建一个[开发者应用](/zh/resources/fundamentals/developer-apps)。然后，您可以在该开发者应用中找到您的密钥和令牌。
 

<div id="rate-limits">
  #### 速率限制
</div>

每天有成千上万的开发者向 X API 发起请求。为管理如此庞大的请求量，我们在每个端点上设置了[速率限制](/zh/x-api/fundamentals/rate-limits)，以限制你代表你的应用或代表已通过身份验证的用户所能发起的请求次数。

查询（GET）端点在应用级和用户级都会受到速率限制；管理（POST/DELETE）端点仅在用户级受到限制。应用级速率限制表示你（作为开发者）在给定时间段内，使用任一特定 App（通过 API Key 与 API Secret Key，或仅使用 App 的 Access Token）调用该端点的请求次数是有限的。用户级速率限制表示你代表其发起请求的已认证用户，在任何开发者 App 中执行列表查询的次数也是有限的。

下表展示了各端点的速率限制。

|     |     |     |
| :--- | :--- | :--- |
| **端点** | **HTTP 方法** | **速率限制** |
| /2/lists/:id/members | GET | 每 15 分钟 900 次请求 |
| /2/users/:id/list\_memberships | GET | 每 15 分钟 75 次请求 |
| /2/lists/:id/members | POST | 每 15 分钟 300 次请求 |
| /2/lists/:id/members/:user\_id | DELETE | 每 15 分钟 300 次请求 |

<div id="fields-and-expansions">
  #### 字段与扩展
</div>

X API v2 的 GET 端点允许用户使用称为 `fields` 和 `expansions` 的一组工具，精确选择希望从 API 返回的数据。`expansions` 参数允许你展开负载中被引用的对象。例如，查询列表成员时，你可以使用以下[扩展](/zh/x-api/fundamentals/expansions)：

- `pinned_tweet_id`

`fields` 参数允许你选择希望接收的不同数据对象中的确切[字段](/zh/x-api/fundamentals/fields)。列表成员查询主要返回用户对象。默认情况下，用户对象返回 id、name 和 username 字段。若要接收其他字段（如 `user.created_at` 或 `user.description`），你需要通过 user.fields 参数显式请求这些字段。

我们新增了关于如何使用[字段与扩展](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)的指南。

下表展示了每个查询端点可用的字段与扩展：

|     |     |     |
| :--- | :--- | :--- |
| **端点** | **字段** | **扩展** |
| /2/lists/:id/members | `user.fields`<br /><br />`tweet.fields` | `pinned_tweet_id` |
| /2/users/:id/list\_memberships | `list.fields`<br /><br />`user.fields` | `owner_id` |

<div id="pagination">
  #### 分页
</div>

查询成员资格/成员可能会返回大量数据。为确保在任何时刻都能返回一致且高性能的结果，我们采用分页。分页是 X API v2 各端点在单次响应无法容纳所有结果时提供的功能。此时，数据会按一系列“页面”返回。了解如何[分页获取结果](/zh/x-api/fundamentals/pagination)。