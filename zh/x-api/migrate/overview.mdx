---
title: 概述
---

import { Button } from "/snippets/zh/button.mdx"

X API v2 的最新版本影响深远。因此，我们将本迁移部分拆分为几个部分：

| X API v2 有哪些新变化    	| 了解我们在 X API v2 中发布的新端点和新特性。                                  	|
|:-----------------------------	|:-------------------------------------------------------------------------------------------------------------------	|
| 准备迁移了吗？        	| 通过一组指南与操作说明开始你的迁移。                                            	|
| 数据格式迁移指南 	| 了解如何重构你此前用于标准版 v1.1 和企业版数据格式的数据解析器。 	|
| X API 端点映射          	| 查看标准版 v1.1 和企业版端点如何映射到新的 X API v2 端点。                                	|

---

<div id="what-is-the-x-api-v2">
  ## 什么是 X API v2？
</div>

X API v2 现已成为主要的 X API，也是我们产品投入与创新的重点。我们与开发者携手，共同打造了新一代 X API，以更好服务多元化的开发者社区。基于开发者反馈，我们重构了 API，更好地满足更广泛的需求，引入了新功能与端点，并优化了开发者体验。

X API v2 现已成为主要的 X API，也是我们产品投入与创新的重点。过去几年里，我们与开发者合作，重构了 API，以更好地满足更广泛的需求，推出新功能与端点，并优化开发者体验。我们将持续构建开放的开发者平台，也期待看到大家基于 X API v2 构建的成果。

<div id="why-migrate">
  ## 为什么要迁移？
</div>

X API v2 建立在更现代、更可持续的基础之上，既提供针对标准版 v1.1 和企业级产品的改进替代端点，也带来了全新的功能。我们强烈建议传统 API（v1.1 和企业版）的客户开始迁移到 v2，因为我们最终将弃用这些接口。使用 X API 倾听并分析公开讨论、在 X 上与人互动并进行创新。

在本节中，我们将讨论相关端点和功能。

<div id="v2-endpoints">
  ## V2 端点
</div>

您可以通过以下指南查看 v2 端点的完整列表及其对应的 pre-v2 等价项：

<Button href="/zh/x-api/migrate/x-api-endpoint-map">
  X API 端点映射
</Button>

尽管 X API v2 中的大多数端点是替代项，但我们也引入了若干新端点。以下是我们在 v2 中发布的一些示例：

- [Spaces 端点](/zh/x-api/spaces/introduction)，帮助用户更好地使用 X Spaces，并使开发者能够共同塑造音频对话的未来。
- [隐藏回复](/zh/x-api/posts/hide-replies/introduction)，可用于构建工具，在大规模下限制辱骂性、干扰性或误导性回复的影响。
- 新的 Lists 端点，允许您[固定和取消固定列表](/zh/x-api/lists/pinned-lists/introduction)，或查询某人的已固定列表。
- 新的[批量合规端点](/zh/x-api/compliance/batch-compliance/introduction)，帮助您确保存储的用户和推文数据符合合规要求。

<div id="new-functionality">
  ## 新功能
</div>

X API v2 还引入了多项新功能，帮助你更高效地使用 X API。许多新特性源自你的反馈，其中包括此前仅面向企业客户开放的功能。

API 的部分改进包括：

- [在各个端点之间保持一致的设计](/zh/x-api/fundamentals/consistency)
- [可指定响应负载中返回的字段与对象](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)
- [新增且更为详尽的数据对象](/zh/x-api/fundamentals/data-dictionary)
- [借助 Tweet 注解提供的新上下文信息来接收并过滤数据](/zh/x-api/fundamentals/post-annotations)
- [访问新的指标](/zh/x-api/fundamentals/metrics)
- [轻松识别并筛选属于回复线程的会话](/zh/x-api/fundamentals/conversation-id)
- [为学术研究者提供高级功能与更高的数据访问权限](https://developer.x.com/content/developer-twitter/en/products/twitter-api/academic-research)
- [为流式端点提供恢复与冗余功能](/zh/x-api/posts/filtered-stream/integrate/recovery-and-redundancy-features)
- [轻松返回与查询匹配的 Tweet 计数](/zh/x-api/posts/counts/introduction)
- [支持编辑 Tweets](/zh/x-api/fundamentals/edit-posts)
- 高置信度的垃圾信息过滤
- 将缩短的 URL 完整展开，以便更高效地进行过滤与分析
- 通过移除弃用字段并现代化标签来简化 JSON 响应对象
- 在搜索查询中返回 100% 匹配的、公开且可用的 Tweets
- 流式“规则”，可在不中断连接的情况下进行更改
- 更具表达力的查询语言，适用于搜索 Tweets、Tweet 计数与过滤流
- 提供 OpenAPI 规范，便于构建新库并更透明地跟踪变更

<div id="discover-new-and-updated-response-objects">
  ### 了解新增和更新的响应对象
</div>

以下六种数据对象可通过 v2 端点使用：

| 对象 | 描述 |
|:--------|:-------------|
| [Tweet](/zh/x-api/fundamentals/data-dictionary#tweet) | Tweet 对象包含大量根级字段，例如 `id`、`text` 和 `created_at`。Tweet 对象也是多个子对象的父对象，包括 `user`、`media`、`poll` 和 `place`。 |
| [User](/zh/x-api/fundamentals/data-dictionary#user) | User 对象包含描述所引用用户的 X 账户元数据。 |
| [Spaces](/zh/x-api/fundamentals/data-dictionary#space) | Space 对象包含诸如 `state`、`host_id`、`is_ticketed`，以及 `lang` 等字段。 |
| [Lists](/zh/x-api/fundamentals/data-dictionary#list) | List 对象包含所请求列表的基本信息，包括 `description`、`member_count` 和 `owner_id`。 |
| [Media](/zh/x-api/fundamentals/data-dictionary#media) | 如果一条 Tweet 包含媒体（例如图片），可以使用 `media.fields` 参数请求 Media 对象，字段包括 `media_key`、`type`、`url`、`preview_image_url` 等。 |
| [Poll](/zh/x-api/fundamentals/data-dictionary#poll) | Tweet 中包含的投票不是任何端点的主对象，但可以在 Tweet 对象中找到并通过扩展获取其内容。 |
| [Place](/zh/x-api/fundamentals/data-dictionary#place) | Place 对象包含 `place_id`、`geo` 对象、`country_code` 等字段。可使用这些信息按位置识别并研究 Tweet。 |

了解更多：[如何使用字段和扩展](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)。

<div id="flexibility-to-choose-which-objects-and-fields-you-receive">
  ### 选择接收对象与字段的灵活性
</div>

当向 GET 端点发起请求时，您将收到与该端点对应的主数据对象，其中包含一组默认字段。例如，Tweet 对象默认返回 `id` 和 `text` 字段。

若需检索额外字段，请使用 [fields](/zh/x-api/fundamentals/fields) 和 [expansions](/zh/x-api/fundamentals/expansions) 参数。expansions 参数可用于检索关联数据对象，例如用户的置顶 Tweet 或媒体对象；而字段参数可让您在返回对象中请求除默认字段之外的特定字段。

以下是不同 X API v2 端点可用的 expansions 完整列表：

| 对象 / 资源 | 可用的 expansions |
|:-------------------|:----------------------|
| Tweets            | `author_id`, `edit_history_tweet_ids`, `entities.mentions.username`, `in_reply_to_user_id`, `referenced_tweets.id`, `referenced_tweets.id.author_id`, `attachments.poll_ids`, `attachments.media_keys`, `geo.place_id` |
| Users             | `pinned_tweet_id` |
| Spaces            | `invited_user_ids`, `speaker_ids`, `creator_id`, `host_ids`, `topic_ids` |

详细了解[如何使用 fields 与 expansions](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)。

<div id="new-metrics-available-within-tweets-users-spaces-and-media-objects">
  ## 在推文、用户、Spaces 和媒体对象中新增可用指标
</div>

现在可以在推文、用户、Spaces、列表和媒体对象中访问更多指标。这些指标包含公开和私有两类；其中部分推文相关指标还可按广告的自然或推广场景进行细分。

了解更多可用的[指标](/zh/x-api/fundamentals/metrics)。

| 对象  | 可用指标                | 公开指标 | 私有指标 | 自然指标 | 推广指标 |
|:---------|:-------------------------|:----------------|:-----------------|:-----------------|:------------------|
| tweets  | retweet\_count           | ✔️             |                 | ✔️              | ✔️               |
|         | quote\_count             | ✔️             |                 |                 |                  |
|         | like\_count              | ✔️             |                 | ✔️              | ✔️               |
|         | reply\_count             | ✔️             |                 | ✔️              | ✔️               |
|         | impression\_count        |               | ✔️              | ✔️              | ✔️               |
|         | url\_profile\_clicks      |               | ✔️              | ✔️              | ✔️               |
|         | url\_link\_clicks         |               | ✔️              | ✔️              | ✔️               |
| user    | follower\_count          | ✔️             |                 |                 |                  |
| user    | following\_count         | ✔️             |                 |                 |                  |
| media   | view\_count              |               | ✔️              |                 |                  |
| media   | playback\_0\_count        |               | ✔️              |                 |                  |
| space   | participant\_count       | ✔️             |                 |                 |                  |

<div id="edit-tweets">
  ## 编辑推文
</div>

X API v2 端点提供已编辑推文的元数据。_编辑推文_ 功能最初于 2022 年 9 月 1 日在 X 员工范围内进行测试。从该日期起，符合条件的推文可在 30 分钟内编辑，且最多可编辑 5 次。了解更多[编辑推文](/zh/x-api/fundamentals/edit-posts)相关内容。
使用 X API v2，开发者可以了解：

- 推文在创建时是否具备可编辑资格。某些推文（例如包含投票或已排程发布的推文）无法编辑。
- 推文可在 30 分钟内编辑，最多 5 次。对于可编辑的推文，您可以查看剩余编辑时间以及仍可进行的编辑次数。
- 您当前查看的是否为该推文的已编辑版本（在大多数情况下，除非通过推文 ID 请求特定历史版本，API 会返回该推文的最新版本）。
- 该推文的完整编辑历史。
- 归属于该推文各个版本的互动数据。

<div id="track-threaded-conversations">
  ## 跟踪线程化对话
</div>

一个新的推文字段可用于识别某条推文属于哪个对话线程。对话 ID 是该对话起始推文的推文 ID。了解更多：[对话跟踪](/zh/x-api/fundamentals/conversation-id)。

<div id="ready-to-migrate">
  ## 准备开始迁移
</div>

要使用 v2 端点，您需要具备以下内容：

- [开发者账户](https://developer.x.com/en/portal/petition/essential/basic-info)
- 在[项目](zh/resources/fundamentals/projects)内创建的[开发者应用](https://developer.x.com/en/apps)
- 该项目中开发者应用的[密钥和令牌](zh/resources/fundamentals/authentication)

请务必使用项目内应用的密钥和令牌。若使用不属于任何项目的应用密钥和令牌，将无法向 v2 端点发起请求。

拥有开发者账户后，您可以在[开发者门户](https://developer.x.com/en/portal/petition/essential/basic-info)中完成上述所有设置。

<div id="authentication">
  ### 身份验证
</div>

在全新的 Twitter API 中，你将使用两种不同的身份验证方式：OAuth 1.0a 用户上下文 和 OAuth 2.0 持有者令牌（Bearer Token），以访问不同的端点。在向这些端点发起请求时，它们各自用于不同的场景：

当代表某位 Twitter 用户发起请求时，需要使用 OAuth 1.0a 用户上下文
当代表你的开发者应用发起请求时，需要使用 OAuth 2.0 持有者令牌（Bearer Token）

<div id="tools-and-code">
  ## 工具与代码
</div>

为帮助你快速上手并熟悉新的端点与功能，我们提供了多种起步选项：

- 我们提供了一个 Twitter 的 [Postman 集合](https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400)，可使用 Postman 客户端对各个端点发起请求并进行连接。这是一种低阻方式，便于测试身份验证并试用这些端点。
- 我们还提供了由 Twitter 支持和第三方维护的库清单，涵盖 Ruby、Python、Node、Java 等多种语言。更多信息，请查看我们的[工具与库页面](/zh/x-api/tools-and-libraries/overview)。

<div id="migrating-to-updated-endpoints">
  ## 迁移到更新的端点
</div>

当你开始探索新的 Twitter v2 端点时，我们提供了一系列详细的迁移指南，帮助你将各个更新端点的功能与旧版本进行对比：

- **帖子**
  - [帖子查找](/zh/x-api/posts/lookup/integrate)
  - [管理帖子](/zh/x-api/posts/manage-tweets/migrate/overview)
  - [时间线](/zh/x-api/posts/timelines/migrate/overview)
  - [搜索帖子](/zh/x-api/posts/search/migrate/overview)
  - [帖子统计](/zh/x-api/posts/counts/migrate/overview)
  - [过滤流](/zh/x-api/posts/filtered-stream/migrate/overview)
  - 抽样流
  - [转发](/zh/x-api/posts/retweets/migrate/overview)
  - [点赞](/zh/x-api/posts/likes/migrate/likes-lookup-standard-to-twitter-api-v2)
  - [隐藏回复](/zh/x-api/posts/hide-replies/migrate)
- **用户**
  - [用户查找](/zh/x-api/users/lookup/migrate/overview)
  - [关注](/zh/x-api/users/follows/migrate/standard-to-twitter-api-v2)
  - [屏蔽](/zh/x-api/users/blocks/migrate)
  - [静音](/zh/x-api/users/mutes/migrate/manage-mutes-standard-to-twitter-api-v2)
- **列表**
  - [列表查找](/zh/x-api/lists/list-lookup/migrate/overview)
  - [管理列表](/zh/x-api/lists/manage-lists/migrate/overview)
  - [列表帖子查找](/zh/x-api/lists/list-tweets/migrate/overview)
  - [列表成员](/zh/x-api/lists/list-members/migrate/overview)

<div id="migrating-to-the-new-data-format">
  ## 迁移到新的数据格式
</div>

当您从 v1.1 或 enterprise 迁移到 v2 时，需要了解数据的交付格式已发生明显变化。我们新增了字段、调整了字段顺序，并在某些情况下完全移除了某些元素。

为帮助您了解这些变化，我们正在编写一系列指南，帮助您将 v2 之前的数据格式字段映射到新版字段，并说明如何请求这些新字段。

您可以访问本迁移中心的[数据格式迁移](/zh/x-api/migrate/data-format-migration)部分，或查阅以下特定数据格式指南以了解更多信息：

- [原生格式到 X API v2（标准版 v1.1）](/zh/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2)
- [原生增强到 X API v2（企业版）](/zh/x-api/migrate/data-format-migration#migrating-from-native-enriched-data-format-to-v2)
- [Activity Streams 到 X API v2（企业版）](/zh/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2)

<div id="whats-next">
  ## 接下来？
</div>

已经使用该平台一段时间的用户会注意到，许多新的端点与现有的 [standard v1.1](https://developer.x.com/en/docs/twitter-api/v1) 和 [enterprise](/zh/x-api/enterprise-gnip-2.0/enterprise-gnip) 端点保持一致。事实上，我们计划未来用这些端点替代这三种版本。

我们整理了一张表格，帮助您了解 [X API 端点映射](/zh/x-api/migrate/x-api-endpoint-map) 与先前版本之间的对应关系。

如果您想了解接下来会推出什么，请访问我们的 [产品路线图](https://trello.com/b/myf7rKwV/twitter-developer-platform-roadmap)。

我们还提供了 [更新日志](https://developer.x.com/en/updates/changelog)，供您查看我们已发布的内容。

<div id="what-should-we-build-next">
  ### 我们接下来应该构建什么？
</div>

在我们持续扩展 X API v2 功能的过程中，我们希望不断倾听各位的意见。我们欢迎并鼓励您提交[反馈](https://twitterdevfeedback.uservoice.com/)。

请查看已提交的想法，支持与您需求相符的提议，并分享您的反馈。