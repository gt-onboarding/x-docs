---
title: 简介
sidebarTitle: 简介
---

import { Button } from '/snippets/zh/button.mdx';

此 Direct Messages 查询功能的初始发布包含三个 GET 方法：

- **GET /2/dm\_conversations/with/:participant\_id/dm\_events** - 检索与一对一会话相关的私信事件。:participant\_id 路径参数是与发起此请求的已认证用户进行会话的账户的用户 ID。
- **GET /2/dm\_conversations/:dm\_conversation\_id/dm\_events** - 根据 :dm\_conversation\_id 路径参数指定的特定会话 ID，检索与之相关的私信事件。
- **GET /2/dm\_events** - 检索与某个用户相关的私信事件，覆盖一对一与群组会话。可获取最多追溯 30 天的事件。

请注意，私信事件 ID 在 v1.1 与 v2（以及 X 应用）之间是通用的，因此可将 v1.1 的“列出单个事件”方法与这些新的 v2 端点配合使用。另请注意，Enterprise 和 Premium Account Activity API 支持 v2 的一对一消息，但尚不支持群组会话。

在此次发布中，支持三种事件类型，这些端点也支持通过查询参数对其进行过滤：

- **MessageCreate** - 创建了一条消息。
- **ParticipantsJoin** - 有新参与者加入会话。
- **ParticipantsLeave** - 有参与者离开会话。

GET 方法的用户速率限制为每 15 分钟 300 次请求。该限制在这些 GET 端点间共享。

由于你是代表用户调用 Direct Message v2 端点，必须使用 [OAuth 1.0a User Context](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0 Authorization Code with PKCE](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-3) 进行认证，并使用已授权你 X 应用的用户所关联的访问令牌（Access Tokens）。要使用 OAuth 1.0a 生成这些访问令牌，可使用 [三方（3-legged）OAuth 流程](/zh/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow)。要使用 OAuth 2.0 生成用户访问令牌，可使用 [Authorization Code with PKCE 授权流程](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2)。

**账户设置**

要访问这些端点，你需要：

- 一个已获批准的 [开发者账号](https://developer.x.com/en/portal/petition/essential/basic-info)。
- 使用位于某个 [Project](/zh/resources/fundamentals/projects) 中的 [developer App](/zh/resources/fundamentals/developer-apps) 的密钥和令牌进行认证。

在我们的 [入门指南](/zh/x-api/getting-started/getting-access) 中了解如何获取对 X API v2 端点的访问。

<div className="flex space-x-2">
  <Button href="/zh/x-api/direct-messages/lookup/quickstart">
    快速入门
  </Button>

  <Button href="https://github.com/xdevplatform/Twitter-API-v2-sample-code">
    示例代码
  </Button>

  <Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
    在 Postman 中运行
  </Button>

  <Button href="https://developer.x.com/apitools/api?endpoint=/2/tweets&method=get">
    使用 API Explorer 试用
  </Button>
</div>
