---
title: 快速上手
sidebarTitle: 快速上手
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-search-spaces-endpoint">
  ## 开始使用 search Spaces 端点
</div>

本快速入门指南将帮助你使用 Postman，向 search Spaces 端点发出首个请求，并包含一组指定字段。

如果你想查看不同编程语言的示例代码，请访问我们的 [X API v2 示例代码 GitHub 仓库](https://github.com/xdevplatform/Twitter-API-v2-sample-code)。

<Note>
  **先决条件**

  要完成本指南，你需要一组用于对请求进行身份验证的[密钥和令牌](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些密钥和令牌：

  - [注册开发者账户](https://developer.x.com/en/apply-for-access)并获得审批。
  - 在开发者门户中创建一个[项目](/zh/resources/fundamentals/projects)及其关联的[开发者应用](/zh/resources/fundamentals/developer-apps)。
  - 前往你的应用的“Keys and tokens”页面以生成所需凭据。请务必将所有凭据保存在安全位置。
</Note>

<div id="steps-to-build-a-search-spaces-request">
  ### 构建搜索 Spaces 请求的步骤
</div>

**步骤一：选择工具或库**

有多种工具、代码示例和库可用于向此端点发起请求。为简化流程，我们这里使用 Postman 工具。

要将 X API v2 的 Postman 集合加载到您的环境中，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在 Postman 中加载 X API v2 集合后，导航到 Spaces 文件夹并找到“Search Spaces”请求。
 

**步骤二：为请求进行身份验证**

要正确地向 X API 发起请求，您需要验证访问权限。为此，此端点要求您使用 [OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication#bearer-token-also-known-as-app-only) 或 [OAuth 2.0 Authorization Code with PKCE](/zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 身份验证方式对请求进行认证。

为简化起见，我们在此请求中使用 OAuth 2.0 App-Only。但如果您希望请求私有[指标](/zh/x-api/fundamentals/metrics)或来自私密用户的 Spaces，则需要使用其他身份验证方式之一。

要使用 OAuth 2.0 App-Only，您必须将密钥与令牌（尤其是 [App Access Token](/zh/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)（亦称 App-only Bearer Token））添加到 Postman。方法是在 Postman 右上角选择名为“X API v2”的环境，并将密钥与令牌填写到“initial value”和“current value”字段中（点击环境下拉菜单旁的眼睛图标）。

如设置正确，这些变量会自动注入到请求的“Authorization”选项卡中。
 

**步骤三：创建搜索查询**

此端点接受文本作为搜索查询。不同于其他搜索端点，它不支持运算符、分组和逻辑运算符。此示例中，我们使用“hello”作为简单查询。

在 Postman 中，前往“Params”选项卡，将该值填写到 query 参数的“Value”列中。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| query | hello |

**步骤四：确定并指定要检索的字段**

如果在步骤三后点击“Send”按钮，您将收到 Space 的 ID 及其状态，这是响应中默认返回的唯一 Space 对象字段。

如果您希望返回更多字段，必须在请求中通过 space.fields 或 expansions 参数加以指定。

在此示例中，我们将从不同对象请求三组附加字段：

- 主 Spaces 对象中的额外 title 字段
- 指定 creator\_id 的完整用户对象
- 关联用户对象中的额外 user.created\_at 字段

在 Postman 中，前往“Params”选项卡，并将以下键值对添加到“Query Params”表：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| space.fields | title | creator\_id |
| expansions | creator\_id | includes.users.id, includes.users.name, includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

您现在应能在“Send”按钮旁看到以下 URL：

https://api.x.com/2/spaces/search?query=hello\&space.fields=creator\_id\&expansions=creator\_id\&user.fields=created\_at

**步骤五：发送请求并查看响应**

完成设置后，点击“Send”按钮，您将收到如下响应：

```{
   "data": [
    {
        "creator_id": "2244994945",
        "id": "1zqKVXPQhvZJB",
        "title": "Hello world 👋",
        "state": "Running"
   },
   "includes": {
       "users": [
           {
               "created_at": "2013-12-14T04:35:55.000Z",
               "name": "Twitter Dev",
               "id": "2244994945",
               "username": "TwitterDev"
           }
       ]
   }
]
}
```