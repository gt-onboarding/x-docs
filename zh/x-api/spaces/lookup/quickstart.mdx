---
title: 快速入门
sidebarTitle: 快速入门
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-spaces-lookup-endpoints">
  ## 开始使用 Spaces 查询端点
</div>

本快速入门指南将帮助你使用 Postman，向某个 Spaces 查询端点发送首个请求，并指定一组字段。

如果你想查看不同编程语言的示例代码，请访问我们的 [X API v2 sample code GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code) 代码库。

<Note>
  ### 先决条件

  要完成本指南，你需要一组用于对请求进行身份验证的 [keys and tokens](/zh/resources/fundamentals/authentication)。你可以按照以下步骤生成这些 keys 和 tokens：

  - [注册开发者账户](https://developer.x.com/en/apply-for-access) 并通过审批。
  - 在开发者门户创建一个 [Project](/zh/resources/fundamentals/projects) 以及关联的 [developer App](/zh/resources/fundamentals/developer-apps)。
  - 前往你的 App 的“Keys and tokens”页面以生成所需凭据。请务必将所有凭据保存在安全位置。
</Note>

<div id="steps-to-build-a-spaces-lookup-request">
  #### 构建 Spaces 查询请求的步骤
</div>

_在本示例中，我们将向“按创建者 ID 查询用户 Spaces”的端点发起请求，但你也可以将本快速入门中的方法应用到其他查询请求。_

**步骤一：选择工具或库**

有多种工具、代码示例和库可用于向此端点发起请求，这里我们使用 Postman 来简化流程。

要将 X API v2 的 Postman 集合加载到你的环境，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

将 X API v2 集合加载到 Postman 后，前往 Spaces 文件夹，找到“Lookup Spaces created by one or more users”请求。
 

**步骤二：为请求进行身份验证**

要正确地向 X API 发起请求，你需要验证访问权限。为此，此端点要求使用 [OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) 或 [OAuth 2.0 Authorization Code with PKCE](zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 方式对请求进行认证。

为简便起见，我们在此请求中使用 OAuth 2.0 App-Only。但如果你想请求私有[指标](/zh/x-api/fundamentals/metrics)或来自私密用户的 Spaces，则需要使用其他身份验证方式之一。 

要使用 OAuth 2.0 App-Only，你必须将密钥和令牌（尤其是 [App Access Token](/zh/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)，也称 App-only Bearer Token）添加到 Postman。你可以在 Postman 右上角选择名为“X API v2”的环境，并将密钥和令牌添加到“initial value”和“current value”字段中（点击环境下拉菜单旁的眼睛图标）。

如果配置正确，这些变量会自动填充到请求的 Authorization 选项卡中。
 

**步骤三：确定并指定要检索其帖子的用户**

你必须在请求中指定要为其检索正在进行或即将开始的 Spaces 的用户。在此示例中，我们将传入单个用户 ID。

用户 ID 是表示账号句柄的数值，可在账号的个人资料网址中找到。例如，以下账号的用户名是 XDevelopers。

https://x.com/XDevelopers

要将该用户名转换为用户 ID，你需要使用带用户名的用户查询端点，并在返回的载荷中找到数值型用户 ID。就 @XDevelopers 而言，用户 ID 为 2244994945。

在 Postman 中，前往“Params”选项卡，将此用户 ID 填入 id 参数的“Value”列。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| id  | 2244994945 |

**步骤四：确定并指定要检索的字段**

如果你在步骤三后点击“Send”按钮，你将收到一个 id，这是响应中默认返回的唯一 [Space 对象](/zh/x-api/fundamentals/data-dictionary#space)字段。

如果你希望返回更多字段，需要在请求中通过 space.fields 或 expansions 参数进行指定。

在本练习中，我们将从不同对象请求三组附加字段：

- 主 Spaces 对象中的附加 title 字段
- 指定 creator ID 的完整 [用户对象](/zh/x-api/fundamentals/data-dictionary#user)
- 关联用户对象中的附加 user.created\_at 字段

在 Postman 中，前往“Params”选项卡，在“Query Params”表中添加以下 key:value 对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| space.fields | title | creator\_id |
| expansions | creator\_id | includes.users.id, includes.users.name, includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

现在你应当在“Send”按钮旁看到以下 URL：

https://api.x.com/2/spaces/by/creator\_ids?user\_ids=2244994945\&space.fields=creator\_id\&expansions=creator\_id\&user.fields=created\_at

**步骤五：发送请求并查看响应**

完成所有配置后，点击“Send”按钮，您将收到如下响应：

```
{
   "data": [
    {
        "creator_id": "2244994945",
        "id": "1zqKVXPQhvZJB",
        "title": "Hello world 👋",
        "state": "Running"
   },
   "includes": {
       "users": [
           {
               "created_at": "2013-12-14T04:35:55.000Z",
               "name": "Twitter Dev",
               "id": "2244994945",
               "username": "TwitterDev"
           }
       ]
   }
]
}
```