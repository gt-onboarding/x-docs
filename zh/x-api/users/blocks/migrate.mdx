---
title: 迁移指南
sidebarTitle: 迁移指南
---

import { Button } from '/snippets/zh/button.mdx';

<div id="blocks-lookup-standard-v11-compared-to-x-api-v2">
  ### 屏蔽查询：标准版 v1.1 与 X API v2 的对比
</div>

如果您一直在使用标准版 v1.1 的 [GET blocks/ids](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-ids) 和 [GET blocks/list](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-list) 端点，本指南旨在帮助您理解标准版 v1.1 与 X API v2 屏蔽查询端点之间的相同点与差异。

- **相同点**
  - 身份验证
- **差异**
  - 端点 URL
  - 每次请求的用户数限制
  - 应用与项目要求
  - 响应数据格式
  - 请求参数

<div id="similarities">
  #### 相似性
</div>

**身份验证**

标准 v1.1 与 X API v2 的封锁查询端点均使用 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication#oauth-1-0a-2)。因此，如果你此前使用的是标准 v1.1 的某个封锁查询端点，迁移到 X API v2 版本后可继续沿用相同的身份验证方法。 

<div id="differences">
  #### 差异
</div>

**端点 URL**

- 标准 v1.1 端点：
  - GET https://api.x.com/1.1/blocks/ids.json
    （被指定用户屏蔽的用户 ID 列表）
  - GET https://api.x.com/1.1/blocks/lists.json
    （被指定用户屏蔽的用户列表）
- X API v2 端点：
  - GET https://api.x.com/2/users/:id/blocking
    （被指定用户 ID 屏蔽的用户列表）
     

**每次请求的用户数量限制**

标准 v1.1 端点每次请求最多可返回 5000 个用户。新的 v2 端点每次请求最多可返回 1000 个用户。要返回完整的 1000 个用户，您需要在查询参数中传入 max\_results=1000；随后可将响应负载中返回的 next\_token 传递给下一次请求中的 pagination\_token 查询参数。
 

**应用与项目要求**

X API v2 端点要求您在对请求进行身份验证时，使用与[开发者应用](/zh/resources/fundamentals/developer-apps)关联、且隶属于[项目](/zh/resources/fundamentals/developer-apps)的凭据。所有 X API v1.1 端点都可以使用独立应用或与项目关联的应用的凭据。

**响应数据格式**

标准 v1.1 与 X API v2 端点版本之间最大的差异之一在于您如何选择在负载中返回哪些字段。

对于标准端点，您默认会收到许多响应字段，然后可以使用参数来指定应在负载中返回哪些字段或字段集。

X API v2 版本默认仅返回用户 id、name 和 username 字段。要请求任何其他字段或对象，您需要使用[fields](/zh/x-api/fundamentals/fields)和[expansions](/zh/x-api/fundamentals/expansions)参数。您从此端点请求的任何用户字段将返回在主用户对象中。任何扩展的 Post 对象及其字段将返回在响应中的 includes 对象内。随后，您可以通过匹配用户对象与扩展的 Post 对象中包含的 ID，将任何扩展对象关联回用户对象。 

我们鼓励您查阅各自的指南以进一步了解这些新参数，或阅读我们的[如何使用 fields 与 expansions](/zh/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)指南。 

我们还整理了[数据格式迁移指南](/zh/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2)，可帮助您将标准 v1.1 字段映射到较新的 v2 字段。该指南还将为您提供在 v2 请求中需要传递的特定 expansion 和 field 参数，以返回所需的特定字段。 
 

除了变更请求某些字段的方式之外，X API v2 还为 API 返回的对象引入了新的 JSON 设计，包括 [P](/zh/x-api/fundamentals/data-dictionary#tweet)ost 和 [user](/zh/x-api/fundamentals/data-dictionary#user) 对象。

- 在 JSON 根级别，标准端点在 statuses 数组中返回 Post 对象，而 X API v2 返回 data 数组。 
- X API v2 的 JSON 不再引用转发和引用的“statuses”，而是引用 Retweeted 和 Quoted Tweets。许多遗留和已弃用字段（如 contributors 和 user.translator\_type）正在被移除。 
- X API v2 使用术语 like，替代在 Post 对象中的 favorites 和在 user 对象中的 favourites。 
- X 采用的约定是：没有值（例如 null）的 JSON 字段不会写入负载。仅当 Post 和 user 属性具有非 null 值时才会被包含。 
   

我们还为[Post 对象](/zh/x-api/fundamentals/data-dictionary#tweet)引入了一组新字段，包括以下内容：

- 一个 [conversation\_id](/zh/x-api/fundamentals/conversation-id) 字段
- 两个新的[annotations](/zh/x-api/fundamentals/post-annotations)字段，包括 context 和 entities
- 若干新的[metrics](/zh/x-api/fundamentals/metrics)字段 
- 一个新的 reply\_setting 字段，用于显示谁可以回复给定的 Post

**请求参数**

以下标准 v1.1 接口接受两种查询参数（user\_id 或 screen\_name）。X API v2 仅接受数值型用户 ID，且必须作为端点路径的一部分传递。