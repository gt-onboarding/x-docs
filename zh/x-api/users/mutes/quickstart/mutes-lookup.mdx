---
title: 静音查询
sidebarTitle: 静音查询
---

import { Button } from '/snippets/zh/button.mdx';

<div id="getting-started-with-the-mutes-lookup-endpoint">
  ## 开始使用 mutes lookup 端点
</div>

本快速入门指南将帮助你使用 Postman 向 mutes lookup 端点发出首个请求。

如果你想查看不同语言的示例代码，请访问我们的 [X API v2 示例代码](https://github.com/xdevplatform/Twitter-API-v2-sample-code) GitHub 代码库。

<Note>
  **先决条件**

  完成本指南，你需要一组用于请求认证的 [keys and tokens](/zh/resources/fundamentals/authentication)。你可以按以下步骤生成这些 keys 和 tokens：

  - [注册开发者账号](https://developer.x.com/en/apply-for-access) 并通过审核。
  - 在开发者门户创建一个 [Project](/zh/resources/fundamentals/projects) 以及关联的 [developer App](/zh/resources/fundamentals/developer-apps)。
  - 前往你的 App 的“Keys and tokens”页面生成所需凭证。请务必将全部凭证保存在安全位置。
</Note>

<div id="steps-to-build-a-mutes-lookup-request">
  ### 构建静音列表查询请求的步骤
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### 第一步：从工具或库入手
</div>

有多种工具、代码示例和库可用于向该端点发起请求，但这里我们将使用 Postman 来简化流程。

要将 X API v2 的 Postman 集合导入到你的环境，请点击以下按钮：

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  将 X API v2 添加到 Postman
</Button>

在你将 X API v2 集合导入 Postman 之后，前往 “Mutes” 文件夹，并选择 “Mutes lookup”。
 

<div id="step-two-authenticate-your-request">
  #### 步骤二：为请求进行身份验证
</div>

要正确向 X API 发起请求，需先验证你是否拥有相应权限。对于此端点，你必须使用 [OAuth 1.0a 用户上下文](/zh/resources/fundamentals/authentication) 或 [OAuth 2.0（含 PKCE）的授权码模式](zh/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) 为请求进行身份验证。

在本示例中，我们将使用 OAuth 1.0a 用户上下文。

你需要将密钥和令牌——具体包括 API Key、API Secret Key、OAuth 1.0a 用户 Access Token，以及 OAuth 1.0a 用户 Access Token Secret——添加到 Postman。可在 Postman 右上角选择名为“X API v2”的环境，并将密钥和令牌添加到“initial value”和“current value”字段（点击环境下拉菜单旁的眼睛图标）。

如果设置正确，这些变量会自动填充到请求的 Authorization 选项卡中。
 

<div id="step-three-specify-a-user">
  #### 步骤三：指定用户
</div>

使用此端点时，你必须指定你的用户 ID，或指定已通过认证的用户 ID，才能查看你或该认证用户已静音的对象。

在 Postman 中，转到 “Params” 选项卡，在该部分底部的 “Path Variables” 下，将认证用户的 ID 输入到 id 的 “Value” 列中，确保 ID 前后不包含空格。

在 “Path Variables” 部分上方，你会看到可添加的可选 “Query Params”。在本示例中，我们勾选变量 max\_results，并将其值设置为 5。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Parameter Type** |
| `id` | （你的用户 ID） | Path |
| max\_results | 5   | Query |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### 步骤四：确定并指定要检索的字段
</div>

如果你在步骤三之后点击“Send”按钮，响应中将返回默认的 [user object](/zh/x-api/fundamentals/data-dictionary#user) 字段：id、name 和 username。

如果你希望在 id、name 和 username 之外获取更多字段，需要在请求中通过 [fields](/zh/x-api/fundamentals/fields) 和/或 [expansions](/zh/x-api/fundamentals/expansions) 参数加以指定。

在本练习中，我们将从不同对象请求三组附加字段：

1. 主用户对象中的附加字段：user.created\_at。
2. 返回用户所关联的置顶帖子对象的默认字段：id 和 text。
3. 关联帖子对象中的附加字段：tweet.created\_at。

在 Postman 中，转到 “Params” 选项卡，并在 “Query Params” 表中添加以下键值对：

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| user.fields | created\_at | user.created\_at |
| expansions | pinned\_tweet\_id | tweet.id, tweet.text |
| tweet.fields | created\_at | includes.tweets.created\_at |

现在，你应当能在 “Send” 按钮旁看到一个类似的 URL，其中包含你自己的用户 ID（而非示例 ID）：

`https://api.x.com/2/users/1324848235714736129/muting?user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=created_at&max_results=5`

<div id="step-five-make-your-request-and-review-your-response">
  #### 步骤五：发出请求并查看响应
</div>

完成所有设置后，点击“Send”按钮，您将收到与下方示例响应类似的结果：

```
{
  "data": [
    {
      "username": "TwitterDev",
      "created_at": "2013-12-14T04:35:55.000Z",
      "id": "2244994945",
      "name": "Twitter Dev",
      "pinned_tweet_id": "1430984356139470849"
    }
  ],
  "includes": {
    "tweets": [
      {
        "created_at": "2021-08-26T20:03:51.000Z",
        "id": "1430984356139470849",
        "text": "Help us build a better Twitter Developer Platform!\n \nTake the annual developer survey &gt;&gt;&gt; https://t.co/9yTbEKlJHH https://t.co/fYIwKPzqua"
      }
    ]
  },
  "meta": {
    "result_count": 1
  }
}
```

<div id="step-six-paginate-through-your-results">
  #### 第六步：分页获取结果
</div>

你可能会注意到响应底部有一个 meta 对象。如果你收到了 next\_token，这表示还有下一页结果可获取。要获取下一页结果，取出 next\_token 字段的值，并将其作为新增的 pagination\_token 查询参数的值添加到请求中。
 

|     |     |
| :--- | :--- |
| **键** | **值** |
| pagination\_token | 1710819323648428707 |

添加该参数后再发送请求，由于我们在第三步将 max\_results 设为 5，接下来的五条结果会随后续的响应载荷返回。你可以持续重复此过程，直到返回所有结果；不过你也可以使用 max\_results 参数，每次请求最多获取 1000 位用户，从而减少分页次数。