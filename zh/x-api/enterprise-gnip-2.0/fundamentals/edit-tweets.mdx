---
title: 编辑推文
---

企业端点已更新，可提供已编辑帖子的元数据。\_编辑帖子\_功能最初于 2022 年 9 月 1 日在 X 员工中进行测试。从该日期起，符合条件的帖子可在 30 分钟内最多编辑 5 次。_自 2022 年 9 月 29 日起创建的所有帖子对&#x8C61;_&#x90FD;包含帖子编辑元数据，即使该帖子从未被编辑。每次帖子被编辑时，都会创建一个新的帖子 ID。帖子的编辑历史可通过将这些 ID 串联起来加以描述，从原始 ID 开始。此外，如果编辑链中的任一帖子被删除，该链中的所有帖子也会被删除。

这些元数据会自动包含在内。无需任何请求参数，即可将可用的编辑历史作为 Post 对象的一部分返回。

通过这些新的元数据，开发者可以了解：

- 如果帖子在创建时符合可编辑条件。某些帖子（例如带投票的或已排程的帖子）无法编辑。
- 帖子可在 30 分钟内编辑，最多可编辑 5 次。对于可编辑的帖子，您可以查看剩余的编辑时间以及还可编辑的次数。
- 如果你正在查看某条帖子的已编辑版本。在大多数情况下，除非通过帖子 ID 请求该帖子的特定历史版本，否则 API 会返回其最新版本。

在根级新增了三个帖子属性：

- **edit\_history** - 提供与该帖子编辑历史关联的所有帖子 ID。"initial\_tweet\_id" 属性表示原始帖子，"edit\_tweet\_ids" 属性是一个数组，包含与其编辑历史关联的所有 ID。若帖子未被编辑，此数组将仅包含一个 ID。

```
"edit_history": {
    "initial_tweet_id": "1283764123",
    "edit_tweet_ids": ["1283764123"]
  }
```

- **edit\_controls** - 提供属性，用于指示 30 分钟编辑窗口的结束时间以及剩余可编辑的次数。

```
"edit_controls": {  
     "editable_until_ms": 1660155761384,
     "edits_remaining": 3   
  }
```

- **editable** - 指示该帖子在创建时是否可编辑。

"editable": true

大多数帖子都符合条件，但以下类型的帖子不符合：

- 帖子已投放推广
- 帖子包含投票
- 帖子为非自我串回复
- 帖子为转推（注意：引用推文可编辑）
- 帖子为 Nullcast
- 社区帖文
- Super Follows 帖子
- 协作贴文

**未编辑帖子的示例属性**

下面的 JSON 展示了在“编辑帖子”功能上线后发布的帖子所包含的编辑元数据。本示例展示的是没有编辑历史的帖子。

请注意，"edit\_tweet\_ids" 数组仅包含一个 ID。

```
{
  "created_at": "Wed Aug 16 18:29:02 +0000 2022",
  "id": 1557433858676740098,
  "id_str": "1557433858676740098",
  "text": "我在想我会不会用到编辑按钮"
  "edit_history": {
    "initial_tweet_id": "1557433858676740098",
    "edit_tweet_ids": ["1557433858676740098"]
  },
  "edit_controls": {
    "editable_until_ms": 1660155761384,
    "edits_remaining": 5
  },
  "editable": true
}
```

**已编辑的帖子示例属性**

下面的 JSON 展示了在“编辑帖子”功能上线后发布的帖子所包含的编辑元数据。此示例对应一条仅被编辑过一次的帖子。

请注意，"edit\_tweet\_ids" 数组包含两个 ID：一个对应原始帖子，另一个对应编辑后的更新版本。

```
{
  "created_at": "Wed Aug 16 18:35:42 +0000 2022",
  "id": 1557445923210514432,
  "id_str": "1557445923210514432",
  "text": "不知道我是否会用上编辑按钮",
  "edit_history": {
    "initial_tweet_id": "1557433858676740098",
    "edit_tweet_ids": ["1557433858676740098", "1557445923210514432"]
  },
  "edit_controls": {
    "editable_until_ms": 1660155761384,
    "edits_remaining": 4
  },
  "editable": true
}
```

**合规支持**

[Compliance Firehose](/zh/x-api/enterprise-gnip-2.0/fundamentals/firehouse) 和 v2 的 [批量合规端点](/zh/x-api/compliance/batch-compliance/introduction) 均已更新，现支持编辑帖子：

已在 Compliance Firehose 中新增一种事件类型 "tweet\_edit"。

```
{
  "tweet_edit": {
    "id": <tweetId>,
    "initial_tweet_id": <tweetId>,
    "edit_tweet_ids": [<tweetId1>, <tweetId2>, <tweetId3> ...],
    "timestamp_ms": "<timestampMsStr>"
  }
}
```