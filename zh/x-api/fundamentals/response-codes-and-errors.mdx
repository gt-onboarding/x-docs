---
title: 响应码与错误
sidebarTitle: 响应码
---

import { Button } from '/snippets/zh/button.mdx';

X API 提供以下响应和错误代码，帮助你在当下理解并进行调试。请参考下方的调试指南和错误索引以获取更多上下文。

成功响应以 200 系列 HTTP 状态码表示，并返回基于 JSON 的有效负载，其中包含所请求、创建、修改或删除的对象，以及服务器对你请求的解析结果。

错误响应会返回非 200 系列的 HTTP 状态码。不同的错误代码表示不同的错误原因。X API 将尽量为每个请求返回恰当的 [HTTP 状态码](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

<div id="x-api-v2-http-status-codes">
  ## X API v2 HTTP 状态码
</div>

| Code | Text | Description | Troubleshooting tips |
| :--- | :--- | :---------- | :------------------- |
| 200 | OK | 请求成功！ | |
| 400 | Bad Request	| 请求无效或无法处理。随附的错误信息会进一步说明。缺少身份验证或包含无效查询参数的请求视为无效，将返回此响应。 | 仔细检查你的 JSON 查询格式。例如，如果规则中包含用于精确匹配或其他运算符的双引号字符，可能需要使用反斜杠进行转义，以将其与 JSON 结构区分开。 |
| 401 | Unauthorized | 验证请求时出现问题。可能由于缺失或不正确的身份验证凭据。在其他未定义情况下也可能返回此状态。 | 检查你是否使用了正确的[身份验证方法](https://docs.x.com/zh/resources/fundamentals/authentication/overview)以及凭据是否正确。 |
| 403 | Forbidden | 请求已理解，但被拒绝或不允许访问。随附的错误信息将解释原因。 | 检查你的开发者账户是否包含你要使用的端点的访问权限。你可能还需要将 App 加入允许名单（例如 Engagement API 或 X 广告 API）或申请开通访问。 |
| 404 | Not Found | 请求的 URI 无效，或请求的资源（如用户）不存在。 | 检查你是否使用了有效的参数，以及与你正在使用的端点匹配的正确 URI。 |
| 409 | Connection Exception | 当尝试连接到没有规则的过滤流时返回。 | 检查你要连接的流上是否已创建至少一条规则。过滤流只会返回匹配活跃规则的帖子。若没有规则，流将不会返回任何帖子。 |
| 429 | Too Many Requests | 当因 App 的[速率限制](/zh/resources/fundamentals/rate-limits)或[帖子上限](/zh/x-api/fundamentals/post-cap)已耗尽而无法处理请求时返回。参见[速率限制](/zh/resources/fundamentals/rate-limits)。 | 检查你所用端点在时间窗口内允许的请求次数。等待时间窗口重置。错开请求以避免触发速率限制，或升级到下一档数据计划。 |
| 500 | Internal Server Error | 出现故障。通常是临时错误，例如高负载场景或某个端点暂时出现问题。 | 查看 X API 的[状态页面](/zh/status)或[开发者社区论坛](https://devcommunity.x.com/)，了解是否有他人遇到类似问题，或稍后重试。 |
| 501 | Unimplemented | X API 不支持此端点，无法完成请求。 |  |
| 503 | Service Unavailable | X 服务器正在运行，但请求过载。请稍后重试。 | 查看 X API 的[状态页面](/zh/status)或[开发者社区论坛](https://devcommunity.x.com/)，了解是否有他人遇到类似问题，或稍后重试。 |

当请求发生错误时，响应正文会返回有关错误的详细信息，以帮助诊断问题。type 字段（一个 URI）指示问题的性质，其它字段提供更多细节。在这些响应正文中将始终返回 type、title 和 detail 字段（见下表）。其他字段（如下例所示）将根据错误类型而有所不同。

```json
{
  "client_id": "101010101",
  "required_enrollment": "Standard Basic",
  "registration_url": "https://developer.twitter.com/en/account",
  "title": "Client Forbidden",
  "detail": "This request must be made using an approved developer account that is enrolled in the requested endpoint. Learn more by visiting our documentation.",
  "reason": "client-not-enrolled",
  "type": "https://api.x.com/2/problems/client-forbidden"
}
```

<div id="partial-errors">
  ## 部分错误
</div>

在某些情况下，即使响应返回了 200 状态码，您仍可能看到上文所述的错误信息。在这些情况下，端点会返回其能够提供的数据，同时附上关于无法返回内容的详细错误。

例如，[Posts lookup endpoint](/zh/x-api/posts/lookup/introduction) 允许一个 X [developer App](/zh/resources/fundamentals/developer-apps#overview) 请求多个 ID。如果其中部分帖子可用，但有一条已被删除，则可用的帖子会在响应的 data 字段中返回。payload 中还会包含一个额外的 errors 字段，用于指明哪些请求的帖子无法返回。为便于排查问题，其格式与完整请求错误保持一致。

<div id="error-information">
  ### 错误信息
</div>

每类问题类型都表明所遇问题的性质。你可能会遇到的问题完整列表也可在我们的 [API 规范](https://api.x.com/2/openapi.json) 中找到。

X API 会尽量为每个请求返回适当的 [HTTP 状态码](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

| 标题 | 类型 | 描述 |
| :--- | :--- | :--- |
| 通用问题 | `about:blank` | 通用问题，除 HTTP 状态码提供的信息外没有其他附加信息。 |
| 无效请求问题 | `https://api.X.com/2/problems/invalid-request` | 表示该请求无效的问题。如果你的请求包含 POST 正文，请确保内容为有效的 JSON，并与 [OpenAPI 规范](https://api.x.com/2/openapi.json) 一致。 |
| 资源未找到问题 | `https://api.X.com/2/problems/resource-not-found` | 表示指定的帖子、用户等不存在的问题。 |
| 资源未授权问题 | `https://api.X.com/2/problems/not-authorized-for-resource` | 表示你无权查看特定帖子、用户等的问题。 |
| 客户端被禁止问题 | `https://api.X.com/2/problems/client-forbidden` | 表示你的客户端被禁止发出此请求的问题。 |
| 不允许的资源问题 | `https://api.X.com/2/problems/disallowed-resource` | 表示所请求的资源违反本 API 原则的问题。 |
| 不支持的身份验证问题 | `https://api.X.com/2/problems/unsupported-authentication` | 表示所用的身份验证方式不受支持的问题。 |
| 用量上限问题 | `https://api.X.com/2/problems/usage-capped` | 表示已超出用量上限的问题。 |
| 连接异常问题 | `https://api.X.com/2/problems/streaming-connection` | 表示连接出现问题。 |
| 客户端断开连接问题 | `https://api.X.com/2/problems/client-disconnected` | 你的客户端已断开。 |
| 运营性断开问题 | `https://api.X.com/2/problems/operational-disconnect` | 因运营原因已断开连接。 |
| 规则数量上限问题 | `https://api.X.com/2/problems/rule-cap` | 你已超出规则的最大数量。 |
| 规则长度问题 | `https://api.X.com/2/problems/rule-length` | 基于你的访问级别，你的查询或规则已超出允许的最大字符数。参见 [访问级别](/zh/x-api/getting-started/about-x-api#x-api-access-levels-and-versions)。 |
| 无效规则问题 | `https://api.X.com/2/problems/invalid-rules` | 你提交的规则无效。 |
| 重复规则问题 | `https://api.X.com/2/problems/duplicate-rules` | 你提交的规则重复。 |

<div id="troubleshooting-tips">
  ## 疑难解答提示
</div>

<Accordion title="调试代码">
  在构建应用程序时，偶尔出现错误或异常问题是正常的。以下是一些调试代码的建议：

  先将问题拆分为更小的部分，以定位问题所在。例如，如果你正在集成 REST 或流式端点，问题可能出在以下任一方面：

  - 端点需要正确的[身份验证](/zh/resources/fundamentals/authentication/overview)。
  - 端点需要有效的参数和请求头。任何过滤规则都应使用正确的运算符和规范的[语法](/zh/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#building-rules-and-queries)构建。
  - 端点的 URI 必须正确；对于 REST 端点，还必须使用正确的 HTTP 方法。
  - 你尝试访问的数据或资源对你不可用（例如，私有数据仅对已通过身份验证的用户开放）。
  - 你当前的数据套餐仅授予对特定端点的访问权限，并受特定速率限制。请在[开发者门户](https://developer.x.com/en/portal/products)查看详情。
  - 你的代码使用了第三方库来对接该端点。
  - 你的代码需要能够成功解析端点的响应。

  阅读随附的错误消息，这通常能清楚指示问题所在。请参考[错误与响应代码部分](#x-api-http-status-codes)中的表格，获取针对各错误代码的排障建议。

  对于 REST 端点，你可以使用 [Postman](https://www.postman.com/) 或 [Insomnia](https://insomnia.rest/) 等 REST 客户端验证上述步骤 (1) 到 (5)（参见我们的[“Postman 入门”](/zh/tutorials/postman-getting-started)指南）。如果使用 REST 客户端的请求返回 200 成功状态码，则可推断问题出在你的代码或所用库上，而非端点请求本身。

  对于流式端点，你可以使用 cURL（一个使用 URL 语法发送或接收请求的命令行工具）来检查问题是出在对端点的请求（上述步骤 (1) 到 (5)），还是出在你的代码本身（上述步骤 (6) 到 (7)）。
</Accordion>

<Accordion title="身份验证问题">
  - 检查你是否使用了该端点要求的正确[身份验证方法](/zh/resources/fundamentals/authentication/overview)。你可以在该端点的 API 参考页面确认。
  - 检查你的身份验证凭据是否正确。你可以在开发者仪表板的 [Apps 部分](https://developer.x.com/en/portal/projects-and-apps)（“Details”下）查看或重新生成 App 密钥和令牌。
  - 检查你是否已正确[为 OAuth 1.0a 请求授权](/zh/resources/fundamentals/authentication/oauth-1-0a/authorizing-a-request)，并在请求中提供了 `oauth_nonce`、`oauth_signature` 和 `oauth_timestamp`。
  - 如问题仍存在，建议使用 OAuth 库、[Postman](https://www.postman.com/) 或 [Insomnia](https://insomnia.rest/) 等 REST 客户端，或使用 [xurl](https://github.com/xdevplatform/xurl)。

  查看我们的[身份验证指南](/zh/resources/fundamentals/authentication/overview)以了解上述内容的更多信息。
</Accordion>

<Accordion title="速率限制与帖子上限问题">
  当你触发某个端点的速率限制，或触及帖子上限时，可能会返回 429 错误。

  如果返回的是特定的“请求过多”错误，表示你触发了该端点的速率限制。换言之，你在指定时间段内超出了该端点允许的最大请求数。

  请注意，速率限制分为每个应用和每个用户两个层级。

  - **X 应用层级**表示在使用 OAuth 2.0 App-Only 时允许的请求数量，其速率限制在整个应用范围内全局设定。例如，如果某方法在每个速率限制窗口允许 15 次请求，那么它允许你代表你的 X 应用在每个窗口发起 15 次请求。此限制与用户层级的限制完全独立。详见指南：[OAuth 2.0 App-Only](/zh/resources/fundamentals/authentication/oauth-2-0/application-only)。
  - **用户上下文层级**表示在使用 OAuth 1.0a User Context 或 OAuth 2.0 Authorization Code with PKCE 时，每个用户 Access Token 可发起的请求数。例如，如果某方法在每个速率限制窗口允许 15 次请求，那么它允许每个窗口、每个用户 Access Token 发起 15 次请求。阅读我们的指南，了解如何通过 [OAuth 1.0a](/zh/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) 和 [OAuth 2.0](/zh/resources/fundamentals/authentication/oauth-2-0/user-access-token) 获取用户的 Access Token。

  请先检查你所使用端点的速率限制。你可以在该端点的 API 参考页面以及新的开发者门户仪表板中找到相关信息。

  查阅我们的文档以获取更多关于速率限制的信息，包括如何使用 HTTP 头来跟踪你的应用在特定速率限制窗口中的用量、如何从 429 速率限制错误中恢复，以及如何避免被施加速率限制的建议：

  - [v2 端点的速率限制](/zh/x-api/fundamentals/rate-limits)

  如果你收到特定的“Usage cap exceeded: Monthly product cap”错误，这意味着你触及了与你的访问级别对应的帖子上限。我们的文档页面对这些[帖子上限](/zh/x-api/fundamentals/post-cap)有详细说明。
</Accordion>

<Accordion title="缺失帖子问题">
  如果你预期某条帖子会被返回，但端点没有返回，请按以下步骤排查。

  - 检查你的规则，确保你使用了正确的[运算符](/zh/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#enterprise-operators)和[语法](/zh/x-api/enterprise-gnip-2.0/fundamentals/rules-filtering#building-rules-and-queries)。将规则拆分为更小的子句，确保语法正确。
  - 如果发布帖子的账号在创建该帖子时处于[受保护](https://help.twitter.com/en/safety-and-security/public-and-protected-tweets)状态，即使在请求端点时该账号已公开，该帖子也不会被返回。你通常可以通过[X 高级搜索](https://x.com/search-advanced)进行检查：如果使用 X 高级搜索功能未能检索到该帖子，应当认为端点也不会返回它。

  以下步骤仅适用于流式端点：

  - 发帖时你是否已连接到流？请记住，帖子对象中的时间戳为 UTC 时间。如果在发帖时连接中断，请查看可用于回填遗漏数据的[恢复与冗余功能](/zh/x-api/posts/filtered-stream/integrate/recovery-and-redundancy-features#recovery-and-redundancy)。
  - 发帖时你的规则是否已生效？请记住，帖子对象中的时间戳为 UTC 时间。
</Accordion>

<Accordion title="缓冲区已满导致的断开问题">
  当你的流无法跟上我们投递数据的速度，且你的 App 未能足够快地从流中消费数据时，可能会遇到以下错误之一：

  ```
  This stream has been disconnected because your client was unable to keep up with us.
  ```

  ```
  This stream has been disconnected for operational reasons.
  ```

  我们会在一段时间内容忍延迟投递，并在我们端为每个流提供临时阶段性缓冲；但如果你仍未追上，我们会发起断开，以便你在当前时间点重新连接。请注意，这可能会导致数据丢失（即在缓冲区已满而断开时仍滞留在缓冲区中的数据）。

  这些情况可能出现在数据量出现大幅峰值时。一般而言，我们建议采用与处理流程分离的缓冲（消费）流程，以便快速消费数据。

  如果你是使用 v1.1 端点的企业客户，可在我们的[连接](/zh/x-api/enterprise-gnip-2.0/powertrack-api#disconnections-explained)相关文章，以及关于消费流式数据的[此处](https://developer.x.com/en/docs/tutorials/consuming-streaming-data)和[此处](/zh/x-api/enterprise-gnip-2.0/powertrack-api#planning-for-high-volume-social-data-events)了解如何优化你的 App 以防止此类断开。

  有多种工具可用于在断开后检索错过的帖子，包括下列工具。请注意，以下工具仅适用于企业级访问的 v1.1 端点。

  - [**冗余连接**](/zh/x-api/enterprise-gnip-2.0/powertrack-api#recovery-and-redundancy-features) - 通过多个连接，从多台服务器消费流，以在某一路断开时防止数据遗漏。
  - [**重放**](/zh/x-api/enterprise-gnip-2.0/powertrack-api#recovery-and-redundancy-features) - 使用单独的流恢复最近 5 天内的数据。
  - [**回填**](/zh/x-api/enterprise-gnip-2.0/powertrack-api#recovery-and-redundancy-features) - 在 5 分钟内重新连接，并从中断处继续。
  - **Historical PowerTrack** - 从整个 X 档案中恢复数据。
</Accordion>

<div id="get-help">
  ## 获取帮助
</div>

X 社区论坛可用于就 X 开发者平台提出技术问题。这里是一个讨论型论坛，你可以找到其他开发者的提问，以及与使用 X API 相关的各类技术信息。

我们鼓励你在论坛中回答问题并参与讨论。X 员工也会在此提供支持。

<Button href="https://devcommunity.x.com/">
  X 社区论坛
</Button>

<div id="before-you-post-a-question">
  ### 在发布问题之前
</div>

- 在 X 开发者文档中搜索与您的问题相关的信息
- 在社区论坛中查找其他开发者提出的类似问题
- 阅读社区论坛指南

<div id="when-you-post-a-question-make-sure-to-include-the-following-information">
  ### 发布问题时，请务必包含以下信息
</div>

- 问题描述
- 发起的 API 调用（如可行，请包含请求头）
- 返回的 X 响应（包括任何错误信息）
- 你预期应收到的结果
- 为排查问题已采取的步骤列表
- 复现该问题所需的步骤列表
- 如相关，问题发生的时间范围
- 如相关，App ID、Post ID 等
- 相关的代码示例或截图（如有）

请每个帖子仅包含一个主题/问题。

如果你有功能请求或反馈，请通过 [X Developer Platform Feedback Form](https://t.co/devfeedback) 提交。

对于与政策相关的问题（例如应用被暂停），请联系 [Policy support](https://help.twitter.com/forms/platform)。

对于与 X 相关的问题（例如登录和账户支持），请使用 [X Help Desk](https://help.twitter.com/en/contact-us)。