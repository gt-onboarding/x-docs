---
title: 扩展
---

借助扩展，开发者可以将负载中按 ID 引用的对象展开为完整对象。例如，[帖子查询](/zh/x-api/posts/lookup/introduction) 的负载中返回的 `referenced_tweets.id` 和 `author_id` 字段都可以展开为完整对象。如果您想请求与发布该帖子的用户、或该帖子中包含的媒体、投票、地点相关的字段，需要在请求中传入相应的扩展查询参数，才能在响应中获得这些数据。目前，返回 Posts、Users、Lists、Spaces 和 Direct Message 事件对象的 v2 端点均支持扩展（见下方示例）。

当您在请求中包含某个扩展时，我们会在同一响应中返回该扩展对象的默认字段。这样无需额外请求即可在同一响应中获得更多数据。若要请求与已展开对象相关的其他[字段](/zh/x-api/fundamentals/fields)，请在请求中添加与该对象对应的字段参数，并提供一个以逗号分隔的字段列表，表示希望在响应中返回的字段。请注意，返回的字段顺序不一定与查询中请求的顺序一致。

下面的 Post 负载包含可展开的关联对象的引用 ID，包括发帖者的 `author_id`、一个“被引用”Post 的 `id`，以及媒体附件的 `media_key`。

```json
{
    "data": {
        "attachments": {
            "media_keys": ["16_1211797899316740096"]
        },
        "author_id": "2244994945",
        "id": "1212092628029698048",
        "referenced_tweets": [
            {
                "type": "replied_to",
                "id": "1212092627178287104"
            }
        ],
        "text": "We believe the best future version of our API will come from building it with YOU. Here’s to another great year with everyone who builds on the Twitter platform. We can’t wait to continue working with you in the new year. https://t.co/yvxdK6aOo2"
    }
}
```

<div id="available-expansions-for-post-payloads">
  ### 可用于帖子有效负载的扩展
</div>

| 扩展                          | 描述                                                                                |
|:--------------------------------|:------------------------------------------------------------------------------------|
| `author_id`                    | 返回表示该帖作者的用户对象                                                           |
| `referenced_tweets.id`         | 返回此帖所引用的帖子对象（转发、引用或回复）                                          |
| `edit_history_tweet_ids`       | 返回属于该帖编辑历史的帖子对象                                                       |
| `in_reply_to_user_id`          | 返回表示该请求帖子所回复之帖作者的用户对象                                            |
| `attachments.media_keys`       | 返回表示帖内包含的图像、视频、GIF 的媒体对象                                          |
| `attachments.poll_ids`         | 返回包含帖内投票元数据的投票对象                                                     |
| `geo.place_id`                 | 返回包含帖内地点标记元数据的地点对象                                                 |
| `entities.mentions.username`   | 返回帖中被提及用户的用户对象                                                         |
| `referenced_tweets.id.author_id` | 返回被引用帖作者的用户对象                                                          |

<div id="available-expansion-for-user-payloads">
  ### 可用于用户负载的可扩展字段
</div>

| 扩展字段            | 说明                                                         |
|:--------------------|:-----------------------------------------------------------|
| `pinned_tweet_id`  | 返回一个 Post 对象，表示置顶在用户个人主页顶部的 Post |

<div id="available-expansions-for-direct-message-event-payloads">
  ### 可用于私信事件负载的扩展项
</div>

| 扩展                     | 描述                                                                       |
|:--------------------------|:---------------------------------------------------------------------------|
| `attachments.media_keys` | 返回附加到私信的 Media 对象                                                |
| `referenced_tweets.id`   | 返回在私信中被引用的 Post 对象                                             |
| `sender_id`              | 返回表示私信作者及其邀请参与者加入会话的用户对象                           |
| `participant_ids`        | 返回表示加入或离开会话的参与者的用户对象                                   |

<div id="available-expansions-for-spaces-payloads">
  ### 可用于 Spaces 负载的扩展项
</div>

| 扩展              | 说明                                                         |
|:--------------------|:-----------------------------------------------------------|
| `invited_user_ids` | 返回表示被邀请账号的 User 对象                               |
| `speaker_ids`      | 返回表示在 Space 中发言账号的 User 对象                      |
| `creator_id`       | 返回表示创建该 Space 的账号的 User 对象                      |
| `host_ids`         | 返回表示被设为主持人的账号的 User 对象                       |
| `topics_ids`       | 返回由创建者设置的主题描述                                   |

<div id="available-expansion-for-lists-payloads">
  ### 列表载荷可用扩展
</div>

| 扩展   | 描述                                                    |
|:-------------|:----------------------------------------------------------------|
| `owner_id`  | 返回一个 User 对象，表示创建并维护该列表的账户 |

<div id="expanding-the-media-object">
  ## 展开 Media 对象
</div>

在以下请求中，我们请求扩展 `geo.place_id`，以便与默认的帖子字段一并返回：

**示例请求**

```
{`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
```

**示例响应**

```
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}

```

<div id="expanding-the-poll-object">
  ## 扩展 Poll 对象
</div>

在以下请求中，我们请求包含 `attachments.poll_ids` 扩展，以便与默认帖子字段一并返回：

**示例请求**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/1199786642791452673?expansions=attachments.poll_ids' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**示例响应**

```
{`{
  "data": {
      "attachments": {
          "poll_ids": ["1199786642468413448"]
      },
      "id": "1199786642791452673",
      "text": "C#"
  },
  "includes": {
      "polls": [
          {
              "id": "1199786642468413448",
              "options": [
                  {
                      "position": 1,
                      "label": "“C Sharp”",
                      "votes": 795
                  },
                  {
                      "position": 2,
                      "label": "“C Hashtag”",
                      "votes": 156
                  }
              ]
          }
      ]
  }
}`}
```

<div id="expanding-the-place-object">
  ## 扩展 Place 对象
</div>

在以下请求中，我们将请求 `geo.place_id` 扩展，以便与默认的帖子字段一并返回：

**示例请求**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**示例响应**

```s
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}
```