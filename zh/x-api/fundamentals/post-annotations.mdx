---
title: "帖子标注"
---

<div id="overview">
  ## 概览
</div>

在所有返回 Post 对象的 v2 端点中，Post 对象都新增了注解。Post 注解用于理解该 Post 的上下文信息。虽然我们会审阅 100% 的 Post，但受 Post 文本内容所限，只有一部分会被添加注解。

1. **实体注解（NER）：** 实体包括人物、地点、产品和组织，位于 `entity` 载荷部分。它们基于 Post 文本中的明确提及（命名实体识别）以程序方式自动分配。

2. **上下文注解：** 通过分析 Post 文本得出，上下文注解包含“域”和“实体”的配对，有助于发现此前难以呈现的主题相关 Post。我们目前使用 80+ 个域对 Post 进行分类。可用的上下文注解实体的 CSV 文件可在我们的 [GitHub 仓库](https://github.com/xdevplatform/twitter-context-annotations)中获取。

<div id="post-annotation-types">
  ## 帖子标注类型
</div>

<div id="entities">
  ### 实体
</div>

实体标注是在 `entities` 字段中以程序方式定义的实体，并作为标注体现在载荷中。每条标注都有置信度分数，并指示这些实体在帖子文本中的位置（使用 `start` 和 `end` 字段）。

实体标注类型包括：

- **Person（人物）** - 示例：Barack Obama、Daniel、George W. Bush
- **Place（地点）** - 示例：Detroit、Cali、San Francisco
- **Product（产品）** - 示例：Mountain Dew、Mozilla Firefox
- **Organization（组织）** - 示例：Chicago White Sox、IBM
- **Other（其他）** - 示例：Diabetes、Super Bowl 50

<div id="context">
  ### 上下文
</div>

_最后更新：2022 年 6 月_

上下文注释通过负载中的 `context_annotations` 字段提供。它们基于对帖子文本中的关键词、话题标签、账号等的语义分析推断而来，并生成领域和/或实体标签。目前我们使用 80 多个领域，如下表所示。

| 领域类别                                     | 领域代码                                  |
| :------------------------------------------- | :--------------------------------------- |
| 3: 电视节目                                  | 46: 品牌类别                              |
| 4: 电视剧集                                  | 47: 品牌                                  |
| 6: 体育赛事                                  | 48: 产品                                  |
| 10: 人物                                     | 54: 音乐人                                 |
| 11: 体育                                     | 55: 音乐流派                               |
| 12: 运动队                                   | 56: 演员                                  |
| 13: 地点                                     | 58: 娱乐人物                               |
| 22: 电视类型                                 | 60: 运动员                                 |
| 23: 电视频道                                 | 65: 兴趣与爱好垂直                         |
| 26: 体育联盟                                 | 66: 兴趣与爱好类别                         |
| 27: 美式橄榄球比赛                           | 67: 兴趣与爱好                             |
| 28: NFL 橄榄球比赛                           | 68: 冰球比赛                               |
| 29: 活动                                     | 71: 电子游戏                               |
| 31: 社区                                     | 78: 电子游戏发行商                         |
| 35: 政治人物                                 | 79: 电子游戏硬件                           |
| 38: 政治竞选                                 | 83: 板球比赛                               |
| 39: 篮球比赛                                 | 84: 图书                                  |
| 40: 体育系列                                 | 85: 图书类型                               |
| 43: 足球比赛                                 | 86: 电影                                  |
| 44: 棒球比赛                                 | 87: 电影类型                               |
| 45: 品牌垂直                                 | 88: 政治机构                               |
| 46: 品牌类别                                 | 89: 音乐专辑                               |
| 47: 品牌                                     | 90: 电台                                  |
| 48: 产品                                     | 91: 播客                                  |
| 54: 音乐人                                   | 92: 体育人物                               |
| 55: 音乐流派                                 | 93: 教练                                  |
| 56: 演员                                     | 94: 记者                                  |
| 58: 娱乐人物                                 | 95: 电视频道 \[实体服务]                    |
| 60: 运动员                                   | 109: 常见趋势                              |
| 65: 兴趣与爱好垂直                           | 110: 病毒式账号                            |
| 66: 兴趣与爱好类别                           | 114: 音乐会                                |
| 67: 兴趣与爱好                               | 115: 电子游戏大会                          |
| 68: 冰球比赛                                 | 116: 电子游戏锦标赛                        |
| 71: 电子游戏                                 | 117: 电影节                                |
| 78: 电子游戏发行商                           | 118: 颁奖礼                                |
| 79: 电子游戏硬件                             | 119: 节日/假日                             |
| 83: 板球比赛                                 | 120: 数字创作者                            |
| 84: 图书                                     | 122: 虚构角色                              |
| 85: 图书类型                                 | 130: 多媒体系列                            |
| 86: 电影                                     | 131: 统一 Twitter 分类体系                 |
| 87: 电影类型                                 | 136: 游戏人物                              |
| 88: 政治机构                                 | 137: 电子竞技战队                          |
| 89: 音乐专辑                                 | 138: 电子竞技选手                          |
| 90: 电台                                     | 139: 粉丝社区                              |
| 91: 播客                                     | 149: 电子竞技联盟                          |
| 92: 体育人物                                 | 152: 美食                                  |
| 93: 教练                                     | 155: 天气                                  |
| 94: 记者                                     | 156: 城市                                  |
| 95: 电视频道 \[实体服务]                      | 157: 学院与大学                            |
| 109: 常见趋势                                | 158: 兴趣点                                 |
| 110: 病毒式账号                              | 159: 州/省                                 |
| 114: 音乐会                                  | 160: 国家                                  |
| 115: 电子游戏大会                            | 162: 锻炼与健身                            |
| 116: 电子游戏锦标赛                          | 163: 旅行                                  |
| 117: 电影节                                  | 164: 学科领域                              |
| 118: 颁奖礼                                  | 165: 技术                                  |
| 119: 节日/假日                               | 166: 股票                                  |
| 120: 数字创作者                              | 167: 动物                                  |
| 122: 虚构角色                                | 171: 本地新闻                              |
| 130: 多媒体系列                              | 172: 全球电视节目                          |
| 131: 统一 Twitter 分类体系                   | 173: Google 产品分类体系                   |
| 136: 游戏人物                                | 174: 数字资产与加密                        |
| 137: 电子竞技战队                            | 175: 紧急事件                              |
| 138: 电子竞技选手                            |                                         |

_注意：_ 域 131（Unified Twitter Taxonomy）指的是 X 的用户侧兴趣分类体系。该分类体系用于支持平台上的功能，例如 [Topics](https://blog.x.com/en_us/topics/product/2020/topics-behind-the-tweets)。

<div id="requesting-annotations">
  ## 请求注解
</div>

<div id="sample-request">
  ### 示例请求
</div>

```bash
curl --location --request GET 'https://api.x.com/2/tweets/1212092628029698048?tweet.fields=context_annotations,entities' --header 'Authorization: Bearer $BEARER_TOKEN'
```

<div id="sample-response">
  ### 示例响应
</div>

```
{
    "data": {
        "context_annotations": [
            {
                "domain": {
                    "id": "119",
                    "name": "Holiday",
                    "description": "像圣诞节或万圣节这样的节日"
                },
                "entity": {
                    "id": "1186637514896920576",
                    "name": "新年前夜"
                }
            },
            {
                "domain": {
                    "id": "119",
                    "name": "Holiday",
                    "description": "像圣诞节或万圣节这样的节日"
                },
                "entity": {
                    "id": "1206982436287963136",
                    "name": "新年快乐：如今全球各地都已迎来 2020！",
                    "description": "当世界各地的人们迈入新年时，来看看烟花和其他庆祝活动。\n照片来源：@GettyImages"
                }
            },
            {
                "domain": {
                    "id": "45",
                    "name": "Brand Vertical",
                    "description": "用于描述品牌所属行业的顶级实体"
                }
            },
            {
                "domain": {
                    "id": "46",
                    "name": "Brand Category",
                    "description": "品牌垂直领域下进一步细分品牌范围的类别"
                },
                "entity": {
                    "id": "781974596752842752",
                    "name": "服务"
                }
            },
            {
                "domain": {
                    "id": "47",
                    "name": "Brand",
                    "description": "品牌与公司"
                },
                "entity": {
                    "id": "10045225402",
                    "name": "Twitter"
                }
            }
        ],
        "entities": {
            "annotations": [
                {
                    "start": 144,
                    "end": 150,
                    "probability": 0.626,
                    "type": "Product",
                    "normalized_text": "Twitter"
                }
            ],
            "urls": [
                {
                    "start": 222,
                    "end": 245,
                    "url": "https://t.co/yvxdK6aOo2",
                    "expanded_url": "https://x.com/LovesNandos/status/1211797914437259264/photo/1",
                    "display_url": "pic.x.com/yvxdK6aOo2"
                }
            ]
        },
        "id": "1212092628029698048",
        "text": "我们相信，构建最优秀、面向未来的 API，离不开与你们的共同打造。向所有在 Twitter 平台上构建产品的开发者致敬，愿我们再度携手共度精彩一年。我们迫不及待想在新的一年里继续与您合作。https://t.co/yvxdK6aOo2"
    }
}
```

<div id="sample-app">
  ### 示例应用
</div>

访问 [Glitch 上的 Post Entity Extractor](https://tweet-entity-extractor.glitch.me/)，可轻松发现帖子中的上下文注解，并了解该功能的工作原理。

<div id="frequently-asked-questions">
  ## 常见问题解答
</div>

<div id="context-annotations">
  ### 上下文标注
</div>

以下问题专门针对“帖子标注”中的“上下文标注”元素。更多详情请参见[概览](/zh/x-api/fundamentals/post-annotations)页面。

<AccordionGroup>
  <Accordion title="How does Twitter context annotations work?">
    Twitter 以语义方式对推文进行分类，这意味着我们会为特定主题整理相关的关键词、话题标签和 @ 账号列表。若某条推文包含我们指定的文本，就会被相应标注。这不同于机器学习方法，后者会专门训练一个模型来对文本（此处指推文）进行分类，并在输出/分类结果中给出概率分数。
  </Accordion>

  <Accordion title="How do I know that your data is complete and trustworthy?">
    Twitter 的注释由领域专家基于多年打磨的研究与质量保证（QA）流程精心策划生成。我们配备了定制化工具，以在保持卓越的准确率与召回率的同时，将数据跟踪尽可能扩展到最大规模。此外，内部团队会定期对我们的数据进行审计，过去数个季度的准确率评分约为 80%。
  </Accordion>

  <Accordion title="How do you ensure precision?">
    我们的团队成员每天对实体进行质量评估（QA），以确保高准确率和高召回率。此外，我们的工作每季度都会由内部团队审计，该团队会人工复核我们所有领域的 10,000 条推文，以计算准确率得分。
  </Accordion>

  <Accordion title="How do you decide what to track?">
    对于某些领域（如体育和电视），我们依靠自动化数据摄取来构建我们的图谱。在新闻领域，我们跟踪由 Twitter Moments 团队发布的新闻事件相关数据。除此之外，团队还采用多种研究方法来识别需要跟踪、且在平台上能引发大量讨论的主题。
  </Accordion>

  <Accordion title="What historical support is available with Tweet Annotations?">
    数据跟踪从某个实体发布的那一刻起开始；因此，我们不会为在开始跟踪该实体之前发布的推文添加标注。举例来说，如果一个新兴品牌/公司被加入到分类体系中，我们不会对在添加该标注之前发布的、关于该品牌的推文进行追溯性标注。
  </Accordion>

  <Accordion title="Is Twitter able to annotate Tweets in non-english languages? If so, which languages and does the coverage of Tweets being annotated change?">
    是的。语言覆盖范围可能因领域和市场而异。英语和日语涵盖了多数头部实体。以下是当前覆盖的语言及其主要市场：

    1. 英语（美国、英国）
    2. 日语（日本）
    3. 葡萄牙语（巴西）
    4. 西班牙语（阿根廷、墨西哥、西班牙）
    5. 印地语（印度）
    6. 阿拉伯语（沙特阿拉伯）
    7. 土耳其语（土耳其）
    8. 印度尼西亚语（印度尼西亚）
    9. 俄语（俄罗斯）
    10. 法语（法国）

    即将支持（约 2021 年下半年）：

    1. 德语（德国）
    2. 泰米尔语（印度）

    下面是按带标注推文覆盖率从高到低排序的前 15 个国家：

    | 排名 | 国家代码 | 国家 | 标注推文占比 |
    | :--- | :--- | :--- | :--- |
    | 1   | IN  | 印度 | 41% |
    | 2   | VN  | 越南 | 36% |
    | 3   | GB  | 英国 | 36% |
    | 4   | EC  | 厄瓜多尔 | 35% |
    | 5   | PE  | 秘鲁 | 33% |
    | 6   | US  | 美国 | 32% |
    | 7   | CA  | 加拿大 | 32% |
    | 8   | AU  | 澳大利亚 | 31% |
    | 9   | JP  | 日本 | 31% |
    | 10  | PH  | 菲律宾 | 30% |
    | 11  | SG  | 新加坡 | 30% |
    | 12  | MY  | 马来西亚 | 30% |
    | 13  | MX  | 墨西哥 | 30% |
    | 14  | GB  | 英国 | 29% |
    | 15  | NG  | 尼日利亚 | 29% |
  </Accordion>

  <Accordion title="What underlying 'semantics' does Twitter rely on to annotate a Tweet?">
    推文注释由以下语义要素组成，用于为推文添加标注：

    - 账号——可对来自特定账号的推文，或提及该账号的推文进行标注
    - 话题标签（Hashtags）
    - 关键词/短语

    对于熟悉 PowerTrack 等过滤流式 API 的客户而言，注释所采用的语义原则与用于过滤推文流的布尔规则类似。若某条推文满足相应的语义条件，即会被相应标记。
  </Accordion>

  <Accordion title="Why do some Tweets have entities associated with them while others do not?">
    我们的目标是尽可能为更多推文添加注解；但也有多种原因会导致某些推文未被注解：

    - 有些推文语义信息不足，无法按照我们当前的注解规则进行标注
    - 有些推文不具备话题性
    - 推文所涉话题非常短暂，且不在我们的图谱中
    - 我们尚未覆盖该语言/市场
    - 我们已覆盖该语言/市场，但缺少与已追踪话题相关的某个主题或特定术语/账号/话题标签
  </Accordion>

  <Accordion title="When there are multiple domains (for example, [3,30]), does the Entity ID remain the same?">
    一个实体可以归属多个域。域 ID 可能会变化，但实体 ID 保持不变。Donald Glover 既是人物（域 10）、也是演员（域 56）、还是音乐人（域 54），但他的实体 ID 仍为 875072662527029248。
  </Accordion>

  <Accordion title="Do you have an established timeline for show/movie tracking? In other words, how long is a show/movie tracked before/after release?">
    跟踪会在发布前一个月启动。对于如漫威电影这类热门大片，一旦开始发布即将上映的预热信息，我们就可以着手跟踪。
  </Accordion>

  <Accordion title="Do movies have a locale filter similar to the one for TV shows?">
    不，他们不这样做。
  </Accordion>
</AccordionGroup>