---
title: クイックスタート
sidebarTitle: クイックスタート
---

import { Button } from '/snippets/ja/button.mdx';

<div id="getting-started-with-the-spaces-lookup-endpoints">
  ## Spaces ルックアップエンドポイントのはじめ方
</div>

このクイックスタートガイドでは、Postman を使用して、指定したフィールドを含めた最初のリクエストを Spaces ルックアップエンドポイントのいずれかに送る手順を説明します。

各種プログラミング言語のサンプルコードは、[X API v2 sample code GitHub](https://github.com/xdevplatform/Twitter-API-v2-sample-code) リポジトリをご覧ください。

<Note>
  ### 前提条件

  このガイドを完了するには、リクエストを認証するための一連の [keys and tokens](/ja/resources/fundamentals/authentication) が必要です。以下の手順でキーとトークンを生成できます。

  - [開発者アカウントに登録](https://developer.x.com/en/apply-for-access) し、承認を受ける。
  - 開発者ポータルで [Project](/ja/resources/fundamentals/projects) と、関連付けられた [developer App](/ja/resources/fundamentals/developer-apps) を作成する。
  - App の “Keys and tokens” ページに移動して必要なクレデンシャルを生成する。すべてのクレデンシャルは安全な場所に保管すること。
</Note>

<div id="steps-to-build-a-spaces-lookup-request">
  #### Spaces ルックアップリクエストを作成する手順
</div>

_この例では、作成者 ID によるユーザーの Spaces ルックアップエンドポイントへのリクエストを実行しますが、このクイックスタートで得た内容は他のルックアップリクエストにも適用できます。_

**ステップ 1: ツールまたはライブラリを選ぶ**

このエンドポイントにリクエストするためのツール、コード例、ライブラリはいくつかありますが、ここでは手順を簡略化するために Postman を使用します。

X API v2 の Postman コレクションを環境に読み込むには、次のボタンをクリックしてください:

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Add X API v2 to Postman
</Button>

Postman に X API v2 のコレクションを読み込んだら、Spaces フォルダーに移動し、「Lookup Spaces created by one or more users」リクエストを見つけてください。
 

**ステップ 2: リクエストを認証する**

X API に正しくリクエストするには、権限があることを確認する必要があります。これには、このエンドポイントで [OAuth 2.0 App-Only](/ja/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) または [OAuth 2.0 Authorization Code with PKCE](ja/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) のいずれかの方法でリクエストを認証する必要があります。

簡潔さのため、このリクエストでは OAuth 2.0 App-Only を使用しますが、非公開の [メトリクス](/ja/x-api/fundamentals/metrics) や非公開ユーザーの Spaces を取得したい場合は、他の認証方法のいずれかを使用する必要があります。 

OAuth 2.0 App-Only を使用するには、キーとトークン、特に [App Access Token](/ja/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)（App-only Bearer Token とも呼ばれます）を Postman に追加します。Postman の右上で「X API v2」という名前の環境を選択し、「initial value」と「current value」フィールドにキーとトークンを入力します（環境ドロップダウン横の目のアイコンをクリック）。

これらの変数は、正しく設定されていれば、リクエストの authorization タブに自動的に反映されます。
 

**ステップ 3: どのユーザーの Spaces を取得するかを特定して指定する**

リクエスト内で、ライブまたは今後の Spaces を取得したいユーザーを指定する必要があります。この例では、単一のユーザー ID を指定します。

ユーザー ID は、アカウントのプロフィール URL 内で確認できる、アカウントハンドルを表す数値です。たとえば、次のアカウントのユーザー名は XDevelopers です。

https://x.com/XDevelopers

このユーザー名をユーザー ID に変換するには、ユーザールックアップエンドポイントにユーザー名を渡し、ペイロード内の数値のユーザー ID を取得します。@XDevelopers の場合、ユーザー ID は 2244994945 です。

Postman で「Params」タブに移動し、このユーザー ID を id パラメータの「Value」列に入力します。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| id  | 2244994945 |

**ステップ 4: 取得したいフィールドを特定して指定する**

ステップ 3 の後に「Send」ボタンをクリックすると、レスポンスにはデフォルトで返される唯一の [Space オブジェクト](/ja/x-api/fundamentals/data-dictionary#space) フィールドである id が含まれます。

追加のフィールドが必要な場合は、space.fields または expansions パラメータでリクエストに指定します。

この演習では、異なるオブジェクトから 3 つの追加フィールドセットを要求します:

- 主要な Spaces オブジェクトの追加フィールド title
- 指定した creator ID の完全な [ユーザーオブジェクト](/ja/x-api/fundamentals/data-dictionary#user)
- 関連するユーザーオブジェクトの追加フィールド user.created\_at

Postman で「Params」タブに移動し、「Query Params」テーブルに次の key:value ペアを追加します:

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| space.fields | title | creator\_id |
| expansions | creator\_id | includes.users.id, includes.users.name, includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

これで「Send」ボタンの横に次の URL が表示されるはずです:

https://api.x.com/2/spaces/by/creator\_ids?user\_ids=2244994945\&space.fields=creator\_id\&expansions=creator\_id\&user.fields=created\_at

**ステップ5：リクエストを送信し、レスポンスを確認する**

準備が整ったら、「Send」ボタンをクリックすると、次のレスポンスが返されます。

```
{
   "data": [
    {
        "creator_id": "2244994945",
        "id": "1zqKVXPQhvZJB",
        "title": "Hello world 👋",
        "state": "Running"
   },
   "includes": {
       "users": [
           {
               "created_at": "2013-12-14T04:35:55.000Z",
               "name": "Twitter Dev",
               "id": "2244994945",
               "username": "TwitterDev"
           }
       ]
   }
]
}
```