---
title: クイックスタート
sidebarTitle: クイックスタート
---

import { Button } from '/snippets/ja/button.mdx';

<div id="getting-started-with-the-search-spaces-endpoint">
  ## search Spaces エンドポイントの利用を開始する
</div>

このクイックスタートガイドでは、Postman を使用して、指定したフィールドセットを含む search Spaces エンドポイントへの最初のリクエストの送信方法を説明します。

さまざまなプログラミング言語でのサンプルコードをご覧になりたい場合は、[X API v2 sample code GitHub repository](https://github.com/xdevplatform/Twitter-API-v2-sample-code)をご確認ください。

<Note>
  **前提条件**

  このガイドを完了するには、リクエストを認証するための[キーとトークン](/ja/resources/fundamentals/authentication)が必要です。以下の手順に従って、これらのキーとトークンを生成できます。

  - [開発者アカウントに登録](https://developer.x.com/en/apply-for-access)し、承認を受けます。
  - 開発者ポータルで[プロジェクト](/ja/resources/fundamentals/projects)と関連付けられた[Developer App](/ja/resources/fundamentals/developer-apps)を作成します。
  - アプリの「Keys and tokens」ページに移動して、必要な認証情報を生成します。すべての認証情報は安全な場所に保存してください。
</Note>

<div id="steps-to-build-a-search-spaces-request">
  ### Search Spaces リクエストを構築する手順
</div>

**ステップ1：ツールまたはライブラリから始める**

このエンドポイントにリクエストするために使用できるツール、コード例、ライブラリはいくつかありますが、ここでは手順を簡素化するために Postman を使用します。

X API v2 の Postman コレクションを環境に読み込むには、次のボタンをクリックしてください。

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Postman に X API v2 を追加
</Button>

Postman に X API v2 コレクションが読み込まれたら、Spaces フォルダに移動し、"Search Spaces" リクエストを見つけます。
 

**ステップ2：リクエストを認証する**

X API に正しくリクエストするには、権限があることを確認する必要があります。そのため、このエンドポイントでは [OAuth 2.0 App-Only](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only) または [OAuth 2.0 Authorization Code with PKCE](/ja/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) のいずれかの認証方法でリクエストを認証する必要があります。

簡便のため、このリクエストでは OAuth 2.0 App-Only を使用しますが、非公開の [メトリクス](/ja/x-api/fundamentals/metrics) や非公開ユーザーの Spaces を取得したい場合は、他の認証方法のいずれかを使用する必要があります。 

OAuth 2.0 App-Only を利用するには、キーとトークン、特に [App Access Token](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)（App-only Bearer Token とも呼ばれます）を Postman に追加します。これを行うには、Postman の右上で「X API v2」という名前の環境を選択し、「initial value」と「current value」フィールドにキーとトークンを入力します（環境ドロップダウン横の目のアイコンをクリック）。

正しく設定できていれば、これらの変数はリクエストの Authorization タブに自動的に反映されます。
 

**ステップ3：検索クエリを作成する**

このエンドポイントは、検索クエリとしてテキストを受け付けます。他の検索エンドポイントと異なり、演算子、グルーピング、論理演算子は使用できません。この演習では、シンプルなクエリとして「hello」を使用します。

Postman で "Params" タブに移動し、id パラメータの "Value" 列にこのユーザー ID を入力します。

|     |     |
| :--- | :--- |
| **Key** | **Value** |
| query | hello |

**ステップ4：取得したいフィールドを特定して指定する**

ステップ3の後に "Send" ボタンをクリックすると、Spaces の ID と state が返されます。これらは、レスポンスでデフォルトで返される唯一の Space オブジェクトのフィールドです。

追加のフィールドが必要な場合は、space.fields または expansions パラメータでリクエストに指定してください。

この演習では、異なるオブジェクトから次の3つの追加フィールドセットを要求します。

- プライマリの Spaces オブジェクトにおける追加フィールド title
- 指定した creator ID の完全なユーザーオブジェクト
- 関連するユーザーオブジェクトの追加フィールド user.created\_at

Postman で「Params」タブに移動し、「Query Params」テーブルに次のキーと値のペアを追加します。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| space.fields | title | creator\_id |
| expansions | creator\_id | includes.users.id, includes.users.name, includes.users.username |
| user.fields | created\_at | includes.users.created\_at |

これで「Send」ボタンの横に、次の URL が表示されるはずです。

https://api.x.com/2/spaces/search?query=hello\&space.fields=creator\_id\&expansions=creator\_id\&user.fields=created\_at

**ステップ5：リクエストを送信し、レスポンスを確認する**

すべての設定が完了したら、「Send」ボタンを押すと、次のレスポンスが返ってきます。

```{
   "data": [
    {
        "creator_id": "2244994945",
        "id": "1zqKVXPQhvZJB",
        "title": "Hello world 👋",
        "state": "Running"
   },
   "includes": {
       "users": [
           {
               "created_at": "2013-12-14T04:35:55.000Z",
               "name": "Twitter Dev",
               "id": "2244994945",
               "username": "TwitterDev"
           }
       ]
   }
]
}
```