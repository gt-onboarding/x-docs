---
title: 拡張
---

拡張を使用すると、開発者はペイロード内で参照されているオブジェクトを展開できます。展開可能なオブジェクトは ID で参照されます。たとえば、[Posts lookup](/ja/x-api/posts/lookup/introduction) のペイロードで返される `referenced_tweets.id` と `author_id` フィールドは、完全なオブジェクトに展開できます。投稿したユーザーや、その投稿に含まれるメディア、投票、場所に関するフィールドを取得したい場合は、レスポンスでそのデータを受け取るために、リクエストで該当する拡張クエリパラメータを指定する必要があります。現在、Posts、Users、Lists、Spaces、Direct Message イベントのオブジェクトを返す v2 エンドポイントは、すべて拡張をサポートしています（以下の例を参照）。

リクエストに拡張を含めると、同じレスポンス内にその展開オブジェクトのデフォルトフィールドが含まれます。これにより、別途リクエストを行わなくても、同一のレスポンスで追加データを返せます。展開オブジェクトに関連する追加の[フィールド](/ja/x-api/fundamentals/fields)を取得したい場合は、その展開オブジェクトに対応するフィールドパラメータを指定し、レスポンスで受け取りたいフィールドをカンマ区切りで列挙してください。なお、フィールドはクエリで指定した順序どおりに返されるとは限りません。

以下の Post のペイロードには、展開可能な補助オブジェクトの参照 ID が含まれています。たとえば、投稿者の `author_id`、_参&#x7167;_&#x3055;れた Post の `id`、メディア添付用の `media_key` などです。

```json
{
    "data": {
        "attachments": {
            "media_keys": ["16_1211797899316740096"]
        },
        "author_id": "2244994945",
        "id": "1212092628029698048",
        "referenced_tweets": [
            {
                "type": "replied_to",
                "id": "1212092627178287104"
            }
        ],
        "text": "We believe the best future version of our API will come from building it with YOU. Here’s to another great year with everyone who builds on the Twitter platform. We can’t wait to continue working with you in the new year. https://t.co/yvxdK6aOo2"
    }
}
```

<div id="available-expansions-for-post-payloads">
  ### 投稿ペイロードで利用可能な拡張
</div>

| Expansion                      | 説明                                                                        |
|:--------------------------------|:------------------------------------------------------------------------------------|
| `author_id`                    | 投稿の作成者を表すユーザーオブジェクトを返します                               |
| `referenced_tweets.id`         | この投稿が参照している投稿（リツイート、引用投稿、または返信）を表す投稿オブジェクトを返します |
| `edit_history_tweet_ids`       | 投稿の編集履歴に含まれる投稿オブジェクトを返します                        |
| `in_reply_to_user_id`          | この投稿が返信している相手の投稿作成者を表すユーザーオブジェクトを返します |
| `attachments.media_keys`       | 投稿に含まれる画像、動画、GIF を表すメディアオブジェクトを返します  |
| `attachments.poll_ids`         | 投稿に含まれる投票のメタデータを保持する投票オブジェクトを返します        |
| `geo.place_id`                 | 投稿でタグ付けされた場所のメタデータを保持する場所オブジェクトを返します     |
| `entities.mentions.username`   | 投稿でメンションされたユーザーを表すユーザーオブジェクトを返します                          |
| `referenced_tweets.id.author_id` | 参照されている投稿の作成者を表すユーザーオブジェクトを返します                      |

<div id="available-expansion-for-user-payloads">
  ### ユーザーペイロードで利用可能な拡張
</div>

| Expansion          | 説明                                               |
|:--------------------|:-----------------------------------------------------------|
| `pinned_tweet_id`  | ユーザーのプロフィールの先頭に固定された投稿を表す Post オブジェクトを返します |

<div id="available-expansions-for-direct-message-event-payloads">
  ### ダイレクトメッセージイベントのペイロードで利用可能な拡張
</div>

| 拡張                     | 説明                                                                        |
|:--------------------------|:------------------------------------------------------------------------------|
| `attachments.media_keys` | ダイレクトメッセージに添付された Media オブジェクトを返します               |
| `referenced_tweets.id`   | ダイレクトメッセージで参照された Post オブジェクトを返します               |
| `sender_id`              | ダイレクトメッセージの作成者であり、会話への参加者を招待したユーザーを表す User オブジェクトを返します |
| `participant_ids`        | 会話に参加または退出した参加者を表す User オブジェクトを返します            |

<div id="available-expansions-for-spaces-payloads">
  ### Spaces ペイロードで利用可能な拡張
</div>

| Expansion          | Description                                               |
|:--------------------|:-----------------------------------------------------------|
| `invited_user_ids` | 招待されたアカウントを表す User オブジェクトを返します |
| `speaker_ids`      | Space で発言したアカウントを表す User オブジェクトを返します |
| `creator_id`       | Space を作成したアカウントを表す User オブジェクトを返します |
| `host_ids`         | ホストとして設定されたアカウントを表す User オブジェクトを返します |
| `topics_ids`       | クリエイターによって設定されたトピックの説明を返します |

<div id="available-expansion-for-lists-payloads">
  ### リストのペイロードで利用可能な拡張
</div>

| Expansion   | 説明                                                    |
|:-------------|:----------------------------------------------------------------|
| `owner_id`  | リストを作成し管理しているアカウントを表す User オブジェクトを返します |

<div id="expanding-the-media-object">
  ## メディアオブジェクトの拡張
</div>

次のリクエストでは、デフォルトの投稿フィールドに加えて `geo.place_id` の拡張を指定しています。

**サンプルリクエスト**

```
{`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
```

**サンプルレスポンス**

```
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}

```

<div id="expanding-the-poll-object">
  ## 投票オブジェクトの展開
</div>

次のリクエストでは、デフォルトの投稿フィールドに加えて `attachments.poll_ids` の展開を指定しています。

**サンプルリクエスト**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/1199786642791452673?expansions=attachments.poll_ids' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**サンプルレスポンス**

```
{`{
  "data": {
      "attachments": {
          "poll_ids": ["1199786642468413448"]
      },
      "id": "1199786642791452673",
      "text": "C#"
  },
  "includes": {
      "polls": [
          {
              "id": "1199786642468413448",
              "options": [
                  {
                      "position": 1,
                      "label": "“C Sharp”",
                      "votes": 795
                  },
                  {
                      "position": 2,
                      "label": "“C Hashtag”",
                      "votes": 156
                  }
              ]
          }
      ]
  }
}`}
```

<div id="expanding-the-place-object">
  ## Place オブジェクトの拡張
</div>

次のリクエストでは、デフォルトの投稿フィールドに加えて `geo.place_id` の拡張を要求しています。

**サンプルリクエスト**

<CodeBlock language="bash">
  {`curl 'https://api.x.com/2/tweets/:ID?expansions=geo.place_id' --header 'Authorization: Bearer $ACCESS_TOKEN'`}
</CodeBlock>

**サンプルレスポンス**

```s
{`{
  "data": {
      "geo": {
          "place_id": "01a9a39529b27f36"
      },
      "id": "ID",
      "text": "Test"
  },
  "includes": {
      "places": [
          {
              "full_name": "Manhattan, NY",
              "id": "01a9a39529b27f36"
          }
      ]
  }
}`}
```