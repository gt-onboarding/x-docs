---
title: 投稿の編集
---

Enterprise エンドポイントは、編集された投稿のメタデータを提供するように更新されました。_投稿を編集_ 機能は、2022年9月1日に X の従業員向けテストとして初めて導入されました。この日から、対象の投稿は30分間に最大5回まで編集可能になりました。_2022年9月29日以降に作成された投稿のすべてのオブジェク&#x30C8;_&#x306B;は、投稿が一度も編集されていない場合でも、投稿編集メタデータが含まれます。投稿が編集されるたびに、新しい投稿 ID が生成されます。投稿の編集履歴は、元の ID から始めて、これらの ID を連結することで表現できます。さらに、編集チェーン内のいずれかの投稿が削除されると、そのチェーン内のすべての投稿も削除されます。

これらのメタデータは自動的に含まれます。利用可能な編集履歴は投稿オブジェクトに含まれるため、リクエストパラメータは不要です。

これらの新しいメタデータによって、開発者は次の点を明らかにできます：

- 作成時点でその投稿が編集可能だったかどうか。投票付き投稿や予約投稿など、一部の投稿は編集できません。
- 投稿は30分間編集でき、最大5回まで編集可能です。編集可能な投稿では、編集の残り時間と、あと何回編集できるかを確認できます。
- 編集済みの投稿バージョンを表示している場合。多くの場合、特定の過去バージョンが投稿IDで指定されない限り、APIは最新の投稿バージョンを返します。

ルートレベルに新たに3つの投稿属性が追加されました：

- **edit\_history** - 投稿の編集履歴に紐づくすべての投稿 ID を返します。"initial\_tweet\_id" 属性は元の投稿を示し、"edit\_tweet\_ids" 属性はその編集履歴に関連するすべての ID を含む配列です。投稿が編集されていない場合、この配列には ID が1つだけ含まれます。

```
"edit_history": {
    "initial_tweet_id": "1283764123"
    "edit_tweet_ids": ["1283764123"]
  }
```

- **edit\_controls** - 30分の編集可能期間の終了時刻と、残りの編集回数を示す属性を提供します。

```
"edit_controls": {  
     "editable_until_ms": 1660155761384,
     "edits_remaining": 3   
  }
```

- **editable** - 作成時点でその投稿が編集可能な対象だったかどうかを示します。

"editable": true

ほとんどの投稿が対象です。ただし、次の種類の投稿は対象外です：

- 投稿がプロモーション対象です
- 投稿に投票が含まれる
- 投稿は自己スレッドではない返信です
- 投稿がリツイートである（引用ポストは編集可能である点に注意）
- 投稿はヌルキャストです
- コミュニティポスト
- スーパーフォローの投稿
- 共同ポスト

**未編集の投稿の属性例**

以下の JSON は、編集ポスト機能の追加後に投稿されたポストに含まれる編集メタデータを示しています。この例は、編集履歴のないポストのものです。

「edit\_tweet\_ids」配列には ID が1つだけ含まれている点に注意してください。

```
{
  "created_at": "水 8月 16 18:29:02 +0000 2022",
  "id": 1557433858676740098,
  "id_str": "1557433858676740098",
  "text": "編集ボタンを使うことはあるだろうか",
  "edit_history": {
    "initial_tweet_id": "1557433858676740098",
    "edit_tweet_ids": ["1557433858676740098"]
  },
  "edit_controls": {
    "editable_until_ms": 1660155761384,
    "edits_remaining": 5
  },
  "editable": true
}
```

編集済み投稿の属性例

以下の JSON は、編集ポスト機能の追加後に作成された投稿に含まれる編集メタデータを示しています。これは、1 回だけ編集された投稿の例です。

「edit\_tweet\_ids」配列には、元の投稿と編集後の更新に対応するIDがそれぞれ1つずつ、計2つ含まれている点に注意してください。

```
{
  "created_at": "Wed Aug 16 18:35:42 +0000 2022",
  "id": 1557445923210514432,
  "id_str": "1557445923210514432",
  "text": "編集ボタンを使う日が来るのだろうか"
  "edit_history": {
    "initial_tweet_id": "1557433858676740098",
    "edit_tweet_ids": ["1557433858676740098", "1557445923210514432"]
  },
  "edit_controls": {
    "editable_until_ms": 1660155761384,
    "edits_remaining": 4
  },
  "editable": true
}
```

**コンプライアンスサポート**

[Compliance Firehose](/ja/x-api/enterprise-gnip-2.0/fundamentals/firehouse) と v2 の [バッチコンプライアンスエンドポイント](/ja/x-api/compliance/batch-compliance/introduction) が、投稿の編集に対応するよう更新されました。

新しい "tweet\_edit" イベントタイプが Compliance Firehose に追加されました。

```
{
  "tweet_edit": {
    "id": <tweetId>,
    "initial_tweet_id": <tweetId>,
    "edit_tweet_ids": [<tweetId1>, <tweetId2>, <tweetId3> ...],
    "timestamp_ms": "<timestampMsStr>"
  }
}
```