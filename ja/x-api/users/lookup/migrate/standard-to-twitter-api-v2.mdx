---
title: v1 から v2 へ
sidebarTitle: v1 から v2 へ
---

import { Button } from '/snippets/ja/button.mdx';

<div id="standard-v11-compared-to-x-api-v2">
  ### Standard v1.1 と X API v2 の比較
</div>

標準版 v1.1 の GET users/show および GET users/lookup をお使いの場合、本ガイドは標準エンドポイントと X API v2 の users lookup エンドポイントの共通点と相違点を理解するための手引きです。

- **共通点**
  - OAuth 1.0a ユーザーコンテキスト
  - 1 リクエストあたりのユーザー数上限
- **相違点**
  - エンドポイント URL
  - アプリおよびプロジェクトの要件
  - レスポンスデータの形式
  - リクエストパラメータ

<div id="similarities">
  #### 類似点
</div>

**OAuth 1.0a ユーザーコンテキスト認証方式**

標準エンドポイントは[OAuth 1.0a ユーザーコンテキスト](/ja/resources/fundamentals/authentication#oauth-1-0a-2)をサポートしており、新しい X API v2 の users lookup エンドポイントは OAuth 1.0a ユーザーコンテキストと[アプリのみ](/ja/resources/fundamentals/authentication#oauth-2-0)の両方をサポートします。したがって、以前に標準の v1.1 の users lookup エンドポイントのいずれかを使用していた場合は、X API v2 版へ移行しても同じ認証方式を引き続き利用できます。 

使用する認証ライブラリ／パッケージにもよりますが、アプリのみ認証は最も手軽に始められる方法で、単純なリクエストヘッダーの設定で利用できます。アプリのみのアクセストークンの生成方法は、[このアプリのみガイド](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only)を参照してください。 

**リクエストあたりのユーザー数の上限**

標準の v1.1 GET users/lookup エンドポイントでは、1 リクエストあたり 100 ユーザーを指定できます。これは GET /users および GET /users/by エンドポイントでも同様です。100 ユーザーを指定するには、クエリパラメータとして ids（GET /users）または username（GET /users/by）を渡し、ユーザー ID／ユーザー名のリストをカンマ区切りで含めてください。 
 

<div id="differences">
  #### 違い
</div>

**エンドポイント URL**

- Standard v1.1 エンドポイント:
  - https://api.x.com/1.1/users/show（単一 ID またはユーザー名のルックアップ）
  - https://api.x.com/1.1/users/lookup（複数 ID またはユーザー名のルックアップ）
- X API v2 エンドポイント:
  - https://api.x.com/2/users（複数 ID のルックアップ）
  - https://api.x.com/2/users/:id（単一 ID のルックアップ）
  - https://api.x.com/2/users/by（複数ユーザー名のルックアップ）
  - https://api.x.com/2/users/by/username/:username（単一ユーザー名のルックアップ）

**App と Project の要件**

X API v2 のエンドポイントでは、リクエスト認証時に [developer App](/ja/resources/fundamentals/developer-apps) の資格情報のうち、[Project](/ja/resources/fundamentals/projects) に関連付けられているものを使用する必要があります。X API v1.1 のすべてのエンドポイントでは、スタンドアロンの App、またはプロジェクトに関連付けられた App の資格情報を使用できます。 

**レスポンスデータ形式**

Standard v1.1 と X API v2 のエンドポイントの大きな違いのひとつは、ペイロードにどのフィールドを返すかの指定方法です。

Standard エンドポイントでは、多くのレスポンスフィールドがデフォルトで返され、さらにパラメータを使って、ペイロードに含めるフィールドやフィールドセットを指定できます。

X API v2 では、デフォルトで返されるのは user id、name、username フィールドのみです。追加のフィールドやオブジェクトを取得するには、[fields](/ja/x-api/fundamentals/fields) と [expansions](/ja/x-api/fundamentals/expansions) パラメータを使用する必要があります。このエンドポイントで要求したユーザーフィールドは、主要な user オブジェクト内で返されます。展開された Post オブジェクトおよびそのフィールドは、レスポンス内の includes オブジェクトで返されます。その後、user と展開された Post オブジェクトの双方に含まれる ID を照合することで、展開オブジェクトを user オブジェクトに対応付けられます。 

これらの新しいパラメータの詳細は、それぞれのガイド、または[fields と expansions の使い方](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)のガイドをご参照ください。 

また、Standard v1.1 のフィールドを新しい v2 のフィールドにマッピングするのに役立つ [データ形式移行ガイド](/ja/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) も用意しています。このガイドでは、特定のフィールドを返すために v2 リクエストで指定すべき具体的な expansion と field パラメータも示します。 
 

特定のフィールドの要求方法の変更に加えて、X API v2 では、API が返すオブジェクト（[Post](/ja/x-api/fundamentals/data-dictionary#tweet) や [user](/ja/x-api/fundamentals/data-dictionary#user) オブジェクトを含む）の新しい JSON 設計も導入しています。

- JSON のルートレベルでは、Standard エンドポイントは statuses 配列で Post オブジェクトを返す一方、X API v2 は data 配列を返します。 
- Retweeted と Quoted の「statuses」を参照する代わりに、X API v2 の JSON では Retweeted と Quoted Tweets を参照します。contributors や user.translator\_type などのレガシー／非推奨フィールドの多くは削除されます。 
- Post オブジェクトの favorites と user オブジェクトの favourites の両方を使う代わりに、X API v2 では like という用語を使用します。 
- X では、値が存在しない JSON 値（例: null）はペイロードに出力しないという規約を採用しています。Post および user の属性は、非 null の値がある場合にのみ含まれます。 
   

さらに、[Post オブジェクト](/ja/x-api/fundamentals/data-dictionary#tweet) に以下を含む新しいフィールド群を導入しました:

- [conversation\_id](/ja/x-api/fundamentals/conversation-id) フィールド
- context と entities を含む新しい [annotations](/ja/x-api/fundamentals/post-annotations) フィールドを 2 つ
- 複数の新しい [metrics](/ja/x-api/fundamentals/metrics) フィールド 
- 指定された Post に誰が返信できるかを示す新しい reply\_setting フィールド

**リクエストパラメータ**

以下の Standard v1.1 のリクエストパラメータには、X API v2 に相当するものがあります:

|     |     |
| :--- | :--- |
| **Standard** | **X API v2** |
| user\_id | ids |
| screen\_name | username |

また、X API v2 ではサポートされていない Standard の users lookup リクエストパラメータも一部存在します:

| 仕様 | コメント |
| :--- | :--- |
| include\_entities | このパラメータは、投稿のペイロードから entities ノードを除去するために使用されます。これは、fields と expansions の加算的機能に置き換えられました。 |