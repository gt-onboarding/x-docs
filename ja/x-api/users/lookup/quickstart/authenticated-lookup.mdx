---
title: 認証ユーザーの検索
sidebarTitle: 認証ユーザーの検索
---

import { Button } from '/snippets/ja/button.mdx';

<div id="getting-started-with-the-authenticated-user-lookup-endpoint">
  ## 認証済みユーザー照会エンドポイントのはじめ方
</div>

このクイックスタートガイドでは、Postman を使用して認証済みユーザー照会エンドポイントに最初のリクエストを送信する方法を説明します。

各言語のサンプルコードをご覧になりたい場合は、GitHub の[X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code)リポジトリをご参照ください。

<Note>
  ### 前提条件

  本ガイドを完了するには、リクエスト認証のための[keys and tokens](/ja/resources/fundamentals/authentication)が必要です。以下の手順に従ってキーとトークンを生成できます。

  - [開発者アカウントに登録](https://developer.x.com/en/apply-for-access)し、承認を受ける。
  - 開発者ポータルで[プロジェクト](/ja/resources/fundamentals/projects)と関連付けられた[開発者アプリ](/ja/resources/fundamentals/developer-apps)を作成する。
  - アプリの「Keys and tokens」ページに移動して必要なクレデンシャルを生成する。すべてのクレデンシャルは安全な場所に保存しておくこと。
</Note>

<div id="steps-to-build-an-authenticated-user-lookup-request">
  ### 認証済みユーザーをルックアップするリクエストの作成手順
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### ステップ1: ツールまたはライブラリから始める
</div>

このエンドポイントにリクエストする方法はいくつかあり、ツールやコード例、ライブラリを利用できます。ここでは手順を簡潔にするため、Postman を使用します。

X API v2 の Postman コレクションを環境に読み込むには、次のボタンをクリックしてください。

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X API v2 を Postman に追加
</Button>

Postman に X API v2 コレクションを読み込んだら、「Authenticated User Lookup」フォルダーを開き、「Lookup an Authenticated User」を選択します。

<div id="step-two-authenticate-your-request">
  #### ステップ2：リクエストを認証する
</div>

X API に正しくリクエストを送信するには、権限があることを確認する必要があります。このエンドポイントでは、[OAuth 1.0a User Context](/ja/resources/fundamentals/authentication) または [OAuth 2.0 Authorization Code with PKCE](ja/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) のいずれかでリクエストを認証してください。

この例では、OAuth 1.0a User Context を使用します。

API Key、API Secret Key、OAuth 1.0a ユーザー Access Token、OAuth 1.0a ユーザー Access Token Secret を Postman に追加します。Postman 右上の環境ドロップダウンで「X API v2」という環境を選択し、"initial value" と "current value" の各フィールドにキーとトークンを入力します（環境ドロップダウン横の目のアイコンをクリック）。

これらの変数は、正しく設定されていれば、リクエストの Authorization タブに自動的に反映されます。
 

<div id="step-three-determine-which-user-fields-you-want-to-retrieve">
  ##### ステップ3：取得したいユーザーフィールドを決める
</div>

ステップ3の後に「Send」ボタンをクリックすると、レスポンスにはデフォルトの [user object](/ja/x-api/fundamentals/data-dictionary#user) のフィールド（id、name、username）が含まれます。

id、name、username 以外のフィールドも受け取りたい場合は、[field](/ja/x-api/fundamentals/fields) および／または [expansion](/ja/x-api/fundamentals/expansions) パラメータでそれらのフィールドをリクエストに指定する必要があります。

この演習では、異なるオブジェクトから以下の3つの追加フィールドセットをリクエストします。

1. プライマリのユーザーオブジェクトにおける追加の user.created\_at フィールド。

2. 返されるユーザーに関連付けられた固定済みポストのオブジェクトのデフォルトフィールド：id と text。

3. 関連するポストオブジェクトにおける追加の tweet.created\_at フィールド。

Postman で「Params」タブに移動し、「Query Params」テーブルに次の key:value の組を追加します。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| user.fields | created\_at | user.created\_at |
| expansions | pinned\_tweet\_id | includes.tweets.id,  <br />includes.tweets.text |
| tweet.fields | created\_at, author\_id | includes.tweets.created\_at, includes.tweets.author\_id |

これで「Send」ボタンの横に、次のような URL が表示されるはずです。

```
      https://api.x.com/2/users/me?user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=author_id,created_at
```