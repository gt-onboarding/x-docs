---
title: 移行ガイド
sidebarTitle: 移行ガイド
---

import { Button } from '/snippets/ja/button.mdx';

<div id="comparing-v11-and-v2-direct-message-event-lookup-endpoints">
  ## v1.1 と v2 のダイレクトメッセージイベント参照エンドポイントの比較
</div>

v1.1 と v2 のダイレクトメッセージエンドポイントは、ダイレクトメッセージのイベント参照手段を提供します。本ガイドは、両者の違いの理解と v2 への移行に役立つ情報の提供を目的としています。 

両バージョンの大きな違いは、v1.1 が 1 対 1 の会話のみをサポートするのに対し、v2 ではグループ会話もサポートする点です。その帰結として、v1.1 でサポートされるイベントは「message created」のみですが、v2 では参加者の会話への参加・退出に関連するイベントもサポートされます。実際、v2 では dm\_conversations がコア API オブジェクトとして確立されています。   

v1.1 では、ダイレクトメッセージを取得するためのエンドポイントが 2 つあります（繰り返しになりますが、v1.1 でサポートされるイベントタイプは新規メッセージのみです）。

- GET direct\_messages/events/show - ID で単一のイベントを取得します。 

- GET direct\_messages/events/list - 認証済みユーザーが送受信した 1 対 1 のダイレクトメッセージを最大 30 日分取得します。このメソッドではグループ会話のメッセージは取得できません。 

この v2 リリースでは、ダイレクトメッセージ会話のイベントを取得するための GET メソッドが 3 つあります。 

- **GET /2/dm\_conversations/with/:participant\_id/dm\_events** - 1 対 1 の会話に関連するダイレクトメッセージイベントを取得します。:participant\_id パスパラメータは、このリクエストを行う認証済みユーザーと会話している相手アカウントのユーザー ID です。 

- **GET /2/dm\_conversations/:dm\_conversation\_id/dm\_events** - :dm\_conversation\_id パスパラメータで示される特定の会話 ID に関連するダイレクトメッセージイベントを取得します。このメソッドは 1 対 1 とグループ会話の両方をサポートします。 

- **GET /2/dm\_events** - ユーザーに関連するダイレクトメッセージイベント（1 対 1 とグループ会話の両方を含む）を取得します。最大 30 日前までのイベントが利用可能です。  

重要な点として、会話 ID とイベント ID は X プラットフォームの v1.1 と v2 で共有されています。つまり、両バージョンを併用できます。たとえば、ダイレクトメッセージ v1.1 のエンドポイントには単一イベントの取得やイベントの削除のメソッドがあり、これらは v2 ではまだ提供されていません。ID は v1.1 と v2 で共通のため、v2 が返す ID に基づいて v1.1 リクエストを行ったり、X アプリケーションの会話 URL に表示される会話 ID を参照したりできます。

以下の表は、v1.1 と v2 のダイレクトメッセージイベント参照エンドポイントの基本的な側面を比較したものです。ここで示す X API v2 の特性は、すべてのダイレクトメッセージ参照エンドポイントに共通です。

|     |     |     |
| :--- | :--- | :--- |
| **Description** | **Standard v1.1** | **X API v2** |
| Host domain | https://api.x.com | https://api.x.com |
| Endpoint root path | [/1.1/direct\_messages](https://api.x.com/1.1/direct_messages) | [/2/dm\_conversations](https://api.x.com/2/users/:id/dm_conversations)<br /><br />ダイレクトメッセージの会話が基本的な API オブジェクトとして導入されます。   <br /><br />これらのエンドポイントは MessageCreate、ParticipantsJoin、ParticipantLeave イベントを取得します。 |
| HTTP methods supported | GET | GET |
| Supports Group Direct Messages |     | ✔   |
| Event types supported | message\_create | MessageCreate, ParticipantsJoin, ParticipantsLeave |
| [Authentication](/ja/resources/fundamentals/authentication) | OAuth 1.0a User Context | OAuth 1.0a User Context<br /><br />OAuth 2 User Context（スコープ: dm.read, tweet.read, user.read） |
| Requires the use of credentials from a [developer App](/ja/resources/fundamentals/authentication) associated with a X API v2 [Project](/ja/resources/fundamentals/projects) |     | ✔   |
| Default request [rate limits](/ja/x-api/fundamentals/rate-limits)\*  <br />\*All requests require user tokens |     | GET リクエスト: 15 分あたり 300 リクエスト<br /><br />レート制限は 3 つのエンドポイント全体で共有されます |

以下の表は、v2 の GET メソッドを v1.1 と比較したものです。v2 の提供により、グループ会話がサポートされ、利用可能な機能が拡張されています。 

**特定の 1 対 1 会話内のすべてのメッセージを取得**

---

Path: GET /2/dm\_conversations/with/:participant\_id/dm\_events

|     |     |     |
| :--- | :--- | :--- |
| **説明** | **Standard v1.1** | **X API v2** |
| エンドポイントパス | GET <br /><br />/1.1/direct\_messages/events/list | GET /2/dm\_conversations/with/:participant\_id/dm\_events |
| 利用可能なイベント履歴 | 30日 | 無制限 |
| デフォルトの[レート制限](/ja/x-api/fundamentals/rate-limits) | 15リクエスト/15分 | 300リクエスト/15分  <br />レート制限は3つのGETエンドポイント全体に適用されます |

**会話IDで全メッセージを取得**

Path: GET /2/dm\_conversations/:dm\_conversation\_id/dm\_events

|     |     |     |
| :--- | :--- | :--- |
| **説明** | **Standard v1.1** | **X API v2** |
| エンドポイントパス | 非対応。V1.1は1対1の会話からのメッセージのみを返すことができ、会話IDでイベントを取得する機能はありません。 | GET /2/dm\_conversations/:dm\_conversation\_id/dm\_events |
| 利用可能なイベント履歴 | 30日 | 無制限 |
| グループ会話のサポート |     | ✔   |
| デフォルトの[レート制限](/ja/x-api/fundamentals/rate-limits) | 15リクエスト/15分 | 300リクエスト/15分  <br />レート制限は3つのGETエンドポイント全体に適用されます |

**認証済みユーザーの1対1およびグループ会話全体にわたるすべてのイベントを取得**

Path: GET /2/dm\_events

|     |     |     |
| :--- | :--- | :--- |
| **説明** | **Standard v1.1** | **X API v2** |
| エンドポイントパス | GET /1.1/direct\_messages/events/list  <br />  <br />V1.1は1対1の会話からのメッセージのみを返すことができます。 | GET /2/dm\_events |
| 利用可能なイベント履歴 | 30日 | 30日 |
| グループ会話のサポート |     | ✔   |
| デフォルトの[レート制限](/ja/x-api/fundamentals/rate-limits) | 15リクエスト/15分 | 300リクエスト/15分  <br />レート制限は3つのGETエンドポイント全体に適用されます |