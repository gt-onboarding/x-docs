---
title: 連携ガイド
sidebarTitle: 連携ガイド
---

import { Button } from '/snippets/ja/button.mdx';

<div id="integration-guide">
  ## 統合ガイド
</div>

このページでは、List members エンドポイントをシステムに統合する際に把握しておくべき各種ツールと重要な概念について説明します。内容は次のセクションに分かれています。

- [便利なツール](#helpful)
- 重要な概念
- [認証](#authentication)
- [Developer portal、プロジェクトとアプリ](#portal)
- [レート制限](#limits)
- [フィールドとエクスパンション](#fields)
- [ページネーション](#pagination)

<div id="helpful-tools">
  ### 便利なツール
</div>

このエンドポイントを統合するうえで役立つ重要な概念に入る前に、次の内容に慣れておくことをおすすめします。

<div id="postman">
  #### Postman
</div>

Postman は、エンドポイントの動作確認に使える優れたツールです。各 Postman リクエストには、利用可能な項目を素早く把握できるよう、すべてのパスおよびボディのパラメータが含まれています。Postman コレクションの詳細は、["Using Postman"](/ja/tutorials/postman-getting-started) をご覧ください。 

<div id="code-samples">
  #### コードサンプル
</div>

お好みのプログラミング言語でこのエンドポイントを使い始めるためのコードをお探しですか？出発点として使える複数のコードサンプルを[GitHub ページ](https://github.com/xdevplatform/Twitter-API-v2-sample-code)で提供しています。

<div id="third-party-libraries">
  #### サードパーティ製ライブラリ
</div>

コミュニティ提供の[サードパーティ製ライブラリ](/ja/x-api/tools-and-libraries/overview)を活用して、スムーズに始めましょう。適切なバージョンタグを確認すれば、v2 エンドポイントに対応するライブラリを見つけられます。

<div id="key-concepts">
  ### 重要な基本概念
</div>

<div id="authentication">
  #### 認証
</div>

すべての X API v2 エンドポイントでは、キーやトークンとも呼ばれる一連の認証情報でリクエストを認証する必要があります。Lists の**lookup**エンドポイントに対するリクエストの認証には、OAuth 1.0a User Context、OAuth 2.0 Authorization Code（PKCE）、または App only のいずれかを使用できます。ただし、**manage** Lists エンドポイントには、OAuth 1.0a User Context または OAuth 2.0 で認証する必要があります。

[OAuth 1.0a User Context](/ja/resources/fundamentals/authentication) では、API Key とユーザーの Access Token のセットを使用してリクエストを行います。Access Token は、あなたが代理でリクエストを行うユーザーに紐づいている必要があります。別のユーザーの Access Token セットを生成する場合、そのユーザーは [3-legged OAuth flow](/ja/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) を用いてあなたの App を承認する必要があります。

OAuth 1.0a は扱いが難しい場合があります。この認証方式に不慣れな場合は、[library](/ja/x-api/tools-and-libraries/overview) を利用する、Postman のようなツールを使う、または OAuth 2.0 か App only を用いてリクエストを認証することをおすすめします。

[OAuth 2.0 Authorization Code with PKCE](/ja/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2) は、アプリケーションのスコープや複数デバイス間の認可フローをより厳密に制御できます。OAuth 2.0 では、ユーザーに代わって特定の権限を付与するきめ細かなスコープを選択できます。

あなたの App で OAuth 2.0 を有効化するには、developer portal の App settings セクションにある authentication settings で有効にしてください。

[App only](/ja/resources/fundamentals/authentication#oauth-2-0) は、リクエストに [App only Access Token](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only) を付与するだけで利用できます。App only Access Token は、developer App 内で直接生成するか、[POST oauth2/token](/ja/resources/fundamentals/authentication#post-oauth2-token) エンドポイントを使用して生成できます。

[App only](/ja/resources/fundamentals/authentication#oauth-2-0) は、リクエストに [App only Access Token](/ja/resources/fundamentals/authentication#bearer-token-also-known-as-app-only) を付与するだけで利用できます。App only Access Token は、developer App 内で直接生成するか、[POST oauth2/token](/ja/resources/fundamentals/authentication#post-oauth2-token) エンドポイントを使用して生成できます。

<div id="developer-portal-projects-and-developer-apps">
  #### Developer portal、プロジェクト、そして Developer App
</div>

X API v2 のエンドポイントで利用できる認証情報一式を取得するには、[開発者アカウントに登録](https://developer.x.com/en/portal/petition/essential/basic-info)し、そのアカウント内に[プロジェクト](/ja/resources/fundamentals/projects)を作成し、そのプロジェクト内に[Developer App](/ja/resources/fundamentals/developer-apps)を作成する必要があります。キーとトークンは、作成した Developer App 内で確認できます。
 

<div id="rate-limits">
  #### レート制限
</div>

毎日、数万人規模の開発者が X API にリクエストを送信しています。こうした大量のリクエストを適切に管理するため、各エンドポイントには[レート制限](/ja/x-api/fundamentals/rate-limits)が設定されており、アプリまたは認証済みユーザーの代理として行えるリクエスト数が制限されています。

Lookup（GET）エンドポイントにはアプリレベルとユーザーレベルの両方のレート制限が適用され、Manage（POST／DELETE）エンドポイントにはユーザーレベルの制限が適用されます。アプリレベルのレート制限とは、開発者であるあなたが、特定の期間内に任意のアプリ（API Key と API Secret Key、または App-only Access Token のいずれかを使用することを想定）から当該エンドポイントに送信できるリクエスト数が制限されることを意味します。ユーザーレベルのレート制限とは、あなたが代理でリクエストを行う認証済みユーザーが、任意の開発者アプリをまたいで一定回数のみ List のルックアップを実行できることを意味します。

以下の表は各エンドポイントのレート制限を示します。

|     |     |     |
| :--- | :--- | :--- |
| **Endpoint** | **HTTP method** | **Rate limit** |
| /2/lists/:id/members | GET | 15分あたり 900 リクエスト |
| /2/users/:id/list\_memberships | GET | 15分あたり 75 リクエスト |
| /2/lists/:id/members | POST | 15分あたり 300 リクエスト |
| /2/lists/:id/members/:user\_id | DELETE | 15分あたり 300 リクエスト |

<div id="fields-and-expansions">
  #### フィールドとエクスパンション
</div>

X API v2 の GET エンドポイントでは、`fields` と `expansions` と呼ばれる一連のツールを使って、API から返すデータを正確に指定できます。`expansions` パラメータは、ペイロード内で参照されているオブジェクトを展開します。たとえば、リストメンバーのルックアップでは、次の[expansions](/ja/x-api/fundamentals/expansions)を取得できます。

- `pinned_tweet_id`

`fields` パラメータは、受け取りたい各種データオブジェクト内の[fields](/ja/x-api/fundamentals/fields)を正確に選択するためのものです。リストメンバーのルックアップでは主にユーザーオブジェクトが返されます。既定では、ユーザーオブジェクトは id、name、username フィールドを返します。`user.created_at` や `user.description` といった追加フィールドを受け取るには、user.fields パラメータで明示的にリクエストする必要があります。 

[fields と expansions](/ja/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions)の使い方に関するガイドを追加しました。

以下の表は、各ルックアップエンドポイントで利用可能なフィールドとエクスパンションを示しています。

|     |     |     |
| :--- | :--- | :--- |
| **エンドポイント** | **フィールド** | **エクスパンション** |
| /2/lists/:id/members | `user.fields`<br /><br />`tweet.fields` | `pinned_tweet_id` |
| /2/users/:id/list\_memberships | `list.fields`<br /><br />`user.fields` | `owner_id` |

<div id="pagination">
  #### ページネーション
</div>

membership/members の参照では大量のデータが返される場合があります。任意の時点で一貫性があり高性能な結果を返すため、ページネーションを使用します。ページネーションは、1 回のレスポンスで返せる範囲を超える結果を返す X API v2 のエンドポイントで用いられる仕組みです。該当する場合、データは一連の「ページ」に分割して返されます。結果の[ページ送りの方法についてはこちら](/ja/x-api/fundamentals/pagination)をご覧ください。