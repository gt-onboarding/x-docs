---
title: トピックごとに返信を管理する
sidebarTitle: トピックごとに返信を管理する
---

import { Button } from '/snippets/ja/button.mdx';

<div id="manage-replies-by-topic">
  ### トピック別に返信を管理する
</div>

返信を非表示にするエンドポイントを使うと、人やブランドが会話をトピックに沿って保てるようにする統合を構築できます。このページでは、返信を非表示にするエンドポイントと[最近の検索](/ja/x-api/posts/recent-search)エンドポイントを使って会話を管理する方法を説明します。

最近の検索には会話およびその返信を扱う機能があり、Post ペイロードは、言語に関係なく各 Post の文脈とトピックを把握するのに役立つ[Post annotations](/ja/x-api/fundamentals/post-annotations)を返します。

アプリのフローには、会話を表示・管理するためのコントロールが含まれます。

1. ユーザーの Post を読み取り、返信を管理する許可をユーザーに求めます。

2. Post の URL から最近の会話を取得し、その会話が認証中のユーザーのものであることを確認します。

3. 会話内の各 Post を表示するために最近の検索エンドポイントを呼び出します。リクエストには会話 ID の検索クエリとアノテーションの展開が含まれ、X による Post の解釈に基づいて、その Post がスポーツ関連かどうかを判定します。

4. ユーザーが選択したときに返信を非表示にするために hide replies を呼び出します。あわせてこの操作を取り消す方法も提供し、常にユーザーがコントロールできるようにします。

5. 長い会話の場合は、[検索結果をページネーション](/ja/x-api/posts/search/integrate/paginate)するためのコントロールを提供します。
    

<div id="optimize-for-the-user-and-for-usage">
  #### ユーザー（および利用）に最適化する
</div>

ユーザーが意図した操作を自分でコントロールできるようにフローを設計しましょう。この原則を念頭に置くことで、投稿の閲覧最適化にもつながる統合を構築できます。

1. 認証済みユーザーは自分が開始した会話しか管理できないため、該当しない場合はフローを早期に終了させます。
   - まず投稿のルックアップリクエストを行います。投稿の URL が不正、または会話が認証ユーザーによって開始されていない場合は、フローを早期終了します。
   - こうすることで、認証済みユーザーがモデレーションできない会話に対して、直近検索リクエストを発行せずに済みます。
2. 別々のリクエストを避けるため、同一リクエスト内で[ユーザーおよび投稿フィールド](/ja/x-api/fundamentals/fields)を要求します。この方法はアプリのパフォーマンス向上にも寄与します。
3. 不要なリクエストは避けましょう。このアプリは返信の非表示ステータスをユーザーのブラウザにキャッシュします。これは会話が大規模な場合に、ユーザーが後からモデレーションを再開しやすくするうえ、返信の非表示／再表示リクエストの最適化にも役立ちます。