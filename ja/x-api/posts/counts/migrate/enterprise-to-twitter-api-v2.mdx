---
title: v1 から v2（エンタープライズ）
sidebarTitle: v1 から v2（エンタープライズ）
---

<div id="enterprise-compared-to-x-api-v2">
  ### Enterprise と X API v2 の比較
</div>

**共通点**

- 粒度
- ページネーション
- タイムゾーン

**相違点**

- エンドポイント URL
- アプリおよびプロジェクトの要件
- 利用可能な期間
- レスポンスデータ形式
- HTTP メソッド
- リクエストの時刻形式
- リクエストパラメータ
- フィルタリング演算子

<div id="similarities">
  #### 類似点
</div>

**粒度**

返却データの粒度を選択するためのパラメータは異なります（エンタープライズ版は `bucket`、v2 版は `granularity`）。ただし、そのパラメータに指定できる値とデフォルト動作は同一です。

- `day`
- `hour`（デフォルト）
- `minute`

**ページネーション**

v2 には追加のページネーション機能（`since_id` と `until_id` による投稿 ID ベースのナビゲーションが可能な新パラメータ）がありますが、エンタープライズ版と v2 の双方で時間によるページネーションも可能です（エンタープライズ版は `fromDate` と `toDate`、v2 は `start_time` と `end_time`）。

エンタープライズ版を使用している場合は、ページネーションに `next` パラメータを使用します。次トークンのフィールド名は `next` で、レスポンスのルートに配置されます。

v2 を使用している場合は、ページネーションに `next_token` または `pagination_token` のいずれかを使用でき、次トークンはレスポンスの `meta.next_token` にあります。
 

**タイムゾーン**

ページネーションのセクションで述べたとおり、エンタープライズ版と v2 の双方で時間を使ってページを移動できます。いずれの場合も、これらのパラメータに用いるタイムゾーンは UTC です。

<div id="differences">
  #### 相違点
</div>

**エンドポイント URL**

- エンタープライズエンドポイント:
  - 30日 - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label/counts.json`
  - 全アーカイブ - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label/counts.json`
- X API v2 エンドポイント
  - 直近（7日）- `https://api.x.com/2/tweets/counts/recent`
  - 全アーカイブ - `https://api.x.com/2/tweets/counts/all`

**アプリとプロジェクトの要件**

X API v2 のエンドポイントでは、リクエストの認証時に [developer App](/ja/resources/fundamentals/developer-apps) の認証情報を使用し、その App が [Project](/ja/resources/fundamentals/developer-apps) に関連付けられている必要があります。X API v1.1 のすべてのエンドポイントは、スタンドアロンの App か、Project に関連付けられた App の認証情報を使用できます。
 

**利用可能な期間**

エンタープライズ API と X API v2 の両方は、全アーカイブの投稿に対する投稿ボリュームデータを取得できるエンドポイントを提供しています。

ただし、X API v2 にはエンタープライズ API にある「30日」期間のエンドポイントはありません。代わりに、前述の全アーカイブ、または [v2 Search Posts エンドポイント](/ja/x-api/posts/search/introduction)に合わせた「7日」期間を提供します。
 

**レスポンスデータ形式**

エンタープライズと X API v2 で受け取るデータ形式には、いくつかの軽微な違いがあります:

- エンタープライズの counts データは `results` オブジェクト内にありますが、v2 の counts データは `data` オブジェクト内にあります。
- エンタープライズの counts フィールドは `timePeriod`（開始時刻）と `count` ですが、v2 では期間を `start` と `end` フィールドに分割し（エンタープライズとは異なる日付／時刻形式を使用。リクエスト時刻形式で説明）、`count` フィールドは `tweet_count` に名称変更されています。
- エンタープライズのメタデータには、ルートレベルに `totalCount`、`next`、および `requestParameters` オブジェクトが含まれます。対して、v2 には `requestParameters` オブジェクトは含まれず、次の項目をルートレベルの `meta` オブジェクトに移動／改名します: `total_tweet_count` と `next_token`。
   

**HTTP メソッド**

エンタープライズ版の API では、JSON ボディを持つ POST メソッド、またはクエリ文字列を持つ GET メソッドのいずれかでリクエストを送信できます。

v2 では、クエリ文字列を持つ GET メソッドのみ使用できます。
 

**リクエスト時刻形式**

このエンドポイントのエンタープライズ版では、ページネーションパラメータと `timePeriod` レスポンスフィールドの両方で次の日時形式を使用します: `YYYYMMDDHHmm`

v2 エンドポイントでは、ページネーションパラメータと `start` および `end` レスポンスフィールドの両方で ISO 8601/RFC 3339 の日時形式を使用します: `YYYY-MM-DDTHH:mm:ssZ`

**リクエストパラメータ**

以下は、エンタープライズと X API v2 のリクエストパラメータの対応表です:

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| bucket | granularity |
| fromDate (YYMMDDHHmm) | start\_time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end\_time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since\_id |
|     | until\_id |
| next | next\_token and pagination\_token |

**フィルタリングオペレーター**

エンタープライズと X API v2 のオペレーターはほとんど同じですが、利用可能なオペレーターにいくつか違いがあり、X API v2 のみに導入された新しいオペレーターもあります。

X API v2、エンタープライズ、さらにはプレミアムで利用可能なオペレーターの完全な一覧表については、[Post counts 移行ランディングページ](/ja/x-api/posts/counts/migrate/overview)をご覧ください。

<div id="api-reference-index">
  ## API リファレンス目次
</div>

完全な API リファレンスは、以下のエンドポイントから選択してください。

<div id="recent-post-counts">
  ### 直近の投稿件数
</div>

|     |     |
| :--- | :--- |
| **過去7日間にクエリに一致する投稿件数を取得** | `[GET /2/tweets/counts/recent](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-recent)` |

<div id="full-archive-post-counts">
  ### 全アーカイブの投稿数
</div>

[Pro および Enterprise アクセス](/ja/x-api/getting-started/about-x-api)をお持ちの方のみ利用可能

|     |     |
| :--- | :--- |
| **クエリに一致する投稿数を取得** | `[GET /2/tweets/counts/all](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-all)` |