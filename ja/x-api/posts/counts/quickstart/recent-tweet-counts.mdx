---
title: 投稿を検索（最近）
sidebarTitle: 投稿を検索（最近）
---

import { Button } from '/snippets/ja/button.mdx';

<div id="getting-started-with-the-recent-post-counts-endpoint">
  ### 最近の投稿数エンドポイントのはじめ方
</div>

このクイックスタートガイドでは、HTTP リクエストを送信できるグラフィカルツールである Postman を使用して、最近の投稿数エンドポイントへの最初のリクエストを送る方法を説明します。

複数のプログラミング言語でのサンプルコードは、GitHub の [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) リポジトリをご覧ください。

<Note>
  ### 前提条件

  このガイドを完了するには、リクエストを認証するための [keys and tokens](/ja/resources/fundamentals/authentication) が必要です。以下の手順に従って、これらのキーとトークンを生成できます。

  - [開発者アカウントに登録](https://developer.x.com/en/apply-for-access) し、承認を受けてください。
  - デベロッパーポータルで [プロジェクト](/ja/resources/fundamentals/projects) と関連付けられた [開発者アプリ](/ja/resources/fundamentals/developer-apps) を作成します。
  - アプリの「Keys and tokens」ページに移動して必要なクレデンシャルを生成します。すべてのクレデンシャルは安全な場所に保管してください。
</Note>

<div id="steps-to-build-a-recent-post-counts-request">
  #### 最近の投稿数リクエストを作成する手順
</div>

**ステップ1：ツールまたはライブラリから始める**

このエンドポイントにリクエストを送る方法はいくつかあります（ツール、コード例、ライブラリなど）。ここでは手順を簡単にするため、Postman を使用します。

X API v2 の Postman コレクションを環境に読み込むには、次のボタンをクリックしてください。

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  X API v2 を Postman に追加
</Button>

Postman に X API v2 コレクションを読み込んだら、Post counts > Recent Post counts リクエストに移動します。

**ステップ2：リクエストを認証する**

X API に正しくリクエストするには、権限があることを確認する必要があります。このエンドポイントでは、[OAuth 2.0 App-Only](/ja/resources/fundamentals/authentication#app-only-authentication-and-oauth-2-0-bearer-token) の認証方式でリクエストを認証してください。

キーとトークン、特に [App Access Token](/ja/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token)（App-only Bearer Token とも呼ばれます）を Postman に追加する必要があります。追加するには、Postman 右上の “X API v2” 環境を選択し、環境ドロップダウン横の目のアイコンをクリックして表示される "initial value" と "current value" の各フィールドにキーとトークンを入力します。

正しく設定できていれば、この変数はリクエストの Authorization タブに自動的に反映されます。
 

**ステップ3：クエリを作成する**

各 Recent Post counts リクエストには 1 つの[query](/ja/x-api/posts/counts/integrate/build-a-query) が必要です。この例では、@XDevelopers アカウントによる投稿に一致するクエリを使用します。from: 演算子を使い、XDevelopers（大文字小文字は不問）を指定します。

`from:XDevelopers`

Postman で "Params" タブに移動し、このクエリ、またはカンマ区切りの投稿 ID の文字列を、`ids` パラメータの "Value" 列に入力します。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| `query` | from:XDevelopers | recent Post counts エンドポイントに送信するクエリ |

**ステップ4（オプション）：リクエストの粒度を指定する**

ステップ3の後に “Send” ボタンをクリックすると、直近 7 日間の時間別の既定の Recent Post counts が返されます。日別の Recent Post counts を取得したい場合は、granularity パラメータに day を指定して追加します。

Postman で "Params" タブに移動し、granularity パラメータの "Value" 列に day を入力します。

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Description** |
| granularity | day | Post counts の結果に対する粒度。指定可能な値は day、hour、minute です |

“Send” ボタンの横に次の URL が表示されるはずです。

`https://api.x.com/2/tweets/counts/recent?query=from%3AXDevelopers&granularity=day`

**ステップ5：リクエストを送信し、レスポンスを確認する**

すべての設定が完了したら、“Send” ボタンをクリックすると次のレスポンスが返されます。

```
{
   "data": [
       {
           "end": "2021-06-16T00:00:00.000Z",
           "start": "2021-06-15T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-17T00:00:00.000Z",
           "start": "2021-06-16T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-06-18T00:00:00.000Z",
           "start": "2021-06-17T00:00:00.000Z",
           "tweet_count": 2
       },
       {
           "end": "2021-06-19T00:00:00.000Z",
           "start": "2021-06-18T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-20T00:00:00.000Z",
           "start": "2021-06-19T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-21T00:00:00.000Z",
           "start": "2021-06-20T00:00:00.000Z",
           "tweet_count": 0
       },
       {
           "end": "2021-06-22T00:00:00.000Z",
           "start": "2021-06-21T00:00:00.000Z",
           "tweet_count": 1
       },
       {
           "end": "2021-06-23T00:00:00.000Z",
           "start": "2021-06-22T00:00:00.000Z",
           "tweet_count": 2
       }
   ],
   "meta": {
       "total_tweet_count": 6
   }
}
```