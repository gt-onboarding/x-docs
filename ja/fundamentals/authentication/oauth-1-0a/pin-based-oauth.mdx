---
title: PIN ベースの認可
sidebarTitle: PIN ベースの OAuth
---

import { Button } from "/snippets/ja/button.mdx";

<div id="pin-based-authorization">
  ### PIN ベースの認可
</div>

PIN ベースの OAuth フローは、[3-legged OAuth](/ja/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) プロセスの一種で、認可後にユーザーをリダイレクトするためのウェブブラウザーにアクセスしたり、ブラウザーを埋め込んだりできないアプリケーションを想定しています。例としては、コマンドラインアプリケーション、組み込みシステム、ゲームコンソール、特定の種類のモバイルアプリなどが挙げられます。

PIN ベースの OAuth フローは、`oauth_callback` を `oob` に設定した `request_token` を用いてアプリが開始します。`oob` は out-of-band OAuth を意味します。ユーザーは引き続き X にアクセスしてログインまたはアプリの認可を行いますが、アクセスを承認しても自動的にアプリケーションへリダイレクトされません。代わりに数値の PIN コードが表示され、アプリケーションに戻ってこの値を入力するよう指示されます。

<Note>
  **Note:** PIN ベースの認可を使用する場合でも、X アプリ設定内の `callback_url` は必須です。
</Note>

 

<div id="implementing-the-pin-based-oauth-flow">
  #### PIN ベースの OAuth フローの実装
</div>

PIN ベースのフローは、[3-legged authorization](/ja/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens)（および [Sign in with X](/ja/resources/fundamentals/authentication#log-in-with-x)）と同様に実装しますが、以下の点が異なります。

1. [POST oauth/request\_token](/ja/resources/fundamentals/authentication/api-reference#post-oauth-request-token) 呼び出し時、`oauth_callback` の値を `oob` に設定する必要があります。

2. ユーザーが [GET oauth/authenticate](/ja/resources/fundamentals/authentication/api-reference#get-oauth-authenticate) または [GET oauth/authorize](/ja/resources/fundamentals/authentication/api-reference#get-oauth-authorize) によってアプリを承認するために X に遷移した後は、`callback_url` にリダイレクトされません。代わりに、X によって生成された約 7 桁の PIN と、その PIN をアプリケーションに入力する手順が表示されます。

3. ユーザーがこの PIN をアプリケーションに入力すると、アプリケーションはこの PIN を `oauth_verifier` として [POST oauth/access\_token](/ja/resources/fundamentals/authentication/api-reference#post-oauth-access-token) に渡し、access\_token を取得します。

<Note>
  **Note:** PIN は再利用できません。取得した `access_token` はアプリケーションとユーザーのリクエストに使用してください。
</Note>