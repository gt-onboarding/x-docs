---
title: A/Bテスト
---

import { Button } from '/snippets/ja/button.mdx';

<div id="overview">
  ## 概要
</div>

<div id="introduction">
  ### はじめに
</div>

A/B テストは、広告主が X 上でリーチしているユーザーをセグメント化し、キャンペーンのパフォーマンスを最適化する最適な方法を見極め、マーケティング戦略の策定に役立つ示唆を得るための手法です。

これらのセグメント（ユーザーグループ分割）は無作為に割り当てられ、相互に排他的です。無作為化により、結果に影響する要因は均等に分散されます。つまり、グループ間や期待される行動に本質的な差はありません。したがって、特定のユーザーグループにのみ単一のバリエーションを適用した場合、キャンペーンパフォーマンスの差はそのバリエーションに起因すると判断できます。

同時に複数のバリエーションをテストすることも可能ですが、1 回につき 1 つのバリエーションのみをテストすることを強く推奨します。これにより、観測されたパフォーマンス差の因果要因を明確に切り分けられます。

バリエーションはキャンペーン単位で設定します。たとえば、新しいクリエイティブの有効性を検証したい場合は、唯一の違いがクリエイティブである同一のキャンペーンを 2 つ作成してください。今後は、ラインアイテム単位でのバリエーションにも対応する予定です。

<div id="use-cases">
  ### ユースケース
</div>

A/B テストは主に、(1) X で何が最適かを把握して投資効果を最大化したいパフォーマンス系の顧客向けの最適化ユースケース、(2) 得られた知見をマーケティング戦略に反映したいブランド広告主向けの学習ユースケースを支援するために使用されます。

この API は、以下を含むあらゆるキャンペーン変数に対する A/B テストをサポートします:

- クリエイティブ
- ターゲティング
- 入札タイプ
- 入札単位

<div id="ab-testing">
  ## A/B テスト
</div>

A/B テストは、広告主が X 上で到達しているユーザーをセグメント化し、キャンペーンのパフォーマンス最適化に最も有効な方法を把握し、マーケティング戦略の検討に役立つ示唆を得るための機能です。

これらのセグメント（ユーザーグループ分割）はランダムに割り当てられ、互いに排他的です。ランダム化により、結果に影響する要因は各グループに均等に分散されます。つまり、グループ間や想定される行動に本質的な差はありません。したがって、特定のバリエーションをあるユーザーグループにのみ適用し他のグループには適用しない場合、キャンペーンパフォーマンスの差はそのバリエーションに起因すると判断できます。

同時に複数のバリエーションをテストすることも可能ですが、1 回につき 1 つのバリエーションのみをテストすることを強く推奨します。これにより、観測されたパフォーマンス差の因果要因を切り分けられます。

バリエーションはキャンペーンレベルまたは広告グループレベルで設定します。広告グループの設定は Ads API の [line item](https://developer.x.com/en/docs/twitter-ads-api/campaign-management/api-reference/line-items) を通じて行います。広告グループレベルのバリエーション例として、新しいクリエイティブの有効性を検証したい場合は、クリエイティブ以外は同一の 2 つの広告グループを含む 1 つのキャンペーンを作成してください。

<div id="use-cases">
  ### ユースケース
</div>

A/B テストは主に、（1）投資の最適化を目的として、X 上で最も効果的な施策を把握したいパフォーマンス広告主の最適化ユースケース、（2）得られた示唆をマーケティング戦略に反映させたいブランド広告主の学習ユースケースを支援するために利用されます。

この API は、以下を含む任意のキャンペーン変数に対する A/B テストをサポートします。

- クリエイティブ
- ターゲティング
- 入札タイプ
- 入札単位

<div id="attributes">
  ### 属性
</div>

A/B テストは入れ子構造で表現されます。A/B テスト自体のトップレベルのフィールドに加え、各ユーザーグループを記述するフィールドを持つユーザーグループオブジェクトの配列があります。

概要として、すべての A/B テストには次の情報を含める必要があります。

- テスト期間（`start_time` と `end_time` フィールドで表現）

- 分割を行うレベル（`entity_type` フィールドで表現）

- 2 つ以上（最大 30）のユーザーグループ（各グループは `user_groups` 配列内のオブジェクトとして表現）

各ユーザーグループには、次の情報を必ず含める必要があります。

- 当該ユーザーグループに割り当てるユーザーの割合（`size` フィールドで表現）

- 当該ユーザーグループの対象ユーザープールを構成するキャンペーン ID／ラインアイテム ID（`entity_ids` 配列で表現）

任意で、A/B テストおよび各ユーザーグループに `name` と `description` を設定できます。検証ルールやその他の制約に関する情報は以下を参照してください。

ID や作成日時などのその他のメタデータも含まれますが、これらは X によって自動的に設定されます。

キャンペーンレベルの A/B テストエンティティの例を次に示します。

```json
{
  "created_at": "2020-12-01T00:00:00Z",
  "created_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  },
  "deleted": false,
  "description": "documentation example",
  "end_time": "2020-12-05T01:00:00Z",
  "entity_type": "CAMPAIGN",
  "id": "hr7l0",
  "name": "first AB test",
  "start_time": "2020-12-01T01:00:00Z",
  "status": "SCHEDULED",
  "user_groups": [
    {
      "id": "p1bcx",
      "name": "first group",
      "description": null,
      "size": "50.0",
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ]
    },
    {
      "id": "p1bcy",
      "name": "second group",
      "description": "second AB test group",
      "size": 50,
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ]
    }
  ],
  "updated_at": "2020-12-01T00:00:00Z",
  "updated_by": {
    "user_id": "756201191646691328",
    "username": "apimctestface"
  }
}
```

ラインアイテムレベルの A/B テストエンティティの例を次に示します。

```json
{
   "created_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "name":"Test2e",
   "start_time":"2022-08-15T00:00:00Z",
   "updated_by":{
      "user_id":"756201191646691328",
      "username":"apimctestface"
   },
   "description":"My Second AB test",
   "entity_type":"LINE_ITEM",
   "end_time":"2022-08-30T00:00:00Z",
   "id":"1ul",
   "user_groups":[
      {
         "name":"first group",
         "size":"50.0",
         "description":"first group description",
         "entity_ids":[
            "ij9dh"
         ],
         "id":"4xe"
      },
      {
         "name":"second group",
         "size":"50.0",
         "description":"second group description",
         "entity_ids":[
            "ihng8"
         ],
         "id":"4xf"
      }
   ],
   "status":"SCHEDULED",
   "created_at":"2022-08-11T00:10:50Z",
   "updated_at":"2022-08-11T00:10:50Z",
   "deleted":false
}
```

<div id="usage">
  ### 使用方法
</div>

以下の節では、A/B テストの作成と更新について説明します。読み取りと削除は、他のすべての X 広告 API エンドポイントと同様に同じ方法で行えます。

<div id="creating">
  #### 作成
</div>

[POST accounts/:account\_id/ab\_tests](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests) エンドポイントを使用して A/B テストを作成します。本エンドポイントは JSON の POST ボディのみを受け付けます。Content-Type は application/json に設定する必要があります。

広告主が 2 つ以上のキャンペーンを設定した後に、A/B テストを作成できます。前述のとおり、A/B テストにはテスト期間、分割レベル、少なくとも 2 つのユーザーグループを必ず含める必要があります。各ユーザーグループでは、割り当てるユーザーの割合と、そのプールを構成するキャンペーン ID を指定する必要があります。各項目の詳細は以下のとおりです。

テスト期間:

- start\_time と end\_time の値は

  - （A/B テストの作成時点に対して）将来であること

  - キャンペーン／ラインアイテムの配信期間と重複していること

- 非アプリ向けキャンペーンでは少なくとも 1 日、アプリ向けキャンペーンでは少なくとも 5 日、テストを実施する必要があります

分割レベル:

- entity\_type は CAMPAIGN または LINE\_ITEM に設定できます

ユーザーグループ:

- 各ユーザーグループは user\_groups 配列内のオブジェクトとして表現されます

  - 最低 2 つのユーザーグループが必要です

  - 最大 30 のユーザーグループまで許可されます

- 各ユーザーグループのサイズは、1.00 から 99.00 の数値を文字列で指定します

  - 注意: オブジェクト間のサイズ値の合計は必ず 100.00 になる必要があります

- 各ユーザーグループの entity\_ids 配列にキャンペーン ID を指定します

任意で、A/B テスト全体、または 1 つ以上のユーザーグループに対して name と description を設定できます。

次のリクエストは、キャンペーンレベルで 4 日間実施し、各グループにユーザーの 50% を割り当てる 2 つのユーザーグループを持つ A/B テストを作成します。最初のユーザーグループはキャンペーン f2qcw と f2tht に基づき、2 番目のユーザーグループはキャンペーン f2rqi と f2tws に基づきます。このリクエストでは、エンティティの一部に name と description も追加します。

twurl -X POST -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab\_tests" -d '\{"end\_time": "2020-12-05T01:00:00Z", "entity\_type" : "CAMPAIGN", "start\_time": "2020-12-01T01:00:00Z", "user\_groups": \[\{"entity\_ids": \["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},\{"entity\_ids": \["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'

```json
twurl -X POST -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests" -d '{"end_time": "2020-12-05T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2020-12-01T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'

{
  "request": {
    "params": {
      "account_id": "18ce54d4x5t",
      "end_time": "2020-12-05T01:00:00Z",
      "entity_type": "CAMPAIGN",
      "start_time": "2020-12-01T01:00:00Z",
      "user_groups": [
        {
          "entity_ids": [
            "f2qcw",
            "f2tht"
          ],
          "size": "50.0",
          "name": "first group"
        },
        {
          "entity_ids": [
            "f2rqi",
            "f2tws"
          ],
          "size": "50.0",
          "name": "second group",
          "description": "second AB test group"
        }
      ],
      "name": "first AB test",
      "description": "documentation example"
    }
  },
  "data": {
    "created_at": "2020-12-01T00:00:00Z",
    "created_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    },
    "deleted": false,
    "description": "documentation example",
    "end_time": "2020-12-05T01:00:00Z",
    "entity_type": "CAMPAIGN",
    "id": "hr7l0",
    "name": "first AB test",
    "start_time": "2020-12-01T01:00:00Z",
    "status": "SCHEDULED",
    "user_groups": [
      {
        "id": "p1bcx",
        "name": "first group",
        "description": null,
        "size": "50.0",
        "entity_ids": [
          "f2qcw",
          "f2tht"
        ]
      },
      {
        "id": "p1bcy",
        "name": "second group",
        "description": "second AB test group",
        "size": "50.0",
        "entity_ids": [
          "f2rqi",
          "f2tws"
        ]
      }
    ],
    "updated_at": "2020-12-01T00:00:00Z",
    "updated_by": {
      "user_id": "756201191646691328",
      "username": "apimctestface"
    }
  }
}
```

**ラインアイテムレベルでの A/B テスト**

キャンペーンレベルとラインアイテムレベルの A/B テストの主な違いは entity\_type です。ラインアイテムレベルの A/B テストでは entity\_type を LINE\_ITEM に設定する必要があります。これは、下記の既存の A/B テストに対するすべてのアクションに適用されます。

要件:

1. A/B テスト対象キャンペーンのすべてのラインアイテムをスプリットテストに含める必要があります。
2. ラインアイテムレベルでは等分割のみ許可されます。
3. 1 回のスプリットテストで許可されるユーザーグループ（ラインアイテム）の数は 5 以下でなければなりません。
4. 各ユーザーグループにつきラインアイテムは 1 つのみ。

<div id="updating">
  ### 更新
</div>

[PUT accounts/:account\_id/ab\_tests/:ab\_test\_id](https://developer.x.com/en/docs/x-ads-api/measurement/api-reference/ab-tests) エンドポイントを使用して A/B テストを更新します。リクエストには JSON データを送信する必要があります。Content-Type は application/json に設定してください。

他の更新エンドポイントと同様に、[PUT accounts/:account\_id/ab\_tests/:ab\_test\_id](/ja/x-ads-api/measurement/ab-testing#get-accounts-account-id-ab-tests) エンドポイントでは、URL に A/B テスト ID を含める必要があります。一般に、A/B テストはステータスが SCHEDULED の間のみ更新できます。例外が 1 つあり、ステータスが LIVE の間は end\_time の更新が可能です。

このエンドポイントは、オブジェクト ID を含む部分的な JSON をサポートします。以下の原則が適用されます。

- オブジェクトや要素を追加または削除する場合は、配列全体（およびそのサブ構造）を渡します。これは置換操作です

- それ以外の場合は、キー名または ID を参照して既存のフィールドを変更（追加・削除・更新）します

  - フィールドを削除するには、その値を null に設定します

  - 渡されなかったフィールドは変更されません

たとえば、既存の A/B テストに 3 つ目のユーザーグループを追加するには、既存の 2 つのユーザーグループオブジェクトに加え、追加したい新しいオブジェクトを含めた user\_groups 配列を送信する必要があります。これは user\_groups 配列を再作成するイメージです。最初からその方法で作成するかのようにデータを渡してください（ユーザーグループのオブジェクト ID は渡さないでください）。更新リクエスト内の user\_groups 配列は次のように表現できます。

```json
[
  {
    "entity_ids": [
      "f2qcw",
      "f2tht"
    ],
    "size": "30.0",
    "name": "first group"
  },
  {
    "entity_ids": [
      "f2rqi",
      "f2tws"
    ],
    "size": "30.0",
    "name": "second group",
    "description": "second AB test group"
  },
  {
    "entity_ids": [
      "i1vwr",
      "i1xre"
    ],
    "size": "40.0"
  }
]
```

各オブジェクトの size の合計が 100.00 になっていることに注意してください。もし最初の 2 つのオブジェクトの値（以前は各 50.00）を更新しなかった場合、リクエストは失敗します。

一方、最初のユーザーグループに説明だけを追加したい場合、更新リクエスト内の user\_groups 配列は次のように表現されます。

```json
[
  {
    "id": "p1bcx",
    "description": "updated using a PUT request"
  }
]
```

ユーザーグループオブジェクトは ID で参照し、変更したいフィールドのみを含めます。

<div id="request-examples">
  #### リクエスト例
</div>

このセクションでは、追加の更新リクエスト例を示します。これらは連続して呼び出されることを想定しています。JSON は可読性を高めるために整形されています。レスポンスは省略します。

次の変更を行うには、リクエストは以下のとおりです。（直前の例と同一です。）

1. 名前と説明のない第3のユーザーグループを追加する

2. 各ユーザーグループのユーザーの割合を変更する

twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab\_tests/hr7l0" -d '

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "30.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "f2rqi",
        "f2tws"
      ],
      "size": "30.00",
      "name": "second group",
      "description": "second AB test group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "40.00"
    }
  ]
}'
```

次の変更を行うには、リクエストは以下のとおりです。

1. A/B テストの説明を削除する

2. 最初のユーザーグループに説明を追加する

3. 2番目のユーザーグループにエンティティ ID（f2syz）を追加する

twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab\_tests/hr7l0" -d '

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "description": null,
  "user_groups": [
    {
      "id": "p1bcx",
      "description": "first AB test group"
    },
    {
      "id": "p1bcy",
      "entity_ids": [
        "f2rqi",
        "f2tws",
        "f2syz"
      ]
    }
  ]
}'
```

3つ目の変更では、新規のものに加えて既存の2つのエンティティ ID も同時に渡す必要があります。第3のユーザーグループには変更がない点に注意してください。

次の変更を行うには、リクエストは以下のとおりです。

1. 第2のユーザーグループを削除する

2. 各ユーザーグループのユーザーの割合を変更する

```json
twurl -X PUT -H ads-api.x.com "/8/accounts/18ce54d4x5t/ab_tests/hr7l0" -d '
{
  "user_groups": [
    {
      "entity_ids": [
        "f2qcw",
        "f2tht"
      ],
      "size": "55.00",
      "name": "first group"
    },
    {
      "entity_ids": [
        "i1vwr",
        "i1xre"
      ],
      "size": "45.00"
    }
  ]
}'
```

<div id="api-reference">
  ## API リファレンス
</div>

<div id="ab-tests">
  ### A/B テスト
</div>

[]()

<Button href="https://app.getpostman.com/run-collection/1d12b9fc623b8e149f87">
  Postman で実行
</Button>

#### GET accounts/:account\_id/ab\_tests

一部またはすべての A/B テストの詳細を取得します。

<div id="resource-url">
  ##### リソースURL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="parameters">
  ##### リクエスト例
</div>

`GET https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests`

<div id="example-request">
  ##### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t"
        }
      },
      "data": [
        {
          "created_at": "2022-05-25T00:00:00Z",
          "created_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          },
          "deleted": false,
          "description": "ドキュメント用サンプル",
          "end_time": "2022-05-30T01:00:00Z",
          "entities": [
            {
              "id": "p1bcx",
              "account_id": "18ce54d4x5t"
            },
            {
              "id": "p1bcy",
              "account_id": "18ce54d4x5t"
            }
          ],
          "entity_type": "CAMPAIGN",
          "id": "hr7l0",
          "name": "最初のABテスト",
          "start_time": "2022-05-25T01:00:00Z",
          "status": "SCHEDULED",
          "user_groups": [
            {
              "id": "p1bcx",
              "name": "第1グループ",
              "description": null,
              "size": "50.0",
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ]
            },
            {
              "id": "p1bcy",
              "name": "第2グループ",
              "description": "ABテスト第2グループ",
              "size": "50.0",
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ]
            }
          ],
          "updated_at": "2022-05-25T00:00:00Z",
          "updated_by": {
            "user_id": "756201191646691328",
            "username": "apimctestface"
          }
        }
      ],
      "next_cursor": null
    }
```

#### POST accounts/:account\_id/ab\_tests

新規の A/B テストを作成します。

すべてのパラメータはリクエストボディで送信し、`Content-Type` は `application/json` を指定する必要があります。

<div id="resource-url">
  ##### リソースURL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests`

<div id="resource-url">
  ##### パラメーター
</div>

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | 利用するアカウントの識別子。リソースのパスに含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで一般的に必須です。指定したアカウントは認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| end\_time  <br />_required_ | A/B テストが終了する時刻（ISO 8601 形式）。<br /><br />Type: string<br /><br />Example: `2020-10-02T00:00:00Z` |
| entity\_type  <br />_required_ | ユーザーグループ分割に使用するエンティティの種類。<br /><br />Type: enum<br /><br />Possible values: `CAMPAIGN`, `LINE_ITEM` |
| start\_time  <br />_required_ | A/B テストが開始する時刻（ISO 8601 形式）。<br /><br />Type: string<br /><br />Example: `2022-05-30T00:00:00Z` |
| user\_groups  <br />_required_ | ユーザーグループの定義。詳細は下表を参照。2〜30 のユーザーグループを指定できます。<br /><br />Type: array of objects |
| description  <br />_optional_ | A/B テストの説明。最大長：1,024 文字。<br /><br />Type: string<br /><br />Example: `documentation example` |
| name  <br />_optional_ | A/B テストの名前。最大長：255 文字。<br /><br />Type: string<br /><br />Example: `first AB test` |

#### ユーザーグループ

| Name | Description |
| :--- | :--- |
| entity\_ids  <br />_required_ | エンティティ ID の配列。<br /><br />**注**: エンティティは 1 つの A/B テストにのみ関連付けられます。<br /><br />Type: array<br /><br />Example: `["dxi0l", "e66bl"]` |
| size  <br />_required_ | このユーザーグループに割り当てるユーザーの割合。小数点以下 2 桁までの数値を文字列で表します。例: 40% は 40、40.0、または 40.00。<br /><br />**注**: 各 _object_ の size の合計は必ず 100.00 でなければなりません。<br /><br />Type: array<br /><br />Min, Max: `1.00`, `99.00` |
| description  <br />_optional_ | ユーザーグループの説明。最大長: 1,024 文字。<br /><br />Type: string<br /><br />Example: `second AB test group` |
| name  <br />_optional_ | ユーザーグループの名前。最大長: 255 文字。<br /><br />Type: string<br /><br />Example: `first group` |

### リクエスト例

`POST https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests -d '{"end_time": "2022-05-30T01:00:00Z", "entity_type" : "CAMPAIGN", "start_time": "2022-05-25T01:00:00Z", "user_groups": [{"entity_ids": ["f2qcw", "f2tht"], "size": "50.00", "name": "first group"},{"entity_ids": ["f2rqi", "f2tws"], "size": "50.00", "name": "second group", "description": "second AB test group"}], "name": "first AB test", "description": "documentation example"}'`

<div id="example-request">
  ### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "end_time": "2022-05-30T01:00:00Z",
          "entity_type": "CAMPAIGN",
          "start_time": "2022-05-25T01:00:00Z",
          "user_groups": [
            {
              "entity_ids": [
                "f2qcw",
                "f2tht"
              ],
              "size": "50.0",
              "name": "first group"
            },
            {
              "entity_ids": [
                "f2rqi",
                "f2tws"
              ],
              "size": "50.0",
              "name": "second group",
              "description": "second AB test group"
            }
          ],
          "name": "first AB test",
          "description": "documentation example"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": "documentation example",
        "end_time": "2022-05-30T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": null,
            "size": "50.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "50.0",
            "entity_ids": [
              "f2rqi",
              "f2tws"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:00:00Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

#### PUT accounts/:account\_id/ab\_tests/:ab\_test\_id

指定した A/B テストを更新します。

すべてのパラメータはリクエスト本文で送信し、`Content-Type` は `application/json` が必須です。

このエンドポイントは、オブジェクト ID を含む部分的な JSON をサポートします。以下の原則が適用されます。

- オブジェクトや要素を追加または削除する場合は、配列全体（およびその下位構造）を渡します。これは**置換**操作です
  - 配列を再作成するイメージです
- それ以外の場合は、キー名や ID を参照して既存のフィールドを変更（更新、追加、削除）します
  - フィールドを削除するには、その値を `null` に設定します
  - 渡されなかったフィールドは変更されません

一般に、A/B テストは `status` が `SCHEDULED` の間のみ更新できます。例外が 1 つあります。`LIVE` の間でも A/B テストの `end_time` を更新できます。

##### リソース URL

`https://ads-api.x.com/12/accounts/18ce54d4x5t/:ab_test_id`

<div id="resource-url">
  ##### パラメータ
</div>

| Name | Description |
| :--- | :--- |
| account\_id  <br />_required_ | 利用対象アカウントの識別子。リソースのパス内に含まれ、[GET accounts](/ja/x-ads-api/campaign-management#accounts) を除くすべての Advertiser API リクエストで一般に必須のパラメータです。指定したアカウントは認証済みユーザーに関連付けられている必要があります。<br /><br />Type: string<br /><br />Example: `18ce54d4x5t` |
| ab\_test\_id  <br />_required_ | リクエストで操作する A/B テストを参照します。<br /><br />Type: string<br /><br />Example: `hr7l0` |
| description  <br />_optional_ | A/B テストの説明。最大 1,024 文字。<br /><br />**Note**: A/B テストの `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `documentation example` |
| end\_time  <br />_optional_ | A/B テストの終了時刻。ISO 8601 で指定します。<br /><br />**Note**: A/B テストの `status` が `SCHEDULED` または `LIVE` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `2020-10-02T00:00:00Z` |
| name  <br />_optional_ | A/B テストの名前。最大 255 文字。<br /><br />**Note**: A/B テストの `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `first AB test` |
| start\_time  <br />_optional_ | A/B テストの開始時刻。ISO 8601 で指定します。<br /><br />**Note**: A/B テストの `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: string<br /><br />Example: `2022-05-30T00:00:00Z` |
| user\_groups  <br />_required_ | ユーザーグループを記述します。詳細は下表を参照してください。<br /><br />**Note**: A/B テストの `status` が `SCHEDULED` の間のみ更新できます。<br /><br />Type: array of objects |

#### ユーザーグループ

| Name | Description |
| :--- | :--- |
| id  <br />_場合によっては必須_ | リクエストで操作対象となるユーザーグループオブジェクトへの参照。<br /><br />**注**: ユーザーグループオブジェクトの\_フィールド\_を変更（変更・追加・削除）する場合は必須です。<br /><br />**注**: ユーザーグループオブジェクト全体を追加または削除する場合は ID を指定しないでください。<br /><br />Type: string<br /><br />Example: `p1bcx` |
| description  <br />_任意_ | ユーザーグループの説明。最大 1,024 文字。<br /><br />**注**: フィールドに `null` を指定すると未設定（削除）になります。<br /><br />Type: string<br /><br />Example: `second AB test group` |
| entity\_ids  <br />_任意_ | エンティティ ID の配列。<br /><br />**注**: これは置換操作です。以前に設定された内容は上書きされます。<br /><br />**注**: エンティティは 1 つの A/B テストにのみ関連付けできます。<br /><br />Type: array<br /><br />Example: `["dxi0l", "e66bl"]` |
| name  <br />_任意_ | ユーザーグループの名前。最大 255 文字。<br /><br />**注**: フィールドに `null` を指定すると未設定（削除）になります。<br /><br />Type: string<br /><br />Example: `first group` |
| size  <br />_任意_ | このユーザーグループに割り当てるユーザーの割合。数値は小数点以下最大 2 桁までの文字列で表します。例: 40% は 40、40.0、または 40.00。<br /><br />**注**: \_オブジェクト\_間の size の合計は必ず 100.00 になる必要があります。<br /><br />Type: string<br /><br />Min, Max: `1.00`, `99.00` |

<div id="parameters">
  ##### リクエスト例
</div>

このリクエストは以下の変更を行います。

1. A/B テストの説明を削除
2. 終了時刻を変更
3. 最初のユーザーグループに説明を追加
4. 各ユーザーグループのユーザー比率を変更
5. 2 番目のユーザーグループにエンティティ ID（`f2syz`）を追加

`PUT https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0 -d '{"description": null, "end_time": "2022-06-01T01:00:00Z", "user_groups": [{"id": "p1bcx", "description": "first AB test group", "size": "60.00"},{"id": "p1bcy", "size": "40.00", "entity_ids": ["f2rqi", "f2tws", "f2syz"]}]}'`

<div id="example-request">
  ##### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0",
          "description": null,
          "end_time": "2022-06-01T01:00:00Z",
          "user_groups": [
            {
              "id": "p1bcx",
              "description": "first AB test group",
              "size": "60.0"
            },
            {
              "id": "p1bcy",
              "size": "40.0",
              "entity_ids": [
                "f2rqi",
                "f2tws",
                "f2syz"
              ]
            }
          ]
        }
      },
      "data": {
        "created_at": "2020-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": false,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": "first AB test group",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-05-25T00:17:23Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```

#### DELETE accounts/:account\_id/ab\_tests/:ab\_test\_id

指定した A/B テストを削除します。

注: A/B テストの削除は取り消せません。以後、このリソースを削除しようとすると HTTP 404 が返されます。

<div id="resource-url">
  ##### リソースURL
</div>

`https://ads-api.x.com/12/accounts/:account_id/ab_tests/:ab_test_id`

<div id="resource-url">
  ##### パラメータ
</div>

| Name | Description |
| :--- | :--- |
| ab\_test\_id  <br />_必須_ | リクエストで対象とする A/B テストを参照する ID。<br /><br />Type: string<br /><br />Example: `hr7l0` |

<div id="parameters">
  ##### リクエスト例
</div>

`DELETE https://ads-api.x.com/12/accounts/18ce54d4x5t/ab_tests/hr7l0`
\---MDX\_CONTENTEND---

<div id="example-request">
  ### レスポンス例
</div>

```json
    {
      "request": {
        "params": {
          "account_id": "18ce54d4x5t",
          "ab_test_id": "hr7l0"
        }
      },
      "data": {
        "created_at": "2022-05-25T00:00:00Z",
        "created_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        },
        "deleted": true,
        "description": null,
        "end_time": "2022-06-01T01:00:00Z",
        "entities": [
          {
            "id": "p1bcx",
            "account_id": "18ce54d4x5t"
          },
          {
            "id": "p1bcy",
            "account_id": "18ce54d4x5t"
          }
        ],
        "entity_type": "CAMPAIGN",
        "id": "hr7l0",
        "name": "first AB test",
        "start_time": "2022-05-25T01:00:00Z",
        "status": "SCHEDULED",
        "user_groups": [
          {
            "id": "p1bcx",
            "name": "first group",
            "description": "first AB test group",
            "size": "60.0",
            "entity_ids": [
              "f2qcw",
              "f2tht"
            ]
          },
          {
            "id": "p1bcy",
            "name": "second group",
            "description": "second AB test group",
            "size": "40.0",
            "entity_ids": [
              "f2rqi",
              "f2tws",
              "f2syz"
            ]
          }
        ],
        "updated_at": "2022-06-02T00:18:31Z",
        "updated_by": {
          "user_id": "756201191646691328",
          "username": "apimctestface"
        }
      }
    }
```